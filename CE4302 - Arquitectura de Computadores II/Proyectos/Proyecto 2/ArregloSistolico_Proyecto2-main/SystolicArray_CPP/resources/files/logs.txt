
=== Starting processBlock() ===

INPUT DATA:
 -29  -25  -25  -27 
 -28  -22  -20  -15 
  -2    9   15   26 
  13   29   41   51 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -29
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=0 -> result=58
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       58       29        0      -29 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  29 │   0 │ -29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -25
  Row 1: input_block[1][0] = -28
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=0 -> result=50
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       50       25        0      -25 
  Row 1:       28      -28      -28      -56 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  25 │   0 │ -25 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -25
  Row 1: input_block[1][1] = -22
  Row 2: input_block[2][0] = -2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=28 -> result=78
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=-28 -> result=-3
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=-56 -> result=-81
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       78       -3      -28      -81 
  Row 1:       22      -22      -22      -44 
  Row 2:        0       -2       -4       -2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  -3 │ -28 │ -81 │
├─────┼─────┼─────┼─────┤
│  22 │ -22 │ -22 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = -20
  Row 2: input_block[2][1] = 9
  Row 3: input_block[3][0] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=22 -> result=76
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=-22 -> result=5
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=-44 -> result=-71
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=-2 -> result=-22
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=-4 -> result=-24
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=-2 -> result=-42
  PE[2][0]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[2][2]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       76        5      -22      -71 
  Row 1:       20      -22      -24      -42 
  Row 2:        0        9       18        9 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  76 │   5 │ -22 │ -71 │
├─────┼─────┼─────┼─────┤
│  20 │ -22 │ -24 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   9 │  18 │   9 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -15
  Row 2: input_block[2][2] = 15
  Row 3: input_block[3][1] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -24 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 18 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 13 (from PE[3][0])
  PE[2][1]: partial_in = 26 (from PE[3][1])
  PE[2][2]: partial_in = 13 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=9 -> result=-6
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=18 -> result=3
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=9 -> result=-21
  PE[2][0]: input=15 * weight=0 = 0, partial_in=13 -> result=13
  PE[2][1]: input=15 * weight=1 = 15, partial_in=26 -> result=41
  PE[2][2]: input=15 * weight=2 = 30, partial_in=13 -> result=43
  PE[2][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       20      -22      -24      -42 
  Row 1:       15       -6        3      -21 
  Row 2:       13       41       43       15 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -22 │ -24 │ -42 │
├─────┼─────┼─────┼─────┤
│  15 │  -6 │   3 │ -21 │
├─────┼─────┼─────┼─────┤
│  13 │  41 │  43 │  15 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 26
  Row 3: input_block[3][2] = 41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = -6 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = -21 (from PE[1][3])
  PE[1][0]: partial_in = 13 (from PE[2][0])
  PE[1][1]: partial_in = 41 (from PE[2][1])
  PE[1][2]: partial_in = 43 (from PE[2][2])
  PE[1][3]: partial_in = 15 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=13 -> result=13
  PE[1][1]: input=0 * weight=1 = 0, partial_in=41 -> result=41
  PE[1][2]: input=0 * weight=1 = 0, partial_in=43 -> result=43
  PE[1][3]: input=0 * weight=2 = 0, partial_in=15 -> result=15
  PE[2][0]: input=26 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=26 * weight=1 = 26, partial_in=58 -> result=84
  PE[2][2]: input=26 * weight=2 = 52, partial_in=29 -> result=81
  PE[2][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][0]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][1]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[3][2]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][3]: input=41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       15       -6        3      -21 
  Row 1:       13       41       43       15 
  Row 2:       29       84       81       26 
  Row 3:       41       82       41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │  -6 │   3 │ -21 │
├─────┼─────┼─────┼─────┤
│  13 │  41 │  43 │  15 │
├─────┼─────┼─────┼─────┤
│  29 │  84 │  81 │  26 │
├─────┼─────┼─────┼─────┤
│  41 │  82 │  41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 13 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 43 (from PE[1][2])
  PE[0][3]: partial_in = 15 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 84 (from PE[2][1])
  PE[1][2]: partial_in = 81 (from PE[2][2])
  PE[1][3]: partial_in = 26 (from PE[2][3])
  PE[2][0]: partial_in = 41 (from PE[3][0])
  PE[2][1]: partial_in = 82 (from PE[3][1])
  PE[2][2]: partial_in = 41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=13 -> result=13
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=41 -> result=41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=43 -> result=43
  PE[0][3]: input=0 * weight=1 = 0, partial_in=15 -> result=15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=84 -> result=84
  PE[1][2]: input=0 * weight=1 = 0, partial_in=81 -> result=81
  PE[1][3]: input=0 * weight=2 = 0, partial_in=26 -> result=26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=41 -> result=41
  PE[2][1]: input=0 * weight=1 = 0, partial_in=82 -> result=82
  PE[2][2]: input=0 * weight=2 = 0, partial_in=41 -> result=41
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][1]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[3][2]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][3]: input=51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       13       41       43       15 
  Row 1:       29       84       81       26 
  Row 2:       41       82       41        0 
  Row 3:       51      102       51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  13 │  41 │  43 │  15 │
├─────┼─────┼─────┼─────┤
│  29 │  84 │  81 │  26 │
├─────┼─────┼─────┼─────┤
│  41 │  82 │  41 │   0 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       13       41       43       15 
Row 1:       29       84       81       26 
Row 2:       41       82       41        0 
Row 3:       51      102       51        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 13 -> clamp(13) -> final(141)
  PE[0][1]: 41 -> clamp(41) -> final(169)
  PE[0][2]: 43 -> clamp(43) -> final(171)
  PE[0][3]: 15 -> clamp(15) -> final(143)
  PE[1][0]: 29 -> clamp(29) -> final(157)
  PE[1][1]: 84 -> clamp(84) -> final(212)
  PE[1][2]: 81 -> clamp(81) -> final(209)
  PE[1][3]: 26 -> clamp(26) -> final(154)
  PE[2][0]: 41 -> clamp(41) -> final(169)
  PE[2][1]: 82 -> clamp(82) -> final(210)
  PE[2][2]: 41 -> clamp(41) -> final(169)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 51 -> clamp(51) -> final(179)
  PE[3][1]: 102 -> clamp(102) -> final(230)
  PE[3][2]: 51 -> clamp(51) -> final(179)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   141    169    171    143 
   157    212    209    154 
   169    210    169    128 
   179    230    179    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -25  -20  -18  -18 
 -14  -28  -39  -34 
  22  -18  -43  -27 
  36  -20  -47  -18 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -25
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=0 -> result=50
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       50       25        0      -25 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  25 │   0 │ -25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -20
  Row 1: input_block[1][0] = -14
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=0 -> result=40
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][0]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[1][1]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][3]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       40       20        0      -20 
  Row 1:       14      -14      -14      -28 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  20 │   0 │ -20 │
├─────┼─────┼─────┼─────┤
│  14 │ -14 │ -14 │ -28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -18
  Row 1: input_block[1][1] = -28
  Row 2: input_block[2][0] = 22
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 14 (from PE[1][0])
  PE[0][1]: partial_in = -14 (from PE[1][1])
  PE[0][2]: partial_in = -14 (from PE[1][2])
  PE[0][3]: partial_in = -28 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=14 -> result=50
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=-14 -> result=4
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=-14 -> result=-14
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=-28 -> result=-46
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[2][2]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       50        4      -14      -46 
  Row 1:       28      -28      -28      -56 
  Row 2:        0       22       44       22 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │   4 │ -14 │ -46 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │  22 │  44 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -18
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = -18
  Row 3: input_block[3][0] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = 44 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=28 -> result=64
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=-28 -> result=-10
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=-56 -> result=-74
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=22 -> result=-17
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=44 -> result=5
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=22 -> result=-56
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       64      -10      -28      -74 
  Row 1:       39      -17        5      -56 
  Row 2:        0      -18      -36      -18 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  64 │ -10 │ -28 │ -74 │
├─────┼─────┼─────┼─────┤
│  39 │ -17 │   5 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │ -18 │ -36 │ -18 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -34
  Row 2: input_block[2][2] = -43
  Row 3: input_block[3][1] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -17 (from PE[1][1])
  PE[0][2]: partial_in = 5 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = -36 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[0][2]: input=0 * weight=0 = 0, partial_in=5 -> result=5
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=-18 -> result=-52
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=-36 -> result=-70
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=-18 -> result=-86
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=72 -> result=29
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=36 -> result=-50
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39      -17        5      -56 
  Row 1:       34      -52      -70      -86 
  Row 2:       36       29      -50      -43 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -17 │   5 │ -56 │
├─────┼─────┼─────┼─────┤
│  34 │ -52 │ -70 │ -86 │
├─────┼─────┼─────┼─────┤
│  36 │  29 │ -50 │ -43 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -27
  Row 3: input_block[3][2] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -70 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 36 (from PE[2][0])
  PE[1][1]: partial_in = 29 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=34 -> result=34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-86 -> result=-86
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=29 -> result=29
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-43 -> result=-43
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=-40 -> result=-67
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=-20 -> result=-74
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       34      -52      -70      -86 
  Row 1:       36       29      -50      -43 
  Row 2:      -20      -67      -74      -27 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │ -52 │ -70 │ -86 │
├─────┼─────┼─────┼─────┤
│  36 │  29 │ -50 │ -43 │
├─────┼─────┼─────┼─────┤
│ -20 │ -67 │ -74 │ -27 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = 29 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = -43 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = -47 (from PE[3][0])
  PE[2][1]: partial_in = -94 (from PE[3][1])
  PE[2][2]: partial_in = -47 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-43 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-47 -> result=-47
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][1]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[3][2]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][3]: input=-18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       36       29      -50      -43 
  Row 1:      -20      -67      -74      -27 
  Row 2:      -47      -94      -47        0 
  Row 3:      -18      -36      -18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │  29 │ -50 │ -43 │
├─────┼─────┼─────┼─────┤
│ -20 │ -67 │ -74 │ -27 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
├─────┼─────┼─────┼─────┤
│ -18 │ -36 │ -18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       36       29      -50      -43 
Row 1:      -20      -67      -74      -27 
Row 2:      -47      -94      -47        0 
Row 3:      -18      -36      -18        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 36 -> clamp(36) -> final(164)
  PE[0][1]: 29 -> clamp(29) -> final(157)
  PE[0][2]: -50 -> clamp(-50) -> final(78)
  PE[0][3]: -43 -> clamp(-43) -> final(85)
  PE[1][0]: -20 -> clamp(-20) -> final(108)
  PE[1][1]: -67 -> clamp(-67) -> final(61)
  PE[1][2]: -74 -> clamp(-74) -> final(54)
  PE[1][3]: -27 -> clamp(-27) -> final(101)
  PE[2][0]: -47 -> clamp(-47) -> final(81)
  PE[2][1]: -94 -> clamp(-94) -> final(34)
  PE[2][2]: -47 -> clamp(-47) -> final(81)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -18 -> clamp(-18) -> final(110)
  PE[3][1]: -36 -> clamp(-36) -> final(92)
  PE[3][2]: -18 -> clamp(-18) -> final(110)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   164    157     78     85 
   108     61     54    101 
    81     34     81    128 
   110     92    110    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -24    4   21  -21 
 -39  -29    3   30 
 -38  -42  -52  -25 
 -11  -16  -41  -77 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -24
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=0 -> result=48
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       48       24        0      -24 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │  24 │   0 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 4
  Row 1: input_block[1][0] = -39
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=0 -> result=-8
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[0][2]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       -8       -4        0        4 
  Row 1:       39      -39      -39      -78 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  -4 │   0 │   4 │
├─────┼─────┼─────┼─────┤
│  39 │ -39 │ -39 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 21
  Row 1: input_block[1][1] = -29
  Row 2: input_block[2][0] = -38
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -39 (from PE[1][2])
  PE[0][3]: partial_in = -78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=21 * weight=-2 = -42, partial_in=39 -> result=-3
  PE[0][1]: input=21 * weight=-1 = -21, partial_in=-39 -> result=-60
  PE[0][2]: input=21 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[0][3]: input=21 * weight=1 = 21, partial_in=-78 -> result=-57
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -3      -60      -39      -57 
  Row 1:       29      -29      -29      -58 
  Row 2:        0      -38      -76      -38 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -60 │ -39 │ -57 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │ -38 │ -76 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -21
  Row 1: input_block[1][2] = 3
  Row 2: input_block[2][1] = -42
  Row 3: input_block[3][0] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -38 (from PE[2][1])
  PE[1][2]: partial_in = -76 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=29 -> result=71
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=-29 -> result=-8
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=-58 -> result=-79
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-38 -> result=-35
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-76 -> result=-73
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-38 -> result=-32
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       71       -8      -29      -79 
  Row 1:       -3      -35      -73      -32 
  Row 2:        0      -42      -84      -42 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  71 │  -8 │ -29 │ -79 │
├─────┼─────┼─────┼─────┤
│  -3 │ -35 │ -73 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │ -42 │ -84 │ -42 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 30
  Row 2: input_block[2][2] = -52
  Row 3: input_block[3][1] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -73 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -42 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-73 -> result=-73
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=30 * weight=-1 = -30, partial_in=0 -> result=-30
  PE[1][1]: input=30 * weight=1 = 30, partial_in=-42 -> result=-12
  PE[1][2]: input=30 * weight=1 = 30, partial_in=-84 -> result=-54
  PE[1][3]: input=30 * weight=2 = 60, partial_in=-42 -> result=18
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-22 -> result=-74
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-11 -> result=-115
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -3      -35      -73      -32 
  Row 1:      -30      -12      -54       18 
  Row 2:      -11      -74     -115      -52 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -35 │ -73 │ -32 │
├─────┼─────┼─────┼─────┤
│ -30 │ -12 │ -54 │  18 │
├─────┼─────┼─────┼─────┤
│ -11 │ -74 │-115 │ -52 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -25
  Row 3: input_block[3][2] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -30 (from PE[1][0])
  PE[0][1]: partial_in = -12 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = -74 (from PE[2][1])
  PE[1][2]: partial_in = -115 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-30 -> result=-30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-12 -> result=-12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-115 -> result=-115
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=-32 -> result=-57
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=-16 -> result=-66
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -30      -12      -54       18 
  Row 1:      -11      -74     -115      -52 
  Row 2:      -16      -57      -66      -25 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -30 │ -12 │ -54 │  18 │
├─────┼─────┼─────┼─────┤
│ -11 │ -74 │-115 │ -52 │
├─────┼─────┼─────┼─────┤
│ -16 │ -57 │ -66 │ -25 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -77

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -115 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = -16 (from PE[2][0])
  PE[1][1]: partial_in = -57 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = -41 (from PE[3][0])
  PE[2][1]: partial_in = -82 (from PE[3][1])
  PE[2][2]: partial_in = -41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-74 -> result=-74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-115 -> result=-115
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-25 -> result=-25
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-41 -> result=-41
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-82 -> result=-82
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-41 -> result=-41
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[3][1]: input=-77 * weight=2 = -154, partial_in=0 -> result=-154
  PE[3][2]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[3][3]: input=-77 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -11      -74     -115      -52 
  Row 1:      -16      -57      -66      -25 
  Row 2:      -41      -82      -41        0 
  Row 3:      -77     -154      -77        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -74 │-115 │ -52 │
├─────┼─────┼─────┼─────┤
│ -16 │ -57 │ -66 │ -25 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
├─────┼─────┼─────┼─────┤
│ -77 │-154 │ -77 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -11      -74     -115      -52 
Row 1:      -16      -57      -66      -25 
Row 2:      -41      -82      -41        0 
Row 3:      -77     -154      -77        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -11 -> clamp(-11) -> final(117)
  PE[0][1]: -74 -> clamp(-74) -> final(54)
  PE[0][2]: -115 -> clamp(-115) -> final(13)
  PE[0][3]: -52 -> clamp(-52) -> final(76)
  PE[1][0]: -16 -> clamp(-16) -> final(112)
  PE[1][1]: -57 -> clamp(-57) -> final(71)
  PE[1][2]: -66 -> clamp(-66) -> final(62)
  PE[1][3]: -25 -> clamp(-25) -> final(103)
  PE[2][0]: -41 -> clamp(-41) -> final(87)
  PE[2][1]: -82 -> clamp(-82) -> final(46)
  PE[2][2]: -41 -> clamp(-41) -> final(87)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -77 -> clamp(-77) -> final(51)
  PE[3][1]: -154 -> clamp(-128) -> final(0)
  PE[3][2]: -77 -> clamp(-77) -> final(51)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   117     54     13     76 
   112     71     62    103 
    87     46     87    128 
    51      0     51    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -21   17   31   70 
  -8    2   63   36 
 -19  -17    8  -15 
 -41  -15  -49  -34 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -21
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=0 -> result=42
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       42       21        0      -21 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │  21 │   0 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 17
  Row 1: input_block[1][0] = -8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -34      -17        0       17 
  Row 1:        8       -8       -8      -16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 31
  Row 1: input_block[1][1] = 2
  Row 2: input_block[2][0] = -19
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=31 * weight=-2 = -62, partial_in=8 -> result=-54
  PE[0][1]: input=31 * weight=-1 = -31, partial_in=-8 -> result=-39
  PE[0][2]: input=31 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=31 * weight=1 = 31, partial_in=-16 -> result=15
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[1][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[1][3]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][0]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[2][2]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -54      -39       -8       15 
  Row 1:       -2        2        2        4 
  Row 2:        0      -19      -38      -19 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -54 │ -39 │  -8 │  15 │
├─────┼─────┼─────┼─────┤
│  -2 │   2 │   2 │   4 │
├─────┼─────┼─────┼─────┤
│   0 │ -19 │ -38 │ -19 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 70
  Row 1: input_block[1][2] = 63
  Row 2: input_block[2][1] = -17
  Row 3: input_block[3][0] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 2 (from PE[1][1])
  PE[0][2]: partial_in = 2 (from PE[1][2])
  PE[0][3]: partial_in = 4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -19 (from PE[2][1])
  PE[1][2]: partial_in = -38 (from PE[2][2])
  PE[1][3]: partial_in = -19 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=70 * weight=-2 = -140, partial_in=-2 -> result=-142
  PE[0][1]: input=70 * weight=-1 = -70, partial_in=2 -> result=-68
  PE[0][2]: input=70 * weight=0 = 0, partial_in=2 -> result=2
  PE[0][3]: input=70 * weight=1 = 70, partial_in=4 -> result=74
  PE[1][0]: input=63 * weight=-1 = -63, partial_in=0 -> result=-63
  PE[1][1]: input=63 * weight=1 = 63, partial_in=-19 -> result=44
  PE[1][2]: input=63 * weight=1 = 63, partial_in=-38 -> result=25
  PE[1][3]: input=63 * weight=2 = 126, partial_in=-19 -> result=107
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -142      -68        2       74 
  Row 1:      -63       44       25      107 
  Row 2:        0      -17      -34      -17 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-142 │ -68 │   2 │  74 │
├─────┼─────┼─────┼─────┤
│ -63 │  44 │  25 │ 107 │
├─────┼─────┼─────┼─────┤
│   0 │ -17 │ -34 │ -17 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 36
  Row 2: input_block[2][2] = 8
  Row 3: input_block[3][1] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -63 (from PE[1][0])
  PE[0][1]: partial_in = 44 (from PE[1][1])
  PE[0][2]: partial_in = 25 (from PE[1][2])
  PE[0][3]: partial_in = 107 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -34 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = -41 (from PE[3][0])
  PE[2][1]: partial_in = -82 (from PE[3][1])
  PE[2][2]: partial_in = -41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-63 -> result=-63
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=44 -> result=44
  PE[0][2]: input=0 * weight=0 = 0, partial_in=25 -> result=25
  PE[0][3]: input=0 * weight=1 = 0, partial_in=107 -> result=107
  PE[1][0]: input=36 * weight=-1 = -36, partial_in=0 -> result=-36
  PE[1][1]: input=36 * weight=1 = 36, partial_in=-17 -> result=19
  PE[1][2]: input=36 * weight=1 = 36, partial_in=-34 -> result=2
  PE[1][3]: input=36 * weight=2 = 72, partial_in=-17 -> result=55
  PE[2][0]: input=8 * weight=0 = 0, partial_in=-41 -> result=-41
  PE[2][1]: input=8 * weight=1 = 8, partial_in=-82 -> result=-74
  PE[2][2]: input=8 * weight=2 = 16, partial_in=-41 -> result=-25
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -63       44       25      107 
  Row 1:      -36       19        2       55 
  Row 2:      -41      -74      -25        8 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -63 │  44 │  25 │ 107 │
├─────┼─────┼─────┼─────┤
│ -36 │  19 │   2 │  55 │
├─────┼─────┼─────┼─────┤
│ -41 │ -74 │ -25 │   8 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -15
  Row 3: input_block[3][2] = -49

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = 19 (from PE[1][1])
  PE[0][2]: partial_in = 2 (from PE[1][2])
  PE[0][3]: partial_in = 55 (from PE[1][3])
  PE[1][0]: partial_in = -41 (from PE[2][0])
  PE[1][1]: partial_in = -74 (from PE[2][1])
  PE[1][2]: partial_in = -25 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = -15 (from PE[3][0])
  PE[2][1]: partial_in = -30 (from PE[3][1])
  PE[2][2]: partial_in = -15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=19 -> result=19
  PE[0][2]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[0][3]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-41 -> result=-41
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-25 -> result=-25
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=-30 -> result=-45
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=-15 -> result=-45
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][1]: input=-49 * weight=2 = -98, partial_in=0 -> result=-98
  PE[3][2]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][3]: input=-49 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -36       19        2       55 
  Row 1:      -41      -74      -25        8 
  Row 2:      -15      -45      -45      -15 
  Row 3:      -49      -98      -49        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │  19 │   2 │  55 │
├─────┼─────┼─────┼─────┤
│ -41 │ -74 │ -25 │   8 │
├─────┼─────┼─────┼─────┤
│ -15 │ -45 │ -45 │ -15 │
├─────┼─────┼─────┼─────┤
│ -49 │ -98 │ -49 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -41 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = -15 (from PE[2][0])
  PE[1][1]: partial_in = -45 (from PE[2][1])
  PE[1][2]: partial_in = -45 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = -49 (from PE[3][0])
  PE[2][1]: partial_in = -98 (from PE[3][1])
  PE[2][2]: partial_in = -49 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-41 -> result=-41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-74 -> result=-74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-45 -> result=-45
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-45 -> result=-45
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-15 -> result=-15
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-49 -> result=-49
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -41      -74      -25        8 
  Row 1:      -15      -45      -45      -15 
  Row 2:      -49      -98      -49        0 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -41 │ -74 │ -25 │   8 │
├─────┼─────┼─────┼─────┤
│ -15 │ -45 │ -45 │ -15 │
├─────┼─────┼─────┼─────┤
│ -49 │ -98 │ -49 │   0 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -41      -74      -25        8 
Row 1:      -15      -45      -45      -15 
Row 2:      -49      -98      -49        0 
Row 3:      -34      -68      -34        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -41 -> clamp(-41) -> final(87)
  PE[0][1]: -74 -> clamp(-74) -> final(54)
  PE[0][2]: -25 -> clamp(-25) -> final(103)
  PE[0][3]: 8 -> clamp(8) -> final(136)
  PE[1][0]: -15 -> clamp(-15) -> final(113)
  PE[1][1]: -45 -> clamp(-45) -> final(83)
  PE[1][2]: -45 -> clamp(-45) -> final(83)
  PE[1][3]: -15 -> clamp(-15) -> final(113)
  PE[2][0]: -49 -> clamp(-49) -> final(79)
  PE[2][1]: -98 -> clamp(-98) -> final(30)
  PE[2][2]: -49 -> clamp(-49) -> final(79)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -34 -> clamp(-34) -> final(94)
  PE[3][1]: -68 -> clamp(-68) -> final(60)
  PE[3][2]: -34 -> clamp(-34) -> final(94)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    87     54    103    136 
   113     83     83    113 
    79     30     79    128 
    94     60     94    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  62   70   44   15 
  48   45   28   17 
 -28  -25  -26  -22 
 -41  -34  -37  -44 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 62
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=62 * weight=-2 = -124, partial_in=0 -> result=-124
  PE[0][1]: input=62 * weight=-1 = -62, partial_in=0 -> result=-62
  PE[0][2]: input=62 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:     -124      -62        0       62 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-124 │ -62 │   0 │  62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 70
  Row 1: input_block[1][0] = 48
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=70 * weight=-2 = -140, partial_in=0 -> result=-140
  PE[0][1]: input=70 * weight=-1 = -70, partial_in=0 -> result=-70
  PE[0][2]: input=70 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[1][0]: input=48 * weight=-1 = -48, partial_in=0 -> result=-48
  PE[1][1]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][2]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][3]: input=48 * weight=2 = 96, partial_in=0 -> result=96
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -140      -70        0       70 
  Row 1:      -48       48       48       96 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-140 │ -70 │   0 │  70 │
├─────┼─────┼─────┼─────┤
│ -48 │  48 │  48 │  96 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 44
  Row 1: input_block[1][1] = 45
  Row 2: input_block[2][0] = -28
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -48 (from PE[1][0])
  PE[0][1]: partial_in = 48 (from PE[1][1])
  PE[0][2]: partial_in = 48 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=44 * weight=-2 = -88, partial_in=-48 -> result=-136
  PE[0][1]: input=44 * weight=-1 = -44, partial_in=48 -> result=4
  PE[0][2]: input=44 * weight=0 = 0, partial_in=48 -> result=48
  PE[0][3]: input=44 * weight=1 = 44, partial_in=96 -> result=140
  PE[1][0]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[1][1]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][2]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][3]: input=45 * weight=2 = 90, partial_in=0 -> result=90
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -136        4       48      140 
  Row 1:      -45       45       45       90 
  Row 2:        0      -28      -56      -28 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-136 │   4 │  48 │ 140 │
├─────┼─────┼─────┼─────┤
│ -45 │  45 │  45 │  90 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 15
  Row 1: input_block[1][2] = 28
  Row 2: input_block[2][1] = -25
  Row 3: input_block[3][0] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = 45 (from PE[1][1])
  PE[0][2]: partial_in = 45 (from PE[1][2])
  PE[0][3]: partial_in = 90 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=-45 -> result=-75
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=45 -> result=30
  PE[0][2]: input=15 * weight=0 = 0, partial_in=45 -> result=45
  PE[0][3]: input=15 * weight=1 = 15, partial_in=90 -> result=105
  PE[1][0]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[1][1]: input=28 * weight=1 = 28, partial_in=-28 -> result=0
  PE[1][2]: input=28 * weight=1 = 28, partial_in=-56 -> result=-28
  PE[1][3]: input=28 * weight=2 = 56, partial_in=-28 -> result=28
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -75       30       45      105 
  Row 1:      -28        0      -28       28 
  Row 2:        0      -25      -50      -25 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -75 │  30 │  45 │ 105 │
├─────┼─────┼─────┼─────┤
│ -28 │   0 │ -28 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │ -25 │ -50 │ -25 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 17
  Row 2: input_block[2][2] = -26
  Row 3: input_block[3][1] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = -41 (from PE[3][0])
  PE[2][1]: partial_in = -82 (from PE[3][1])
  PE[2][2]: partial_in = -41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-28 -> result=-28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=-25 -> result=-8
  PE[1][2]: input=17 * weight=1 = 17, partial_in=-50 -> result=-33
  PE[1][3]: input=17 * weight=2 = 34, partial_in=-25 -> result=9
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=-41 -> result=-41
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=-82 -> result=-108
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=-41 -> result=-93
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -28        0      -28       28 
  Row 1:      -17       -8      -33        9 
  Row 2:      -41     -108      -93      -26 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │   0 │ -28 │  28 │
├─────┼─────┼─────┼─────┤
│ -17 │  -8 │ -33 │   9 │
├─────┼─────┼─────┼─────┤
│ -41 │-108 │ -93 │ -26 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -22
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -33 (from PE[1][2])
  PE[0][3]: partial_in = 9 (from PE[1][3])
  PE[1][0]: partial_in = -41 (from PE[2][0])
  PE[1][1]: partial_in = -108 (from PE[2][1])
  PE[1][2]: partial_in = -93 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[0][3]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-41 -> result=-41
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=-68 -> result=-90
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=-34 -> result=-78
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -17       -8      -33        9 
  Row 1:      -41     -108      -93      -26 
  Row 2:      -34      -90      -78      -22 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  -8 │ -33 │   9 │
├─────┼─────┼─────┼─────┤
│ -41 │-108 │ -93 │ -26 │
├─────┼─────┼─────┼─────┤
│ -34 │ -90 │ -78 │ -22 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -41 (from PE[1][0])
  PE[0][1]: partial_in = -108 (from PE[1][1])
  PE[0][2]: partial_in = -93 (from PE[1][2])
  PE[0][3]: partial_in = -26 (from PE[1][3])
  PE[1][0]: partial_in = -34 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-41 -> result=-41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-108 -> result=-108
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-93 -> result=-93
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-26 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-22 -> result=-22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][1]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[3][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][3]: input=-44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -41     -108      -93      -26 
  Row 1:      -34      -90      -78      -22 
  Row 2:      -37      -74      -37        0 
  Row 3:      -44      -88      -44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -41 │-108 │ -93 │ -26 │
├─────┼─────┼─────┼─────┤
│ -34 │ -90 │ -78 │ -22 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -44 │ -88 │ -44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -41     -108      -93      -26 
Row 1:      -34      -90      -78      -22 
Row 2:      -37      -74      -37        0 
Row 3:      -44      -88      -44        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -41 -> clamp(-41) -> final(87)
  PE[0][1]: -108 -> clamp(-108) -> final(20)
  PE[0][2]: -93 -> clamp(-93) -> final(35)
  PE[0][3]: -26 -> clamp(-26) -> final(102)
  PE[1][0]: -34 -> clamp(-34) -> final(94)
  PE[1][1]: -90 -> clamp(-90) -> final(38)
  PE[1][2]: -78 -> clamp(-78) -> final(50)
  PE[1][3]: -22 -> clamp(-22) -> final(106)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -44 -> clamp(-44) -> final(84)
  PE[3][1]: -88 -> clamp(-88) -> final(40)
  PE[3][2]: -44 -> clamp(-44) -> final(84)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    87     20     35    102 
    94     38     50    106 
    91     54     91    128 
    84     40     84    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  18   14  -11  -24 
  10  -19  -42  -35 
 -23  -41  -45  -26 
 -43  -38  -35  -33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 18
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -36      -18        0       18 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 14
  Row 1: input_block[1][0] = 10
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=0 -> result=-28
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[0][2]: input=14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][0]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[1][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][3]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -28      -14        0       14 
  Row 1:      -10       10       10       20 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -14 │   0 │  14 │
├─────┼─────┼─────┼─────┤
│ -10 │  10 │  10 │  20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -11
  Row 1: input_block[1][1] = -19
  Row 2: input_block[2][0] = -23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -10 (from PE[1][0])
  PE[0][1]: partial_in = 10 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = 20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=-10 -> result=12
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=10 -> result=21
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=20 -> result=9
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       12       21       10        9 
  Row 1:       19      -19      -19      -38 
  Row 2:        0      -23      -46      -23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │  21 │  10 │   9 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -24
  Row 1: input_block[1][2] = -42
  Row 2: input_block[2][1] = -41
  Row 3: input_block[3][0] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=19 -> result=67
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=-19 -> result=5
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=-38 -> result=-62
  PE[1][0]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[1][1]: input=-42 * weight=1 = -42, partial_in=-23 -> result=-65
  PE[1][2]: input=-42 * weight=1 = -42, partial_in=-46 -> result=-88
  PE[1][3]: input=-42 * weight=2 = -84, partial_in=-23 -> result=-107
  PE[2][0]: input=-41 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[2][2]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[2][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       67        5      -19      -62 
  Row 1:       42      -65      -88     -107 
  Row 2:        0      -41      -82      -41 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  67 │   5 │ -19 │ -62 │
├─────┼─────┼─────┼─────┤
│  42 │ -65 │ -88 │-107 │
├─────┼─────┼─────┼─────┤
│   0 │ -41 │ -82 │ -41 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -35
  Row 2: input_block[2][2] = -45
  Row 3: input_block[3][1] = -38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 42 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -107 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -41 (from PE[2][1])
  PE[1][2]: partial_in = -82 (from PE[2][2])
  PE[1][3]: partial_in = -41 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=42 -> result=42
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-107 -> result=-107
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=-41 -> result=-76
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=-82 -> result=-117
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=-41 -> result=-111
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=-86 -> result=-131
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=-43 -> result=-133
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][1]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[3][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][3]: input=-38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       42      -65      -88     -107 
  Row 1:       35      -76     -117     -111 
  Row 2:      -43     -131     -133      -45 
  Row 3:      -38      -76      -38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │ -65 │ -88 │-107 │
├─────┼─────┼─────┼─────┤
│  35 │ -76 │-117 │-111 │
├─────┼─────┼─────┼─────┤
│ -43 │-131 │-133 │ -45 │
├─────┼─────┼─────┼─────┤
│ -38 │ -76 │ -38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -26
  Row 3: input_block[3][2] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -76 (from PE[1][1])
  PE[0][2]: partial_in = -117 (from PE[1][2])
  PE[0][3]: partial_in = -111 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -131 (from PE[2][1])
  PE[1][2]: partial_in = -133 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = -38 (from PE[3][0])
  PE[2][1]: partial_in = -76 (from PE[3][1])
  PE[2][2]: partial_in = -38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-76 -> result=-76
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-117 -> result=-117
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-131 -> result=-131
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-133 -> result=-133
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=-76 -> result=-102
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=-38 -> result=-90
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       35      -76     -117     -111 
  Row 1:      -43     -131     -133      -45 
  Row 2:      -38     -102      -90      -26 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -76 │-117 │-111 │
├─────┼─────┼─────┼─────┤
│ -43 │-131 │-133 │ -45 │
├─────┼─────┼─────┼─────┤
│ -38 │-102 │ -90 │ -26 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = -131 (from PE[1][1])
  PE[0][2]: partial_in = -133 (from PE[1][2])
  PE[0][3]: partial_in = -45 (from PE[1][3])
  PE[1][0]: partial_in = -38 (from PE[2][0])
  PE[1][1]: partial_in = -102 (from PE[2][1])
  PE[1][2]: partial_in = -90 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-131 -> result=-131
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-133 -> result=-133
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-45 -> result=-45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-38 -> result=-38
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -43     -131     -133      -45 
  Row 1:      -38     -102      -90      -26 
  Row 2:      -35      -70      -35        0 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │-131 │-133 │ -45 │
├─────┼─────┼─────┼─────┤
│ -38 │-102 │ -90 │ -26 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -43     -131     -133      -45 
Row 1:      -38     -102      -90      -26 
Row 2:      -35      -70      -35        0 
Row 3:      -33      -66      -33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -43 -> clamp(-43) -> final(85)
  PE[0][1]: -131 -> clamp(-128) -> final(0)
  PE[0][2]: -133 -> clamp(-128) -> final(0)
  PE[0][3]: -45 -> clamp(-45) -> final(83)
  PE[1][0]: -38 -> clamp(-38) -> final(90)
  PE[1][1]: -102 -> clamp(-102) -> final(26)
  PE[1][2]: -90 -> clamp(-90) -> final(38)
  PE[1][3]: -26 -> clamp(-26) -> final(102)
  PE[2][0]: -35 -> clamp(-35) -> final(93)
  PE[2][1]: -70 -> clamp(-70) -> final(58)
  PE[2][2]: -35 -> clamp(-35) -> final(93)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -33 -> clamp(-33) -> final(95)
  PE[3][1]: -66 -> clamp(-66) -> final(62)
  PE[3][2]: -33 -> clamp(-33) -> final(95)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    85      0      0     83 
    90     26     38    102 
    93     58     93    128 
    95     62     95    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -13  -12  -15   -8 
 -29  -27  -27  -21 
 -35  -33  -33  -33 
 -30  -32  -31  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -13
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-13 * weight=-2 = 26, partial_in=0 -> result=26
  PE[0][1]: input=-13 * weight=-1 = 13, partial_in=0 -> result=13
  PE[0][2]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       26       13        0      -13 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │  13 │   0 │ -13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -12
  Row 1: input_block[1][0] = -29
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-12 * weight=-2 = 24, partial_in=0 -> result=24
  PE[0][1]: input=-12 * weight=-1 = 12, partial_in=0 -> result=12
  PE[0][2]: input=-12 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       24       12        0      -12 
  Row 1:       29      -29      -29      -58 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │  12 │   0 │ -12 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -15
  Row 1: input_block[1][1] = -27
  Row 2: input_block[2][0] = -35
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=29 -> result=59
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=-29 -> result=-14
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=-58 -> result=-73
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       59      -14      -29      -73 
  Row 1:       27      -27      -27      -54 
  Row 2:        0      -35      -70      -35 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  59 │ -14 │ -29 │ -73 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -8
  Row 1: input_block[1][2] = -27
  Row 2: input_block[2][1] = -33
  Row 3: input_block[3][0] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=27 -> result=43
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=-27 -> result=-19
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=-54 -> result=-62
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-35 -> result=-62
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-70 -> result=-97
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-35 -> result=-89
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       43      -19      -27      -62 
  Row 1:       27      -62      -97      -89 
  Row 2:        0      -33      -66      -33 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │ -19 │ -27 │ -62 │
├─────┼─────┼─────┼─────┤
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│   0 │ -33 │ -66 │ -33 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -21
  Row 2: input_block[2][2] = -33
  Row 3: input_block[3][1] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -89 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=-33 -> result=-54
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=-66 -> result=-87
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=-33 -> result=-75
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=-60 -> result=-93
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=-30 -> result=-96
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       27      -62      -97      -89 
  Row 1:       21      -54      -87      -75 
  Row 2:      -30      -93      -96      -33 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│  21 │ -54 │ -87 │ -75 │
├─────┼─────┼─────┼─────┤
│ -30 │ -93 │ -96 │ -33 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -33
  Row 3: input_block[3][2] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -75 (from PE[1][3])
  PE[1][0]: partial_in = -30 (from PE[2][0])
  PE[1][1]: partial_in = -93 (from PE[2][1])
  PE[1][2]: partial_in = -96 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-54 -> result=-54
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=-64 -> result=-97
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=-32 -> result=-98
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       21      -54      -87      -75 
  Row 1:      -30      -93      -96      -33 
  Row 2:      -32      -97      -98      -33 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │ -54 │ -87 │ -75 │
├─────┼─────┼─────┼─────┤
│ -30 │ -93 │ -96 │ -33 │
├─────┼─────┼─────┼─────┤
│ -32 │ -97 │ -98 │ -33 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -30 (from PE[1][0])
  PE[0][1]: partial_in = -93 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -33 (from PE[1][3])
  PE[1][0]: partial_in = -32 (from PE[2][0])
  PE[1][1]: partial_in = -97 (from PE[2][1])
  PE[1][2]: partial_in = -98 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-30 -> result=-30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-93 -> result=-93
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-33 -> result=-33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-97 -> result=-97
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -30      -93      -96      -33 
  Row 1:      -32      -97      -98      -33 
  Row 2:      -31      -62      -31        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -30 │ -93 │ -96 │ -33 │
├─────┼─────┼─────┼─────┤
│ -32 │ -97 │ -98 │ -33 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -30      -93      -96      -33 
Row 1:      -32      -97      -98      -33 
Row 2:      -31      -62      -31        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -30 -> clamp(-30) -> final(98)
  PE[0][1]: -93 -> clamp(-93) -> final(35)
  PE[0][2]: -96 -> clamp(-96) -> final(32)
  PE[0][3]: -33 -> clamp(-33) -> final(95)
  PE[1][0]: -32 -> clamp(-32) -> final(96)
  PE[1][1]: -97 -> clamp(-97) -> final(31)
  PE[1][2]: -98 -> clamp(-98) -> final(30)
  PE[1][3]: -33 -> clamp(-33) -> final(95)
  PE[2][0]: -31 -> clamp(-31) -> final(97)
  PE[2][1]: -62 -> clamp(-62) -> final(66)
  PE[2][2]: -31 -> clamp(-31) -> final(97)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    98     35     32     95 
    96     31     30     95 
    97     66     97    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  22   55   58   41 
   4   42   71   81 
 -24    2   39   68 
 -35  -33  -14    9 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=0 -> result=-44
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[0][2]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -44      -22        0       22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │ -22 │   0 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 55
  Row 1: input_block[1][0] = 4
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=55 * weight=-2 = -110, partial_in=0 -> result=-110
  PE[0][1]: input=55 * weight=-1 = -55, partial_in=0 -> result=-55
  PE[0][2]: input=55 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[1][0]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[1][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][2]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][3]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -110      -55        0       55 
  Row 1:       -4        4        4        8 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-110 │ -55 │   0 │  55 │
├─────┼─────┼─────┼─────┤
│  -4 │   4 │   4 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 58
  Row 1: input_block[1][1] = 42
  Row 2: input_block[2][0] = -24
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = 4 (from PE[1][1])
  PE[0][2]: partial_in = 4 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=58 * weight=-2 = -116, partial_in=-4 -> result=-120
  PE[0][1]: input=58 * weight=-1 = -58, partial_in=4 -> result=-54
  PE[0][2]: input=58 * weight=0 = 0, partial_in=4 -> result=4
  PE[0][3]: input=58 * weight=1 = 58, partial_in=8 -> result=66
  PE[1][0]: input=42 * weight=-1 = -42, partial_in=0 -> result=-42
  PE[1][1]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[1][2]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[1][3]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -120      -54        4       66 
  Row 1:      -42       42       42       84 
  Row 2:        0      -24      -48      -24 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-120 │ -54 │   4 │  66 │
├─────┼─────┼─────┼─────┤
│ -42 │  42 │  42 │  84 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 41
  Row 1: input_block[1][2] = 71
  Row 2: input_block[2][1] = 2
  Row 3: input_block[3][0] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -42 (from PE[1][0])
  PE[0][1]: partial_in = 42 (from PE[1][1])
  PE[0][2]: partial_in = 42 (from PE[1][2])
  PE[0][3]: partial_in = 84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=41 * weight=-2 = -82, partial_in=-42 -> result=-124
  PE[0][1]: input=41 * weight=-1 = -41, partial_in=42 -> result=1
  PE[0][2]: input=41 * weight=0 = 0, partial_in=42 -> result=42
  PE[0][3]: input=41 * weight=1 = 41, partial_in=84 -> result=125
  PE[1][0]: input=71 * weight=-1 = -71, partial_in=0 -> result=-71
  PE[1][1]: input=71 * weight=1 = 71, partial_in=-24 -> result=47
  PE[1][2]: input=71 * weight=1 = 71, partial_in=-48 -> result=23
  PE[1][3]: input=71 * weight=2 = 142, partial_in=-24 -> result=118
  PE[2][0]: input=2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[2][2]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][3]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -124        1       42      125 
  Row 1:      -71       47       23      118 
  Row 2:        0        2        4        2 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-124 │   1 │  42 │ 125 │
├─────┼─────┼─────┼─────┤
│ -71 │  47 │  23 │ 118 │
├─────┼─────┼─────┼─────┤
│   0 │   2 │   4 │   2 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 81
  Row 2: input_block[2][2] = 39
  Row 3: input_block[3][1] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -71 (from PE[1][0])
  PE[0][1]: partial_in = 47 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 118 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 4 (from PE[2][2])
  PE[1][3]: partial_in = 2 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-71 -> result=-71
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=47 -> result=47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=0 * weight=1 = 0, partial_in=118 -> result=118
  PE[1][0]: input=81 * weight=-1 = -81, partial_in=0 -> result=-81
  PE[1][1]: input=81 * weight=1 = 81, partial_in=2 -> result=83
  PE[1][2]: input=81 * weight=1 = 81, partial_in=4 -> result=85
  PE[1][3]: input=81 * weight=2 = 162, partial_in=2 -> result=164
  PE[2][0]: input=39 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=39 * weight=1 = 39, partial_in=-70 -> result=-31
  PE[2][2]: input=39 * weight=2 = 78, partial_in=-35 -> result=43
  PE[2][3]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -71       47       23      118 
  Row 1:      -81       83       85      164 
  Row 2:      -35      -31       43       39 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -71 │  47 │  23 │ 118 │
├─────┼─────┼─────┼─────┤
│ -81 │  83 │  85 │ 164 │
├─────┼─────┼─────┼─────┤
│ -35 │ -31 │  43 │  39 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 68
  Row 3: input_block[3][2] = -14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -81 (from PE[1][0])
  PE[0][1]: partial_in = 83 (from PE[1][1])
  PE[0][2]: partial_in = 85 (from PE[1][2])
  PE[0][3]: partial_in = 164 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = 43 (from PE[2][2])
  PE[1][3]: partial_in = 39 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-81 -> result=-81
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=83 -> result=83
  PE[0][2]: input=0 * weight=0 = 0, partial_in=85 -> result=85
  PE[0][3]: input=0 * weight=1 = 0, partial_in=164 -> result=164
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][2]: input=0 * weight=1 = 0, partial_in=43 -> result=43
  PE[1][3]: input=0 * weight=2 = 0, partial_in=39 -> result=39
  PE[2][0]: input=68 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=68 * weight=1 = 68, partial_in=-66 -> result=2
  PE[2][2]: input=68 * weight=2 = 136, partial_in=-33 -> result=103
  PE[2][3]: input=68 * weight=1 = 68, partial_in=0 -> result=68
  PE[3][0]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][1]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[3][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][3]: input=-14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -81       83       85      164 
  Row 1:      -35      -31       43       39 
  Row 2:      -33        2      103       68 
  Row 3:      -14      -28      -14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -81 │  83 │  85 │ 164 │
├─────┼─────┼─────┼─────┤
│ -35 │ -31 │  43 │  39 │
├─────┼─────┼─────┼─────┤
│ -33 │   2 │ 103 │  68 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = -31 (from PE[1][1])
  PE[0][2]: partial_in = 43 (from PE[1][2])
  PE[0][3]: partial_in = 39 (from PE[1][3])
  PE[1][0]: partial_in = -33 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 103 (from PE[2][2])
  PE[1][3]: partial_in = 68 (from PE[2][3])
  PE[2][0]: partial_in = -14 (from PE[3][0])
  PE[2][1]: partial_in = -28 (from PE[3][1])
  PE[2][2]: partial_in = -14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-35 -> result=-35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-31 -> result=-31
  PE[0][2]: input=0 * weight=0 = 0, partial_in=43 -> result=43
  PE[0][3]: input=0 * weight=1 = 0, partial_in=39 -> result=39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-33 -> result=-33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][2]: input=0 * weight=1 = 0, partial_in=103 -> result=103
  PE[1][3]: input=0 * weight=2 = 0, partial_in=68 -> result=68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-14 -> result=-14
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-28 -> result=-28
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-14 -> result=-14
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][1]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[3][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][3]: input=9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -35      -31       43       39 
  Row 1:      -33        2      103       68 
  Row 2:      -14      -28      -14        0 
  Row 3:        9       18        9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -35 │ -31 │  43 │  39 │
├─────┼─────┼─────┼─────┤
│ -33 │   2 │ 103 │  68 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -35      -31       43       39 
Row 1:      -33        2      103       68 
Row 2:      -14      -28      -14        0 
Row 3:        9       18        9        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -35 -> clamp(-35) -> final(93)
  PE[0][1]: -31 -> clamp(-31) -> final(97)
  PE[0][2]: 43 -> clamp(43) -> final(171)
  PE[0][3]: 39 -> clamp(39) -> final(167)
  PE[1][0]: -33 -> clamp(-33) -> final(95)
  PE[1][1]: 2 -> clamp(2) -> final(130)
  PE[1][2]: 103 -> clamp(103) -> final(231)
  PE[1][3]: 68 -> clamp(68) -> final(196)
  PE[2][0]: -14 -> clamp(-14) -> final(114)
  PE[2][1]: -28 -> clamp(-28) -> final(100)
  PE[2][2]: -14 -> clamp(-14) -> final(114)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 9 -> clamp(9) -> final(137)
  PE[3][1]: 18 -> clamp(18) -> final(146)
  PE[3][2]: 9 -> clamp(9) -> final(137)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    93     97    171    167 
    95    130    231    196 
   114    100    114    128 
   137    146    137    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  54   66   43  -27 
  77   44    8  -10 
  54   10  -28   -8 
  -8  -14  -34  -15 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 54
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=54 * weight=-2 = -108, partial_in=0 -> result=-108
  PE[0][1]: input=54 * weight=-1 = -54, partial_in=0 -> result=-54
  PE[0][2]: input=54 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:     -108      -54        0       54 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-108 │ -54 │   0 │  54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 66
  Row 1: input_block[1][0] = 77
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=66 * weight=-2 = -132, partial_in=0 -> result=-132
  PE[0][1]: input=66 * weight=-1 = -66, partial_in=0 -> result=-66
  PE[0][2]: input=66 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=66 * weight=1 = 66, partial_in=0 -> result=66
  PE[1][0]: input=77 * weight=-1 = -77, partial_in=0 -> result=-77
  PE[1][1]: input=77 * weight=1 = 77, partial_in=0 -> result=77
  PE[1][2]: input=77 * weight=1 = 77, partial_in=0 -> result=77
  PE[1][3]: input=77 * weight=2 = 154, partial_in=0 -> result=154
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -132      -66        0       66 
  Row 1:      -77       77       77      154 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-132 │ -66 │   0 │  66 │
├─────┼─────┼─────┼─────┤
│ -77 │  77 │  77 │ 154 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 43
  Row 1: input_block[1][1] = 44
  Row 2: input_block[2][0] = 54
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -77 (from PE[1][0])
  PE[0][1]: partial_in = 77 (from PE[1][1])
  PE[0][2]: partial_in = 77 (from PE[1][2])
  PE[0][3]: partial_in = 154 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=43 * weight=-2 = -86, partial_in=-77 -> result=-163
  PE[0][1]: input=43 * weight=-1 = -43, partial_in=77 -> result=34
  PE[0][2]: input=43 * weight=0 = 0, partial_in=77 -> result=77
  PE[0][3]: input=43 * weight=1 = 43, partial_in=154 -> result=197
  PE[1][0]: input=44 * weight=-1 = -44, partial_in=0 -> result=-44
  PE[1][1]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[1][2]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[1][3]: input=44 * weight=2 = 88, partial_in=0 -> result=88
  PE[2][0]: input=54 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[2][2]: input=54 * weight=2 = 108, partial_in=0 -> result=108
  PE[2][3]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -163       34       77      197 
  Row 1:      -44       44       44       88 
  Row 2:        0       54      108       54 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-163 │  34 │  77 │ 197 │
├─────┼─────┼─────┼─────┤
│ -44 │  44 │  44 │  88 │
├─────┼─────┼─────┼─────┤
│   0 │  54 │ 108 │  54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = 8
  Row 2: input_block[2][1] = 10
  Row 3: input_block[3][0] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -44 (from PE[1][0])
  PE[0][1]: partial_in = 44 (from PE[1][1])
  PE[0][2]: partial_in = 44 (from PE[1][2])
  PE[0][3]: partial_in = 88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 54 (from PE[2][1])
  PE[1][2]: partial_in = 108 (from PE[2][2])
  PE[1][3]: partial_in = 54 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=-44 -> result=10
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=44 -> result=71
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=44 -> result=44
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=88 -> result=61
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=54 -> result=62
  PE[1][2]: input=8 * weight=1 = 8, partial_in=108 -> result=116
  PE[1][3]: input=8 * weight=2 = 16, partial_in=54 -> result=70
  PE[2][0]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[2][2]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       10       71       44       61 
  Row 1:       -8       62      116       70 
  Row 2:        0       10       20       10 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  71 │  44 │  61 │
├─────┼─────┼─────┼─────┤
│  -8 │  62 │ 116 │  70 │
├─────┼─────┼─────┼─────┤
│   0 │  10 │  20 │  10 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -10
  Row 2: input_block[2][2] = -28
  Row 3: input_block[3][1] = -14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 62 (from PE[1][1])
  PE[0][2]: partial_in = 116 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 10 (from PE[2][1])
  PE[1][2]: partial_in = 20 (from PE[2][2])
  PE[1][3]: partial_in = 10 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=62 -> result=62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=116 -> result=116
  PE[0][3]: input=0 * weight=1 = 0, partial_in=70 -> result=70
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=10 -> result=0
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=20 -> result=10
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=10 -> result=-10
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=-16 -> result=-44
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=-8 -> result=-64
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][1]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[3][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][3]: input=-14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -8       62      116       70 
  Row 1:       10        0       10      -10 
  Row 2:       -8      -44      -64      -28 
  Row 3:      -14      -28      -14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  62 │ 116 │  70 │
├─────┼─────┼─────┼─────┤
│  10 │   0 │  10 │ -10 │
├─────┼─────┼─────┼─────┤
│  -8 │ -44 │ -64 │ -28 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -8
  Row 3: input_block[3][2] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = -10 (from PE[1][3])
  PE[1][0]: partial_in = -8 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -64 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -14 (from PE[3][0])
  PE[2][1]: partial_in = -28 (from PE[3][1])
  PE[2][2]: partial_in = -14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-44 -> result=-44
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=-14 -> result=-14
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=-28 -> result=-36
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=-14 -> result=-30
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       10        0       10      -10 
  Row 1:       -8      -44      -64      -28 
  Row 2:      -14      -36      -30       -8 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   0 │  10 │ -10 │
├─────┼─────┼─────┼─────┤
│  -8 │ -44 │ -64 │ -28 │
├─────┼─────┼─────┼─────┤
│ -14 │ -36 │ -30 │  -8 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -64 (from PE[1][2])
  PE[0][3]: partial_in = -28 (from PE[1][3])
  PE[1][0]: partial_in = -14 (from PE[2][0])
  PE[1][1]: partial_in = -36 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-44 -> result=-44
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-28 -> result=-28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -8      -44      -64      -28 
  Row 1:      -14      -36      -30       -8 
  Row 2:      -34      -68      -34        0 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │ -44 │ -64 │ -28 │
├─────┼─────┼─────┼─────┤
│ -14 │ -36 │ -30 │  -8 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -8      -44      -64      -28 
Row 1:      -14      -36      -30       -8 
Row 2:      -34      -68      -34        0 
Row 3:      -15      -30      -15        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -8 -> clamp(-8) -> final(120)
  PE[0][1]: -44 -> clamp(-44) -> final(84)
  PE[0][2]: -64 -> clamp(-64) -> final(64)
  PE[0][3]: -28 -> clamp(-28) -> final(100)
  PE[1][0]: -14 -> clamp(-14) -> final(114)
  PE[1][1]: -36 -> clamp(-36) -> final(92)
  PE[1][2]: -30 -> clamp(-30) -> final(98)
  PE[1][3]: -8 -> clamp(-8) -> final(120)
  PE[2][0]: -34 -> clamp(-34) -> final(94)
  PE[2][1]: -68 -> clamp(-68) -> final(60)
  PE[2][2]: -34 -> clamp(-34) -> final(94)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -15 -> clamp(-15) -> final(113)
  PE[3][1]: -30 -> clamp(-30) -> final(98)
  PE[3][2]: -15 -> clamp(-15) -> final(113)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   120     84     64    100 
   114     92     98    120 
    94     60     94    128 
   113     98    113    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  18   28  -15  -26 
  48   41    8    5 
  45   37   33   30 
  10   23   55   43 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 18
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -36      -18        0       18 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 28
  Row 1: input_block[1][0] = 48
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=0 -> result=-56
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[0][2]: input=28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][0]: input=48 * weight=-1 = -48, partial_in=0 -> result=-48
  PE[1][1]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][2]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][3]: input=48 * weight=2 = 96, partial_in=0 -> result=96
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -56      -28        0       28 
  Row 1:      -48       48       48       96 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │ -28 │   0 │  28 │
├─────┼─────┼─────┼─────┤
│ -48 │  48 │  48 │  96 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -15
  Row 1: input_block[1][1] = 41
  Row 2: input_block[2][0] = 45
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -48 (from PE[1][0])
  PE[0][1]: partial_in = 48 (from PE[1][1])
  PE[0][2]: partial_in = 48 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=-48 -> result=-18
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=48 -> result=63
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=48 -> result=48
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=96 -> result=81
  PE[1][0]: input=41 * weight=-1 = -41, partial_in=0 -> result=-41
  PE[1][1]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[1][2]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[1][3]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[2][0]: input=45 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[2][2]: input=45 * weight=2 = 90, partial_in=0 -> result=90
  PE[2][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -18       63       48       81 
  Row 1:      -41       41       41       82 
  Row 2:        0       45       90       45 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  63 │  48 │  81 │
├─────┼─────┼─────┼─────┤
│ -41 │  41 │  41 │  82 │
├─────┼─────┼─────┼─────┤
│   0 │  45 │  90 │  45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -26
  Row 1: input_block[1][2] = 8
  Row 2: input_block[2][1] = 37
  Row 3: input_block[3][0] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -41 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 41 (from PE[1][2])
  PE[0][3]: partial_in = 82 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 45 (from PE[2][1])
  PE[1][2]: partial_in = 90 (from PE[2][2])
  PE[1][3]: partial_in = 45 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=-41 -> result=11
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=41 -> result=67
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=41 -> result=41
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=82 -> result=56
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=45 -> result=53
  PE[1][2]: input=8 * weight=1 = 8, partial_in=90 -> result=98
  PE[1][3]: input=8 * weight=2 = 16, partial_in=45 -> result=61
  PE[2][0]: input=37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[2][2]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[2][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       11       67       41       56 
  Row 1:       -8       53       98       61 
  Row 2:        0       37       74       37 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  11 │  67 │  41 │  56 │
├─────┼─────┼─────┼─────┤
│  -8 │  53 │  98 │  61 │
├─────┼─────┼─────┼─────┤
│   0 │  37 │  74 │  37 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 5
  Row 2: input_block[2][2] = 33
  Row 3: input_block[3][1] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 53 (from PE[1][1])
  PE[0][2]: partial_in = 98 (from PE[1][2])
  PE[0][3]: partial_in = 61 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 37 (from PE[2][1])
  PE[1][2]: partial_in = 74 (from PE[2][2])
  PE[1][3]: partial_in = 37 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=53 -> result=53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=98 -> result=98
  PE[0][3]: input=0 * weight=1 = 0, partial_in=61 -> result=61
  PE[1][0]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[1][1]: input=5 * weight=1 = 5, partial_in=37 -> result=42
  PE[1][2]: input=5 * weight=1 = 5, partial_in=74 -> result=79
  PE[1][3]: input=5 * weight=2 = 10, partial_in=37 -> result=47
  PE[2][0]: input=33 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=33 * weight=1 = 33, partial_in=20 -> result=53
  PE[2][2]: input=33 * weight=2 = 66, partial_in=10 -> result=76
  PE[2][3]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -8       53       98       61 
  Row 1:       -5       42       79       47 
  Row 2:       10       53       76       33 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  53 │  98 │  61 │
├─────┼─────┼─────┼─────┤
│  -5 │  42 │  79 │  47 │
├─────┼─────┼─────┼─────┤
│  10 │  53 │  76 │  33 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 30
  Row 3: input_block[3][2] = 55

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -5 (from PE[1][0])
  PE[0][1]: partial_in = 42 (from PE[1][1])
  PE[0][2]: partial_in = 79 (from PE[1][2])
  PE[0][3]: partial_in = 47 (from PE[1][3])
  PE[1][0]: partial_in = 10 (from PE[2][0])
  PE[1][1]: partial_in = 53 (from PE[2][1])
  PE[1][2]: partial_in = 76 (from PE[2][2])
  PE[1][3]: partial_in = 33 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-5 -> result=-5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=42 -> result=42
  PE[0][2]: input=0 * weight=0 = 0, partial_in=79 -> result=79
  PE[0][3]: input=0 * weight=1 = 0, partial_in=47 -> result=47
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=53 -> result=53
  PE[1][2]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[1][3]: input=0 * weight=2 = 0, partial_in=33 -> result=33
  PE[2][0]: input=30 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=30 * weight=1 = 30, partial_in=46 -> result=76
  PE[2][2]: input=30 * weight=2 = 60, partial_in=23 -> result=83
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][1]: input=55 * weight=2 = 110, partial_in=0 -> result=110
  PE[3][2]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][3]: input=55 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -5       42       79       47 
  Row 1:       10       53       76       33 
  Row 2:       23       76       83       30 
  Row 3:       55      110       55        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -5 │  42 │  79 │  47 │
├─────┼─────┼─────┼─────┤
│  10 │  53 │  76 │  33 │
├─────┼─────┼─────┼─────┤
│  23 │  76 │  83 │  30 │
├─────┼─────┼─────┼─────┤
│  55 │ 110 │  55 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = 53 (from PE[1][1])
  PE[0][2]: partial_in = 76 (from PE[1][2])
  PE[0][3]: partial_in = 33 (from PE[1][3])
  PE[1][0]: partial_in = 23 (from PE[2][0])
  PE[1][1]: partial_in = 76 (from PE[2][1])
  PE[1][2]: partial_in = 83 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = 55 (from PE[3][0])
  PE[2][1]: partial_in = 110 (from PE[3][1])
  PE[2][2]: partial_in = 55 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=53 -> result=53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=76 -> result=76
  PE[0][3]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=23 -> result=23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[1][2]: input=0 * weight=1 = 0, partial_in=83 -> result=83
  PE[1][3]: input=0 * weight=2 = 0, partial_in=30 -> result=30
  PE[2][0]: input=0 * weight=0 = 0, partial_in=55 -> result=55
  PE[2][1]: input=0 * weight=1 = 0, partial_in=110 -> result=110
  PE[2][2]: input=0 * weight=2 = 0, partial_in=55 -> result=55
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][1]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[3][2]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][3]: input=43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       10       53       76       33 
  Row 1:       23       76       83       30 
  Row 2:       55      110       55        0 
  Row 3:       43       86       43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  53 │  76 │  33 │
├─────┼─────┼─────┼─────┤
│  23 │  76 │  83 │  30 │
├─────┼─────┼─────┼─────┤
│  55 │ 110 │  55 │   0 │
├─────┼─────┼─────┼─────┤
│  43 │  86 │  43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       10       53       76       33 
Row 1:       23       76       83       30 
Row 2:       55      110       55        0 
Row 3:       43       86       43        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 10 -> clamp(10) -> final(138)
  PE[0][1]: 53 -> clamp(53) -> final(181)
  PE[0][2]: 76 -> clamp(76) -> final(204)
  PE[0][3]: 33 -> clamp(33) -> final(161)
  PE[1][0]: 23 -> clamp(23) -> final(151)
  PE[1][1]: 76 -> clamp(76) -> final(204)
  PE[1][2]: 83 -> clamp(83) -> final(211)
  PE[1][3]: 30 -> clamp(30) -> final(158)
  PE[2][0]: 55 -> clamp(55) -> final(183)
  PE[2][1]: 110 -> clamp(110) -> final(238)
  PE[2][2]: 55 -> clamp(55) -> final(183)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 43 -> clamp(43) -> final(171)
  PE[3][1]: 86 -> clamp(86) -> final(214)
  PE[3][2]: 43 -> clamp(43) -> final(171)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   138    181    204    161 
   151    204    211    158 
   183    238    183    128 
   171    214    171    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -35  -46  -33   -6 
  -8  -27  -22    2 
  34    4   -6    8 
  67   32   11   10 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -35
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=0 -> result=70
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       70       35        0      -35 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │  35 │   0 │ -35 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -46
  Row 1: input_block[1][0] = -8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=0 -> result=92
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=0 -> result=46
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       92       46        0      -46 
  Row 1:        8       -8       -8      -16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  92 │  46 │   0 │ -46 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -33
  Row 1: input_block[1][1] = -27
  Row 2: input_block[2][0] = 34
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=8 -> result=74
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-8 -> result=25
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-16 -> result=-49
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[2][2]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[2][3]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       74       25       -8      -49 
  Row 1:       27      -27      -27      -54 
  Row 2:        0       34       68       34 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  74 │  25 │  -8 │ -49 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │  34 │  68 │  34 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -6
  Row 1: input_block[1][2] = -22
  Row 2: input_block[2][1] = 4
  Row 3: input_block[3][0] = 67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 34 (from PE[2][1])
  PE[1][2]: partial_in = 68 (from PE[2][2])
  PE[1][3]: partial_in = 34 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-6 * weight=-2 = 12, partial_in=27 -> result=39
  PE[0][1]: input=-6 * weight=-1 = 6, partial_in=-27 -> result=-21
  PE[0][2]: input=-6 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-6 * weight=1 = -6, partial_in=-54 -> result=-60
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=34 -> result=12
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=68 -> result=46
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=34 -> result=-10
  PE[2][0]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[2][2]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][0]: input=67 * weight=1 = 67, partial_in=0 -> result=67
  PE[3][1]: input=67 * weight=2 = 134, partial_in=0 -> result=134
  PE[3][2]: input=67 * weight=1 = 67, partial_in=0 -> result=67
  PE[3][3]: input=67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       39      -21      -27      -60 
  Row 1:       22       12       46      -10 
  Row 2:        0        4        8        4 
  Row 3:       67      134       67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -21 │ -27 │ -60 │
├─────┼─────┼─────┼─────┤
│  22 │  12 │  46 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │   4 │   8 │   4 │
├─────┼─────┼─────┼─────┤
│  67 │ 134 │  67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 2
  Row 2: input_block[2][2] = -6
  Row 3: input_block[3][1] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 46 (from PE[1][2])
  PE[0][3]: partial_in = -10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 4 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 4 (from PE[2][3])
  PE[2][0]: partial_in = 67 (from PE[3][0])
  PE[2][1]: partial_in = 134 (from PE[3][1])
  PE[2][2]: partial_in = 67 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=22 -> result=22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=46 -> result=46
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=4 -> result=6
  PE[1][2]: input=2 * weight=1 = 2, partial_in=8 -> result=10
  PE[1][3]: input=2 * weight=2 = 4, partial_in=4 -> result=8
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=67 -> result=67
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=134 -> result=128
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=67 -> result=55
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       22       12       46      -10 
  Row 1:       -2        6       10        8 
  Row 2:       67      128       55       -6 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  12 │  46 │ -10 │
├─────┼─────┼─────┼─────┤
│  -2 │   6 │  10 │   8 │
├─────┼─────┼─────┼─────┤
│  67 │ 128 │  55 │  -6 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 8
  Row 3: input_block[3][2] = 11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 67 (from PE[2][0])
  PE[1][1]: partial_in = 128 (from PE[2][1])
  PE[1][2]: partial_in = 55 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = 32 (from PE[3][0])
  PE[2][1]: partial_in = 64 (from PE[3][1])
  PE[2][2]: partial_in = 32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=6 -> result=6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=67 -> result=67
  PE[1][1]: input=0 * weight=1 = 0, partial_in=128 -> result=128
  PE[1][2]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][0]: input=8 * weight=0 = 0, partial_in=32 -> result=32
  PE[2][1]: input=8 * weight=1 = 8, partial_in=64 -> result=72
  PE[2][2]: input=8 * weight=2 = 16, partial_in=32 -> result=48
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][1]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[3][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][3]: input=11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -2        6       10        8 
  Row 1:       67      128       55       -6 
  Row 2:       32       72       48        8 
  Row 3:       11       22       11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │   6 │  10 │   8 │
├─────┼─────┼─────┼─────┤
│  67 │ 128 │  55 │  -6 │
├─────┼─────┼─────┼─────┤
│  32 │  72 │  48 │   8 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 67 (from PE[1][0])
  PE[0][1]: partial_in = 128 (from PE[1][1])
  PE[0][2]: partial_in = 55 (from PE[1][2])
  PE[0][3]: partial_in = -6 (from PE[1][3])
  PE[1][0]: partial_in = 32 (from PE[2][0])
  PE[1][1]: partial_in = 72 (from PE[2][1])
  PE[1][2]: partial_in = 48 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 11 (from PE[3][0])
  PE[2][1]: partial_in = 22 (from PE[3][1])
  PE[2][2]: partial_in = 11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=67 -> result=67
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=128 -> result=128
  PE[0][2]: input=0 * weight=0 = 0, partial_in=55 -> result=55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=48 -> result=48
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=11 -> result=11
  PE[2][1]: input=0 * weight=1 = 0, partial_in=22 -> result=22
  PE[2][2]: input=0 * weight=2 = 0, partial_in=11 -> result=11
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       67      128       55       -6 
  Row 1:       32       72       48        8 
  Row 2:       11       22       11        0 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  67 │ 128 │  55 │  -6 │
├─────┼─────┼─────┼─────┤
│  32 │  72 │  48 │   8 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       67      128       55       -6 
Row 1:       32       72       48        8 
Row 2:       11       22       11        0 
Row 3:       10       20       10        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 67 -> clamp(67) -> final(195)
  PE[0][1]: 128 -> clamp(127) -> final(255)
  PE[0][2]: 55 -> clamp(55) -> final(183)
  PE[0][3]: -6 -> clamp(-6) -> final(122)
  PE[1][0]: 32 -> clamp(32) -> final(160)
  PE[1][1]: 72 -> clamp(72) -> final(200)
  PE[1][2]: 48 -> clamp(48) -> final(176)
  PE[1][3]: 8 -> clamp(8) -> final(136)
  PE[2][0]: 11 -> clamp(11) -> final(139)
  PE[2][1]: 22 -> clamp(22) -> final(150)
  PE[2][2]: 11 -> clamp(11) -> final(139)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 10 -> clamp(10) -> final(138)
  PE[3][1]: 20 -> clamp(20) -> final(148)
  PE[3][2]: 10 -> clamp(10) -> final(138)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   195    255    183    122 
   160    200    176    136 
   139    150    139    128 
   138    148    138    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   8   17   28   33 
  16   24   33   37 
  17   23   32   34 
  10   17   28   30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 8
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=0 -> result=-16
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[0][2]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -16       -8        0        8 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  -8 │   0 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 17
  Row 1: input_block[1][0] = 16
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=16 * weight=-1 = -16, partial_in=0 -> result=-16
  PE[1][1]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[1][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[1][3]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -34      -17        0       17 
  Row 1:      -16       16       16       32 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│ -16 │  16 │  16 │  32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 28
  Row 1: input_block[1][1] = 24
  Row 2: input_block[2][0] = 17
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -16 (from PE[1][0])
  PE[0][1]: partial_in = 16 (from PE[1][1])
  PE[0][2]: partial_in = 16 (from PE[1][2])
  PE[0][3]: partial_in = 32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=-16 -> result=-72
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=16 -> result=-12
  PE[0][2]: input=28 * weight=0 = 0, partial_in=16 -> result=16
  PE[0][3]: input=28 * weight=1 = 28, partial_in=32 -> result=60
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][3]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][0]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[2][2]: input=17 * weight=2 = 34, partial_in=0 -> result=34
  PE[2][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -72      -12       16       60 
  Row 1:      -24       24       24       48 
  Row 2:        0       17       34       17 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -72 │ -12 │  16 │  60 │
├─────┼─────┼─────┼─────┤
│ -24 │  24 │  24 │  48 │
├─────┼─────┼─────┼─────┤
│   0 │  17 │  34 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 33
  Row 1: input_block[1][2] = 33
  Row 2: input_block[2][1] = 23
  Row 3: input_block[3][0] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 24 (from PE[1][1])
  PE[0][2]: partial_in = 24 (from PE[1][2])
  PE[0][3]: partial_in = 48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 17 (from PE[2][1])
  PE[1][2]: partial_in = 34 (from PE[2][2])
  PE[1][3]: partial_in = 17 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-24 -> result=-90
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=24 -> result=-9
  PE[0][2]: input=33 * weight=0 = 0, partial_in=24 -> result=24
  PE[0][3]: input=33 * weight=1 = 33, partial_in=48 -> result=81
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=17 -> result=50
  PE[1][2]: input=33 * weight=1 = 33, partial_in=34 -> result=67
  PE[1][3]: input=33 * weight=2 = 66, partial_in=17 -> result=83
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -90       -9       24       81 
  Row 1:      -33       50       67       83 
  Row 2:        0       23       46       23 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │  -9 │  24 │  81 │
├─────┼─────┼─────┼─────┤
│ -33 │  50 │  67 │  83 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 37
  Row 2: input_block[2][2] = 32
  Row 3: input_block[3][1] = 17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 50 (from PE[1][1])
  PE[0][2]: partial_in = 67 (from PE[1][2])
  PE[0][3]: partial_in = 83 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=50 -> result=50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=67 -> result=67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=83 -> result=83
  PE[1][0]: input=37 * weight=-1 = -37, partial_in=0 -> result=-37
  PE[1][1]: input=37 * weight=1 = 37, partial_in=23 -> result=60
  PE[1][2]: input=37 * weight=1 = 37, partial_in=46 -> result=83
  PE[1][3]: input=37 * weight=2 = 74, partial_in=23 -> result=97
  PE[2][0]: input=32 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=32 * weight=1 = 32, partial_in=20 -> result=52
  PE[2][2]: input=32 * weight=2 = 64, partial_in=10 -> result=74
  PE[2][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][0]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][1]: input=17 * weight=2 = 34, partial_in=0 -> result=34
  PE[3][2]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][3]: input=17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -33       50       67       83 
  Row 1:      -37       60       83       97 
  Row 2:       10       52       74       32 
  Row 3:       17       34       17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │  50 │  67 │  83 │
├─────┼─────┼─────┼─────┤
│ -37 │  60 │  83 │  97 │
├─────┼─────┼─────┼─────┤
│  10 │  52 │  74 │  32 │
├─────┼─────┼─────┼─────┤
│  17 │  34 │  17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 34
  Row 3: input_block[3][2] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -37 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 83 (from PE[1][2])
  PE[0][3]: partial_in = 97 (from PE[1][3])
  PE[1][0]: partial_in = 10 (from PE[2][0])
  PE[1][1]: partial_in = 52 (from PE[2][1])
  PE[1][2]: partial_in = 74 (from PE[2][2])
  PE[1][3]: partial_in = 32 (from PE[2][3])
  PE[2][0]: partial_in = 17 (from PE[3][0])
  PE[2][1]: partial_in = 34 (from PE[3][1])
  PE[2][2]: partial_in = 17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-37 -> result=-37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=83 -> result=83
  PE[0][3]: input=0 * weight=1 = 0, partial_in=97 -> result=97
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][2]: input=0 * weight=1 = 0, partial_in=74 -> result=74
  PE[1][3]: input=0 * weight=2 = 0, partial_in=32 -> result=32
  PE[2][0]: input=34 * weight=0 = 0, partial_in=17 -> result=17
  PE[2][1]: input=34 * weight=1 = 34, partial_in=34 -> result=68
  PE[2][2]: input=34 * weight=2 = 68, partial_in=17 -> result=85
  PE[2][3]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -37       60       83       97 
  Row 1:       10       52       74       32 
  Row 2:       17       68       85       34 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -37 │  60 │  83 │  97 │
├─────┼─────┼─────┼─────┤
│  10 │  52 │  74 │  32 │
├─────┼─────┼─────┼─────┤
│  17 │  68 │  85 │  34 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = 52 (from PE[1][1])
  PE[0][2]: partial_in = 74 (from PE[1][2])
  PE[0][3]: partial_in = 32 (from PE[1][3])
  PE[1][0]: partial_in = 17 (from PE[2][0])
  PE[1][1]: partial_in = 68 (from PE[2][1])
  PE[1][2]: partial_in = 85 (from PE[2][2])
  PE[1][3]: partial_in = 34 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=52 -> result=52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=74 -> result=74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=17 -> result=17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=68 -> result=68
  PE[1][2]: input=0 * weight=1 = 0, partial_in=85 -> result=85
  PE[1][3]: input=0 * weight=2 = 0, partial_in=34 -> result=34
  PE[2][0]: input=0 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=0 * weight=1 = 0, partial_in=56 -> result=56
  PE[2][2]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       10       52       74       32 
  Row 1:       17       68       85       34 
  Row 2:       28       56       28        0 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  52 │  74 │  32 │
├─────┼─────┼─────┼─────┤
│  17 │  68 │  85 │  34 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       10       52       74       32 
Row 1:       17       68       85       34 
Row 2:       28       56       28        0 
Row 3:       30       60       30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 10 -> clamp(10) -> final(138)
  PE[0][1]: 52 -> clamp(52) -> final(180)
  PE[0][2]: 74 -> clamp(74) -> final(202)
  PE[0][3]: 32 -> clamp(32) -> final(160)
  PE[1][0]: 17 -> clamp(17) -> final(145)
  PE[1][1]: 68 -> clamp(68) -> final(196)
  PE[1][2]: 85 -> clamp(85) -> final(213)
  PE[1][3]: 34 -> clamp(34) -> final(162)
  PE[2][0]: 28 -> clamp(28) -> final(156)
  PE[2][1]: 56 -> clamp(56) -> final(184)
  PE[2][2]: 28 -> clamp(28) -> final(156)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 30 -> clamp(30) -> final(158)
  PE[3][1]: 60 -> clamp(60) -> final(188)
  PE[3][2]: 30 -> clamp(30) -> final(158)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   138    180    202    160 
   145    196    213    162 
   156    184    156    128 
   158    188    158    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  13   -7  -32  -24 
  33   -4  -40  -11 
  43  -18  -53   -4 
  31  -44  -51   -3 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 13
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=0 -> result=-26
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[0][2]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -26      -13        0       13 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │ -13 │   0 │  13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -7
  Row 1: input_block[1][0] = 33
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=0 -> result=14
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[1][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[1][3]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       14        7        0       -7 
  Row 1:      -33       33       33       66 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │   7 │   0 │  -7 │
├─────┼─────┼─────┼─────┤
│ -33 │  33 │  33 │  66 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -32
  Row 1: input_block[1][1] = -4
  Row 2: input_block[2][0] = 43
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 33 (from PE[1][1])
  PE[0][2]: partial_in = 33 (from PE[1][2])
  PE[0][3]: partial_in = 66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-32 * weight=-2 = 64, partial_in=-33 -> result=31
  PE[0][1]: input=-32 * weight=-1 = 32, partial_in=33 -> result=65
  PE[0][2]: input=-32 * weight=0 = 0, partial_in=33 -> result=33
  PE[0][3]: input=-32 * weight=1 = -32, partial_in=66 -> result=34
  PE[1][0]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[1][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][3]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][0]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[2][2]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[2][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       31       65       33       34 
  Row 1:        4       -4       -4       -8 
  Row 2:        0       43       86       43 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │  65 │  33 │  34 │
├─────┼─────┼─────┼─────┤
│   4 │  -4 │  -4 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │  43 │  86 │  43 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -24
  Row 1: input_block[1][2] = -40
  Row 2: input_block[2][1] = -18
  Row 3: input_block[3][0] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 4 (from PE[1][0])
  PE[0][1]: partial_in = -4 (from PE[1][1])
  PE[0][2]: partial_in = -4 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 43 (from PE[2][1])
  PE[1][2]: partial_in = 86 (from PE[2][2])
  PE[1][3]: partial_in = 43 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=4 -> result=52
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=-4 -> result=20
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=-8 -> result=-32
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=43 -> result=3
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=86 -> result=46
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=43 -> result=-37
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       52       20       -4      -32 
  Row 1:       40        3       46      -37 
  Row 2:        0      -18      -36      -18 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  20 │  -4 │ -32 │
├─────┼─────┼─────┼─────┤
│  40 │   3 │  46 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │ -18 │ -36 │ -18 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -11
  Row 2: input_block[2][2] = -53
  Row 3: input_block[3][1] = -44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 46 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = -36 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=46 -> result=46
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=-18 -> result=-29
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=-36 -> result=-47
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=-18 -> result=-40
  PE[2][0]: input=-53 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=-53 * weight=1 = -53, partial_in=62 -> result=9
  PE[2][2]: input=-53 * weight=2 = -106, partial_in=31 -> result=-75
  PE[2][3]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][0]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][1]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[3][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][3]: input=-44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       40        3       46      -37 
  Row 1:       11      -29      -47      -40 
  Row 2:       31        9      -75      -53 
  Row 3:      -44      -88      -44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │   3 │  46 │ -37 │
├─────┼─────┼─────┼─────┤
│  11 │ -29 │ -47 │ -40 │
├─────┼─────┼─────┼─────┤
│  31 │   9 │ -75 │ -53 │
├─────┼─────┼─────┼─────┤
│ -44 │ -88 │ -44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -4
  Row 3: input_block[3][2] = -51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -47 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = -53 (from PE[2][3])
  PE[2][0]: partial_in = -44 (from PE[3][0])
  PE[2][1]: partial_in = -88 (from PE[3][1])
  PE[2][2]: partial_in = -44 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=11 -> result=11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-40 -> result=-40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-53 -> result=-53
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=-88 -> result=-92
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=-44 -> result=-52
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][1]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[3][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][3]: input=-51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       11      -29      -47      -40 
  Row 1:       31        9      -75      -53 
  Row 2:      -44      -92      -52       -4 
  Row 3:      -51     -102      -51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  11 │ -29 │ -47 │ -40 │
├─────┼─────┼─────┼─────┤
│  31 │   9 │ -75 │ -53 │
├─────┼─────┼─────┼─────┤
│ -44 │ -92 │ -52 │  -4 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -53 (from PE[1][3])
  PE[1][0]: partial_in = -44 (from PE[2][0])
  PE[1][1]: partial_in = -92 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = -51 (from PE[3][0])
  PE[2][1]: partial_in = -102 (from PE[3][1])
  PE[2][2]: partial_in = -51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-53 -> result=-53
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-44 -> result=-44
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-51 -> result=-51
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][1]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[3][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][3]: input=-3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       31        9      -75      -53 
  Row 1:      -44      -92      -52       -4 
  Row 2:      -51     -102      -51        0 
  Row 3:       -3       -6       -3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │   9 │ -75 │ -53 │
├─────┼─────┼─────┼─────┤
│ -44 │ -92 │ -52 │  -4 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       31        9      -75      -53 
Row 1:      -44      -92      -52       -4 
Row 2:      -51     -102      -51        0 
Row 3:       -3       -6       -3        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 31 -> clamp(31) -> final(159)
  PE[0][1]: 9 -> clamp(9) -> final(137)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: -53 -> clamp(-53) -> final(75)
  PE[1][0]: -44 -> clamp(-44) -> final(84)
  PE[1][1]: -92 -> clamp(-92) -> final(36)
  PE[1][2]: -52 -> clamp(-52) -> final(76)
  PE[1][3]: -4 -> clamp(-4) -> final(124)
  PE[2][0]: -51 -> clamp(-51) -> final(77)
  PE[2][1]: -102 -> clamp(-102) -> final(26)
  PE[2][2]: -51 -> clamp(-51) -> final(77)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -3 -> clamp(-3) -> final(125)
  PE[3][1]: -6 -> clamp(-6) -> final(122)
  PE[3][2]: -3 -> clamp(-3) -> final(125)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   159    137     53     75 
    84     36     76    124 
    77     26     77    128 
   125    122    125    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -4   12   23   18 
  -7   20   19   17 
 -15   15    7    8 
 -11    2    0    2 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -4
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-4 * weight=-2 = 8, partial_in=0 -> result=8
  PE[0][1]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[0][2]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        8        4        0       -4 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │   4 │   0 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 12
  Row 1: input_block[1][0] = -7
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=0 -> result=-24
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[0][2]: input=12 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -24      -12        0       12 
  Row 1:        7       -7       -7      -14 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │ -12 │   0 │  12 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 23
  Row 1: input_block[1][1] = 20
  Row 2: input_block[2][0] = -15
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=7 -> result=-39
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=-7 -> result=-30
  PE[0][2]: input=23 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=23 * weight=1 = 23, partial_in=-14 -> result=9
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][3]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -39      -30       -7        9 
  Row 1:      -20       20       20       40 
  Row 2:        0      -15      -30      -15 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │ -30 │  -7 │   9 │
├─────┼─────┼─────┼─────┤
│ -20 │  20 │  20 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │ -15 │ -30 │ -15 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 18
  Row 1: input_block[1][2] = 19
  Row 2: input_block[2][1] = 15
  Row 3: input_block[3][0] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -15 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=-20 -> result=-56
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=20 -> result=2
  PE[0][2]: input=18 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=18 * weight=1 = 18, partial_in=40 -> result=58
  PE[1][0]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[1][1]: input=19 * weight=1 = 19, partial_in=-15 -> result=4
  PE[1][2]: input=19 * weight=1 = 19, partial_in=-30 -> result=-11
  PE[1][3]: input=19 * weight=2 = 38, partial_in=-15 -> result=23
  PE[2][0]: input=15 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[2][2]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[2][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -56        2       20       58 
  Row 1:      -19        4      -11       23 
  Row 2:        0       15       30       15 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │   2 │  20 │  58 │
├─────┼─────┼─────┼─────┤
│ -19 │   4 │ -11 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │  15 │  30 │  15 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 17
  Row 2: input_block[2][2] = 7
  Row 3: input_block[3][1] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -19 (from PE[1][0])
  PE[0][1]: partial_in = 4 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = 23 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 15 (from PE[2][1])
  PE[1][2]: partial_in = 30 (from PE[2][2])
  PE[1][3]: partial_in = 15 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-19 -> result=-19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=4 -> result=4
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=0 * weight=1 = 0, partial_in=23 -> result=23
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=15 -> result=32
  PE[1][2]: input=17 * weight=1 = 17, partial_in=30 -> result=47
  PE[1][3]: input=17 * weight=2 = 34, partial_in=15 -> result=49
  PE[2][0]: input=7 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=7 * weight=1 = 7, partial_in=-22 -> result=-15
  PE[2][2]: input=7 * weight=2 = 14, partial_in=-11 -> result=3
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -19        4      -11       23 
  Row 1:      -17       32       47       49 
  Row 2:      -11      -15        3        7 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -19 │   4 │ -11 │  23 │
├─────┼─────┼─────┼─────┤
│ -17 │  32 │  47 │  49 │
├─────┼─────┼─────┼─────┤
│ -11 │ -15 │   3 │   7 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 8
  Row 3: input_block[3][2] = 0

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 47 (from PE[1][2])
  PE[0][3]: partial_in = 49 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = -15 (from PE[2][1])
  PE[1][2]: partial_in = 3 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = 2 (from PE[3][0])
  PE[2][1]: partial_in = 4 (from PE[3][1])
  PE[2][2]: partial_in = 2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=47 -> result=47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=49 -> result=49
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][2]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=8 * weight=0 = 0, partial_in=2 -> result=2
  PE[2][1]: input=8 * weight=1 = 8, partial_in=4 -> result=12
  PE[2][2]: input=8 * weight=2 = 16, partial_in=2 -> result=18
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -17       32       47       49 
  Row 1:      -11      -15        3        7 
  Row 2:        2       12       18        8 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  32 │  47 │  49 │
├─────┼─────┼─────┼─────┤
│ -11 │ -15 │   3 │   7 │
├─────┼─────┼─────┼─────┤
│   2 │  12 │  18 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -15 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 7 (from PE[1][3])
  PE[1][0]: partial_in = 2 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 18 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[0][2]: input=0 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=7 -> result=7
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=2 -> result=2
  PE[1][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][2]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -11      -15        3        7 
  Row 1:        2       12       18        8 
  Row 2:        0        0        0        0 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -15 │   3 │   7 │
├─────┼─────┼─────┼─────┤
│   2 │  12 │  18 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -11      -15        3        7 
Row 1:        2       12       18        8 
Row 2:        0        0        0        0 
Row 3:        2        4        2        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -11 -> clamp(-11) -> final(117)
  PE[0][1]: -15 -> clamp(-15) -> final(113)
  PE[0][2]: 3 -> clamp(3) -> final(131)
  PE[0][3]: 7 -> clamp(7) -> final(135)
  PE[1][0]: 2 -> clamp(2) -> final(130)
  PE[1][1]: 12 -> clamp(12) -> final(140)
  PE[1][2]: 18 -> clamp(18) -> final(146)
  PE[1][3]: 8 -> clamp(8) -> final(136)
  PE[2][0]: 0 -> clamp(0) -> final(128)
  PE[2][1]: 0 -> clamp(0) -> final(128)
  PE[2][2]: 0 -> clamp(0) -> final(128)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 2 -> clamp(2) -> final(130)
  PE[3][1]: 4 -> clamp(4) -> final(132)
  PE[3][2]: 2 -> clamp(2) -> final(130)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   117    113    131    135 
   130    140    146    136 
   128    128    128    128 
   130    132    130    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  18   37   53   57 
  11   26   45   40 
 -13   -8   12    1 
 -16  -17    1  -12 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 18
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -36      -18        0       18 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 37
  Row 1: input_block[1][0] = 11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=37 * weight=-2 = -74, partial_in=0 -> result=-74
  PE[0][1]: input=37 * weight=-1 = -37, partial_in=0 -> result=-37
  PE[0][2]: input=37 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][3]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -74      -37        0       37 
  Row 1:      -11       11       11       22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -74 │ -37 │   0 │  37 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  11 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 53
  Row 1: input_block[1][1] = 26
  Row 2: input_block[2][0] = -13
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=53 * weight=-2 = -106, partial_in=-11 -> result=-117
  PE[0][1]: input=53 * weight=-1 = -53, partial_in=11 -> result=-42
  PE[0][2]: input=53 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=53 * weight=1 = 53, partial_in=22 -> result=75
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][3]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -117      -42       11       75 
  Row 1:      -26       26       26       52 
  Row 2:        0      -13      -26      -13 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-117 │ -42 │  11 │  75 │
├─────┼─────┼─────┼─────┤
│ -26 │  26 │  26 │  52 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 57
  Row 1: input_block[1][2] = 45
  Row 2: input_block[2][1] = -8
  Row 3: input_block[3][0] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 26 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=57 * weight=-2 = -114, partial_in=-26 -> result=-140
  PE[0][1]: input=57 * weight=-1 = -57, partial_in=26 -> result=-31
  PE[0][2]: input=57 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=57 * weight=1 = 57, partial_in=52 -> result=109
  PE[1][0]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[1][1]: input=45 * weight=1 = 45, partial_in=-13 -> result=32
  PE[1][2]: input=45 * weight=1 = 45, partial_in=-26 -> result=19
  PE[1][3]: input=45 * weight=2 = 90, partial_in=-13 -> result=77
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -140      -31       26      109 
  Row 1:      -45       32       19       77 
  Row 2:        0       -8      -16       -8 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-140 │ -31 │  26 │ 109 │
├─────┼─────┼─────┼─────┤
│ -45 │  32 │  19 │  77 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 40
  Row 2: input_block[2][2] = 12
  Row 3: input_block[3][1] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = 77 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-45 -> result=-45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=77 -> result=77
  PE[1][0]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[1][1]: input=40 * weight=1 = 40, partial_in=-8 -> result=32
  PE[1][2]: input=40 * weight=1 = 40, partial_in=-16 -> result=24
  PE[1][3]: input=40 * weight=2 = 80, partial_in=-8 -> result=72
  PE[2][0]: input=12 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=12 * weight=1 = 12, partial_in=-32 -> result=-20
  PE[2][2]: input=12 * weight=2 = 24, partial_in=-16 -> result=8
  PE[2][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -45       32       19       77 
  Row 1:      -40       32       24       72 
  Row 2:      -16      -20        8       12 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -45 │  32 │  19 │  77 │
├─────┼─────┼─────┼─────┤
│ -40 │  32 │  24 │  72 │
├─────┼─────┼─────┼─────┤
│ -16 │ -20 │   8 │  12 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 1
  Row 3: input_block[3][2] = 1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -40 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 24 (from PE[1][2])
  PE[0][3]: partial_in = 72 (from PE[1][3])
  PE[1][0]: partial_in = -16 (from PE[2][0])
  PE[1][1]: partial_in = -20 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 12 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-40 -> result=-40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=24 -> result=24
  PE[0][3]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-20 -> result=-20
  PE[1][2]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][3]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][0]: input=1 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=1 * weight=1 = 1, partial_in=-34 -> result=-33
  PE[2][2]: input=1 * weight=2 = 2, partial_in=-17 -> result=-15
  PE[2][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][0]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][1]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[3][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][3]: input=1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -40       32       24       72 
  Row 1:      -16      -20        8       12 
  Row 2:      -17      -33      -15        1 
  Row 3:        1        2        1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -40 │  32 │  24 │  72 │
├─────┼─────┼─────┼─────┤
│ -16 │ -20 │   8 │  12 │
├─────┼─────┼─────┼─────┤
│ -17 │ -33 │ -15 │   1 │
├─────┼─────┼─────┼─────┤
│   1 │   2 │   1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -16 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = 8 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = -17 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -15 (from PE[2][2])
  PE[1][3]: partial_in = 1 (from PE[2][3])
  PE[2][0]: partial_in = 1 (from PE[3][0])
  PE[2][1]: partial_in = 2 (from PE[3][1])
  PE[2][2]: partial_in = 1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-16 -> result=-16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[0][2]: input=0 * weight=0 = 0, partial_in=8 -> result=8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-33 -> result=-33
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][3]: input=0 * weight=2 = 0, partial_in=1 -> result=1
  PE[2][0]: input=0 * weight=0 = 0, partial_in=1 -> result=1
  PE[2][1]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[2][2]: input=0 * weight=2 = 0, partial_in=1 -> result=1
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][1]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[3][2]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][3]: input=-12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -16      -20        8       12 
  Row 1:      -17      -33      -15        1 
  Row 2:        1        2        1        0 
  Row 3:      -12      -24      -12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │ -20 │   8 │  12 │
├─────┼─────┼─────┼─────┤
│ -17 │ -33 │ -15 │   1 │
├─────┼─────┼─────┼─────┤
│   1 │   2 │   1 │   0 │
├─────┼─────┼─────┼─────┤
│ -12 │ -24 │ -12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -16      -20        8       12 
Row 1:      -17      -33      -15        1 
Row 2:        1        2        1        0 
Row 3:      -12      -24      -12        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -16 -> clamp(-16) -> final(112)
  PE[0][1]: -20 -> clamp(-20) -> final(108)
  PE[0][2]: 8 -> clamp(8) -> final(136)
  PE[0][3]: 12 -> clamp(12) -> final(140)
  PE[1][0]: -17 -> clamp(-17) -> final(111)
  PE[1][1]: -33 -> clamp(-33) -> final(95)
  PE[1][2]: -15 -> clamp(-15) -> final(113)
  PE[1][3]: 1 -> clamp(1) -> final(129)
  PE[2][0]: 1 -> clamp(1) -> final(129)
  PE[2][1]: 2 -> clamp(2) -> final(130)
  PE[2][2]: 1 -> clamp(1) -> final(129)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -12 -> clamp(-12) -> final(116)
  PE[3][1]: -24 -> clamp(-24) -> final(104)
  PE[3][2]: -12 -> clamp(-12) -> final(116)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   112    108    136    140 
   111     95    113    129 
   129    130    129    128 
   116    104    116    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  29  -24  -35   -1 
   3  -25  -15   11 
 -37  -34   -4    3 
 -47  -22   18    8 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 29
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=29 * weight=-2 = -58, partial_in=0 -> result=-58
  PE[0][1]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[0][2]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -58      -29        0       29 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │ -29 │   0 │  29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -24
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=0 -> result=48
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       48       24        0      -24 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │  24 │   0 │ -24 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -35
  Row 1: input_block[1][1] = -25
  Row 2: input_block[2][0] = -37
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=-3 -> result=67
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=3 -> result=38
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=6 -> result=-29
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       67       38        3      -29 
  Row 1:       25      -25      -25      -50 
  Row 2:        0      -37      -74      -37 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  67 │  38 │   3 │ -29 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -1
  Row 1: input_block[1][2] = -15
  Row 2: input_block[2][1] = -34
  Row 3: input_block[3][0] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=25 -> result=27
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=-25 -> result=-24
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=-50 -> result=-51
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=-37 -> result=-52
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=-74 -> result=-89
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=-37 -> result=-67
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       27      -24      -25      -51 
  Row 1:       15      -52      -89      -67 
  Row 2:        0      -34      -68      -34 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -24 │ -25 │ -51 │
├─────┼─────┼─────┼─────┤
│  15 │ -52 │ -89 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │ -34 │ -68 │ -34 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 11
  Row 2: input_block[2][2] = -4
  Row 3: input_block[3][1] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -89 (from PE[1][2])
  PE[0][3]: partial_in = -67 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -34 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -47 (from PE[3][0])
  PE[2][1]: partial_in = -94 (from PE[3][1])
  PE[2][2]: partial_in = -47 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-89 -> result=-89
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=-34 -> result=-23
  PE[1][2]: input=11 * weight=1 = 11, partial_in=-68 -> result=-57
  PE[1][3]: input=11 * weight=2 = 22, partial_in=-34 -> result=-12
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=-94 -> result=-98
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=-47 -> result=-55
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       15      -52      -89      -67 
  Row 1:      -11      -23      -57      -12 
  Row 2:      -47      -98      -55       -4 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │ -52 │ -89 │ -67 │
├─────┼─────┼─────┼─────┤
│ -11 │ -23 │ -57 │ -12 │
├─────┼─────┼─────┼─────┤
│ -47 │ -98 │ -55 │  -4 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 3
  Row 3: input_block[3][2] = 18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -23 (from PE[1][1])
  PE[0][2]: partial_in = -57 (from PE[1][2])
  PE[0][3]: partial_in = -12 (from PE[1][3])
  PE[1][0]: partial_in = -47 (from PE[2][0])
  PE[1][1]: partial_in = -98 (from PE[2][1])
  PE[1][2]: partial_in = -55 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][0]: input=3 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=3 * weight=1 = 3, partial_in=-44 -> result=-41
  PE[2][2]: input=3 * weight=2 = 6, partial_in=-22 -> result=-16
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][1]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[3][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][3]: input=18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -11      -23      -57      -12 
  Row 1:      -47      -98      -55       -4 
  Row 2:      -22      -41      -16        3 
  Row 3:       18       36       18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -23 │ -57 │ -12 │
├─────┼─────┼─────┼─────┤
│ -47 │ -98 │ -55 │  -4 │
├─────┼─────┼─────┼─────┤
│ -22 │ -41 │ -16 │   3 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -47 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = -22 (from PE[2][0])
  PE[1][1]: partial_in = -41 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = 18 (from PE[3][0])
  PE[2][1]: partial_in = 36 (from PE[3][1])
  PE[2][2]: partial_in = 18 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-47 -> result=-47
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-98 -> result=-98
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-4 -> result=-4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-41 -> result=-41
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][3]: input=0 * weight=2 = 0, partial_in=3 -> result=3
  PE[2][0]: input=0 * weight=0 = 0, partial_in=18 -> result=18
  PE[2][1]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[2][2]: input=0 * weight=2 = 0, partial_in=18 -> result=18
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -47      -98      -55       -4 
  Row 1:      -22      -41      -16        3 
  Row 2:       18       36       18        0 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -47 │ -98 │ -55 │  -4 │
├─────┼─────┼─────┼─────┤
│ -22 │ -41 │ -16 │   3 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -47      -98      -55       -4 
Row 1:      -22      -41      -16        3 
Row 2:       18       36       18        0 
Row 3:        8       16        8        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -47 -> clamp(-47) -> final(81)
  PE[0][1]: -98 -> clamp(-98) -> final(30)
  PE[0][2]: -55 -> clamp(-55) -> final(73)
  PE[0][3]: -4 -> clamp(-4) -> final(124)
  PE[1][0]: -22 -> clamp(-22) -> final(106)
  PE[1][1]: -41 -> clamp(-41) -> final(87)
  PE[1][2]: -16 -> clamp(-16) -> final(112)
  PE[1][3]: 3 -> clamp(3) -> final(131)
  PE[2][0]: 18 -> clamp(18) -> final(146)
  PE[2][1]: 36 -> clamp(36) -> final(164)
  PE[2][2]: 18 -> clamp(18) -> final(146)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 8 -> clamp(8) -> final(136)
  PE[3][1]: 16 -> clamp(16) -> final(144)
  PE[3][2]: 8 -> clamp(8) -> final(136)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    81     30     73    124 
   106     87    112    131 
   146    164    146    128 
   136    144    136    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -3   15    9  -53 
  12   58   -8  -53 
  41   37  -54  -64 
  30  -73  -79  -49 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        6        3        0       -3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 15
  Row 1: input_block[1][0] = 12
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=0 -> result=-30
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=0 -> result=-15
  PE[0][2]: input=15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][3]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -30      -15        0       15 
  Row 1:      -12       12       12       24 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -30 │ -15 │   0 │  15 │
├─────┼─────┼─────┼─────┤
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 9
  Row 1: input_block[1][1] = 58
  Row 2: input_block[2][0] = 41
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=-12 -> result=-30
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=12 -> result=3
  PE[0][2]: input=9 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=9 * weight=1 = 9, partial_in=24 -> result=33
  PE[1][0]: input=58 * weight=-1 = -58, partial_in=0 -> result=-58
  PE[1][1]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[1][2]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[1][3]: input=58 * weight=2 = 116, partial_in=0 -> result=116
  PE[2][0]: input=41 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[2][2]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[2][3]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -30        3       12       33 
  Row 1:      -58       58       58      116 
  Row 2:        0       41       82       41 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -30 │   3 │  12 │  33 │
├─────┼─────┼─────┼─────┤
│ -58 │  58 │  58 │ 116 │
├─────┼─────┼─────┼─────┤
│   0 │  41 │  82 │  41 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -53
  Row 1: input_block[1][2] = -8
  Row 2: input_block[2][1] = 37
  Row 3: input_block[3][0] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -58 (from PE[1][0])
  PE[0][1]: partial_in = 58 (from PE[1][1])
  PE[0][2]: partial_in = 58 (from PE[1][2])
  PE[0][3]: partial_in = 116 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 41 (from PE[2][1])
  PE[1][2]: partial_in = 82 (from PE[2][2])
  PE[1][3]: partial_in = 41 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=-58 -> result=48
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=58 -> result=111
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=58 -> result=58
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=116 -> result=63
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=41 -> result=33
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=82 -> result=74
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=41 -> result=25
  PE[2][0]: input=37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[2][2]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[2][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       48      111       58       63 
  Row 1:        8       33       74       25 
  Row 2:        0       37       74       37 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │ 111 │  58 │  63 │
├─────┼─────┼─────┼─────┤
│   8 │  33 │  74 │  25 │
├─────┼─────┼─────┼─────┤
│   0 │  37 │  74 │  37 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -53
  Row 2: input_block[2][2] = -54
  Row 3: input_block[3][1] = -73

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = 33 (from PE[1][1])
  PE[0][2]: partial_in = 74 (from PE[1][2])
  PE[0][3]: partial_in = 25 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 37 (from PE[2][1])
  PE[1][2]: partial_in = 74 (from PE[2][2])
  PE[1][3]: partial_in = 37 (from PE[2][3])
  PE[2][0]: partial_in = 30 (from PE[3][0])
  PE[2][1]: partial_in = 60 (from PE[3][1])
  PE[2][2]: partial_in = 30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=8 -> result=8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[0][2]: input=0 * weight=0 = 0, partial_in=74 -> result=74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=25 -> result=25
  PE[1][0]: input=-53 * weight=-1 = 53, partial_in=0 -> result=53
  PE[1][1]: input=-53 * weight=1 = -53, partial_in=37 -> result=-16
  PE[1][2]: input=-53 * weight=1 = -53, partial_in=74 -> result=21
  PE[1][3]: input=-53 * weight=2 = -106, partial_in=37 -> result=-69
  PE[2][0]: input=-54 * weight=0 = 0, partial_in=30 -> result=30
  PE[2][1]: input=-54 * weight=1 = -54, partial_in=60 -> result=6
  PE[2][2]: input=-54 * weight=2 = -108, partial_in=30 -> result=-78
  PE[2][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][0]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][1]: input=-73 * weight=2 = -146, partial_in=0 -> result=-146
  PE[3][2]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][3]: input=-73 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        8       33       74       25 
  Row 1:       53      -16       21      -69 
  Row 2:       30        6      -78      -54 
  Row 3:      -73     -146      -73        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │  33 │  74 │  25 │
├─────┼─────┼─────┼─────┤
│  53 │ -16 │  21 │ -69 │
├─────┼─────┼─────┼─────┤
│  30 │   6 │ -78 │ -54 │
├─────┼─────┼─────┼─────┤
│ -73 │-146 │ -73 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -64
  Row 3: input_block[3][2] = -79

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 53 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = -69 (from PE[1][3])
  PE[1][0]: partial_in = 30 (from PE[2][0])
  PE[1][1]: partial_in = 6 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -54 (from PE[2][3])
  PE[2][0]: partial_in = -73 (from PE[3][0])
  PE[2][1]: partial_in = -146 (from PE[3][1])
  PE[2][2]: partial_in = -73 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=53 -> result=53
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-54 -> result=-54
  PE[2][0]: input=-64 * weight=0 = 0, partial_in=-73 -> result=-73
  PE[2][1]: input=-64 * weight=1 = -64, partial_in=-146 -> result=-210
  PE[2][2]: input=-64 * weight=2 = -128, partial_in=-73 -> result=-201
  PE[2][3]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][0]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][1]: input=-79 * weight=2 = -158, partial_in=0 -> result=-158
  PE[3][2]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][3]: input=-79 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       53      -16       21      -69 
  Row 1:       30        6      -78      -54 
  Row 2:      -73     -210     -201      -64 
  Row 3:      -79     -158      -79        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  53 │ -16 │  21 │ -69 │
├─────┼─────┼─────┼─────┤
│  30 │   6 │ -78 │ -54 │
├─────┼─────┼─────┼─────┤
│ -73 │-210 │-201 │ -64 │
├─────┼─────┼─────┼─────┤
│ -79 │-158 │ -79 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -49

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = -78 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = -73 (from PE[2][0])
  PE[1][1]: partial_in = -210 (from PE[2][1])
  PE[1][2]: partial_in = -201 (from PE[2][2])
  PE[1][3]: partial_in = -64 (from PE[2][3])
  PE[2][0]: partial_in = -79 (from PE[3][0])
  PE[2][1]: partial_in = -158 (from PE[3][1])
  PE[2][2]: partial_in = -79 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=30 -> result=30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=6 -> result=6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-78 -> result=-78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-210 -> result=-210
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-201 -> result=-201
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-64 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-79 -> result=-79
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-158 -> result=-158
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-79 -> result=-79
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][1]: input=-49 * weight=2 = -98, partial_in=0 -> result=-98
  PE[3][2]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][3]: input=-49 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       30        6      -78      -54 
  Row 1:      -73     -210     -201      -64 
  Row 2:      -79     -158      -79        0 
  Row 3:      -49      -98      -49        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │   6 │ -78 │ -54 │
├─────┼─────┼─────┼─────┤
│ -73 │-210 │-201 │ -64 │
├─────┼─────┼─────┼─────┤
│ -79 │-158 │ -79 │   0 │
├─────┼─────┼─────┼─────┤
│ -49 │ -98 │ -49 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       30        6      -78      -54 
Row 1:      -73     -210     -201      -64 
Row 2:      -79     -158      -79        0 
Row 3:      -49      -98      -49        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 30 -> clamp(30) -> final(158)
  PE[0][1]: 6 -> clamp(6) -> final(134)
  PE[0][2]: -78 -> clamp(-78) -> final(50)
  PE[0][3]: -54 -> clamp(-54) -> final(74)
  PE[1][0]: -73 -> clamp(-73) -> final(55)
  PE[1][1]: -210 -> clamp(-128) -> final(0)
  PE[1][2]: -201 -> clamp(-128) -> final(0)
  PE[1][3]: -64 -> clamp(-64) -> final(64)
  PE[2][0]: -79 -> clamp(-79) -> final(49)
  PE[2][1]: -158 -> clamp(-128) -> final(0)
  PE[2][2]: -79 -> clamp(-79) -> final(49)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -49 -> clamp(-49) -> final(79)
  PE[3][1]: -98 -> clamp(-98) -> final(30)
  PE[3][2]: -49 -> clamp(-49) -> final(79)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   158    134     50     74 
    55      0      0     64 
    49      0     49    128 
    79     30     79    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -55  -24  -43  -41 
 -32  -33  -39  -47 
  -8  -22  -42  -36 
 -37  -28  -42  -40 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -55
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-55 * weight=-2 = 110, partial_in=0 -> result=110
  PE[0][1]: input=-55 * weight=-1 = 55, partial_in=0 -> result=55
  PE[0][2]: input=-55 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      110       55        0      -55 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 110 │  55 │   0 │ -55 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -24
  Row 1: input_block[1][0] = -32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=0 -> result=48
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       48       24        0      -24 
  Row 1:       32      -32      -32      -64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │  24 │   0 │ -24 │
├─────┼─────┼─────┼─────┤
│  32 │ -32 │ -32 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -43
  Row 1: input_block[1][1] = -33
  Row 2: input_block[2][0] = -8
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=32 -> result=118
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=-32 -> result=11
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=-64 -> result=-107
  PE[1][0]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[1][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[1][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[1][3]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      118       11      -32     -107 
  Row 1:       33      -33      -33      -66 
  Row 2:        0       -8      -16       -8 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 118 │  11 │ -32 │-107 │
├─────┼─────┼─────┼─────┤
│  33 │ -33 │ -33 │ -66 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -41
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = -22
  Row 3: input_block[3][0] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = -33 (from PE[1][1])
  PE[0][2]: partial_in = -33 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=33 -> result=115
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=-33 -> result=8
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=-66 -> result=-107
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=-8 -> result=-47
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=-16 -> result=-55
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=-8 -> result=-86
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      115        8      -33     -107 
  Row 1:       39      -47      -55      -86 
  Row 2:        0      -22      -44      -22 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 115 │   8 │ -33 │-107 │
├─────┼─────┼─────┼─────┤
│  39 │ -47 │ -55 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │ -22 │ -44 │ -22 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -47
  Row 2: input_block[2][2] = -42
  Row 3: input_block[3][1] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -47 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -22 (from PE[2][1])
  PE[1][2]: partial_in = -44 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-86 -> result=-86
  PE[1][0]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[1][1]: input=-47 * weight=1 = -47, partial_in=-22 -> result=-69
  PE[1][2]: input=-47 * weight=1 = -47, partial_in=-44 -> result=-91
  PE[1][3]: input=-47 * weight=2 = -94, partial_in=-22 -> result=-116
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=-74 -> result=-116
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=-37 -> result=-121
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39      -47      -55      -86 
  Row 1:       47      -69      -91     -116 
  Row 2:      -37     -116     -121      -42 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -47 │ -55 │ -86 │
├─────┼─────┼─────┼─────┤
│  47 │ -69 │ -91 │-116 │
├─────┼─────┼─────┼─────┤
│ -37 │-116 │-121 │ -42 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -36
  Row 3: input_block[3][2] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 47 (from PE[1][0])
  PE[0][1]: partial_in = -69 (from PE[1][1])
  PE[0][2]: partial_in = -91 (from PE[1][2])
  PE[0][3]: partial_in = -116 (from PE[1][3])
  PE[1][0]: partial_in = -37 (from PE[2][0])
  PE[1][1]: partial_in = -116 (from PE[2][1])
  PE[1][2]: partial_in = -121 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=47 -> result=47
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-69 -> result=-69
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-121 -> result=-121
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-56 -> result=-92
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-28 -> result=-100
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       47      -69      -91     -116 
  Row 1:      -37     -116     -121      -42 
  Row 2:      -28      -92     -100      -36 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  47 │ -69 │ -91 │-116 │
├─────┼─────┼─────┼─────┤
│ -37 │-116 │-121 │ -42 │
├─────┼─────┼─────┼─────┤
│ -28 │ -92 │-100 │ -36 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -37 (from PE[1][0])
  PE[0][1]: partial_in = -116 (from PE[1][1])
  PE[0][2]: partial_in = -121 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -92 (from PE[2][1])
  PE[1][2]: partial_in = -100 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -42 (from PE[3][0])
  PE[2][1]: partial_in = -84 (from PE[3][1])
  PE[2][2]: partial_in = -42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-37 -> result=-37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-116 -> result=-116
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-121 -> result=-121
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -37     -116     -121      -42 
  Row 1:      -28      -92     -100      -36 
  Row 2:      -42      -84      -42        0 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -37 │-116 │-121 │ -42 │
├─────┼─────┼─────┼─────┤
│ -28 │ -92 │-100 │ -36 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -37     -116     -121      -42 
Row 1:      -28      -92     -100      -36 
Row 2:      -42      -84      -42        0 
Row 3:      -40      -80      -40        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -37 -> clamp(-37) -> final(91)
  PE[0][1]: -116 -> clamp(-116) -> final(12)
  PE[0][2]: -121 -> clamp(-121) -> final(7)
  PE[0][3]: -42 -> clamp(-42) -> final(86)
  PE[1][0]: -28 -> clamp(-28) -> final(100)
  PE[1][1]: -92 -> clamp(-92) -> final(36)
  PE[1][2]: -100 -> clamp(-100) -> final(28)
  PE[1][3]: -36 -> clamp(-36) -> final(92)
  PE[2][0]: -42 -> clamp(-42) -> final(86)
  PE[2][1]: -84 -> clamp(-84) -> final(44)
  PE[2][2]: -42 -> clamp(-42) -> final(86)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -40 -> clamp(-40) -> final(88)
  PE[3][1]: -80 -> clamp(-80) -> final(48)
  PE[3][2]: -40 -> clamp(-40) -> final(88)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    91     12      7     86 
   100     36     28     92 
    86     44     86    128 
    88     48     88    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -31  -37  -39  -37 
 -41  -62  -47  -11 
 -27  -42  -15   19 
 -48  -39   -4   10 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -31
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=0 -> result=62
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       62       31        0      -31 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  62 │  31 │   0 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -37
  Row 1: input_block[1][0] = -41
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-37 * weight=-2 = 74, partial_in=0 -> result=74
  PE[0][1]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[0][2]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       74       37        0      -37 
  Row 1:       41      -41      -41      -82 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  74 │  37 │   0 │ -37 │
├─────┼─────┼─────┼─────┤
│  41 │ -41 │ -41 │ -82 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -39
  Row 1: input_block[1][1] = -62
  Row 2: input_block[2][0] = -27
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -41 (from PE[1][1])
  PE[0][2]: partial_in = -41 (from PE[1][2])
  PE[0][3]: partial_in = -82 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=41 -> result=119
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=-41 -> result=-2
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=-41 -> result=-41
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=-82 -> result=-121
  PE[1][0]: input=-62 * weight=-1 = 62, partial_in=0 -> result=62
  PE[1][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][3]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      119       -2      -41     -121 
  Row 1:       62      -62      -62     -124 
  Row 2:        0      -27      -54      -27 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 119 │  -2 │ -41 │-121 │
├─────┼─────┼─────┼─────┤
│  62 │ -62 │ -62 │-124 │
├─────┼─────┼─────┼─────┤
│   0 │ -27 │ -54 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -37
  Row 1: input_block[1][2] = -47
  Row 2: input_block[2][1] = -42
  Row 3: input_block[3][0] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 62 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -62 (from PE[1][2])
  PE[0][3]: partial_in = -124 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-37 * weight=-2 = 74, partial_in=62 -> result=136
  PE[0][1]: input=-37 * weight=-1 = 37, partial_in=-62 -> result=-25
  PE[0][2]: input=-37 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[0][3]: input=-37 * weight=1 = -37, partial_in=-124 -> result=-161
  PE[1][0]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[1][1]: input=-47 * weight=1 = -47, partial_in=-27 -> result=-74
  PE[1][2]: input=-47 * weight=1 = -47, partial_in=-54 -> result=-101
  PE[1][3]: input=-47 * weight=2 = -94, partial_in=-27 -> result=-121
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      136      -25      -62     -161 
  Row 1:       47      -74     -101     -121 
  Row 2:        0      -42      -84      -42 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 136 │ -25 │ -62 │-161 │
├─────┼─────┼─────┼─────┤
│  47 │ -74 │-101 │-121 │
├─────┼─────┼─────┼─────┤
│   0 │ -42 │ -84 │ -42 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -11
  Row 2: input_block[2][2] = -15
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 47 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -101 (from PE[1][2])
  PE[0][3]: partial_in = -121 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -42 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=47 -> result=47
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-74 -> result=-74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-101 -> result=-101
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-121 -> result=-121
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=-42 -> result=-53
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=-84 -> result=-95
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=-42 -> result=-64
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=-96 -> result=-111
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=-48 -> result=-78
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       47      -74     -101     -121 
  Row 1:       11      -53      -95      -64 
  Row 2:      -48     -111      -78      -15 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  47 │ -74 │-101 │-121 │
├─────┼─────┼─────┼─────┤
│  11 │ -53 │ -95 │ -64 │
├─────┼─────┼─────┼─────┤
│ -48 │-111 │ -78 │ -15 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 19
  Row 3: input_block[3][2] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -53 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = -48 (from PE[2][0])
  PE[1][1]: partial_in = -111 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=11 -> result=11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-15 -> result=-15
  PE[2][0]: input=19 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=19 * weight=1 = 19, partial_in=-78 -> result=-59
  PE[2][2]: input=19 * weight=2 = 38, partial_in=-39 -> result=-1
  PE[2][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       11      -53      -95      -64 
  Row 1:      -48     -111      -78      -15 
  Row 2:      -39      -59       -1       19 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  11 │ -53 │ -95 │ -64 │
├─────┼─────┼─────┼─────┤
│ -48 │-111 │ -78 │ -15 │
├─────┼─────┼─────┼─────┤
│ -39 │ -59 │  -1 │  19 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -48 (from PE[1][0])
  PE[0][1]: partial_in = -111 (from PE[1][1])
  PE[0][2]: partial_in = -78 (from PE[1][2])
  PE[0][3]: partial_in = -15 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -1 (from PE[2][2])
  PE[1][3]: partial_in = 19 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-48 -> result=-48
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-111 -> result=-111
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-78 -> result=-78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-59 -> result=-59
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][3]: input=0 * weight=2 = 0, partial_in=19 -> result=19
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -48     -111      -78      -15 
  Row 1:      -39      -59       -1       19 
  Row 2:       -4       -8       -4        0 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │-111 │ -78 │ -15 │
├─────┼─────┼─────┼─────┤
│ -39 │ -59 │  -1 │  19 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -48     -111      -78      -15 
Row 1:      -39      -59       -1       19 
Row 2:       -4       -8       -4        0 
Row 3:       10       20       10        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -48 -> clamp(-48) -> final(80)
  PE[0][1]: -111 -> clamp(-111) -> final(17)
  PE[0][2]: -78 -> clamp(-78) -> final(50)
  PE[0][3]: -15 -> clamp(-15) -> final(113)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -59 -> clamp(-59) -> final(69)
  PE[1][2]: -1 -> clamp(-1) -> final(127)
  PE[1][3]: 19 -> clamp(19) -> final(147)
  PE[2][0]: -4 -> clamp(-4) -> final(124)
  PE[2][1]: -8 -> clamp(-8) -> final(120)
  PE[2][2]: -4 -> clamp(-4) -> final(124)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 10 -> clamp(10) -> final(138)
  PE[3][1]: 20 -> clamp(20) -> final(148)
  PE[3][2]: 10 -> clamp(10) -> final(138)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    80     17     50    113 
    89     69    127    147 
   124    120    124    128 
   138    148    138    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -34  -31  -33  -41 
  -9  -27  -34  -30 
   2  -31  -37  -30 
 -20  -40  -35  -34 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -34
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       68       34        0      -34 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -31
  Row 1: input_block[1][0] = -9
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=0 -> result=62
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][0]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[1][1]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][3]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       62       31        0      -31 
  Row 1:        9       -9       -9      -18 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  62 │  31 │   0 │ -31 │
├─────┼─────┼─────┼─────┤
│   9 │  -9 │  -9 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -33
  Row 1: input_block[1][1] = -27
  Row 2: input_block[2][0] = 2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 9 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -9 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=9 -> result=75
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-9 -> result=24
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-18 -> result=-51
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[2][2]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][3]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       75       24       -9      -51 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        2        4        2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │  24 │  -9 │ -51 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   2 │   4 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -41
  Row 1: input_block[1][2] = -34
  Row 2: input_block[2][1] = -31
  Row 3: input_block[3][0] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 4 (from PE[2][2])
  PE[1][3]: partial_in = 2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=27 -> result=109
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=-27 -> result=14
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=-54 -> result=-95
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=2 -> result=-32
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=4 -> result=-30
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=2 -> result=-66
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      109       14      -27      -95 
  Row 1:       34      -32      -30      -66 
  Row 2:        0      -31      -62      -31 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 109 │  14 │ -27 │ -95 │
├─────┼─────┼─────┼─────┤
│  34 │ -32 │ -30 │ -66 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -30
  Row 2: input_block[2][2] = -37
  Row 3: input_block[3][1] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=34 -> result=34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=-31 -> result=-61
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=-62 -> result=-92
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=-31 -> result=-91
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-40 -> result=-77
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-20 -> result=-94
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       34      -32      -30      -66 
  Row 1:       30      -61      -92      -91 
  Row 2:      -20      -77      -94      -37 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │ -32 │ -30 │ -66 │
├─────┼─────┼─────┼─────┤
│  30 │ -61 │ -92 │ -91 │
├─────┼─────┼─────┼─────┤
│ -20 │ -77 │ -94 │ -37 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -30
  Row 3: input_block[3][2] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -61 (from PE[1][1])
  PE[0][2]: partial_in = -92 (from PE[1][2])
  PE[0][3]: partial_in = -91 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -77 (from PE[2][1])
  PE[1][2]: partial_in = -94 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=30 -> result=30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-61 -> result=-61
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-92 -> result=-92
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-77 -> result=-77
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-80 -> result=-110
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-40 -> result=-100
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       30      -61      -92      -91 
  Row 1:      -20      -77      -94      -37 
  Row 2:      -40     -110     -100      -30 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │ -61 │ -92 │ -91 │
├─────┼─────┼─────┼─────┤
│ -20 │ -77 │ -94 │ -37 │
├─────┼─────┼─────┼─────┤
│ -40 │-110 │-100 │ -30 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = -77 (from PE[1][1])
  PE[0][2]: partial_in = -94 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = -40 (from PE[2][0])
  PE[1][1]: partial_in = -110 (from PE[2][1])
  PE[1][2]: partial_in = -100 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-77 -> result=-77
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-94 -> result=-94
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-40 -> result=-40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-110 -> result=-110
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -20      -77      -94      -37 
  Row 1:      -40     -110     -100      -30 
  Row 2:      -35      -70      -35        0 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -77 │ -94 │ -37 │
├─────┼─────┼─────┼─────┤
│ -40 │-110 │-100 │ -30 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -20      -77      -94      -37 
Row 1:      -40     -110     -100      -30 
Row 2:      -35      -70      -35        0 
Row 3:      -34      -68      -34        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -20 -> clamp(-20) -> final(108)
  PE[0][1]: -77 -> clamp(-77) -> final(51)
  PE[0][2]: -94 -> clamp(-94) -> final(34)
  PE[0][3]: -37 -> clamp(-37) -> final(91)
  PE[1][0]: -40 -> clamp(-40) -> final(88)
  PE[1][1]: -110 -> clamp(-110) -> final(18)
  PE[1][2]: -100 -> clamp(-100) -> final(28)
  PE[1][3]: -30 -> clamp(-30) -> final(98)
  PE[2][0]: -35 -> clamp(-35) -> final(93)
  PE[2][1]: -70 -> clamp(-70) -> final(58)
  PE[2][2]: -35 -> clamp(-35) -> final(93)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -34 -> clamp(-34) -> final(94)
  PE[3][1]: -68 -> clamp(-68) -> final(60)
  PE[3][2]: -34 -> clamp(-34) -> final(94)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   108     51     34     91 
    88     18     28     98 
    93     58     93    128 
    94     60     94    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -27  -34  -34  -26 
 -26  -37  -40  -32 
 -28  -35  -39  -36 
 -36  -34  -33  -32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -27
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=0 -> result=54
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       54       27        0      -27 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │  27 │   0 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -34
  Row 1: input_block[1][0] = -26
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       68       34        0      -34 
  Row 1:       26      -26      -26      -52 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -34
  Row 1: input_block[1][1] = -37
  Row 2: input_block[2][0] = -28
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=26 -> result=94
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-26 -> result=8
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-52 -> result=-86
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       94        8      -26      -86 
  Row 1:       37      -37      -37      -74 
  Row 2:        0      -28      -56      -28 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  94 │   8 │ -26 │ -86 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -26
  Row 1: input_block[1][2] = -40
  Row 2: input_block[2][1] = -35
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=37 -> result=89
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=-37 -> result=-11
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=-74 -> result=-100
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=-28 -> result=-68
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=-56 -> result=-96
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=-28 -> result=-108
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       89      -11      -37     -100 
  Row 1:       40      -68      -96     -108 
  Row 2:        0      -35      -70      -35 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  89 │ -11 │ -37 │-100 │
├─────┼─────┼─────┼─────┤
│  40 │ -68 │ -96 │-108 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -32
  Row 2: input_block[2][2] = -39
  Row 3: input_block[3][1] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -108 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-68 -> result=-68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-35 -> result=-67
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-70 -> result=-102
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-35 -> result=-99
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-72 -> result=-111
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-36 -> result=-114
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       40      -68      -96     -108 
  Row 1:       32      -67     -102      -99 
  Row 2:      -36     -111     -114      -39 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ -68 │ -96 │-108 │
├─────┼─────┼─────┼─────┤
│  32 │ -67 │-102 │ -99 │
├─────┼─────┼─────┼─────┤
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -36
  Row 3: input_block[3][2] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -67 (from PE[1][1])
  PE[0][2]: partial_in = -102 (from PE[1][2])
  PE[0][3]: partial_in = -99 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -111 (from PE[2][1])
  PE[1][2]: partial_in = -114 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-67 -> result=-67
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-102 -> result=-102
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-99 -> result=-99
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-114 -> result=-114
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-68 -> result=-104
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-34 -> result=-106
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       32      -67     -102      -99 
  Row 1:      -36     -111     -114      -39 
  Row 2:      -34     -104     -106      -36 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -67 │-102 │ -99 │
├─────┼─────┼─────┼─────┤
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -34 │-104 │-106 │ -36 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -111 (from PE[1][1])
  PE[0][2]: partial_in = -114 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = -34 (from PE[2][0])
  PE[1][1]: partial_in = -104 (from PE[2][1])
  PE[1][2]: partial_in = -106 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-111 -> result=-111
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-114 -> result=-114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-104 -> result=-104
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-106 -> result=-106
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36     -111     -114      -39 
  Row 1:      -34     -104     -106      -36 
  Row 2:      -33      -66      -33        0 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -34 │-104 │-106 │ -36 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36     -111     -114      -39 
Row 1:      -34     -104     -106      -36 
Row 2:      -33      -66      -33        0 
Row 3:      -32      -64      -32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -111 -> clamp(-111) -> final(17)
  PE[0][2]: -114 -> clamp(-114) -> final(14)
  PE[0][3]: -39 -> clamp(-39) -> final(89)
  PE[1][0]: -34 -> clamp(-34) -> final(94)
  PE[1][1]: -104 -> clamp(-104) -> final(24)
  PE[1][2]: -106 -> clamp(-106) -> final(22)
  PE[1][3]: -36 -> clamp(-36) -> final(92)
  PE[2][0]: -33 -> clamp(-33) -> final(95)
  PE[2][1]: -66 -> clamp(-66) -> final(62)
  PE[2][2]: -33 -> clamp(-33) -> final(95)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -32 -> clamp(-32) -> final(96)
  PE[3][1]: -64 -> clamp(-64) -> final(64)
  PE[3][2]: -32 -> clamp(-32) -> final(96)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92     17     14     89 
    94     24     22     92 
    95     62     95    128 
    96     64     96    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -26  -34  -35  -28 
 -24  -28  -35  -37 
 -30  -28  -32  -35 
 -29  -25  -23  -25 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       52       26        0      -26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -34
  Row 1: input_block[1][0] = -24
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       68       34        0      -34 
  Row 1:       24      -24      -24      -48 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│  24 │ -24 │ -24 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -35
  Row 1: input_block[1][1] = -28
  Row 2: input_block[2][0] = -30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -24 (from PE[1][2])
  PE[0][3]: partial_in = -48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=24 -> result=94
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=-24 -> result=11
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=-48 -> result=-83
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       94       11      -24      -83 
  Row 1:       28      -28      -28      -56 
  Row 2:        0      -30      -60      -30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  94 │  11 │ -24 │ -83 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │ -30 │ -60 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -28
  Row 1: input_block[1][2] = -35
  Row 2: input_block[2][1] = -28
  Row 3: input_block[3][0] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -60 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=28 -> result=84
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=-28 -> result=0
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=-56 -> result=-84
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=-30 -> result=-65
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=-60 -> result=-95
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=-30 -> result=-100
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       84        0      -28      -84 
  Row 1:       35      -65      -95     -100 
  Row 2:        0      -28      -56      -28 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  84 │   0 │ -28 │ -84 │
├─────┼─────┼─────┼─────┤
│  35 │ -65 │ -95 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -37
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=-28 -> result=-65
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=-56 -> result=-93
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=-28 -> result=-102
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=-58 -> result=-90
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=-29 -> result=-93
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       35      -65      -95     -100 
  Row 1:       37      -65      -93     -102 
  Row 2:      -29      -90      -93      -32 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -65 │ -95 │-100 │
├─────┼─────┼─────┼─────┤
│  37 │ -65 │ -93 │-102 │
├─────┼─────┼─────┼─────┤
│ -29 │ -90 │ -93 │ -32 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -35
  Row 3: input_block[3][2] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -93 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = -29 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = -93 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=37 -> result=37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-93 -> result=-93
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=-50 -> result=-85
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=-25 -> result=-95
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       37      -65      -93     -102 
  Row 1:      -29      -90      -93      -32 
  Row 2:      -25      -85      -95      -35 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  37 │ -65 │ -93 │-102 │
├─────┼─────┼─────┼─────┤
│ -29 │ -90 │ -93 │ -32 │
├─────┼─────┼─────┼─────┤
│ -25 │ -85 │ -95 │ -35 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = -90 (from PE[1][1])
  PE[0][2]: partial_in = -93 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -85 (from PE[2][1])
  PE[1][2]: partial_in = -95 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-29 -> result=-29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-90 -> result=-90
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-93 -> result=-93
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -29      -90      -93      -32 
  Row 1:      -25      -85      -95      -35 
  Row 2:      -23      -46      -23        0 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │ -90 │ -93 │ -32 │
├─────┼─────┼─────┼─────┤
│ -25 │ -85 │ -95 │ -35 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -29      -90      -93      -32 
Row 1:      -25      -85      -95      -35 
Row 2:      -23      -46      -23        0 
Row 3:      -25      -50      -25        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -29 -> clamp(-29) -> final(99)
  PE[0][1]: -90 -> clamp(-90) -> final(38)
  PE[0][2]: -93 -> clamp(-93) -> final(35)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: -25 -> clamp(-25) -> final(103)
  PE[1][1]: -85 -> clamp(-85) -> final(43)
  PE[1][2]: -95 -> clamp(-95) -> final(33)
  PE[1][3]: -35 -> clamp(-35) -> final(93)
  PE[2][0]: -23 -> clamp(-23) -> final(105)
  PE[2][1]: -46 -> clamp(-46) -> final(82)
  PE[2][2]: -23 -> clamp(-23) -> final(105)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -25 -> clamp(-25) -> final(103)
  PE[3][1]: -50 -> clamp(-50) -> final(78)
  PE[3][2]: -25 -> clamp(-25) -> final(103)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    99     38     35     96 
   103     43     33     93 
   105     82    105    128 
   103     78    103    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -41  -22  -25   -9 
 -32  -28  -29   -3 
 -27  -33  -36  -17 
 -36  -31  -32  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -41
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=0 -> result=82
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       82       41        0      -41 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │  41 │   0 │ -41 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -22
  Row 1: input_block[1][0] = -32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       44       22        0      -22 
  Row 1:       32      -32      -32      -64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│  32 │ -32 │ -32 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -25
  Row 1: input_block[1][1] = -28
  Row 2: input_block[2][0] = -27
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=32 -> result=82
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=-32 -> result=-7
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=-64 -> result=-89
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       82       -7      -32      -89 
  Row 1:       28      -28      -28      -56 
  Row 2:        0      -27      -54      -27 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │  -7 │ -32 │ -89 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │ -27 │ -54 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -9
  Row 1: input_block[1][2] = -29
  Row 2: input_block[2][1] = -33
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-9 * weight=-2 = 18, partial_in=28 -> result=46
  PE[0][1]: input=-9 * weight=-1 = 9, partial_in=-28 -> result=-19
  PE[0][2]: input=-9 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=-9 * weight=1 = -9, partial_in=-56 -> result=-65
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=-27 -> result=-56
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=-54 -> result=-83
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=-27 -> result=-85
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       46      -19      -28      -65 
  Row 1:       29      -56      -83      -85 
  Row 2:        0      -33      -66      -33 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │ -19 │ -28 │ -65 │
├─────┼─────┼─────┼─────┤
│  29 │ -56 │ -83 │ -85 │
├─────┼─────┼─────┼─────┤
│   0 │ -33 │ -66 │ -33 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -3
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -56 (from PE[1][1])
  PE[0][2]: partial_in = -83 (from PE[1][2])
  PE[0][3]: partial_in = -85 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-56 -> result=-56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-83 -> result=-83
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=-33 -> result=-36
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=-66 -> result=-69
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=-33 -> result=-39
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-72 -> result=-108
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-36 -> result=-108
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       29      -56      -83      -85 
  Row 1:        3      -36      -69      -39 
  Row 2:      -36     -108     -108      -36 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │ -56 │ -83 │ -85 │
├─────┼─────┼─────┼─────┤
│   3 │ -36 │ -69 │ -39 │
├─────┼─────┼─────┼─────┤
│ -36 │-108 │-108 │ -36 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -17
  Row 3: input_block[3][2] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -108 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=-62 -> result=-79
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=-31 -> result=-65
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        3      -36      -69      -39 
  Row 1:      -36     -108     -108      -36 
  Row 2:      -31      -79      -65      -17 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │ -36 │ -69 │ -39 │
├─────┼─────┼─────┼─────┤
│ -36 │-108 │-108 │ -36 │
├─────┼─────┼─────┼─────┤
│ -31 │ -79 │ -65 │ -17 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -108 (from PE[1][1])
  PE[0][2]: partial_in = -108 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = -31 (from PE[2][0])
  PE[1][1]: partial_in = -79 (from PE[2][1])
  PE[1][2]: partial_in = -65 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-108 -> result=-108
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-108 -> result=-108
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-31 -> result=-31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-79 -> result=-79
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-65 -> result=-65
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-17 -> result=-17
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36     -108     -108      -36 
  Row 1:      -31      -79      -65      -17 
  Row 2:      -32      -64      -32        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │-108 │-108 │ -36 │
├─────┼─────┼─────┼─────┤
│ -31 │ -79 │ -65 │ -17 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36     -108     -108      -36 
Row 1:      -31      -79      -65      -17 
Row 2:      -32      -64      -32        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -108 -> clamp(-108) -> final(20)
  PE[0][2]: -108 -> clamp(-108) -> final(20)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: -31 -> clamp(-31) -> final(97)
  PE[1][1]: -79 -> clamp(-79) -> final(49)
  PE[1][2]: -65 -> clamp(-65) -> final(63)
  PE[1][3]: -17 -> clamp(-17) -> final(111)
  PE[2][0]: -32 -> clamp(-32) -> final(96)
  PE[2][1]: -64 -> clamp(-64) -> final(64)
  PE[2][2]: -32 -> clamp(-32) -> final(96)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92     20     20     92 
    97     49     63    111 
    96     64     96    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -3   24   67   57 
   4   32   56   60 
  -7   29   28   43 
 -28   22    9   26 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        6        3        0       -3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 24
  Row 1: input_block[1][0] = 4
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=0 -> result=-48
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[0][2]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][0]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[1][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][2]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][3]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -48      -24        0       24 
  Row 1:       -4        4        4        8 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │ -24 │   0 │  24 │
├─────┼─────┼─────┼─────┤
│  -4 │   4 │   4 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 67
  Row 1: input_block[1][1] = 32
  Row 2: input_block[2][0] = -7
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = 4 (from PE[1][1])
  PE[0][2]: partial_in = 4 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=67 * weight=-2 = -134, partial_in=-4 -> result=-138
  PE[0][1]: input=67 * weight=-1 = -67, partial_in=4 -> result=-63
  PE[0][2]: input=67 * weight=0 = 0, partial_in=4 -> result=4
  PE[0][3]: input=67 * weight=1 = 67, partial_in=8 -> result=75
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][3]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -138      -63        4       75 
  Row 1:      -32       32       32       64 
  Row 2:        0       -7      -14       -7 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-138 │ -63 │   4 │  75 │
├─────┼─────┼─────┼─────┤
│ -32 │  32 │  32 │  64 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 57
  Row 1: input_block[1][2] = 56
  Row 2: input_block[2][1] = 29
  Row 3: input_block[3][0] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 32 (from PE[1][2])
  PE[0][3]: partial_in = 64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=57 * weight=-2 = -114, partial_in=-32 -> result=-146
  PE[0][1]: input=57 * weight=-1 = -57, partial_in=32 -> result=-25
  PE[0][2]: input=57 * weight=0 = 0, partial_in=32 -> result=32
  PE[0][3]: input=57 * weight=1 = 57, partial_in=64 -> result=121
  PE[1][0]: input=56 * weight=-1 = -56, partial_in=0 -> result=-56
  PE[1][1]: input=56 * weight=1 = 56, partial_in=-7 -> result=49
  PE[1][2]: input=56 * weight=1 = 56, partial_in=-14 -> result=42
  PE[1][3]: input=56 * weight=2 = 112, partial_in=-7 -> result=105
  PE[2][0]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[2][2]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -146      -25       32      121 
  Row 1:      -56       49       42      105 
  Row 2:        0       29       58       29 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-146 │ -25 │  32 │ 121 │
├─────┼─────┼─────┼─────┤
│ -56 │  49 │  42 │ 105 │
├─────┼─────┼─────┼─────┤
│   0 │  29 │  58 │  29 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 60
  Row 2: input_block[2][2] = 28
  Row 3: input_block[3][1] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -56 (from PE[1][0])
  PE[0][1]: partial_in = 49 (from PE[1][1])
  PE[0][2]: partial_in = 42 (from PE[1][2])
  PE[0][3]: partial_in = 105 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 29 (from PE[2][1])
  PE[1][2]: partial_in = 58 (from PE[2][2])
  PE[1][3]: partial_in = 29 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-56 -> result=-56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=49 -> result=49
  PE[0][2]: input=0 * weight=0 = 0, partial_in=42 -> result=42
  PE[0][3]: input=0 * weight=1 = 0, partial_in=105 -> result=105
  PE[1][0]: input=60 * weight=-1 = -60, partial_in=0 -> result=-60
  PE[1][1]: input=60 * weight=1 = 60, partial_in=29 -> result=89
  PE[1][2]: input=60 * weight=1 = 60, partial_in=58 -> result=118
  PE[1][3]: input=60 * weight=2 = 120, partial_in=29 -> result=149
  PE[2][0]: input=28 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=28 * weight=1 = 28, partial_in=-56 -> result=-28
  PE[2][2]: input=28 * weight=2 = 56, partial_in=-28 -> result=28
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -56       49       42      105 
  Row 1:      -60       89      118      149 
  Row 2:      -28      -28       28       28 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │  49 │  42 │ 105 │
├─────┼─────┼─────┼─────┤
│ -60 │  89 │ 118 │ 149 │
├─────┼─────┼─────┼─────┤
│ -28 │ -28 │  28 │  28 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 43
  Row 3: input_block[3][2] = 9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -60 (from PE[1][0])
  PE[0][1]: partial_in = 89 (from PE[1][1])
  PE[0][2]: partial_in = 118 (from PE[1][2])
  PE[0][3]: partial_in = 149 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = 28 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-60 -> result=-60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=89 -> result=89
  PE[0][2]: input=0 * weight=0 = 0, partial_in=118 -> result=118
  PE[0][3]: input=0 * weight=1 = 0, partial_in=149 -> result=149
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-28 -> result=-28
  PE[1][2]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][3]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][0]: input=43 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=43 * weight=1 = 43, partial_in=44 -> result=87
  PE[2][2]: input=43 * weight=2 = 86, partial_in=22 -> result=108
  PE[2][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][0]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][1]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[3][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][3]: input=9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -60       89      118      149 
  Row 1:      -28      -28       28       28 
  Row 2:       22       87      108       43 
  Row 3:        9       18        9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -60 │  89 │ 118 │ 149 │
├─────┼─────┼─────┼─────┤
│ -28 │ -28 │  28 │  28 │
├─────┼─────┼─────┼─────┤
│  22 │  87 │ 108 │  43 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = 28 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = 22 (from PE[2][0])
  PE[1][1]: partial_in = 87 (from PE[2][1])
  PE[1][2]: partial_in = 108 (from PE[2][2])
  PE[1][3]: partial_in = 43 (from PE[2][3])
  PE[2][0]: partial_in = 9 (from PE[3][0])
  PE[2][1]: partial_in = 18 (from PE[3][1])
  PE[2][2]: partial_in = 9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-28 -> result=-28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[0][2]: input=0 * weight=0 = 0, partial_in=28 -> result=28
  PE[0][3]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=87 -> result=87
  PE[1][2]: input=0 * weight=1 = 0, partial_in=108 -> result=108
  PE[1][3]: input=0 * weight=2 = 0, partial_in=43 -> result=43
  PE[2][0]: input=0 * weight=0 = 0, partial_in=9 -> result=9
  PE[2][1]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[2][2]: input=0 * weight=2 = 0, partial_in=9 -> result=9
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][1]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[3][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][3]: input=26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -28      -28       28       28 
  Row 1:       22       87      108       43 
  Row 2:        9       18        9        0 
  Row 3:       26       52       26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -28 │  28 │  28 │
├─────┼─────┼─────┼─────┤
│  22 │  87 │ 108 │  43 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
├─────┼─────┼─────┼─────┤
│  26 │  52 │  26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -28      -28       28       28 
Row 1:       22       87      108       43 
Row 2:        9       18        9        0 
Row 3:       26       52       26        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -28 -> clamp(-28) -> final(100)
  PE[0][1]: -28 -> clamp(-28) -> final(100)
  PE[0][2]: 28 -> clamp(28) -> final(156)
  PE[0][3]: 28 -> clamp(28) -> final(156)
  PE[1][0]: 22 -> clamp(22) -> final(150)
  PE[1][1]: 87 -> clamp(87) -> final(215)
  PE[1][2]: 108 -> clamp(108) -> final(236)
  PE[1][3]: 43 -> clamp(43) -> final(171)
  PE[2][0]: 9 -> clamp(9) -> final(137)
  PE[2][1]: 18 -> clamp(18) -> final(146)
  PE[2][2]: 9 -> clamp(9) -> final(137)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 26 -> clamp(26) -> final(154)
  PE[3][1]: 52 -> clamp(52) -> final(180)
  PE[3][2]: 26 -> clamp(26) -> final(154)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   100    100    156    156 
   150    215    236    171 
   137    146    137    128 
   154    180    154    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  73   46   24   13 
  57   45   32   20 
  38   40   37   25 
  28   38   38   26 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 73
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=73 * weight=-2 = -146, partial_in=0 -> result=-146
  PE[0][1]: input=73 * weight=-1 = -73, partial_in=0 -> result=-73
  PE[0][2]: input=73 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=73 * weight=1 = 73, partial_in=0 -> result=73
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:     -146      -73        0       73 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-146 │ -73 │   0 │  73 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 46
  Row 1: input_block[1][0] = 57
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=46 * weight=-2 = -92, partial_in=0 -> result=-92
  PE[0][1]: input=46 * weight=-1 = -46, partial_in=0 -> result=-46
  PE[0][2]: input=46 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=46 * weight=1 = 46, partial_in=0 -> result=46
  PE[1][0]: input=57 * weight=-1 = -57, partial_in=0 -> result=-57
  PE[1][1]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[1][2]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[1][3]: input=57 * weight=2 = 114, partial_in=0 -> result=114
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -92      -46        0       46 
  Row 1:      -57       57       57      114 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -92 │ -46 │   0 │  46 │
├─────┼─────┼─────┼─────┤
│ -57 │  57 │  57 │ 114 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 24
  Row 1: input_block[1][1] = 45
  Row 2: input_block[2][0] = 38
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -57 (from PE[1][0])
  PE[0][1]: partial_in = 57 (from PE[1][1])
  PE[0][2]: partial_in = 57 (from PE[1][2])
  PE[0][3]: partial_in = 114 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=-57 -> result=-105
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=57 -> result=33
  PE[0][2]: input=24 * weight=0 = 0, partial_in=57 -> result=57
  PE[0][3]: input=24 * weight=1 = 24, partial_in=114 -> result=138
  PE[1][0]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[1][1]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][2]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][3]: input=45 * weight=2 = 90, partial_in=0 -> result=90
  PE[2][0]: input=38 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[2][2]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[2][3]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -105       33       57      138 
  Row 1:      -45       45       45       90 
  Row 2:        0       38       76       38 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-105 │  33 │  57 │ 138 │
├─────┼─────┼─────┼─────┤
│ -45 │  45 │  45 │  90 │
├─────┼─────┼─────┼─────┤
│   0 │  38 │  76 │  38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 13
  Row 1: input_block[1][2] = 32
  Row 2: input_block[2][1] = 40
  Row 3: input_block[3][0] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = 45 (from PE[1][1])
  PE[0][2]: partial_in = 45 (from PE[1][2])
  PE[0][3]: partial_in = 90 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 38 (from PE[2][1])
  PE[1][2]: partial_in = 76 (from PE[2][2])
  PE[1][3]: partial_in = 38 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=-45 -> result=-71
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=45 -> result=32
  PE[0][2]: input=13 * weight=0 = 0, partial_in=45 -> result=45
  PE[0][3]: input=13 * weight=1 = 13, partial_in=90 -> result=103
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=38 -> result=70
  PE[1][2]: input=32 * weight=1 = 32, partial_in=76 -> result=108
  PE[1][3]: input=32 * weight=2 = 64, partial_in=38 -> result=102
  PE[2][0]: input=40 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[2][2]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[2][3]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -71       32       45      103 
  Row 1:      -32       70      108      102 
  Row 2:        0       40       80       40 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -71 │  32 │  45 │ 103 │
├─────┼─────┼─────┼─────┤
│ -32 │  70 │ 108 │ 102 │
├─────┼─────┼─────┼─────┤
│   0 │  40 │  80 │  40 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 20
  Row 2: input_block[2][2] = 37
  Row 3: input_block[3][1] = 38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 70 (from PE[1][1])
  PE[0][2]: partial_in = 108 (from PE[1][2])
  PE[0][3]: partial_in = 102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 40 (from PE[2][1])
  PE[1][2]: partial_in = 80 (from PE[2][2])
  PE[1][3]: partial_in = 40 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=70 -> result=70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=108 -> result=108
  PE[0][3]: input=0 * weight=1 = 0, partial_in=102 -> result=102
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=40 -> result=60
  PE[1][2]: input=20 * weight=1 = 20, partial_in=80 -> result=100
  PE[1][3]: input=20 * weight=2 = 40, partial_in=40 -> result=80
  PE[2][0]: input=37 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=37 * weight=1 = 37, partial_in=56 -> result=93
  PE[2][2]: input=37 * weight=2 = 74, partial_in=28 -> result=102
  PE[2][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][0]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][1]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[3][2]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][3]: input=38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -32       70      108      102 
  Row 1:      -20       60      100       80 
  Row 2:       28       93      102       37 
  Row 3:       38       76       38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │  70 │ 108 │ 102 │
├─────┼─────┼─────┼─────┤
│ -20 │  60 │ 100 │  80 │
├─────┼─────┼─────┼─────┤
│  28 │  93 │ 102 │  37 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 25
  Row 3: input_block[3][2] = 38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 100 (from PE[1][2])
  PE[0][3]: partial_in = 80 (from PE[1][3])
  PE[1][0]: partial_in = 28 (from PE[2][0])
  PE[1][1]: partial_in = 93 (from PE[2][1])
  PE[1][2]: partial_in = 102 (from PE[2][2])
  PE[1][3]: partial_in = 37 (from PE[2][3])
  PE[2][0]: partial_in = 38 (from PE[3][0])
  PE[2][1]: partial_in = 76 (from PE[3][1])
  PE[2][2]: partial_in = 38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=100 -> result=100
  PE[0][3]: input=0 * weight=1 = 0, partial_in=80 -> result=80
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=28 -> result=28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=93 -> result=93
  PE[1][2]: input=0 * weight=1 = 0, partial_in=102 -> result=102
  PE[1][3]: input=0 * weight=2 = 0, partial_in=37 -> result=37
  PE[2][0]: input=25 * weight=0 = 0, partial_in=38 -> result=38
  PE[2][1]: input=25 * weight=1 = 25, partial_in=76 -> result=101
  PE[2][2]: input=25 * weight=2 = 50, partial_in=38 -> result=88
  PE[2][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][0]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][1]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[3][2]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][3]: input=38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -20       60      100       80 
  Row 1:       28       93      102       37 
  Row 2:       38      101       88       25 
  Row 3:       38       76       38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │  60 │ 100 │  80 │
├─────┼─────┼─────┼─────┤
│  28 │  93 │ 102 │  37 │
├─────┼─────┼─────┼─────┤
│  38 │ 101 │  88 │  25 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = 93 (from PE[1][1])
  PE[0][2]: partial_in = 102 (from PE[1][2])
  PE[0][3]: partial_in = 37 (from PE[1][3])
  PE[1][0]: partial_in = 38 (from PE[2][0])
  PE[1][1]: partial_in = 101 (from PE[2][1])
  PE[1][2]: partial_in = 88 (from PE[2][2])
  PE[1][3]: partial_in = 25 (from PE[2][3])
  PE[2][0]: partial_in = 38 (from PE[3][0])
  PE[2][1]: partial_in = 76 (from PE[3][1])
  PE[2][2]: partial_in = 38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=28 -> result=28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=93 -> result=93
  PE[0][2]: input=0 * weight=0 = 0, partial_in=102 -> result=102
  PE[0][3]: input=0 * weight=1 = 0, partial_in=37 -> result=37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[1][1]: input=0 * weight=1 = 0, partial_in=101 -> result=101
  PE[1][2]: input=0 * weight=1 = 0, partial_in=88 -> result=88
  PE[1][3]: input=0 * weight=2 = 0, partial_in=25 -> result=25
  PE[2][0]: input=0 * weight=0 = 0, partial_in=38 -> result=38
  PE[2][1]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[2][2]: input=0 * weight=2 = 0, partial_in=38 -> result=38
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][1]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[3][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][3]: input=26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       28       93      102       37 
  Row 1:       38      101       88       25 
  Row 2:       38       76       38        0 
  Row 3:       26       52       26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  93 │ 102 │  37 │
├─────┼─────┼─────┼─────┤
│  38 │ 101 │  88 │  25 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
├─────┼─────┼─────┼─────┤
│  26 │  52 │  26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       28       93      102       37 
Row 1:       38      101       88       25 
Row 2:       38       76       38        0 
Row 3:       26       52       26        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 28 -> clamp(28) -> final(156)
  PE[0][1]: 93 -> clamp(93) -> final(221)
  PE[0][2]: 102 -> clamp(102) -> final(230)
  PE[0][3]: 37 -> clamp(37) -> final(165)
  PE[1][0]: 38 -> clamp(38) -> final(166)
  PE[1][1]: 101 -> clamp(101) -> final(229)
  PE[1][2]: 88 -> clamp(88) -> final(216)
  PE[1][3]: 25 -> clamp(25) -> final(153)
  PE[2][0]: 38 -> clamp(38) -> final(166)
  PE[2][1]: 76 -> clamp(76) -> final(204)
  PE[2][2]: 38 -> clamp(38) -> final(166)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 26 -> clamp(26) -> final(154)
  PE[3][1]: 52 -> clamp(52) -> final(180)
  PE[3][2]: 26 -> clamp(26) -> final(154)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   156    221    230    165 
   166    229    216    153 
   166    204    166    128 
   154    180    154    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  10   23   33   29 
  20   36   34    8 
  28   39    7  -52 
  28   31  -27 -113 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 10
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=0 -> result=-20
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[0][2]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -20      -10        0       10 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -10 │   0 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 23
  Row 1: input_block[1][0] = 20
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=0 -> result=-46
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[0][2]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][3]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -46      -23        0       23 
  Row 1:      -20       20       20       40 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -46 │ -23 │   0 │  23 │
├─────┼─────┼─────┼─────┤
│ -20 │  20 │  20 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 33
  Row 1: input_block[1][1] = 36
  Row 2: input_block[2][0] = 28
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-20 -> result=-86
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=20 -> result=-13
  PE[0][2]: input=33 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=33 * weight=1 = 33, partial_in=40 -> result=73
  PE[1][0]: input=36 * weight=-1 = -36, partial_in=0 -> result=-36
  PE[1][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][3]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][0]: input=28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[2][2]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -86      -13       20       73 
  Row 1:      -36       36       36       72 
  Row 2:        0       28       56       28 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -86 │ -13 │  20 │  73 │
├─────┼─────┼─────┼─────┤
│ -36 │  36 │  36 │  72 │
├─────┼─────┼─────┼─────┤
│   0 │  28 │  56 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 29
  Row 1: input_block[1][2] = 34
  Row 2: input_block[2][1] = 39
  Row 3: input_block[3][0] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = 36 (from PE[1][2])
  PE[0][3]: partial_in = 72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 28 (from PE[2][1])
  PE[1][2]: partial_in = 56 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=29 * weight=-2 = -58, partial_in=-36 -> result=-94
  PE[0][1]: input=29 * weight=-1 = -29, partial_in=36 -> result=7
  PE[0][2]: input=29 * weight=0 = 0, partial_in=36 -> result=36
  PE[0][3]: input=29 * weight=1 = 29, partial_in=72 -> result=101
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=28 -> result=62
  PE[1][2]: input=34 * weight=1 = 34, partial_in=56 -> result=90
  PE[1][3]: input=34 * weight=2 = 68, partial_in=28 -> result=96
  PE[2][0]: input=39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[2][2]: input=39 * weight=2 = 78, partial_in=0 -> result=78
  PE[2][3]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -94        7       36      101 
  Row 1:      -34       62       90       96 
  Row 2:        0       39       78       39 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -94 │   7 │  36 │ 101 │
├─────┼─────┼─────┼─────┤
│ -34 │  62 │  90 │  96 │
├─────┼─────┼─────┼─────┤
│   0 │  39 │  78 │  39 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 8
  Row 2: input_block[2][2] = 7
  Row 3: input_block[3][1] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 62 (from PE[1][1])
  PE[0][2]: partial_in = 90 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 39 (from PE[2][1])
  PE[1][2]: partial_in = 78 (from PE[2][2])
  PE[1][3]: partial_in = 39 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=62 -> result=62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=90 -> result=90
  PE[0][3]: input=0 * weight=1 = 0, partial_in=96 -> result=96
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=39 -> result=47
  PE[1][2]: input=8 * weight=1 = 8, partial_in=78 -> result=86
  PE[1][3]: input=8 * weight=2 = 16, partial_in=39 -> result=55
  PE[2][0]: input=7 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=7 * weight=1 = 7, partial_in=56 -> result=63
  PE[2][2]: input=7 * weight=2 = 14, partial_in=28 -> result=42
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -34       62       90       96 
  Row 1:       -8       47       86       55 
  Row 2:       28       63       42        7 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │  62 │  90 │  96 │
├─────┼─────┼─────┼─────┤
│  -8 │  47 │  86 │  55 │
├─────┼─────┼─────┼─────┤
│  28 │  63 │  42 │   7 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -52
  Row 3: input_block[3][2] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 47 (from PE[1][1])
  PE[0][2]: partial_in = 86 (from PE[1][2])
  PE[0][3]: partial_in = 55 (from PE[1][3])
  PE[1][0]: partial_in = 28 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=47 -> result=47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=86 -> result=86
  PE[0][3]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=28 -> result=28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][2]: input=0 * weight=1 = 0, partial_in=42 -> result=42
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=62 -> result=10
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=31 -> result=-73
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -8       47       86       55 
  Row 1:       28       63       42        7 
  Row 2:       31       10      -73      -52 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  47 │  86 │  55 │
├─────┼─────┼─────┼─────┤
│  28 │  63 │  42 │   7 │
├─────┼─────┼─────┼─────┤
│  31 │  10 │ -73 │ -52 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -113

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = 63 (from PE[1][1])
  PE[0][2]: partial_in = 42 (from PE[1][2])
  PE[0][3]: partial_in = 7 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 10 (from PE[2][1])
  PE[1][2]: partial_in = -73 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=28 -> result=28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=63 -> result=63
  PE[0][2]: input=0 * weight=0 = 0, partial_in=42 -> result=42
  PE[0][3]: input=0 * weight=1 = 0, partial_in=7 -> result=7
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=10 -> result=10
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-73 -> result=-73
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][1]: input=-113 * weight=2 = -226, partial_in=0 -> result=-226
  PE[3][2]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][3]: input=-113 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       28       63       42        7 
  Row 1:       31       10      -73      -52 
  Row 2:      -27      -54      -27        0 
  Row 3:     -113     -226     -113        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  63 │  42 │   7 │
├─────┼─────┼─────┼─────┤
│  31 │  10 │ -73 │ -52 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       28       63       42        7 
Row 1:       31       10      -73      -52 
Row 2:      -27      -54      -27        0 
Row 3:     -113     -226     -113        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 28 -> clamp(28) -> final(156)
  PE[0][1]: 63 -> clamp(63) -> final(191)
  PE[0][2]: 42 -> clamp(42) -> final(170)
  PE[0][3]: 7 -> clamp(7) -> final(135)
  PE[1][0]: 31 -> clamp(31) -> final(159)
  PE[1][1]: 10 -> clamp(10) -> final(138)
  PE[1][2]: -73 -> clamp(-73) -> final(55)
  PE[1][3]: -52 -> clamp(-52) -> final(76)
  PE[2][0]: -27 -> clamp(-27) -> final(101)
  PE[2][1]: -54 -> clamp(-54) -> final(74)
  PE[2][2]: -27 -> clamp(-27) -> final(101)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -113 -> clamp(-113) -> final(15)
  PE[3][1]: -226 -> clamp(-128) -> final(0)
  PE[3][2]: -113 -> clamp(-113) -> final(15)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   156    191    170    135 
   159    138     55     76 
   101     74    101    128 
    15      0     15    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -1  -67  -30    1 
 -51  -87  -16   -1 
-100  -99  -18   -6 
-126 -100  -22   -6 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -1
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=0 -> result=2
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        2        1        0       -1 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   2 │   1 │   0 │  -1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -67
  Row 1: input_block[1][0] = -51
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-67 * weight=-2 = 134, partial_in=0 -> result=134
  PE[0][1]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[0][2]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      134       67        0      -67 
  Row 1:       51      -51      -51     -102 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 134 │  67 │   0 │ -67 │
├─────┼─────┼─────┼─────┤
│  51 │ -51 │ -51 │-102 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -30
  Row 1: input_block[1][1] = -87
  Row 2: input_block[2][0] = -100
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=51 -> result=111
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=-51 -> result=-21
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=-102 -> result=-132
  PE[1][0]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[1][1]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][2]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][3]: input=-87 * weight=2 = -174, partial_in=0 -> result=-174
  PE[2][0]: input=-100 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[2][2]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[2][3]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      111      -21      -51     -132 
  Row 1:       87      -87      -87     -174 
  Row 2:        0     -100     -200     -100 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 111 │ -21 │ -51 │-132 │
├─────┼─────┼─────┼─────┤
│  87 │ -87 │ -87 │-174 │
├─────┼─────┼─────┼─────┤
│   0 │-100 │-200 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 1
  Row 1: input_block[1][2] = -16
  Row 2: input_block[2][1] = -99
  Row 3: input_block[3][0] = -126

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 87 (from PE[1][0])
  PE[0][1]: partial_in = -87 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -174 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -100 (from PE[2][1])
  PE[1][2]: partial_in = -200 (from PE[2][2])
  PE[1][3]: partial_in = -100 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=87 -> result=85
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=-87 -> result=-88
  PE[0][2]: input=1 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=1 * weight=1 = 1, partial_in=-174 -> result=-173
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=-100 -> result=-116
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=-200 -> result=-216
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=-100 -> result=-132
  PE[2][0]: input=-99 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[2][2]: input=-99 * weight=2 = -198, partial_in=0 -> result=-198
  PE[2][3]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[3][0]: input=-126 * weight=1 = -126, partial_in=0 -> result=-126
  PE[3][1]: input=-126 * weight=2 = -252, partial_in=0 -> result=-252
  PE[3][2]: input=-126 * weight=1 = -126, partial_in=0 -> result=-126
  PE[3][3]: input=-126 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       85      -88      -87     -173 
  Row 1:       16     -116     -216     -132 
  Row 2:        0      -99     -198      -99 
  Row 3:     -126     -252     -126        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  85 │ -88 │ -87 │-173 │
├─────┼─────┼─────┼─────┤
│  16 │-116 │-216 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -99 │-198 │ -99 │
├─────┼─────┼─────┼─────┤
│-126 │-252 │-126 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -1
  Row 2: input_block[2][2] = -18
  Row 3: input_block[3][1] = -100

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -116 (from PE[1][1])
  PE[0][2]: partial_in = -216 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -99 (from PE[2][1])
  PE[1][2]: partial_in = -198 (from PE[2][2])
  PE[1][3]: partial_in = -99 (from PE[2][3])
  PE[2][0]: partial_in = -126 (from PE[3][0])
  PE[2][1]: partial_in = -252 (from PE[3][1])
  PE[2][2]: partial_in = -126 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=16 -> result=16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-116 -> result=-116
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-216 -> result=-216
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[1][0]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[1][1]: input=-1 * weight=1 = -1, partial_in=-99 -> result=-100
  PE[1][2]: input=-1 * weight=1 = -1, partial_in=-198 -> result=-199
  PE[1][3]: input=-1 * weight=2 = -2, partial_in=-99 -> result=-101
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=-126 -> result=-126
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=-252 -> result=-270
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=-126 -> result=-162
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][1]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[3][2]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][3]: input=-100 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       16     -116     -216     -132 
  Row 1:        1     -100     -199     -101 
  Row 2:     -126     -270     -162      -18 
  Row 3:     -100     -200     -100        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │-116 │-216 │-132 │
├─────┼─────┼─────┼─────┤
│   1 │-100 │-199 │-101 │
├─────┼─────┼─────┼─────┤
│-126 │-270 │-162 │ -18 │
├─────┼─────┼─────┼─────┤
│-100 │-200 │-100 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -6
  Row 3: input_block[3][2] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 1 (from PE[1][0])
  PE[0][1]: partial_in = -100 (from PE[1][1])
  PE[0][2]: partial_in = -199 (from PE[1][2])
  PE[0][3]: partial_in = -101 (from PE[1][3])
  PE[1][0]: partial_in = -126 (from PE[2][0])
  PE[1][1]: partial_in = -270 (from PE[2][1])
  PE[1][2]: partial_in = -162 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = -100 (from PE[3][0])
  PE[2][1]: partial_in = -200 (from PE[3][1])
  PE[2][2]: partial_in = -100 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=1 -> result=1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-100 -> result=-100
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-199 -> result=-199
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-126 -> result=-126
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-18 -> result=-18
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=-100 -> result=-100
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=-200 -> result=-206
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=-100 -> result=-112
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        1     -100     -199     -101 
  Row 1:     -126     -270     -162      -18 
  Row 2:     -100     -206     -112       -6 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   1 │-100 │-199 │-101 │
├─────┼─────┼─────┼─────┤
│-126 │-270 │-162 │ -18 │
├─────┼─────┼─────┼─────┤
│-100 │-206 │-112 │  -6 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -126 (from PE[1][0])
  PE[0][1]: partial_in = -270 (from PE[1][1])
  PE[0][2]: partial_in = -162 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = -100 (from PE[2][0])
  PE[1][1]: partial_in = -206 (from PE[2][1])
  PE[1][2]: partial_in = -112 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-126 -> result=-126
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-270 -> result=-270
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-162 -> result=-162
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-100 -> result=-100
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-206 -> result=-206
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-112 -> result=-112
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-44 -> result=-44
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-22 -> result=-22
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -126     -270     -162      -18 
  Row 1:     -100     -206     -112       -6 
  Row 2:      -22      -44      -22        0 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-126 │-270 │-162 │ -18 │
├─────┼─────┼─────┼─────┤
│-100 │-206 │-112 │  -6 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -126     -270     -162      -18 
Row 1:     -100     -206     -112       -6 
Row 2:      -22      -44      -22        0 
Row 3:       -6      -12       -6        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -126 -> clamp(-126) -> final(2)
  PE[0][1]: -270 -> clamp(-128) -> final(0)
  PE[0][2]: -162 -> clamp(-128) -> final(0)
  PE[0][3]: -18 -> clamp(-18) -> final(110)
  PE[1][0]: -100 -> clamp(-100) -> final(28)
  PE[1][1]: -206 -> clamp(-128) -> final(0)
  PE[1][2]: -112 -> clamp(-112) -> final(16)
  PE[1][3]: -6 -> clamp(-6) -> final(122)
  PE[2][0]: -22 -> clamp(-22) -> final(106)
  PE[2][1]: -44 -> clamp(-44) -> final(84)
  PE[2][2]: -22 -> clamp(-22) -> final(106)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -6 -> clamp(-6) -> final(122)
  PE[3][1]: -12 -> clamp(-12) -> final(116)
  PE[3][2]: -6 -> clamp(-6) -> final(122)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
     2      0      0    110 
    28      0     16    122 
   106     84    106    128 
   122    116    122    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   6   -6    5   10 
  13   -7    7   18 
   5   -2    0   21 
  -3    7   -5   25 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 6
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=0 -> result=-12
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[0][2]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -12       -6        0        6 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  -6 │   0 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -6
  Row 1: input_block[1][0] = 13
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-6 * weight=-2 = 12, partial_in=0 -> result=12
  PE[0][1]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[0][2]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][0]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[1][1]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[1][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[1][3]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       12        6        0       -6 
  Row 1:      -13       13       13       26 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │   6 │   0 │  -6 │
├─────┼─────┼─────┼─────┤
│ -13 │  13 │  13 │  26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 5
  Row 1: input_block[1][1] = -7
  Row 2: input_block[2][0] = 5
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -13 (from PE[1][0])
  PE[0][1]: partial_in = 13 (from PE[1][1])
  PE[0][2]: partial_in = 13 (from PE[1][2])
  PE[0][3]: partial_in = 26 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=5 * weight=-2 = -10, partial_in=-13 -> result=-23
  PE[0][1]: input=5 * weight=-1 = -5, partial_in=13 -> result=8
  PE[0][2]: input=5 * weight=0 = 0, partial_in=13 -> result=13
  PE[0][3]: input=5 * weight=1 = 5, partial_in=26 -> result=31
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=5 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[2][2]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -23        8       13       31 
  Row 1:        7       -7       -7      -14 
  Row 2:        0        5       10        5 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -23 │   8 │  13 │  31 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   5 │  10 │   5 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 10
  Row 1: input_block[1][2] = 7
  Row 2: input_block[2][1] = -2
  Row 3: input_block[3][0] = -3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 5 (from PE[2][1])
  PE[1][2]: partial_in = 10 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=7 -> result=-13
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=-7 -> result=-17
  PE[0][2]: input=10 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=10 * weight=1 = 10, partial_in=-14 -> result=-4
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=5 -> result=12
  PE[1][2]: input=7 * weight=1 = 7, partial_in=10 -> result=17
  PE[1][3]: input=7 * weight=2 = 14, partial_in=5 -> result=19
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][1]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[3][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][3]: input=-3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -13      -17       -7       -4 
  Row 1:       -7       12       17       19 
  Row 2:        0       -2       -4       -2 
  Row 3:       -3       -6       -3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -13 │ -17 │  -7 │  -4 │
├─────┼─────┼─────┼─────┤
│  -7 │  12 │  17 │  19 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 18
  Row 2: input_block[2][2] = 0
  Row 3: input_block[3][1] = 7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 17 (from PE[1][2])
  PE[0][3]: partial_in = 19 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -3 (from PE[3][0])
  PE[2][1]: partial_in = -6 (from PE[3][1])
  PE[2][2]: partial_in = -3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=17 -> result=17
  PE[0][3]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][0]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[1][1]: input=18 * weight=1 = 18, partial_in=-2 -> result=16
  PE[1][2]: input=18 * weight=1 = 18, partial_in=-4 -> result=14
  PE[1][3]: input=18 * weight=2 = 36, partial_in=-2 -> result=34
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][1]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[3][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][3]: input=7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -7       12       17       19 
  Row 1:      -18       16       14       34 
  Row 2:       -3       -6       -3        0 
  Row 3:        7       14        7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │  12 │  17 │  19 │
├─────┼─────┼─────┼─────┤
│ -18 │  16 │  14 │  34 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  14 │   7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 21
  Row 3: input_block[3][2] = -5

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -18 (from PE[1][0])
  PE[0][1]: partial_in = 16 (from PE[1][1])
  PE[0][2]: partial_in = 14 (from PE[1][2])
  PE[0][3]: partial_in = 34 (from PE[1][3])
  PE[1][0]: partial_in = -3 (from PE[2][0])
  PE[1][1]: partial_in = -6 (from PE[2][1])
  PE[1][2]: partial_in = -3 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 7 (from PE[3][0])
  PE[2][1]: partial_in = 14 (from PE[3][1])
  PE[2][2]: partial_in = 7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-18 -> result=-18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=14 -> result=14
  PE[0][3]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-3 -> result=-3
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=21 * weight=0 = 0, partial_in=7 -> result=7
  PE[2][1]: input=21 * weight=1 = 21, partial_in=14 -> result=35
  PE[2][2]: input=21 * weight=2 = 42, partial_in=7 -> result=49
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][1]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[3][2]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][3]: input=-5 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -18       16       14       34 
  Row 1:       -3       -6       -3        0 
  Row 2:        7       35       49       21 
  Row 3:       -5      -10       -5        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  16 │  14 │  34 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  35 │  49 │  21 │
├─────┼─────┼─────┼─────┤
│  -5 │ -10 │  -5 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -6 (from PE[1][1])
  PE[0][2]: partial_in = -3 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 7 (from PE[2][0])
  PE[1][1]: partial_in = 35 (from PE[2][1])
  PE[1][2]: partial_in = 49 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = -5 (from PE[3][0])
  PE[2][1]: partial_in = -10 (from PE[3][1])
  PE[2][2]: partial_in = -5 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=7 -> result=7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=35 -> result=35
  PE[1][2]: input=0 * weight=1 = 0, partial_in=49 -> result=49
  PE[1][3]: input=0 * weight=2 = 0, partial_in=21 -> result=21
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-5 -> result=-5
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-5 -> result=-5
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -3       -6       -3        0 
  Row 1:        7       35       49       21 
  Row 2:       -5      -10       -5        0 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  35 │  49 │  21 │
├─────┼─────┼─────┼─────┤
│  -5 │ -10 │  -5 │   0 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -3       -6       -3        0 
Row 1:        7       35       49       21 
Row 2:       -5      -10       -5        0 
Row 3:       25       50       25        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -3 -> clamp(-3) -> final(125)
  PE[0][1]: -6 -> clamp(-6) -> final(122)
  PE[0][2]: -3 -> clamp(-3) -> final(125)
  PE[0][3]: 0 -> clamp(0) -> final(128)
  PE[1][0]: 7 -> clamp(7) -> final(135)
  PE[1][1]: 35 -> clamp(35) -> final(163)
  PE[1][2]: 49 -> clamp(49) -> final(177)
  PE[1][3]: 21 -> clamp(21) -> final(149)
  PE[2][0]: -5 -> clamp(-5) -> final(123)
  PE[2][1]: -10 -> clamp(-10) -> final(118)
  PE[2][2]: -5 -> clamp(-5) -> final(123)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 25 -> clamp(25) -> final(153)
  PE[3][1]: 50 -> clamp(50) -> final(178)
  PE[3][2]: 25 -> clamp(25) -> final(153)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   125    122    125    128 
   135    163    177    149 
   123    118    123    128 
   153    178    153    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -17    1   -3   12 
 -19   -2   -1    9 
 -37   -6    5  -23 
 -29   -4    2  -59 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -17
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-17 * weight=-2 = 34, partial_in=0 -> result=34
  PE[0][1]: input=-17 * weight=-1 = 17, partial_in=0 -> result=17
  PE[0][2]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       34       17        0      -17 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │  17 │   0 │ -17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 1
  Row 1: input_block[1][0] = -19
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=0 -> result=-2
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[0][2]: input=1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       -2       -1        0        1 
  Row 1:       19      -19      -19      -38 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  -1 │   0 │   1 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -3
  Row 1: input_block[1][1] = -2
  Row 2: input_block[2][0] = -37
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=19 -> result=25
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=-19 -> result=-16
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=-38 -> result=-41
  PE[1][0]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[1][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][3]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       25      -16      -19      -41 
  Row 1:        2       -2       -2       -4 
  Row 2:        0      -37      -74      -37 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │ -16 │ -19 │ -41 │
├─────┼─────┼─────┼─────┤
│   2 │  -2 │  -2 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 12
  Row 1: input_block[1][2] = -1
  Row 2: input_block[2][1] = -6
  Row 3: input_block[3][0] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 2 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = -2 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=2 -> result=-22
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=-2 -> result=-14
  PE[0][2]: input=12 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[0][3]: input=12 * weight=1 = 12, partial_in=-4 -> result=8
  PE[1][0]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[1][1]: input=-1 * weight=1 = -1, partial_in=-37 -> result=-38
  PE[1][2]: input=-1 * weight=1 = -1, partial_in=-74 -> result=-75
  PE[1][3]: input=-1 * weight=2 = -2, partial_in=-37 -> result=-39
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -22      -14       -2        8 
  Row 1:        1      -38      -75      -39 
  Row 2:        0       -6      -12       -6 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │ -14 │  -2 │   8 │
├─────┼─────┼─────┼─────┤
│   1 │ -38 │ -75 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │  -6 │ -12 │  -6 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 9
  Row 2: input_block[2][2] = 5
  Row 3: input_block[3][1] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 1 (from PE[1][0])
  PE[0][1]: partial_in = -38 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -6 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=1 -> result=1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-38 -> result=-38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[1][1]: input=9 * weight=1 = 9, partial_in=-6 -> result=3
  PE[1][2]: input=9 * weight=1 = 9, partial_in=-12 -> result=-3
  PE[1][3]: input=9 * weight=2 = 18, partial_in=-6 -> result=12
  PE[2][0]: input=5 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=5 * weight=1 = 5, partial_in=-58 -> result=-53
  PE[2][2]: input=5 * weight=2 = 10, partial_in=-29 -> result=-19
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        1      -38      -75      -39 
  Row 1:       -9        3       -3       12 
  Row 2:      -29      -53      -19        5 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   1 │ -38 │ -75 │ -39 │
├─────┼─────┼─────┼─────┤
│  -9 │   3 │  -3 │  12 │
├─────┼─────┼─────┼─────┤
│ -29 │ -53 │ -19 │   5 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -23
  Row 3: input_block[3][2] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = -3 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = -29 (from PE[2][0])
  PE[1][1]: partial_in = -53 (from PE[2][1])
  PE[1][2]: partial_in = -19 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-9 -> result=-9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-53 -> result=-53
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-19 -> result=-19
  PE[1][3]: input=0 * weight=2 = 0, partial_in=5 -> result=5
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=-8 -> result=-31
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=-4 -> result=-50
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -9        3       -3       12 
  Row 1:      -29      -53      -19        5 
  Row 2:       -4      -31      -50      -23 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -9 │   3 │  -3 │  12 │
├─────┼─────┼─────┼─────┤
│ -29 │ -53 │ -19 │   5 │
├─────┼─────┼─────┼─────┤
│  -4 │ -31 │ -50 │ -23 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -59

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = -53 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = 5 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 2 (from PE[3][0])
  PE[2][1]: partial_in = 4 (from PE[3][1])
  PE[2][2]: partial_in = 2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-29 -> result=-29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[2][1]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[2][2]: input=0 * weight=2 = 0, partial_in=2 -> result=2
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][1]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[3][2]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][3]: input=-59 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -29      -53      -19        5 
  Row 1:       -4      -31      -50      -23 
  Row 2:        2        4        2        0 
  Row 3:      -59     -118      -59        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │ -53 │ -19 │   5 │
├─────┼─────┼─────┼─────┤
│  -4 │ -31 │ -50 │ -23 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
├─────┼─────┼─────┼─────┤
│ -59 │-118 │ -59 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -29      -53      -19        5 
Row 1:       -4      -31      -50      -23 
Row 2:        2        4        2        0 
Row 3:      -59     -118      -59        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -29 -> clamp(-29) -> final(99)
  PE[0][1]: -53 -> clamp(-53) -> final(75)
  PE[0][2]: -19 -> clamp(-19) -> final(109)
  PE[0][3]: 5 -> clamp(5) -> final(133)
  PE[1][0]: -4 -> clamp(-4) -> final(124)
  PE[1][1]: -31 -> clamp(-31) -> final(97)
  PE[1][2]: -50 -> clamp(-50) -> final(78)
  PE[1][3]: -23 -> clamp(-23) -> final(105)
  PE[2][0]: 2 -> clamp(2) -> final(130)
  PE[2][1]: 4 -> clamp(4) -> final(132)
  PE[2][2]: 2 -> clamp(2) -> final(130)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -59 -> clamp(-59) -> final(69)
  PE[3][1]: -118 -> clamp(-118) -> final(10)
  PE[3][2]: -59 -> clamp(-59) -> final(69)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    99     75    109    133 
   124     97     78    105 
   130    132    130    128 
    69     10     69    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -22    9   32  -12 
  -8   14  -15  -85 
 -55  -49  -85 -118 
-108 -113 -117  -78 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       44       22        0      -22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 9
  Row 1: input_block[1][0] = -8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=0 -> result=-18
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[0][2]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -18       -9        0        9 
  Row 1:        8       -8       -8      -16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  -9 │   0 │   9 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 32
  Row 1: input_block[1][1] = 14
  Row 2: input_block[2][0] = -55
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=8 -> result=-56
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=-8 -> result=-40
  PE[0][2]: input=32 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=32 * weight=1 = 32, partial_in=-16 -> result=16
  PE[1][0]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[1][1]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][3]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[2][0]: input=-55 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[2][2]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[2][3]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -56      -40       -8       16 
  Row 1:      -14       14       14       28 
  Row 2:        0      -55     -110      -55 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │ -40 │  -8 │  16 │
├─────┼─────┼─────┼─────┤
│ -14 │  14 │  14 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │ -55 │-110 │ -55 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -12
  Row 1: input_block[1][2] = -15
  Row 2: input_block[2][1] = -49
  Row 3: input_block[3][0] = -108

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -14 (from PE[1][0])
  PE[0][1]: partial_in = 14 (from PE[1][1])
  PE[0][2]: partial_in = 14 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -55 (from PE[2][1])
  PE[1][2]: partial_in = -110 (from PE[2][2])
  PE[1][3]: partial_in = -55 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-12 * weight=-2 = 24, partial_in=-14 -> result=10
  PE[0][1]: input=-12 * weight=-1 = 12, partial_in=14 -> result=26
  PE[0][2]: input=-12 * weight=0 = 0, partial_in=14 -> result=14
  PE[0][3]: input=-12 * weight=1 = -12, partial_in=28 -> result=16
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=-55 -> result=-70
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=-110 -> result=-125
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=-55 -> result=-85
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=0 -> result=-98
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=-108 * weight=1 = -108, partial_in=0 -> result=-108
  PE[3][1]: input=-108 * weight=2 = -216, partial_in=0 -> result=-216
  PE[3][2]: input=-108 * weight=1 = -108, partial_in=0 -> result=-108
  PE[3][3]: input=-108 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       10       26       14       16 
  Row 1:       15      -70     -125      -85 
  Row 2:        0      -49      -98      -49 
  Row 3:     -108     -216     -108        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  26 │  14 │  16 │
├─────┼─────┼─────┼─────┤
│  15 │ -70 │-125 │ -85 │
├─────┼─────┼─────┼─────┤
│   0 │ -49 │ -98 │ -49 │
├─────┼─────┼─────┼─────┤
│-108 │-216 │-108 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -85
  Row 2: input_block[2][2] = -85
  Row 3: input_block[3][1] = -113

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = -70 (from PE[1][1])
  PE[0][2]: partial_in = -125 (from PE[1][2])
  PE[0][3]: partial_in = -85 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -49 (from PE[2][1])
  PE[1][2]: partial_in = -98 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = -108 (from PE[3][0])
  PE[2][1]: partial_in = -216 (from PE[3][1])
  PE[2][2]: partial_in = -108 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-70 -> result=-70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-125 -> result=-125
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][0]: input=-85 * weight=-1 = 85, partial_in=0 -> result=85
  PE[1][1]: input=-85 * weight=1 = -85, partial_in=-49 -> result=-134
  PE[1][2]: input=-85 * weight=1 = -85, partial_in=-98 -> result=-183
  PE[1][3]: input=-85 * weight=2 = -170, partial_in=-49 -> result=-219
  PE[2][0]: input=-85 * weight=0 = 0, partial_in=-108 -> result=-108
  PE[2][1]: input=-85 * weight=1 = -85, partial_in=-216 -> result=-301
  PE[2][2]: input=-85 * weight=2 = -170, partial_in=-108 -> result=-278
  PE[2][3]: input=-85 * weight=1 = -85, partial_in=0 -> result=-85
  PE[3][0]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][1]: input=-113 * weight=2 = -226, partial_in=0 -> result=-226
  PE[3][2]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][3]: input=-113 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       15      -70     -125      -85 
  Row 1:       85     -134     -183     -219 
  Row 2:     -108     -301     -278      -85 
  Row 3:     -113     -226     -113        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │ -70 │-125 │ -85 │
├─────┼─────┼─────┼─────┤
│  85 │-134 │-183 │-219 │
├─────┼─────┼─────┼─────┤
│-108 │-301 │-278 │ -85 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -118
  Row 3: input_block[3][2] = -117

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 85 (from PE[1][0])
  PE[0][1]: partial_in = -134 (from PE[1][1])
  PE[0][2]: partial_in = -183 (from PE[1][2])
  PE[0][3]: partial_in = -219 (from PE[1][3])
  PE[1][0]: partial_in = -108 (from PE[2][0])
  PE[1][1]: partial_in = -301 (from PE[2][1])
  PE[1][2]: partial_in = -278 (from PE[2][2])
  PE[1][3]: partial_in = -85 (from PE[2][3])
  PE[2][0]: partial_in = -113 (from PE[3][0])
  PE[2][1]: partial_in = -226 (from PE[3][1])
  PE[2][2]: partial_in = -113 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=85 -> result=85
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-134 -> result=-134
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-183 -> result=-183
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-219 -> result=-219
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-108 -> result=-108
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-301 -> result=-301
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-278 -> result=-278
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-85 -> result=-85
  PE[2][0]: input=-118 * weight=0 = 0, partial_in=-113 -> result=-113
  PE[2][1]: input=-118 * weight=1 = -118, partial_in=-226 -> result=-344
  PE[2][2]: input=-118 * weight=2 = -236, partial_in=-113 -> result=-349
  PE[2][3]: input=-118 * weight=1 = -118, partial_in=0 -> result=-118
  PE[3][0]: input=-117 * weight=1 = -117, partial_in=0 -> result=-117
  PE[3][1]: input=-117 * weight=2 = -234, partial_in=0 -> result=-234
  PE[3][2]: input=-117 * weight=1 = -117, partial_in=0 -> result=-117
  PE[3][3]: input=-117 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       85     -134     -183     -219 
  Row 1:     -108     -301     -278      -85 
  Row 2:     -113     -344     -349     -118 
  Row 3:     -117     -234     -117        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  85 │-134 │-183 │-219 │
├─────┼─────┼─────┼─────┤
│-108 │-301 │-278 │ -85 │
├─────┼─────┼─────┼─────┤
│-113 │-344 │-349 │-118 │
├─────┼─────┼─────┼─────┤
│-117 │-234 │-117 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -78

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -108 (from PE[1][0])
  PE[0][1]: partial_in = -301 (from PE[1][1])
  PE[0][2]: partial_in = -278 (from PE[1][2])
  PE[0][3]: partial_in = -85 (from PE[1][3])
  PE[1][0]: partial_in = -113 (from PE[2][0])
  PE[1][1]: partial_in = -344 (from PE[2][1])
  PE[1][2]: partial_in = -349 (from PE[2][2])
  PE[1][3]: partial_in = -118 (from PE[2][3])
  PE[2][0]: partial_in = -117 (from PE[3][0])
  PE[2][1]: partial_in = -234 (from PE[3][1])
  PE[2][2]: partial_in = -117 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-108 -> result=-108
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-301 -> result=-301
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-278 -> result=-278
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-113 -> result=-113
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-344 -> result=-344
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-349 -> result=-349
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-118 -> result=-118
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-117 -> result=-117
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-234 -> result=-234
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-117 -> result=-117
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][1]: input=-78 * weight=2 = -156, partial_in=0 -> result=-156
  PE[3][2]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][3]: input=-78 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -108     -301     -278      -85 
  Row 1:     -113     -344     -349     -118 
  Row 2:     -117     -234     -117        0 
  Row 3:      -78     -156      -78        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-108 │-301 │-278 │ -85 │
├─────┼─────┼─────┼─────┤
│-113 │-344 │-349 │-118 │
├─────┼─────┼─────┼─────┤
│-117 │-234 │-117 │   0 │
├─────┼─────┼─────┼─────┤
│ -78 │-156 │ -78 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -108     -301     -278      -85 
Row 1:     -113     -344     -349     -118 
Row 2:     -117     -234     -117        0 
Row 3:      -78     -156      -78        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -108 -> clamp(-108) -> final(20)
  PE[0][1]: -301 -> clamp(-128) -> final(0)
  PE[0][2]: -278 -> clamp(-128) -> final(0)
  PE[0][3]: -85 -> clamp(-85) -> final(43)
  PE[1][0]: -113 -> clamp(-113) -> final(15)
  PE[1][1]: -344 -> clamp(-128) -> final(0)
  PE[1][2]: -349 -> clamp(-128) -> final(0)
  PE[1][3]: -118 -> clamp(-118) -> final(10)
  PE[2][0]: -117 -> clamp(-117) -> final(11)
  PE[2][1]: -234 -> clamp(-128) -> final(0)
  PE[2][2]: -117 -> clamp(-117) -> final(11)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -78 -> clamp(-78) -> final(50)
  PE[3][1]: -156 -> clamp(-128) -> final(0)
  PE[3][2]: -78 -> clamp(-78) -> final(50)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    20      0      0     43 
    15      0      0     10 
    11      0     11    128 
    50      0     50    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -79 -102  -48  -34 
-110  -68  -19  -27 
 -78  -35  -27  -35 
  -8  -22  -51  -46 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -79
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-79 * weight=-2 = 158, partial_in=0 -> result=158
  PE[0][1]: input=-79 * weight=-1 = 79, partial_in=0 -> result=79
  PE[0][2]: input=-79 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      158       79        0      -79 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 158 │  79 │   0 │ -79 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -102
  Row 1: input_block[1][0] = -110
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-102 * weight=-2 = 204, partial_in=0 -> result=204
  PE[0][1]: input=-102 * weight=-1 = 102, partial_in=0 -> result=102
  PE[0][2]: input=-102 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[1][0]: input=-110 * weight=-1 = 110, partial_in=0 -> result=110
  PE[1][1]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[1][2]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[1][3]: input=-110 * weight=2 = -220, partial_in=0 -> result=-220
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      204      102        0     -102 
  Row 1:      110     -110     -110     -220 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 204 │ 102 │   0 │-102 │
├─────┼─────┼─────┼─────┤
│ 110 │-110 │-110 │-220 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -48
  Row 1: input_block[1][1] = -68
  Row 2: input_block[2][0] = -78
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 110 (from PE[1][0])
  PE[0][1]: partial_in = -110 (from PE[1][1])
  PE[0][2]: partial_in = -110 (from PE[1][2])
  PE[0][3]: partial_in = -220 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=110 -> result=206
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=-110 -> result=-62
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=-110 -> result=-110
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=-220 -> result=-268
  PE[1][0]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[1][1]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][2]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][3]: input=-68 * weight=2 = -136, partial_in=0 -> result=-136
  PE[2][0]: input=-78 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[2][2]: input=-78 * weight=2 = -156, partial_in=0 -> result=-156
  PE[2][3]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      206      -62     -110     -268 
  Row 1:       68      -68      -68     -136 
  Row 2:        0      -78     -156      -78 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 206 │ -62 │-110 │-268 │
├─────┼─────┼─────┼─────┤
│  68 │ -68 │ -68 │-136 │
├─────┼─────┼─────┼─────┤
│   0 │ -78 │-156 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -34
  Row 1: input_block[1][2] = -19
  Row 2: input_block[2][1] = -35
  Row 3: input_block[3][0] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 68 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -136 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -78 (from PE[2][1])
  PE[1][2]: partial_in = -156 (from PE[2][2])
  PE[1][3]: partial_in = -78 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=68 -> result=136
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-68 -> result=-34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-136 -> result=-170
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=-78 -> result=-97
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=-156 -> result=-175
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=-78 -> result=-116
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      136      -34      -68     -170 
  Row 1:       19      -97     -175     -116 
  Row 2:        0      -35      -70      -35 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 136 │ -34 │ -68 │-170 │
├─────┼─────┼─────┼─────┤
│  19 │ -97 │-175 │-116 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -27
  Row 2: input_block[2][2] = -27
  Row 3: input_block[3][1] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -97 (from PE[1][1])
  PE[0][2]: partial_in = -175 (from PE[1][2])
  PE[0][3]: partial_in = -116 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=19 -> result=19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-97 -> result=-97
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-175 -> result=-175
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-35 -> result=-62
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-70 -> result=-97
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-35 -> result=-89
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=-16 -> result=-43
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=-8 -> result=-62
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       19      -97     -175     -116 
  Row 1:       27      -62      -97      -89 
  Row 2:       -8      -43      -62      -27 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  19 │ -97 │-175 │-116 │
├─────┼─────┼─────┼─────┤
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│  -8 │ -43 │ -62 │ -27 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -35
  Row 3: input_block[3][2] = -51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -89 (from PE[1][3])
  PE[1][0]: partial_in = -8 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-43 -> result=-43
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=-44 -> result=-79
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=-22 -> result=-92
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][1]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[3][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][3]: input=-51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       27      -62      -97      -89 
  Row 1:       -8      -43      -62      -27 
  Row 2:      -22      -79      -92      -35 
  Row 3:      -51     -102      -51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│  -8 │ -43 │ -62 │ -27 │
├─────┼─────┼─────┼─────┤
│ -22 │ -79 │ -92 │ -35 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -46

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -62 (from PE[1][2])
  PE[0][3]: partial_in = -27 (from PE[1][3])
  PE[1][0]: partial_in = -22 (from PE[2][0])
  PE[1][1]: partial_in = -79 (from PE[2][1])
  PE[1][2]: partial_in = -92 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -51 (from PE[3][0])
  PE[2][1]: partial_in = -102 (from PE[3][1])
  PE[2][2]: partial_in = -51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-27 -> result=-27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-79 -> result=-79
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-51 -> result=-51
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][1]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[3][2]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][3]: input=-46 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -8      -43      -62      -27 
  Row 1:      -22      -79      -92      -35 
  Row 2:      -51     -102      -51        0 
  Row 3:      -46      -92      -46        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │ -43 │ -62 │ -27 │
├─────┼─────┼─────┼─────┤
│ -22 │ -79 │ -92 │ -35 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
├─────┼─────┼─────┼─────┤
│ -46 │ -92 │ -46 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -8      -43      -62      -27 
Row 1:      -22      -79      -92      -35 
Row 2:      -51     -102      -51        0 
Row 3:      -46      -92      -46        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -8 -> clamp(-8) -> final(120)
  PE[0][1]: -43 -> clamp(-43) -> final(85)
  PE[0][2]: -62 -> clamp(-62) -> final(66)
  PE[0][3]: -27 -> clamp(-27) -> final(101)
  PE[1][0]: -22 -> clamp(-22) -> final(106)
  PE[1][1]: -79 -> clamp(-79) -> final(49)
  PE[1][2]: -92 -> clamp(-92) -> final(36)
  PE[1][3]: -35 -> clamp(-35) -> final(93)
  PE[2][0]: -51 -> clamp(-51) -> final(77)
  PE[2][1]: -102 -> clamp(-102) -> final(26)
  PE[2][2]: -51 -> clamp(-51) -> final(77)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -46 -> clamp(-46) -> final(82)
  PE[3][1]: -92 -> clamp(-92) -> final(36)
  PE[3][2]: -46 -> clamp(-46) -> final(82)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   120     85     66    101 
   106     49     36     93 
    77     26     77    128 
    82     36     82    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -27  -16  -51  -36 
 -47  -38  -37  -38 
 -45  -40  -27  -49 
 -34  -39  -37  -42 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -27
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=0 -> result=54
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       54       27        0      -27 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │  27 │   0 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -16
  Row 1: input_block[1][0] = -47
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=0 -> result=32
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][0]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[1][1]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[1][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[1][3]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       32       16        0      -16 
  Row 1:       47      -47      -47      -94 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  16 │   0 │ -16 │
├─────┼─────┼─────┼─────┤
│  47 │ -47 │ -47 │ -94 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -51
  Row 1: input_block[1][1] = -38
  Row 2: input_block[2][0] = -45
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 47 (from PE[1][0])
  PE[0][1]: partial_in = -47 (from PE[1][1])
  PE[0][2]: partial_in = -47 (from PE[1][2])
  PE[0][3]: partial_in = -94 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-51 * weight=-2 = 102, partial_in=47 -> result=149
  PE[0][1]: input=-51 * weight=-1 = 51, partial_in=-47 -> result=4
  PE[0][2]: input=-51 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[0][3]: input=-51 * weight=1 = -51, partial_in=-94 -> result=-145
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      149        4      -47     -145 
  Row 1:       38      -38      -38      -76 
  Row 2:        0      -45      -90      -45 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 149 │   4 │ -47 │-145 │
├─────┼─────┼─────┼─────┤
│  38 │ -38 │ -38 │ -76 │
├─────┼─────┼─────┼─────┤
│   0 │ -45 │ -90 │ -45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -36
  Row 1: input_block[1][2] = -37
  Row 2: input_block[2][1] = -40
  Row 3: input_block[3][0] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -38 (from PE[1][1])
  PE[0][2]: partial_in = -38 (from PE[1][2])
  PE[0][3]: partial_in = -76 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -45 (from PE[2][1])
  PE[1][2]: partial_in = -90 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=38 -> result=110
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=-38 -> result=-2
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=-76 -> result=-112
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=-45 -> result=-82
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=-90 -> result=-127
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=-45 -> result=-119
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      110       -2      -38     -112 
  Row 1:       37      -82     -127     -119 
  Row 2:        0      -40      -80      -40 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 110 │  -2 │ -38 │-112 │
├─────┼─────┼─────┼─────┤
│  37 │ -82 │-127 │-119 │
├─────┼─────┼─────┼─────┤
│   0 │ -40 │ -80 │ -40 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -38
  Row 2: input_block[2][2] = -27
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -82 (from PE[1][1])
  PE[0][2]: partial_in = -127 (from PE[1][2])
  PE[0][3]: partial_in = -119 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -40 (from PE[2][1])
  PE[1][2]: partial_in = -80 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=37 -> result=37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-82 -> result=-82
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-127 -> result=-127
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-119 -> result=-119
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=-40 -> result=-78
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=-80 -> result=-118
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=-40 -> result=-116
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=-68 -> result=-95
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=-34 -> result=-88
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       37      -82     -127     -119 
  Row 1:       38      -78     -118     -116 
  Row 2:      -34      -95      -88      -27 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  37 │ -82 │-127 │-119 │
├─────┼─────┼─────┼─────┤
│  38 │ -78 │-118 │-116 │
├─────┼─────┼─────┼─────┤
│ -34 │ -95 │ -88 │ -27 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -49
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -78 (from PE[1][1])
  PE[0][2]: partial_in = -118 (from PE[1][2])
  PE[0][3]: partial_in = -116 (from PE[1][3])
  PE[1][0]: partial_in = -34 (from PE[2][0])
  PE[1][1]: partial_in = -95 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=38 -> result=38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-78 -> result=-78
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-118 -> result=-118
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=-78 -> result=-127
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=-39 -> result=-137
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       38      -78     -118     -116 
  Row 1:      -34      -95      -88      -27 
  Row 2:      -39     -127     -137      -49 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │ -78 │-118 │-116 │
├─────┼─────┼─────┼─────┤
│ -34 │ -95 │ -88 │ -27 │
├─────┼─────┼─────┼─────┤
│ -39 │-127 │-137 │ -49 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -27 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -127 (from PE[2][1])
  PE[1][2]: partial_in = -137 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-95 -> result=-95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-27 -> result=-27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-127 -> result=-127
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-137 -> result=-137
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -34      -95      -88      -27 
  Row 1:      -39     -127     -137      -49 
  Row 2:      -37      -74      -37        0 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -95 │ -88 │ -27 │
├─────┼─────┼─────┼─────┤
│ -39 │-127 │-137 │ -49 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -34      -95      -88      -27 
Row 1:      -39     -127     -137      -49 
Row 2:      -37      -74      -37        0 
Row 3:      -42      -84      -42        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -34 -> clamp(-34) -> final(94)
  PE[0][1]: -95 -> clamp(-95) -> final(33)
  PE[0][2]: -88 -> clamp(-88) -> final(40)
  PE[0][3]: -27 -> clamp(-27) -> final(101)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -127 -> clamp(-127) -> final(1)
  PE[1][2]: -137 -> clamp(-128) -> final(0)
  PE[1][3]: -49 -> clamp(-49) -> final(79)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -42 -> clamp(-42) -> final(86)
  PE[3][1]: -84 -> clamp(-84) -> final(44)
  PE[3][2]: -42 -> clamp(-42) -> final(86)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    94     33     40    101 
    89      1      0     79 
    91     54     91    128 
    86     44     86    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -48  -25    1   -5 
 -42  -10    6  -12 
 -33   10   11  -25 
 -17   32   19  -32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -48
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=0 -> result=96
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       96       48        0      -48 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │  48 │   0 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -25
  Row 1: input_block[1][0] = -42
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=0 -> result=50
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][0]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[1][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][3]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       50       25        0      -25 
  Row 1:       42      -42      -42      -84 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  25 │   0 │ -25 │
├─────┼─────┼─────┼─────┤
│  42 │ -42 │ -42 │ -84 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 1
  Row 1: input_block[1][1] = -10
  Row 2: input_block[2][0] = -33
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 42 (from PE[1][0])
  PE[0][1]: partial_in = -42 (from PE[1][1])
  PE[0][2]: partial_in = -42 (from PE[1][2])
  PE[0][3]: partial_in = -84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=42 -> result=40
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=-42 -> result=-43
  PE[0][2]: input=1 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[0][3]: input=1 * weight=1 = 1, partial_in=-84 -> result=-83
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       40      -43      -42      -83 
  Row 1:       10      -10      -10      -20 
  Row 2:        0      -33      -66      -33 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ -43 │ -42 │ -83 │
├─────┼─────┼─────┼─────┤
│  10 │ -10 │ -10 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │ -33 │ -66 │ -33 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -5
  Row 1: input_block[1][2] = 6
  Row 2: input_block[2][1] = 10
  Row 3: input_block[3][0] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -10 (from PE[1][1])
  PE[0][2]: partial_in = -10 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=10 -> result=20
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=-10 -> result=-5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=-20 -> result=-25
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=-33 -> result=-27
  PE[1][2]: input=6 * weight=1 = 6, partial_in=-66 -> result=-60
  PE[1][3]: input=6 * weight=2 = 12, partial_in=-33 -> result=-21
  PE[2][0]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[2][2]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       20       -5      -10      -25 
  Row 1:       -6      -27      -60      -21 
  Row 2:        0       10       20       10 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  -5 │ -10 │ -25 │
├─────┼─────┼─────┼─────┤
│  -6 │ -27 │ -60 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │  10 │  20 │  10 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -12
  Row 2: input_block[2][2] = 11
  Row 3: input_block[3][1] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -60 (from PE[1][2])
  PE[0][3]: partial_in = -21 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 10 (from PE[2][1])
  PE[1][2]: partial_in = 20 (from PE[2][2])
  PE[1][3]: partial_in = 10 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][0]: input=-12 * weight=-1 = 12, partial_in=0 -> result=12
  PE[1][1]: input=-12 * weight=1 = -12, partial_in=10 -> result=-2
  PE[1][2]: input=-12 * weight=1 = -12, partial_in=20 -> result=8
  PE[1][3]: input=-12 * weight=2 = -24, partial_in=10 -> result=-14
  PE[2][0]: input=11 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=11 * weight=1 = 11, partial_in=-34 -> result=-23
  PE[2][2]: input=11 * weight=2 = 22, partial_in=-17 -> result=5
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -6      -27      -60      -21 
  Row 1:       12       -2        8      -14 
  Row 2:      -17      -23        5       11 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │ -27 │ -60 │ -21 │
├─────┼─────┼─────┼─────┤
│  12 │  -2 │   8 │ -14 │
├─────┼─────┼─────┼─────┤
│ -17 │ -23 │   5 │  11 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -25
  Row 3: input_block[3][2] = 19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 12 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = 8 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = -17 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = 5 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 32 (from PE[3][0])
  PE[2][1]: partial_in = 64 (from PE[3][1])
  PE[2][2]: partial_in = 32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=12 -> result=12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-2 -> result=-2
  PE[0][2]: input=0 * weight=0 = 0, partial_in=8 -> result=8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-14 -> result=-14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][2]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][3]: input=0 * weight=2 = 0, partial_in=11 -> result=11
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=32 -> result=32
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=64 -> result=39
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=32 -> result=-18
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][1]: input=19 * weight=2 = 38, partial_in=0 -> result=38
  PE[3][2]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][3]: input=19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       12       -2        8      -14 
  Row 1:      -17      -23        5       11 
  Row 2:       32       39      -18      -25 
  Row 3:       19       38       19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │  -2 │   8 │ -14 │
├─────┼─────┼─────┼─────┤
│ -17 │ -23 │   5 │  11 │
├─────┼─────┼─────┼─────┤
│  32 │  39 │ -18 │ -25 │
├─────┼─────┼─────┼─────┤
│  19 │  38 │  19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = -23 (from PE[1][1])
  PE[0][2]: partial_in = 5 (from PE[1][2])
  PE[0][3]: partial_in = 11 (from PE[1][3])
  PE[1][0]: partial_in = 32 (from PE[2][0])
  PE[1][1]: partial_in = 39 (from PE[2][1])
  PE[1][2]: partial_in = -18 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = 19 (from PE[3][0])
  PE[2][1]: partial_in = 38 (from PE[3][1])
  PE[2][2]: partial_in = 19 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[0][2]: input=0 * weight=0 = 0, partial_in=5 -> result=5
  PE[0][3]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=39 -> result=39
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-25 -> result=-25
  PE[2][0]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[2][1]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[2][2]: input=0 * weight=2 = 0, partial_in=19 -> result=19
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -17      -23        5       11 
  Row 1:       32       39      -18      -25 
  Row 2:       19       38       19        0 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │ -23 │   5 │  11 │
├─────┼─────┼─────┼─────┤
│  32 │  39 │ -18 │ -25 │
├─────┼─────┼─────┼─────┤
│  19 │  38 │  19 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -17      -23        5       11 
Row 1:       32       39      -18      -25 
Row 2:       19       38       19        0 
Row 3:      -32      -64      -32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -17 -> clamp(-17) -> final(111)
  PE[0][1]: -23 -> clamp(-23) -> final(105)
  PE[0][2]: 5 -> clamp(5) -> final(133)
  PE[0][3]: 11 -> clamp(11) -> final(139)
  PE[1][0]: 32 -> clamp(32) -> final(160)
  PE[1][1]: 39 -> clamp(39) -> final(167)
  PE[1][2]: -18 -> clamp(-18) -> final(110)
  PE[1][3]: -25 -> clamp(-25) -> final(103)
  PE[2][0]: 19 -> clamp(19) -> final(147)
  PE[2][1]: 38 -> clamp(38) -> final(166)
  PE[2][2]: 19 -> clamp(19) -> final(147)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -32 -> clamp(-32) -> final(96)
  PE[3][1]: -64 -> clamp(-64) -> final(64)
  PE[3][2]: -32 -> clamp(-32) -> final(96)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   111    105    133    139 
   160    167    110    103 
   147    166    147    128 
    96     64     96    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -33  -43  -32  -26 
 -34  -38  -32  -27 
 -39  -35  -34  -30 
 -39  -30  -32  -27 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -33
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=0 -> result=66
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       66       33        0      -33 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  66 │  33 │   0 │ -33 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -43
  Row 1: input_block[1][0] = -34
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=0 -> result=86
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       86       43        0      -43 
  Row 1:       34      -34      -34      -68 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  43 │   0 │ -43 │
├─────┼─────┼─────┼─────┤
│  34 │ -34 │ -34 │ -68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -32
  Row 1: input_block[1][1] = -38
  Row 2: input_block[2][0] = -39
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -34 (from PE[1][1])
  PE[0][2]: partial_in = -34 (from PE[1][2])
  PE[0][3]: partial_in = -68 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-32 * weight=-2 = 64, partial_in=34 -> result=98
  PE[0][1]: input=-32 * weight=-1 = 32, partial_in=-34 -> result=-2
  PE[0][2]: input=-32 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[0][3]: input=-32 * weight=1 = -32, partial_in=-68 -> result=-100
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       98       -2      -34     -100 
  Row 1:       38      -38      -38      -76 
  Row 2:        0      -39      -78      -39 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  98 │  -2 │ -34 │-100 │
├─────┼─────┼─────┼─────┤
│  38 │ -38 │ -38 │ -76 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -26
  Row 1: input_block[1][2] = -32
  Row 2: input_block[2][1] = -35
  Row 3: input_block[3][0] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -38 (from PE[1][1])
  PE[0][2]: partial_in = -38 (from PE[1][2])
  PE[0][3]: partial_in = -76 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=38 -> result=90
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=-38 -> result=-12
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=-76 -> result=-102
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-39 -> result=-71
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-78 -> result=-110
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-39 -> result=-103
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       90      -12      -38     -102 
  Row 1:       32      -71     -110     -103 
  Row 2:        0      -35      -70      -35 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │ -12 │ -38 │-102 │
├─────┼─────┼─────┼─────┤
│  32 │ -71 │-110 │-103 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -27
  Row 2: input_block[2][2] = -34
  Row 3: input_block[3][1] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -71 (from PE[1][1])
  PE[0][2]: partial_in = -110 (from PE[1][2])
  PE[0][3]: partial_in = -103 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-71 -> result=-71
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-110 -> result=-110
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-35 -> result=-62
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-70 -> result=-97
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-35 -> result=-89
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=-78 -> result=-112
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=-39 -> result=-107
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       32      -71     -110     -103 
  Row 1:       27      -62      -97      -89 
  Row 2:      -39     -112     -107      -34 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -71 │-110 │-103 │
├─────┼─────┼─────┼─────┤
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│ -39 │-112 │-107 │ -34 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -30
  Row 3: input_block[3][2] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -89 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -112 (from PE[2][1])
  PE[1][2]: partial_in = -107 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-112 -> result=-112
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-107 -> result=-107
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-60 -> result=-90
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-30 -> result=-90
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       27      -62      -97      -89 
  Row 1:      -39     -112     -107      -34 
  Row 2:      -30      -90      -90      -30 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -62 │ -97 │ -89 │
├─────┼─────┼─────┼─────┤
│ -39 │-112 │-107 │ -34 │
├─────┼─────┼─────┼─────┤
│ -30 │ -90 │ -90 │ -30 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = -112 (from PE[1][1])
  PE[0][2]: partial_in = -107 (from PE[1][2])
  PE[0][3]: partial_in = -34 (from PE[1][3])
  PE[1][0]: partial_in = -30 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = -90 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-39 -> result=-39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-112 -> result=-112
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -39     -112     -107      -34 
  Row 1:      -30      -90      -90      -30 
  Row 2:      -32      -64      -32        0 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │-112 │-107 │ -34 │
├─────┼─────┼─────┼─────┤
│ -30 │ -90 │ -90 │ -30 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -39     -112     -107      -34 
Row 1:      -30      -90      -90      -30 
Row 2:      -32      -64      -32        0 
Row 3:      -27      -54      -27        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -39 -> clamp(-39) -> final(89)
  PE[0][1]: -112 -> clamp(-112) -> final(16)
  PE[0][2]: -107 -> clamp(-107) -> final(21)
  PE[0][3]: -34 -> clamp(-34) -> final(94)
  PE[1][0]: -30 -> clamp(-30) -> final(98)
  PE[1][1]: -90 -> clamp(-90) -> final(38)
  PE[1][2]: -90 -> clamp(-90) -> final(38)
  PE[1][3]: -30 -> clamp(-30) -> final(98)
  PE[2][0]: -32 -> clamp(-32) -> final(96)
  PE[2][1]: -64 -> clamp(-64) -> final(64)
  PE[2][2]: -32 -> clamp(-32) -> final(96)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -27 -> clamp(-27) -> final(101)
  PE[3][1]: -54 -> clamp(-54) -> final(74)
  PE[3][2]: -27 -> clamp(-27) -> final(101)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    89     16     21     94 
    98     38     38     98 
    96     64     96    128 
   101     74    101    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -39  -32  -32  -31 
 -31  -29  -35  -36 
 -17  -19  -32  -37 
 -11  -11  -25  -34 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=0 -> result=78
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       78       39        0      -39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  39 │   0 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -32
  Row 1: input_block[1][0] = -31
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-32 * weight=-2 = 64, partial_in=0 -> result=64
  PE[0][1]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[0][2]: input=-32 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       64       32        0      -32 
  Row 1:       31      -31      -31      -62 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  64 │  32 │   0 │ -32 │
├─────┼─────┼─────┼─────┤
│  31 │ -31 │ -31 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -32
  Row 1: input_block[1][1] = -29
  Row 2: input_block[2][0] = -17
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -31 (from PE[1][1])
  PE[0][2]: partial_in = -31 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-32 * weight=-2 = 64, partial_in=31 -> result=95
  PE[0][1]: input=-32 * weight=-1 = 32, partial_in=-31 -> result=1
  PE[0][2]: input=-32 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[0][3]: input=-32 * weight=1 = -32, partial_in=-62 -> result=-94
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       95        1      -31      -94 
  Row 1:       29      -29      -29      -58 
  Row 2:        0      -17      -34      -17 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │   1 │ -31 │ -94 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │ -17 │ -34 │ -17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -31
  Row 1: input_block[1][2] = -35
  Row 2: input_block[2][1] = -19
  Row 3: input_block[3][0] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -34 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=29 -> result=91
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=-29 -> result=2
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=-58 -> result=-89
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=-17 -> result=-52
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=-34 -> result=-69
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=-17 -> result=-87
  PE[2][0]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[2][2]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       91        2      -29      -89 
  Row 1:       35      -52      -69      -87 
  Row 2:        0      -19      -38      -19 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  91 │   2 │ -29 │ -89 │
├─────┼─────┼─────┼─────┤
│  35 │ -52 │ -69 │ -87 │
├─────┼─────┼─────┼─────┤
│   0 │ -19 │ -38 │ -19 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -36
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -87 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -19 (from PE[2][1])
  PE[1][2]: partial_in = -38 (from PE[2][2])
  PE[1][3]: partial_in = -19 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-87 -> result=-87
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=-19 -> result=-55
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=-38 -> result=-74
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=-19 -> result=-91
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=-22 -> result=-54
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=-11 -> result=-75
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       35      -52      -69      -87 
  Row 1:       36      -55      -74      -91 
  Row 2:      -11      -54      -75      -32 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -52 │ -69 │ -87 │
├─────┼─────┼─────┼─────┤
│  36 │ -55 │ -74 │ -91 │
├─────┼─────┼─────┼─────┤
│ -11 │ -54 │ -75 │ -32 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -37
  Row 3: input_block[3][2] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -91 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-22 -> result=-59
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-11 -> result=-85
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       36      -55      -74      -91 
  Row 1:      -11      -54      -75      -32 
  Row 2:      -11      -59      -85      -37 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -55 │ -74 │ -91 │
├─────┼─────┼─────┼─────┤
│ -11 │ -54 │ -75 │ -32 │
├─────┼─────┼─────┼─────┤
│ -11 │ -59 │ -85 │ -37 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -85 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-54 -> result=-54
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-59 -> result=-59
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-25 -> result=-25
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -11      -54      -75      -32 
  Row 1:      -11      -59      -85      -37 
  Row 2:      -25      -50      -25        0 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -54 │ -75 │ -32 │
├─────┼─────┼─────┼─────┤
│ -11 │ -59 │ -85 │ -37 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -11      -54      -75      -32 
Row 1:      -11      -59      -85      -37 
Row 2:      -25      -50      -25        0 
Row 3:      -34      -68      -34        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -11 -> clamp(-11) -> final(117)
  PE[0][1]: -54 -> clamp(-54) -> final(74)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: -11 -> clamp(-11) -> final(117)
  PE[1][1]: -59 -> clamp(-59) -> final(69)
  PE[1][2]: -85 -> clamp(-85) -> final(43)
  PE[1][3]: -37 -> clamp(-37) -> final(91)
  PE[2][0]: -25 -> clamp(-25) -> final(103)
  PE[2][1]: -50 -> clamp(-50) -> final(78)
  PE[2][2]: -25 -> clamp(-25) -> final(103)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -34 -> clamp(-34) -> final(94)
  PE[3][1]: -68 -> clamp(-68) -> final(60)
  PE[3][2]: -34 -> clamp(-34) -> final(94)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   117     74     53     96 
   117     69     43     91 
   103     78    103    128 
    94     60     94    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -26  -30  -33  -25 
 -27  -27  -31  -26 
 -27  -25  -30  -28 
 -27  -26  -31  -29 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       52       26        0      -26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -30
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       60       30        0      -30 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -33
  Row 1: input_block[1][1] = -27
  Row 2: input_block[2][0] = -27
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=27 -> result=93
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-27 -> result=6
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-54 -> result=-87
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       93        6      -27      -87 
  Row 1:       27      -27      -27      -54 
  Row 2:        0      -27      -54      -27 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  93 │   6 │ -27 │ -87 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │ -27 │ -54 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -25
  Row 1: input_block[1][2] = -31
  Row 2: input_block[2][1] = -25
  Row 3: input_block[3][0] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=27 -> result=77
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=-27 -> result=-2
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=-54 -> result=-79
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=-27 -> result=-58
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=-54 -> result=-85
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=-27 -> result=-89
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       77       -2      -27      -79 
  Row 1:       31      -58      -85      -89 
  Row 2:        0      -25      -50      -25 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  77 │  -2 │ -27 │ -79 │
├─────┼─────┼─────┼─────┤
│  31 │ -58 │ -85 │ -89 │
├─────┼─────┼─────┼─────┤
│   0 │ -25 │ -50 │ -25 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -26
  Row 2: input_block[2][2] = -30
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -58 (from PE[1][1])
  PE[0][2]: partial_in = -85 (from PE[1][2])
  PE[0][3]: partial_in = -89 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-85 -> result=-85
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=-25 -> result=-51
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=-50 -> result=-76
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=-25 -> result=-77
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-54 -> result=-84
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-27 -> result=-87
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       31      -58      -85      -89 
  Row 1:       26      -51      -76      -77 
  Row 2:      -27      -84      -87      -30 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │ -58 │ -85 │ -89 │
├─────┼─────┼─────┼─────┤
│  26 │ -51 │ -76 │ -77 │
├─────┼─────┼─────┼─────┤
│ -27 │ -84 │ -87 │ -30 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -28
  Row 3: input_block[3][2] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -76 (from PE[1][2])
  PE[0][3]: partial_in = -77 (from PE[1][3])
  PE[1][0]: partial_in = -27 (from PE[2][0])
  PE[1][1]: partial_in = -84 (from PE[2][1])
  PE[1][2]: partial_in = -87 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=26 -> result=26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-51 -> result=-51
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-76 -> result=-76
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-77 -> result=-77
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-87 -> result=-87
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=-52 -> result=-80
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=-26 -> result=-82
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       26      -51      -76      -77 
  Row 1:      -27      -84      -87      -30 
  Row 2:      -26      -80      -82      -28 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │ -51 │ -76 │ -77 │
├─────┼─────┼─────┼─────┤
│ -27 │ -84 │ -87 │ -30 │
├─────┼─────┼─────┼─────┤
│ -26 │ -80 │ -82 │ -28 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -27 (from PE[1][0])
  PE[0][1]: partial_in = -84 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -30 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -80 (from PE[2][1])
  PE[1][2]: partial_in = -82 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-27 -> result=-27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-82 -> result=-82
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -27      -84      -87      -30 
  Row 1:      -26      -80      -82      -28 
  Row 2:      -31      -62      -31        0 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -27 │ -84 │ -87 │ -30 │
├─────┼─────┼─────┼─────┤
│ -26 │ -80 │ -82 │ -28 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -27      -84      -87      -30 
Row 1:      -26      -80      -82      -28 
Row 2:      -31      -62      -31        0 
Row 3:      -29      -58      -29        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -27 -> clamp(-27) -> final(101)
  PE[0][1]: -84 -> clamp(-84) -> final(44)
  PE[0][2]: -87 -> clamp(-87) -> final(41)
  PE[0][3]: -30 -> clamp(-30) -> final(98)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -80 -> clamp(-80) -> final(48)
  PE[1][2]: -82 -> clamp(-82) -> final(46)
  PE[1][3]: -28 -> clamp(-28) -> final(100)
  PE[2][0]: -31 -> clamp(-31) -> final(97)
  PE[2][1]: -62 -> clamp(-62) -> final(66)
  PE[2][2]: -31 -> clamp(-31) -> final(97)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -29 -> clamp(-29) -> final(99)
  PE[3][1]: -58 -> clamp(-58) -> final(70)
  PE[3][2]: -29 -> clamp(-29) -> final(99)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   101     44     41     98 
   102     48     46    100 
    97     66     97    128 
    99     70     99    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -26  -40  -28  -36 
 -25  -30  -19  -31 
 -24  -26  -26  -38 
 -23  -21  -30  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       52       26        0      -26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -40
  Row 1: input_block[1][0] = -25
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=0 -> result=80
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       80       40        0      -40 
  Row 1:       25      -25      -25      -50 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │  40 │   0 │ -40 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -28
  Row 1: input_block[1][1] = -30
  Row 2: input_block[2][0] = -24
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=25 -> result=81
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=-25 -> result=3
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=-50 -> result=-78
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       81        3      -25      -78 
  Row 1:       30      -30      -30      -60 
  Row 2:        0      -24      -48      -24 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  81 │   3 │ -25 │ -78 │
├─────┼─────┼─────┼─────┤
│  30 │ -30 │ -30 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -36
  Row 1: input_block[1][2] = -19
  Row 2: input_block[2][1] = -26
  Row 3: input_block[3][0] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=30 -> result=102
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=-30 -> result=6
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=-60 -> result=-96
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=-24 -> result=-43
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=-48 -> result=-67
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=-24 -> result=-62
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      102        6      -30      -96 
  Row 1:       19      -43      -67      -62 
  Row 2:        0      -26      -52      -26 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 102 │   6 │ -30 │ -96 │
├─────┼─────┼─────┼─────┤
│  19 │ -43 │ -67 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -31
  Row 2: input_block[2][2] = -26
  Row 3: input_block[3][1] = -21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=19 -> result=19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=-26 -> result=-57
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=-52 -> result=-83
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=-26 -> result=-88
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=-46 -> result=-72
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=-23 -> result=-75
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][1]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[3][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][3]: input=-21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       19      -43      -67      -62 
  Row 1:       31      -57      -83      -88 
  Row 2:      -23      -72      -75      -26 
  Row 3:      -21      -42      -21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  19 │ -43 │ -67 │ -62 │
├─────┼─────┼─────┼─────┤
│  31 │ -57 │ -83 │ -88 │
├─────┼─────┼─────┼─────┤
│ -23 │ -72 │ -75 │ -26 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -57 (from PE[1][1])
  PE[0][2]: partial_in = -83 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = -23 (from PE[2][0])
  PE[1][1]: partial_in = -72 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -21 (from PE[3][0])
  PE[2][1]: partial_in = -42 (from PE[3][1])
  PE[2][2]: partial_in = -21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-83 -> result=-83
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-42 -> result=-80
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-21 -> result=-97
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       31      -57      -83      -88 
  Row 1:      -23      -72      -75      -26 
  Row 2:      -21      -80      -97      -38 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │ -57 │ -83 │ -88 │
├─────┼─────┼─────┼─────┤
│ -23 │ -72 │ -75 │ -26 │
├─────┼─────┼─────┼─────┤
│ -21 │ -80 │ -97 │ -38 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = -72 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -26 (from PE[1][3])
  PE[1][0]: partial_in = -21 (from PE[2][0])
  PE[1][1]: partial_in = -80 (from PE[2][1])
  PE[1][2]: partial_in = -97 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-23 -> result=-23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-72 -> result=-72
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-26 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-21 -> result=-21
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-97 -> result=-97
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -23      -72      -75      -26 
  Row 1:      -21      -80      -97      -38 
  Row 2:      -30      -60      -30        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -23 │ -72 │ -75 │ -26 │
├─────┼─────┼─────┼─────┤
│ -21 │ -80 │ -97 │ -38 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -23      -72      -75      -26 
Row 1:      -21      -80      -97      -38 
Row 2:      -30      -60      -30        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -23 -> clamp(-23) -> final(105)
  PE[0][1]: -72 -> clamp(-72) -> final(56)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: -26 -> clamp(-26) -> final(102)
  PE[1][0]: -21 -> clamp(-21) -> final(107)
  PE[1][1]: -80 -> clamp(-80) -> final(48)
  PE[1][2]: -97 -> clamp(-97) -> final(31)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -30 -> clamp(-30) -> final(98)
  PE[2][1]: -60 -> clamp(-60) -> final(68)
  PE[2][2]: -30 -> clamp(-30) -> final(98)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   105     56     53    102 
   107     48     31     90 
    98     68     98    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -18  -13    9   27 
 -21  -26   -6   11 
 -23  -35  -23  -15 
  -8  -26  -25  -31 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -18
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=0 -> result=36
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       36       18        0      -18 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │  18 │   0 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -13
  Row 1: input_block[1][0] = -21
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-13 * weight=-2 = 26, partial_in=0 -> result=26
  PE[0][1]: input=-13 * weight=-1 = 13, partial_in=0 -> result=13
  PE[0][2]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       26       13        0      -13 
  Row 1:       21      -21      -21      -42 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │  13 │   0 │ -13 │
├─────┼─────┼─────┼─────┤
│  21 │ -21 │ -21 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 9
  Row 1: input_block[1][1] = -26
  Row 2: input_block[2][0] = -23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=21 -> result=3
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=-21 -> result=-30
  PE[0][2]: input=9 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=9 * weight=1 = 9, partial_in=-42 -> result=-33
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        3      -30      -21      -33 
  Row 1:       26      -26      -26      -52 
  Row 2:        0      -23      -46      -23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │ -30 │ -21 │ -33 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 27
  Row 1: input_block[1][2] = -6
  Row 2: input_block[2][1] = -35
  Row 3: input_block[3][0] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=27 * weight=-2 = -54, partial_in=26 -> result=-28
  PE[0][1]: input=27 * weight=-1 = -27, partial_in=-26 -> result=-53
  PE[0][2]: input=27 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=27 * weight=1 = 27, partial_in=-52 -> result=-25
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=-23 -> result=-29
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=-46 -> result=-52
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=-23 -> result=-35
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -28      -53      -26      -25 
  Row 1:        6      -29      -52      -35 
  Row 2:        0      -35      -70      -35 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -53 │ -26 │ -25 │
├─────┼─────┼─────┼─────┤
│   6 │ -29 │ -52 │ -35 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 11
  Row 2: input_block[2][2] = -23
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -52 (from PE[1][2])
  PE[0][3]: partial_in = -35 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=6 -> result=6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-35 -> result=-35
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=-35 -> result=-24
  PE[1][2]: input=11 * weight=1 = 11, partial_in=-70 -> result=-59
  PE[1][3]: input=11 * weight=2 = 22, partial_in=-35 -> result=-13
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=-16 -> result=-39
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=-8 -> result=-54
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        6      -29      -52      -35 
  Row 1:      -11      -24      -59      -13 
  Row 2:       -8      -39      -54      -23 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │ -29 │ -52 │ -35 │
├─────┼─────┼─────┼─────┤
│ -11 │ -24 │ -59 │ -13 │
├─────┼─────┼─────┼─────┤
│  -8 │ -39 │ -54 │ -23 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -15
  Row 3: input_block[3][2] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -59 (from PE[1][2])
  PE[0][3]: partial_in = -13 (from PE[1][3])
  PE[1][0]: partial_in = -8 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-24 -> result=-24
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=-52 -> result=-67
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=-26 -> result=-56
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -11      -24      -59      -13 
  Row 1:       -8      -39      -54      -23 
  Row 2:      -26      -67      -56      -15 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -24 │ -59 │ -13 │
├─────┼─────┼─────┼─────┤
│  -8 │ -39 │ -54 │ -23 │
├─────┼─────┼─────┼─────┤
│ -26 │ -67 │ -56 │ -15 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = -23 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-15 -> result=-15
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-25 -> result=-25
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -8      -39      -54      -23 
  Row 1:      -26      -67      -56      -15 
  Row 2:      -25      -50      -25        0 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │ -39 │ -54 │ -23 │
├─────┼─────┼─────┼─────┤
│ -26 │ -67 │ -56 │ -15 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -8      -39      -54      -23 
Row 1:      -26      -67      -56      -15 
Row 2:      -25      -50      -25        0 
Row 3:      -31      -62      -31        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -8 -> clamp(-8) -> final(120)
  PE[0][1]: -39 -> clamp(-39) -> final(89)
  PE[0][2]: -54 -> clamp(-54) -> final(74)
  PE[0][3]: -23 -> clamp(-23) -> final(105)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -67 -> clamp(-67) -> final(61)
  PE[1][2]: -56 -> clamp(-56) -> final(72)
  PE[1][3]: -15 -> clamp(-15) -> final(113)
  PE[2][0]: -25 -> clamp(-25) -> final(103)
  PE[2][1]: -50 -> clamp(-50) -> final(78)
  PE[2][2]: -25 -> clamp(-25) -> final(103)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -31 -> clamp(-31) -> final(97)
  PE[3][1]: -62 -> clamp(-62) -> final(66)
  PE[3][2]: -31 -> clamp(-31) -> final(97)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   120     89     74    105 
   102     61     72    113 
   103     78    103    128 
    97     66     97    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  17   31   35   28 
  26   29   22   -3 
  -8  -26  -30  -33 
 -51  -79  -70  -41 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 17
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -34      -17        0       17 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 31
  Row 1: input_block[1][0] = 26
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=31 * weight=-2 = -62, partial_in=0 -> result=-62
  PE[0][1]: input=31 * weight=-1 = -31, partial_in=0 -> result=-31
  PE[0][2]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][3]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -62      -31        0       31 
  Row 1:      -26       26       26       52 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │ -31 │   0 │  31 │
├─────┼─────┼─────┼─────┤
│ -26 │  26 │  26 │  52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 35
  Row 1: input_block[1][1] = 29
  Row 2: input_block[2][0] = -8
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 26 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=35 * weight=-2 = -70, partial_in=-26 -> result=-96
  PE[0][1]: input=35 * weight=-1 = -35, partial_in=26 -> result=-9
  PE[0][2]: input=35 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=35 * weight=1 = 35, partial_in=52 -> result=87
  PE[1][0]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[1][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][3]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -96       -9       26       87 
  Row 1:      -29       29       29       58 
  Row 2:        0       -8      -16       -8 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -96 │  -9 │  26 │  87 │
├─────┼─────┼─────┼─────┤
│ -29 │  29 │  29 │  58 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 28
  Row 1: input_block[1][2] = 22
  Row 2: input_block[2][1] = -26
  Row 3: input_block[3][0] = -51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = 29 (from PE[1][1])
  PE[0][2]: partial_in = 29 (from PE[1][2])
  PE[0][3]: partial_in = 58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=-29 -> result=-85
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=29 -> result=1
  PE[0][2]: input=28 * weight=0 = 0, partial_in=29 -> result=29
  PE[0][3]: input=28 * weight=1 = 28, partial_in=58 -> result=86
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=-8 -> result=14
  PE[1][2]: input=22 * weight=1 = 22, partial_in=-16 -> result=6
  PE[1][3]: input=22 * weight=2 = 44, partial_in=-8 -> result=36
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][1]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[3][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][3]: input=-51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -85        1       29       86 
  Row 1:      -22       14        6       36 
  Row 2:        0      -26      -52      -26 
  Row 3:      -51     -102      -51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -85 │   1 │  29 │  86 │
├─────┼─────┼─────┼─────┤
│ -22 │  14 │   6 │  36 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -3
  Row 2: input_block[2][2] = -30
  Row 3: input_block[3][1] = -79

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 14 (from PE[1][1])
  PE[0][2]: partial_in = 6 (from PE[1][2])
  PE[0][3]: partial_in = 36 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -51 (from PE[3][0])
  PE[2][1]: partial_in = -102 (from PE[3][1])
  PE[2][2]: partial_in = -51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-22 -> result=-22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=14 -> result=14
  PE[0][2]: input=0 * weight=0 = 0, partial_in=6 -> result=6
  PE[0][3]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=-26 -> result=-29
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=-52 -> result=-55
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=-26 -> result=-32
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-102 -> result=-132
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-51 -> result=-111
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][1]: input=-79 * weight=2 = -158, partial_in=0 -> result=-158
  PE[3][2]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][3]: input=-79 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -22       14        6       36 
  Row 1:        3      -29      -55      -32 
  Row 2:      -51     -132     -111      -30 
  Row 3:      -79     -158      -79        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │  14 │   6 │  36 │
├─────┼─────┼─────┼─────┤
│   3 │ -29 │ -55 │ -32 │
├─────┼─────┼─────┼─────┤
│ -51 │-132 │-111 │ -30 │
├─────┼─────┼─────┼─────┤
│ -79 │-158 │ -79 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -33
  Row 3: input_block[3][2] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -51 (from PE[2][0])
  PE[1][1]: partial_in = -132 (from PE[2][1])
  PE[1][2]: partial_in = -111 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -79 (from PE[3][0])
  PE[2][1]: partial_in = -158 (from PE[3][1])
  PE[2][2]: partial_in = -79 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-51 -> result=-51
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=-79 -> result=-79
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=-158 -> result=-191
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=-79 -> result=-145
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        3      -29      -55      -32 
  Row 1:      -51     -132     -111      -30 
  Row 2:      -79     -191     -145      -33 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │ -29 │ -55 │ -32 │
├─────┼─────┼─────┼─────┤
│ -51 │-132 │-111 │ -30 │
├─────┼─────┼─────┼─────┤
│ -79 │-191 │-145 │ -33 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -51 (from PE[1][0])
  PE[0][1]: partial_in = -132 (from PE[1][1])
  PE[0][2]: partial_in = -111 (from PE[1][2])
  PE[0][3]: partial_in = -30 (from PE[1][3])
  PE[1][0]: partial_in = -79 (from PE[2][0])
  PE[1][1]: partial_in = -191 (from PE[2][1])
  PE[1][2]: partial_in = -145 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -70 (from PE[3][0])
  PE[2][1]: partial_in = -140 (from PE[3][1])
  PE[2][2]: partial_in = -70 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-51 -> result=-51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-132 -> result=-132
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-111 -> result=-111
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-79 -> result=-79
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-191 -> result=-191
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-145 -> result=-145
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-140 -> result=-140
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-70 -> result=-70
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -51     -132     -111      -30 
  Row 1:      -79     -191     -145      -33 
  Row 2:      -70     -140      -70        0 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -51 │-132 │-111 │ -30 │
├─────┼─────┼─────┼─────┤
│ -79 │-191 │-145 │ -33 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -51     -132     -111      -30 
Row 1:      -79     -191     -145      -33 
Row 2:      -70     -140      -70        0 
Row 3:      -41      -82      -41        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -51 -> clamp(-51) -> final(77)
  PE[0][1]: -132 -> clamp(-128) -> final(0)
  PE[0][2]: -111 -> clamp(-111) -> final(17)
  PE[0][3]: -30 -> clamp(-30) -> final(98)
  PE[1][0]: -79 -> clamp(-79) -> final(49)
  PE[1][1]: -191 -> clamp(-128) -> final(0)
  PE[1][2]: -145 -> clamp(-128) -> final(0)
  PE[1][3]: -33 -> clamp(-33) -> final(95)
  PE[2][0]: -70 -> clamp(-70) -> final(58)
  PE[2][1]: -140 -> clamp(-128) -> final(0)
  PE[2][2]: -70 -> clamp(-70) -> final(58)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -41 -> clamp(-41) -> final(87)
  PE[3][1]: -82 -> clamp(-82) -> final(46)
  PE[3][2]: -41 -> clamp(-41) -> final(87)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    77      0     17     98 
    49      0      0     95 
    58      0     58    128 
    87     46     87    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  28   14  -45 -113 
 -24  -19  -18  -35 
 -39  -18    8    9 
 -28   -7   15   14 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 28
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=0 -> result=-56
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[0][2]: input=28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -56      -28        0       28 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │ -28 │   0 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 14
  Row 1: input_block[1][0] = -24
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=0 -> result=-28
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[0][2]: input=14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -28      -14        0       14 
  Row 1:       24      -24      -24      -48 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -14 │   0 │  14 │
├─────┼─────┼─────┼─────┤
│  24 │ -24 │ -24 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -45
  Row 1: input_block[1][1] = -19
  Row 2: input_block[2][0] = -39
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -24 (from PE[1][2])
  PE[0][3]: partial_in = -48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=24 -> result=114
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=-24 -> result=21
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=-48 -> result=-93
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      114       21      -24      -93 
  Row 1:       19      -19      -19      -38 
  Row 2:        0      -39      -78      -39 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 114 │  21 │ -24 │ -93 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -113
  Row 1: input_block[1][2] = -18
  Row 2: input_block[2][1] = -18
  Row 3: input_block[3][0] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-113 * weight=-2 = 226, partial_in=19 -> result=245
  PE[0][1]: input=-113 * weight=-1 = 113, partial_in=-19 -> result=94
  PE[0][2]: input=-113 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=-113 * weight=1 = -113, partial_in=-38 -> result=-151
  PE[1][0]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[1][1]: input=-18 * weight=1 = -18, partial_in=-39 -> result=-57
  PE[1][2]: input=-18 * weight=1 = -18, partial_in=-78 -> result=-96
  PE[1][3]: input=-18 * weight=2 = -36, partial_in=-39 -> result=-75
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      245       94      -19     -151 
  Row 1:       18      -57      -96      -75 
  Row 2:        0      -18      -36      -18 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 245 │  94 │ -19 │-151 │
├─────┼─────┼─────┼─────┤
│  18 │ -57 │ -96 │ -75 │
├─────┼─────┼─────┼─────┤
│   0 │ -18 │ -36 │ -18 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -35
  Row 2: input_block[2][2] = 8
  Row 3: input_block[3][1] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -57 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -75 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = -36 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=18 -> result=18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=-18 -> result=-53
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=-36 -> result=-71
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=-18 -> result=-88
  PE[2][0]: input=8 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=8 * weight=1 = 8, partial_in=-56 -> result=-48
  PE[2][2]: input=8 * weight=2 = 16, partial_in=-28 -> result=-12
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       18      -57      -96      -75 
  Row 1:       35      -53      -71      -88 
  Row 2:      -28      -48      -12        8 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │ -57 │ -96 │ -75 │
├─────┼─────┼─────┼─────┤
│  35 │ -53 │ -71 │ -88 │
├─────┼─────┼─────┼─────┤
│ -28 │ -48 │ -12 │   8 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 9
  Row 3: input_block[3][2] = 15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -53 (from PE[1][1])
  PE[0][2]: partial_in = -71 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -48 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-71 -> result=-71
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=9 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=9 * weight=1 = 9, partial_in=-14 -> result=-5
  PE[2][2]: input=9 * weight=2 = 18, partial_in=-7 -> result=11
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][1]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[3][2]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][3]: input=15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       35      -53      -71      -88 
  Row 1:      -28      -48      -12        8 
  Row 2:       -7       -5       11        9 
  Row 3:       15       30       15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -53 │ -71 │ -88 │
├─────┼─────┼─────┼─────┤
│ -28 │ -48 │ -12 │   8 │
├─────┼─────┼─────┼─────┤
│  -7 │  -5 │  11 │   9 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = -7 (from PE[2][0])
  PE[1][1]: partial_in = -5 (from PE[2][1])
  PE[1][2]: partial_in = 11 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 15 (from PE[3][0])
  PE[2][1]: partial_in = 30 (from PE[3][1])
  PE[2][2]: partial_in = 15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-28 -> result=-28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-5 -> result=-5
  PE[1][2]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][3]: input=0 * weight=2 = 0, partial_in=9 -> result=9
  PE[2][0]: input=0 * weight=0 = 0, partial_in=15 -> result=15
  PE[2][1]: input=0 * weight=1 = 0, partial_in=30 -> result=30
  PE[2][2]: input=0 * weight=2 = 0, partial_in=15 -> result=15
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -28      -48      -12        8 
  Row 1:       -7       -5       11        9 
  Row 2:       15       30       15        0 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -48 │ -12 │   8 │
├─────┼─────┼─────┼─────┤
│  -7 │  -5 │  11 │   9 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -28      -48      -12        8 
Row 1:       -7       -5       11        9 
Row 2:       15       30       15        0 
Row 3:       14       28       14        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -28 -> clamp(-28) -> final(100)
  PE[0][1]: -48 -> clamp(-48) -> final(80)
  PE[0][2]: -12 -> clamp(-12) -> final(116)
  PE[0][3]: 8 -> clamp(8) -> final(136)
  PE[1][0]: -7 -> clamp(-7) -> final(121)
  PE[1][1]: -5 -> clamp(-5) -> final(123)
  PE[1][2]: 11 -> clamp(11) -> final(139)
  PE[1][3]: 9 -> clamp(9) -> final(137)
  PE[2][0]: 15 -> clamp(15) -> final(143)
  PE[2][1]: 30 -> clamp(30) -> final(158)
  PE[2][2]: 15 -> clamp(15) -> final(143)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 14 -> clamp(14) -> final(142)
  PE[3][1]: 28 -> clamp(28) -> final(156)
  PE[3][2]: 14 -> clamp(14) -> final(142)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   100     80    116    136 
   121    123    139    137 
   143    158    143    128 
   142    156    142    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-104  -82  -34    0 
 -38  -20    2    1 
   6   -3   11   31 
  33   14   23   48 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -104
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-104 * weight=-2 = 208, partial_in=0 -> result=208
  PE[0][1]: input=-104 * weight=-1 = 104, partial_in=0 -> result=104
  PE[0][2]: input=-104 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      208      104        0     -104 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 208 │ 104 │   0 │-104 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -82
  Row 1: input_block[1][0] = -38
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-82 * weight=-2 = 164, partial_in=0 -> result=164
  PE[0][1]: input=-82 * weight=-1 = 82, partial_in=0 -> result=82
  PE[0][2]: input=-82 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      164       82        0      -82 
  Row 1:       38      -38      -38      -76 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 164 │  82 │   0 │ -82 │
├─────┼─────┼─────┼─────┤
│  38 │ -38 │ -38 │ -76 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -34
  Row 1: input_block[1][1] = -20
  Row 2: input_block[2][0] = 6
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -38 (from PE[1][1])
  PE[0][2]: partial_in = -38 (from PE[1][2])
  PE[0][3]: partial_in = -76 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=38 -> result=106
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-38 -> result=-4
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-76 -> result=-110
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][0]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[2][2]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[2][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      106       -4      -38     -110 
  Row 1:       20      -20      -20      -40 
  Row 2:        0        6       12        6 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 106 │  -4 │ -38 │-110 │
├─────┼─────┼─────┼─────┤
│  20 │ -20 │ -20 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │   6 │  12 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 0
  Row 1: input_block[1][2] = 2
  Row 2: input_block[2][1] = -3
  Row 3: input_block[3][0] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 6 (from PE[2][1])
  PE[1][2]: partial_in = 12 (from PE[2][2])
  PE[1][3]: partial_in = 6 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-40 -> result=-40
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=6 -> result=8
  PE[1][2]: input=2 * weight=1 = 2, partial_in=12 -> result=14
  PE[1][3]: input=2 * weight=2 = 4, partial_in=6 -> result=10
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       20      -20      -20      -40 
  Row 1:       -2        8       14       10 
  Row 2:        0       -3       -6       -3 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -20 │ -20 │ -40 │
├─────┼─────┼─────┼─────┤
│  -2 │   8 │  14 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │  -3 │  -6 │  -3 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 1
  Row 2: input_block[2][2] = 11
  Row 3: input_block[3][1] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 8 (from PE[1][1])
  PE[0][2]: partial_in = 14 (from PE[1][2])
  PE[0][3]: partial_in = 10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -3 (from PE[2][1])
  PE[1][2]: partial_in = -6 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=14 -> result=14
  PE[0][3]: input=0 * weight=1 = 0, partial_in=10 -> result=10
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=-3 -> result=-2
  PE[1][2]: input=1 * weight=1 = 1, partial_in=-6 -> result=-5
  PE[1][3]: input=1 * weight=2 = 2, partial_in=-3 -> result=-1
  PE[2][0]: input=11 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=11 * weight=1 = 11, partial_in=66 -> result=77
  PE[2][2]: input=11 * weight=2 = 22, partial_in=33 -> result=55
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -2        8       14       10 
  Row 1:       -1       -2       -5       -1 
  Row 2:       33       77       55       11 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │   8 │  14 │  10 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -5 │  -1 │
├─────┼─────┼─────┼─────┤
│  33 │  77 │  55 │  11 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 31
  Row 3: input_block[3][2] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = -5 (from PE[1][2])
  PE[0][3]: partial_in = -1 (from PE[1][3])
  PE[1][0]: partial_in = 33 (from PE[2][0])
  PE[1][1]: partial_in = 77 (from PE[2][1])
  PE[1][2]: partial_in = 55 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 14 (from PE[3][0])
  PE[2][1]: partial_in = 28 (from PE[3][1])
  PE[2][2]: partial_in = 14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-2 -> result=-2
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-5 -> result=-5
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=77 -> result=77
  PE[1][2]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=11 -> result=11
  PE[2][0]: input=31 * weight=0 = 0, partial_in=14 -> result=14
  PE[2][1]: input=31 * weight=1 = 31, partial_in=28 -> result=59
  PE[2][2]: input=31 * weight=2 = 62, partial_in=14 -> result=76
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -1       -2       -5       -1 
  Row 1:       33       77       55       11 
  Row 2:       14       59       76       31 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  -2 │  -5 │  -1 │
├─────┼─────┼─────┼─────┤
│  33 │  77 │  55 │  11 │
├─────┼─────┼─────┼─────┤
│  14 │  59 │  76 │  31 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = 77 (from PE[1][1])
  PE[0][2]: partial_in = 55 (from PE[1][2])
  PE[0][3]: partial_in = 11 (from PE[1][3])
  PE[1][0]: partial_in = 14 (from PE[2][0])
  PE[1][1]: partial_in = 59 (from PE[2][1])
  PE[1][2]: partial_in = 76 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=33 -> result=33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=77 -> result=77
  PE[0][2]: input=0 * weight=0 = 0, partial_in=55 -> result=55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=14 -> result=14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=59 -> result=59
  PE[1][2]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=0 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=0 * weight=1 = 0, partial_in=46 -> result=46
  PE[2][2]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[3][1]: input=48 * weight=2 = 96, partial_in=0 -> result=96
  PE[3][2]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[3][3]: input=48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       33       77       55       11 
  Row 1:       14       59       76       31 
  Row 2:       23       46       23        0 
  Row 3:       48       96       48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │  77 │  55 │  11 │
├─────┼─────┼─────┼─────┤
│  14 │  59 │  76 │  31 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
├─────┼─────┼─────┼─────┤
│  48 │  96 │  48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       33       77       55       11 
Row 1:       14       59       76       31 
Row 2:       23       46       23        0 
Row 3:       48       96       48        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 33 -> clamp(33) -> final(161)
  PE[0][1]: 77 -> clamp(77) -> final(205)
  PE[0][2]: 55 -> clamp(55) -> final(183)
  PE[0][3]: 11 -> clamp(11) -> final(139)
  PE[1][0]: 14 -> clamp(14) -> final(142)
  PE[1][1]: 59 -> clamp(59) -> final(187)
  PE[1][2]: 76 -> clamp(76) -> final(204)
  PE[1][3]: 31 -> clamp(31) -> final(159)
  PE[2][0]: 23 -> clamp(23) -> final(151)
  PE[2][1]: 46 -> clamp(46) -> final(174)
  PE[2][2]: 23 -> clamp(23) -> final(151)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 48 -> clamp(48) -> final(176)
  PE[3][1]: 96 -> clamp(96) -> final(224)
  PE[3][2]: 48 -> clamp(48) -> final(176)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   161    205    183    139 
   142    187    204    159 
   151    174    151    128 
   176    224    176    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -4  -10    9   30 
 -11   -3   12   12 
  24   10    9   13 
  48   29   16    9 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -4
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-4 * weight=-2 = 8, partial_in=0 -> result=8
  PE[0][1]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[0][2]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        8        4        0       -4 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │   4 │   0 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -10
  Row 1: input_block[1][0] = -11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-10 * weight=-2 = 20, partial_in=0 -> result=20
  PE[0][1]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[0][2]: input=-10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       20       10        0      -10 
  Row 1:       11      -11      -11      -22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  10 │   0 │ -10 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 9
  Row 1: input_block[1][1] = -3
  Row 2: input_block[2][0] = 24
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=11 -> result=-7
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=-11 -> result=-20
  PE[0][2]: input=9 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=9 * weight=1 = 9, partial_in=-22 -> result=-13
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[2][0]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[2][2]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -7      -20      -11      -13 
  Row 1:        3       -3       -3       -6 
  Row 2:        0       24       48       24 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -20 │ -11 │ -13 │
├─────┼─────┼─────┼─────┤
│   3 │  -3 │  -3 │  -6 │
├─────┼─────┼─────┼─────┤
│   0 │  24 │  48 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 30
  Row 1: input_block[1][2] = 12
  Row 2: input_block[2][1] = 10
  Row 3: input_block[3][0] = 48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -3 (from PE[1][2])
  PE[0][3]: partial_in = -6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 24 (from PE[2][1])
  PE[1][2]: partial_in = 48 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=30 * weight=-2 = -60, partial_in=3 -> result=-57
  PE[0][1]: input=30 * weight=-1 = -30, partial_in=-3 -> result=-33
  PE[0][2]: input=30 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[0][3]: input=30 * weight=1 = 30, partial_in=-6 -> result=24
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=24 -> result=36
  PE[1][2]: input=12 * weight=1 = 12, partial_in=48 -> result=60
  PE[1][3]: input=12 * weight=2 = 24, partial_in=24 -> result=48
  PE[2][0]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[2][2]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][0]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[3][1]: input=48 * weight=2 = 96, partial_in=0 -> result=96
  PE[3][2]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[3][3]: input=48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -57      -33       -3       24 
  Row 1:      -12       36       60       48 
  Row 2:        0       10       20       10 
  Row 3:       48       96       48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -57 │ -33 │  -3 │  24 │
├─────┼─────┼─────┼─────┤
│ -12 │  36 │  60 │  48 │
├─────┼─────┼─────┼─────┤
│   0 │  10 │  20 │  10 │
├─────┼─────┼─────┼─────┤
│  48 │  96 │  48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 12
  Row 2: input_block[2][2] = 9
  Row 3: input_block[3][1] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = 60 (from PE[1][2])
  PE[0][3]: partial_in = 48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 10 (from PE[2][1])
  PE[1][2]: partial_in = 20 (from PE[2][2])
  PE[1][3]: partial_in = 10 (from PE[2][3])
  PE[2][0]: partial_in = 48 (from PE[3][0])
  PE[2][1]: partial_in = 96 (from PE[3][1])
  PE[2][2]: partial_in = 48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=60 -> result=60
  PE[0][3]: input=0 * weight=1 = 0, partial_in=48 -> result=48
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=10 -> result=22
  PE[1][2]: input=12 * weight=1 = 12, partial_in=20 -> result=32
  PE[1][3]: input=12 * weight=2 = 24, partial_in=10 -> result=34
  PE[2][0]: input=9 * weight=0 = 0, partial_in=48 -> result=48
  PE[2][1]: input=9 * weight=1 = 9, partial_in=96 -> result=105
  PE[2][2]: input=9 * weight=2 = 18, partial_in=48 -> result=66
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -12       36       60       48 
  Row 1:      -12       22       32       34 
  Row 2:       48      105       66        9 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  36 │  60 │  48 │
├─────┼─────┼─────┼─────┤
│ -12 │  22 │  32 │  34 │
├─────┼─────┼─────┼─────┤
│  48 │ 105 │  66 │   9 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 13
  Row 3: input_block[3][2] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 32 (from PE[1][2])
  PE[0][3]: partial_in = 34 (from PE[1][3])
  PE[1][0]: partial_in = 48 (from PE[2][0])
  PE[1][1]: partial_in = 105 (from PE[2][1])
  PE[1][2]: partial_in = 66 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=32 -> result=32
  PE[0][3]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=48 -> result=48
  PE[1][1]: input=0 * weight=1 = 0, partial_in=105 -> result=105
  PE[1][2]: input=0 * weight=1 = 0, partial_in=66 -> result=66
  PE[1][3]: input=0 * weight=2 = 0, partial_in=9 -> result=9
  PE[2][0]: input=13 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=13 * weight=1 = 13, partial_in=58 -> result=71
  PE[2][2]: input=13 * weight=2 = 26, partial_in=29 -> result=55
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -12       22       32       34 
  Row 1:       48      105       66        9 
  Row 2:       29       71       55       13 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  22 │  32 │  34 │
├─────┼─────┼─────┼─────┤
│  48 │ 105 │  66 │   9 │
├─────┼─────┼─────┼─────┤
│  29 │  71 │  55 │  13 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 48 (from PE[1][0])
  PE[0][1]: partial_in = 105 (from PE[1][1])
  PE[0][2]: partial_in = 66 (from PE[1][2])
  PE[0][3]: partial_in = 9 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 71 (from PE[2][1])
  PE[1][2]: partial_in = 55 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=48 -> result=48
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=105 -> result=105
  PE[0][2]: input=0 * weight=0 = 0, partial_in=66 -> result=66
  PE[0][3]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=71 -> result=71
  PE[1][2]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=16 -> result=16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][1]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[3][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][3]: input=9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       48      105       66        9 
  Row 1:       29       71       55       13 
  Row 2:       16       32       16        0 
  Row 3:        9       18        9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │ 105 │  66 │   9 │
├─────┼─────┼─────┼─────┤
│  29 │  71 │  55 │  13 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       48      105       66        9 
Row 1:       29       71       55       13 
Row 2:       16       32       16        0 
Row 3:        9       18        9        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 48 -> clamp(48) -> final(176)
  PE[0][1]: 105 -> clamp(105) -> final(233)
  PE[0][2]: 66 -> clamp(66) -> final(194)
  PE[0][3]: 9 -> clamp(9) -> final(137)
  PE[1][0]: 29 -> clamp(29) -> final(157)
  PE[1][1]: 71 -> clamp(71) -> final(199)
  PE[1][2]: 55 -> clamp(55) -> final(183)
  PE[1][3]: 13 -> clamp(13) -> final(141)
  PE[2][0]: 16 -> clamp(16) -> final(144)
  PE[2][1]: 32 -> clamp(32) -> final(160)
  PE[2][2]: 16 -> clamp(16) -> final(144)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 9 -> clamp(9) -> final(137)
  PE[3][1]: 18 -> clamp(18) -> final(146)
  PE[3][2]: 9 -> clamp(9) -> final(137)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   176    233    194    137 
   157    199    183    141 
   144    160    144    128 
   137    146    137    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  11    8    6  -39 
  24   23   37   24 
  22   34   51   42 
  38   39   31    8 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 11
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=0 -> result=-22
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[0][2]: input=11 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -22      -11        0       11 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │ -11 │   0 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 8
  Row 1: input_block[1][0] = 24
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=0 -> result=-16
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[0][2]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][3]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -16       -8        0        8 
  Row 1:      -24       24       24       48 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  -8 │   0 │   8 │
├─────┼─────┼─────┼─────┤
│ -24 │  24 │  24 │  48 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 6
  Row 1: input_block[1][1] = 23
  Row 2: input_block[2][0] = 22
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 24 (from PE[1][1])
  PE[0][2]: partial_in = 24 (from PE[1][2])
  PE[0][3]: partial_in = 48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=-24 -> result=-36
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=24 -> result=18
  PE[0][2]: input=6 * weight=0 = 0, partial_in=24 -> result=24
  PE[0][3]: input=6 * weight=1 = 6, partial_in=48 -> result=54
  PE[1][0]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[1][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][3]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][0]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[2][2]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -36       18       24       54 
  Row 1:      -23       23       23       46 
  Row 2:        0       22       44       22 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │  18 │  24 │  54 │
├─────┼─────┼─────┼─────┤
│ -23 │  23 │  23 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │  22 │  44 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -39
  Row 1: input_block[1][2] = 37
  Row 2: input_block[2][1] = 34
  Row 3: input_block[3][0] = 38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = 23 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 46 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = 44 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=-23 -> result=55
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=23 -> result=62
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=46 -> result=7
  PE[1][0]: input=37 * weight=-1 = -37, partial_in=0 -> result=-37
  PE[1][1]: input=37 * weight=1 = 37, partial_in=22 -> result=59
  PE[1][2]: input=37 * weight=1 = 37, partial_in=44 -> result=81
  PE[1][3]: input=37 * weight=2 = 74, partial_in=22 -> result=96
  PE[2][0]: input=34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[2][2]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[2][3]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][0]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][1]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[3][2]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][3]: input=38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       55       62       23        7 
  Row 1:      -37       59       81       96 
  Row 2:        0       34       68       34 
  Row 3:       38       76       38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │  62 │  23 │   7 │
├─────┼─────┼─────┼─────┤
│ -37 │  59 │  81 │  96 │
├─────┼─────┼─────┼─────┤
│   0 │  34 │  68 │  34 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 24
  Row 2: input_block[2][2] = 51
  Row 3: input_block[3][1] = 39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -37 (from PE[1][0])
  PE[0][1]: partial_in = 59 (from PE[1][1])
  PE[0][2]: partial_in = 81 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 34 (from PE[2][1])
  PE[1][2]: partial_in = 68 (from PE[2][2])
  PE[1][3]: partial_in = 34 (from PE[2][3])
  PE[2][0]: partial_in = 38 (from PE[3][0])
  PE[2][1]: partial_in = 76 (from PE[3][1])
  PE[2][2]: partial_in = 38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-37 -> result=-37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=59 -> result=59
  PE[0][2]: input=0 * weight=0 = 0, partial_in=81 -> result=81
  PE[0][3]: input=0 * weight=1 = 0, partial_in=96 -> result=96
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=34 -> result=58
  PE[1][2]: input=24 * weight=1 = 24, partial_in=68 -> result=92
  PE[1][3]: input=24 * weight=2 = 48, partial_in=34 -> result=82
  PE[2][0]: input=51 * weight=0 = 0, partial_in=38 -> result=38
  PE[2][1]: input=51 * weight=1 = 51, partial_in=76 -> result=127
  PE[2][2]: input=51 * weight=2 = 102, partial_in=38 -> result=140
  PE[2][3]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][0]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[3][1]: input=39 * weight=2 = 78, partial_in=0 -> result=78
  PE[3][2]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[3][3]: input=39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -37       59       81       96 
  Row 1:      -24       58       92       82 
  Row 2:       38      127      140       51 
  Row 3:       39       78       39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -37 │  59 │  81 │  96 │
├─────┼─────┼─────┼─────┤
│ -24 │  58 │  92 │  82 │
├─────┼─────┼─────┼─────┤
│  38 │ 127 │ 140 │  51 │
├─────┼─────┼─────┼─────┤
│  39 │  78 │  39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 42
  Row 3: input_block[3][2] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 58 (from PE[1][1])
  PE[0][2]: partial_in = 92 (from PE[1][2])
  PE[0][3]: partial_in = 82 (from PE[1][3])
  PE[1][0]: partial_in = 38 (from PE[2][0])
  PE[1][1]: partial_in = 127 (from PE[2][1])
  PE[1][2]: partial_in = 140 (from PE[2][2])
  PE[1][3]: partial_in = 51 (from PE[2][3])
  PE[2][0]: partial_in = 39 (from PE[3][0])
  PE[2][1]: partial_in = 78 (from PE[3][1])
  PE[2][2]: partial_in = 39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-24 -> result=-24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=58 -> result=58
  PE[0][2]: input=0 * weight=0 = 0, partial_in=92 -> result=92
  PE[0][3]: input=0 * weight=1 = 0, partial_in=82 -> result=82
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[1][1]: input=0 * weight=1 = 0, partial_in=127 -> result=127
  PE[1][2]: input=0 * weight=1 = 0, partial_in=140 -> result=140
  PE[1][3]: input=0 * weight=2 = 0, partial_in=51 -> result=51
  PE[2][0]: input=42 * weight=0 = 0, partial_in=39 -> result=39
  PE[2][1]: input=42 * weight=1 = 42, partial_in=78 -> result=120
  PE[2][2]: input=42 * weight=2 = 84, partial_in=39 -> result=123
  PE[2][3]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -24       58       92       82 
  Row 1:       38      127      140       51 
  Row 2:       39      120      123       42 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │  58 │  92 │  82 │
├─────┼─────┼─────┼─────┤
│  38 │ 127 │ 140 │  51 │
├─────┼─────┼─────┼─────┤
│  39 │ 120 │ 123 │  42 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = 127 (from PE[1][1])
  PE[0][2]: partial_in = 140 (from PE[1][2])
  PE[0][3]: partial_in = 51 (from PE[1][3])
  PE[1][0]: partial_in = 39 (from PE[2][0])
  PE[1][1]: partial_in = 120 (from PE[2][1])
  PE[1][2]: partial_in = 123 (from PE[2][2])
  PE[1][3]: partial_in = 42 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=38 -> result=38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=127 -> result=127
  PE[0][2]: input=0 * weight=0 = 0, partial_in=140 -> result=140
  PE[0][3]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=39 -> result=39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=120 -> result=120
  PE[1][2]: input=0 * weight=1 = 0, partial_in=123 -> result=123
  PE[1][3]: input=0 * weight=2 = 0, partial_in=42 -> result=42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=62 -> result=62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       38      127      140       51 
  Row 1:       39      120      123       42 
  Row 2:       31       62       31        0 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │ 127 │ 140 │  51 │
├─────┼─────┼─────┼─────┤
│  39 │ 120 │ 123 │  42 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       38      127      140       51 
Row 1:       39      120      123       42 
Row 2:       31       62       31        0 
Row 3:        8       16        8        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 38 -> clamp(38) -> final(166)
  PE[0][1]: 127 -> clamp(127) -> final(255)
  PE[0][2]: 140 -> clamp(127) -> final(255)
  PE[0][3]: 51 -> clamp(51) -> final(179)
  PE[1][0]: 39 -> clamp(39) -> final(167)
  PE[1][1]: 120 -> clamp(120) -> final(248)
  PE[1][2]: 123 -> clamp(123) -> final(251)
  PE[1][3]: 42 -> clamp(42) -> final(170)
  PE[2][0]: 31 -> clamp(31) -> final(159)
  PE[2][1]: 62 -> clamp(62) -> final(190)
  PE[2][2]: 31 -> clamp(31) -> final(159)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 8 -> clamp(8) -> final(136)
  PE[3][1]: 16 -> clamp(16) -> final(144)
  PE[3][2]: 8 -> clamp(8) -> final(136)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   166    255    255    179 
   167    248    251    170 
   159    190    159    128 
   136    144    136    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -68  -90  -89  -27 
   3  -51  -51    3 
   8  -63  -37   12 
 -29  -88  -35    7 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -68
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-68 * weight=-2 = 136, partial_in=0 -> result=136
  PE[0][1]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[0][2]: input=-68 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      136       68        0      -68 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 136 │  68 │   0 │ -68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -90
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-90 * weight=-2 = 180, partial_in=0 -> result=180
  PE[0][1]: input=-90 * weight=-1 = 90, partial_in=0 -> result=90
  PE[0][2]: input=-90 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      180       90        0      -90 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 180 │  90 │   0 │ -90 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -89
  Row 1: input_block[1][1] = -51
  Row 2: input_block[2][0] = 8
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-89 * weight=-2 = 178, partial_in=-3 -> result=175
  PE[0][1]: input=-89 * weight=-1 = 89, partial_in=3 -> result=92
  PE[0][2]: input=-89 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=-89 * weight=1 = -89, partial_in=6 -> result=-83
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][0]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[2][2]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      175       92        3      -83 
  Row 1:       51      -51      -51     -102 
  Row 2:        0        8       16        8 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 175 │  92 │   3 │ -83 │
├─────┼─────┼─────┼─────┤
│  51 │ -51 │ -51 │-102 │
├─────┼─────┼─────┼─────┤
│   0 │   8 │  16 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = -51
  Row 2: input_block[2][1] = -63
  Row 3: input_block[3][0] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 8 (from PE[2][1])
  PE[1][2]: partial_in = 16 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=51 -> result=105
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=-51 -> result=-24
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=-102 -> result=-129
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=8 -> result=-43
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=16 -> result=-35
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=8 -> result=-94
  PE[2][0]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[2][2]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      105      -24      -51     -129 
  Row 1:       51      -43      -35      -94 
  Row 2:        0      -63     -126      -63 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 105 │ -24 │ -51 │-129 │
├─────┼─────┼─────┼─────┤
│  51 │ -43 │ -35 │ -94 │
├─────┼─────┼─────┼─────┤
│   0 │ -63 │-126 │ -63 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 3
  Row 2: input_block[2][2] = -37
  Row 3: input_block[3][1] = -88

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -94 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -63 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -63 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=51 -> result=51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-63 -> result=-60
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-126 -> result=-123
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-63 -> result=-57
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-58 -> result=-95
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-29 -> result=-103
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][1]: input=-88 * weight=2 = -176, partial_in=0 -> result=-176
  PE[3][2]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][3]: input=-88 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       51      -43      -35      -94 
  Row 1:       -3      -60     -123      -57 
  Row 2:      -29      -95     -103      -37 
  Row 3:      -88     -176      -88        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  51 │ -43 │ -35 │ -94 │
├─────┼─────┼─────┼─────┤
│  -3 │ -60 │-123 │ -57 │
├─────┼─────┼─────┼─────┤
│ -29 │ -95 │-103 │ -37 │
├─────┼─────┼─────┼─────┤
│ -88 │-176 │ -88 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 12
  Row 3: input_block[3][2] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -123 (from PE[1][2])
  PE[0][3]: partial_in = -57 (from PE[1][3])
  PE[1][0]: partial_in = -29 (from PE[2][0])
  PE[1][1]: partial_in = -95 (from PE[2][1])
  PE[1][2]: partial_in = -103 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -88 (from PE[3][0])
  PE[2][1]: partial_in = -176 (from PE[3][1])
  PE[2][2]: partial_in = -88 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-123 -> result=-123
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=12 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[2][1]: input=12 * weight=1 = 12, partial_in=-176 -> result=-164
  PE[2][2]: input=12 * weight=2 = 24, partial_in=-88 -> result=-64
  PE[2][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -3      -60     -123      -57 
  Row 1:      -29      -95     -103      -37 
  Row 2:      -88     -164      -64       12 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -60 │-123 │ -57 │
├─────┼─────┼─────┼─────┤
│ -29 │ -95 │-103 │ -37 │
├─────┼─────┼─────┼─────┤
│ -88 │-164 │ -64 │  12 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -103 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = -88 (from PE[2][0])
  PE[1][1]: partial_in = -164 (from PE[2][1])
  PE[1][2]: partial_in = -64 (from PE[2][2])
  PE[1][3]: partial_in = 12 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-29 -> result=-29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-95 -> result=-95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-103 -> result=-103
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-88 -> result=-88
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-164 -> result=-164
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][3]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][1]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[3][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][3]: input=7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -29      -95     -103      -37 
  Row 1:      -88     -164      -64       12 
  Row 2:      -35      -70      -35        0 
  Row 3:        7       14        7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │ -95 │-103 │ -37 │
├─────┼─────┼─────┼─────┤
│ -88 │-164 │ -64 │  12 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  14 │   7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -29      -95     -103      -37 
Row 1:      -88     -164      -64       12 
Row 2:      -35      -70      -35        0 
Row 3:        7       14        7        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -29 -> clamp(-29) -> final(99)
  PE[0][1]: -95 -> clamp(-95) -> final(33)
  PE[0][2]: -103 -> clamp(-103) -> final(25)
  PE[0][3]: -37 -> clamp(-37) -> final(91)
  PE[1][0]: -88 -> clamp(-88) -> final(40)
  PE[1][1]: -164 -> clamp(-128) -> final(0)
  PE[1][2]: -64 -> clamp(-64) -> final(64)
  PE[1][3]: 12 -> clamp(12) -> final(140)
  PE[2][0]: -35 -> clamp(-35) -> final(93)
  PE[2][1]: -70 -> clamp(-70) -> final(58)
  PE[2][2]: -35 -> clamp(-35) -> final(93)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 7 -> clamp(7) -> final(135)
  PE[3][1]: 14 -> clamp(14) -> final(142)
  PE[3][2]: 7 -> clamp(7) -> final(135)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    99     33     25     91 
    40      0     64    140 
    93     58     93    128 
   135    142    135    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  10  -23  -44  -47 
  -9  -24  -36  -47 
 -13   -8  -39  -34 
  -7   13  -34   -9 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 10
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=0 -> result=-20
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[0][2]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -20      -10        0       10 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -10 │   0 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -23
  Row 1: input_block[1][0] = -9
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=0 -> result=46
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[1][0]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[1][1]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][3]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       46       23        0      -23 
  Row 1:        9       -9       -9      -18 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │  23 │   0 │ -23 │
├─────┼─────┼─────┼─────┤
│   9 │  -9 │  -9 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -44
  Row 1: input_block[1][1] = -24
  Row 2: input_block[2][0] = -13
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 9 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -9 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=9 -> result=97
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=-9 -> result=35
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=-18 -> result=-62
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       97       35       -9      -62 
  Row 1:       24      -24      -24      -48 
  Row 2:        0      -13      -26      -13 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  97 │  35 │  -9 │ -62 │
├─────┼─────┼─────┼─────┤
│  24 │ -24 │ -24 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -47
  Row 1: input_block[1][2] = -36
  Row 2: input_block[2][1] = -8
  Row 3: input_block[3][0] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -24 (from PE[1][2])
  PE[0][3]: partial_in = -48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-47 * weight=-2 = 94, partial_in=24 -> result=118
  PE[0][1]: input=-47 * weight=-1 = 47, partial_in=-24 -> result=23
  PE[0][2]: input=-47 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[0][3]: input=-47 * weight=1 = -47, partial_in=-48 -> result=-95
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=-13 -> result=-49
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=-26 -> result=-62
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=-13 -> result=-85
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      118       23      -24      -95 
  Row 1:       36      -49      -62      -85 
  Row 2:        0       -8      -16       -8 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 118 │  23 │ -24 │ -95 │
├─────┼─────┼─────┼─────┤
│  36 │ -49 │ -62 │ -85 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -47
  Row 2: input_block[2][2] = -39
  Row 3: input_block[3][1] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -49 (from PE[1][1])
  PE[0][2]: partial_in = -62 (from PE[1][2])
  PE[0][3]: partial_in = -85 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-49 -> result=-49
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][0]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[1][1]: input=-47 * weight=1 = -47, partial_in=-8 -> result=-55
  PE[1][2]: input=-47 * weight=1 = -47, partial_in=-16 -> result=-63
  PE[1][3]: input=-47 * weight=2 = -94, partial_in=-8 -> result=-102
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-14 -> result=-53
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-7 -> result=-85
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       36      -49      -62      -85 
  Row 1:       47      -55      -63     -102 
  Row 2:       -7      -53      -85      -39 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -49 │ -62 │ -85 │
├─────┼─────┼─────┼─────┤
│  47 │ -55 │ -63 │-102 │
├─────┼─────┼─────┼─────┤
│  -7 │ -53 │ -85 │ -39 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -34
  Row 3: input_block[3][2] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 47 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = -7 (from PE[2][0])
  PE[1][1]: partial_in = -53 (from PE[2][1])
  PE[1][2]: partial_in = -85 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = 13 (from PE[3][0])
  PE[2][1]: partial_in = 26 (from PE[3][1])
  PE[2][2]: partial_in = 13 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=47 -> result=47
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-53 -> result=-53
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=13 -> result=13
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=26 -> result=-8
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=13 -> result=-55
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       47      -55      -63     -102 
  Row 1:       -7      -53      -85      -39 
  Row 2:       13       -8      -55      -34 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  47 │ -55 │ -63 │-102 │
├─────┼─────┼─────┼─────┤
│  -7 │ -53 │ -85 │ -39 │
├─────┼─────┼─────┼─────┤
│  13 │  -8 │ -55 │ -34 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = -53 (from PE[1][1])
  PE[0][2]: partial_in = -85 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = 13 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -55 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-85 -> result=-85
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=13 -> result=13
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -7      -53      -85      -39 
  Row 1:       13       -8      -55      -34 
  Row 2:      -34      -68      -34        0 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -53 │ -85 │ -39 │
├─────┼─────┼─────┼─────┤
│  13 │  -8 │ -55 │ -34 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -7      -53      -85      -39 
Row 1:       13       -8      -55      -34 
Row 2:      -34      -68      -34        0 
Row 3:       -9      -18       -9        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -7 -> clamp(-7) -> final(121)
  PE[0][1]: -53 -> clamp(-53) -> final(75)
  PE[0][2]: -85 -> clamp(-85) -> final(43)
  PE[0][3]: -39 -> clamp(-39) -> final(89)
  PE[1][0]: 13 -> clamp(13) -> final(141)
  PE[1][1]: -8 -> clamp(-8) -> final(120)
  PE[1][2]: -55 -> clamp(-55) -> final(73)
  PE[1][3]: -34 -> clamp(-34) -> final(94)
  PE[2][0]: -34 -> clamp(-34) -> final(94)
  PE[2][1]: -68 -> clamp(-68) -> final(60)
  PE[2][2]: -34 -> clamp(-34) -> final(94)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -9 -> clamp(-9) -> final(119)
  PE[3][1]: -18 -> clamp(-18) -> final(110)
  PE[3][2]: -9 -> clamp(-9) -> final(119)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   121     75     43     89 
   141    120     73     94 
    94     60     94    128 
   119    110    119    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -39  -48  -55  -20 
 -35  -35  -49  -18 
  -9  -17  -23  -16 
  12  -23   -3    7 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=0 -> result=78
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       78       39        0      -39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  39 │   0 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -48
  Row 1: input_block[1][0] = -35
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=0 -> result=96
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       96       48        0      -48 
  Row 1:       35      -35      -35      -70 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │  48 │   0 │ -48 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -55
  Row 1: input_block[1][1] = -35
  Row 2: input_block[2][0] = -9
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-55 * weight=-2 = 110, partial_in=35 -> result=145
  PE[0][1]: input=-55 * weight=-1 = 55, partial_in=-35 -> result=20
  PE[0][2]: input=-55 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=-55 * weight=1 = -55, partial_in=-70 -> result=-125
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=-9 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[2][2]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[2][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      145       20      -35     -125 
  Row 1:       35      -35      -35      -70 
  Row 2:        0       -9      -18       -9 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 145 │  20 │ -35 │-125 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │  -9 │ -18 │  -9 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -20
  Row 1: input_block[1][2] = -49
  Row 2: input_block[2][1] = -17
  Row 3: input_block[3][0] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -9 (from PE[2][1])
  PE[1][2]: partial_in = -18 (from PE[2][2])
  PE[1][3]: partial_in = -9 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=35 -> result=75
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=-35 -> result=-15
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=-70 -> result=-90
  PE[1][0]: input=-49 * weight=-1 = 49, partial_in=0 -> result=49
  PE[1][1]: input=-49 * weight=1 = -49, partial_in=-9 -> result=-58
  PE[1][2]: input=-49 * weight=1 = -49, partial_in=-18 -> result=-67
  PE[1][3]: input=-49 * weight=2 = -98, partial_in=-9 -> result=-107
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       75      -15      -35      -90 
  Row 1:       49      -58      -67     -107 
  Row 2:        0      -17      -34      -17 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │ -15 │ -35 │ -90 │
├─────┼─────┼─────┼─────┤
│  49 │ -58 │ -67 │-107 │
├─────┼─────┼─────┼─────┤
│   0 │ -17 │ -34 │ -17 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -18
  Row 2: input_block[2][2] = -23
  Row 3: input_block[3][1] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 49 (from PE[1][0])
  PE[0][1]: partial_in = -58 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -107 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -34 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=49 -> result=49
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-107 -> result=-107
  PE[1][0]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[1][1]: input=-18 * weight=1 = -18, partial_in=-17 -> result=-35
  PE[1][2]: input=-18 * weight=1 = -18, partial_in=-34 -> result=-52
  PE[1][3]: input=-18 * weight=2 = -36, partial_in=-17 -> result=-53
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=24 -> result=1
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=12 -> result=-34
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       49      -58      -67     -107 
  Row 1:       18      -35      -52      -53 
  Row 2:       12        1      -34      -23 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  49 │ -58 │ -67 │-107 │
├─────┼─────┼─────┼─────┤
│  18 │ -35 │ -52 │ -53 │
├─────┼─────┼─────┼─────┤
│  12 │   1 │ -34 │ -23 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -16
  Row 3: input_block[3][2] = -3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -52 (from PE[1][2])
  PE[0][3]: partial_in = -53 (from PE[1][3])
  PE[1][0]: partial_in = 12 (from PE[2][0])
  PE[1][1]: partial_in = 1 (from PE[2][1])
  PE[1][2]: partial_in = -34 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=18 -> result=18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-53 -> result=-53
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[1][1]: input=0 * weight=1 = 0, partial_in=1 -> result=1
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=-46 -> result=-62
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=-23 -> result=-55
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][1]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[3][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][3]: input=-3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       18      -35      -52      -53 
  Row 1:       12        1      -34      -23 
  Row 2:      -23      -62      -55      -16 
  Row 3:       -3       -6       -3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │ -35 │ -52 │ -53 │
├─────┼─────┼─────┼─────┤
│  12 │   1 │ -34 │ -23 │
├─────┼─────┼─────┼─────┤
│ -23 │ -62 │ -55 │ -16 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 12 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = -34 (from PE[1][2])
  PE[0][3]: partial_in = -23 (from PE[1][3])
  PE[1][0]: partial_in = -23 (from PE[2][0])
  PE[1][1]: partial_in = -62 (from PE[2][1])
  PE[1][2]: partial_in = -55 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = -3 (from PE[3][0])
  PE[2][1]: partial_in = -6 (from PE[3][1])
  PE[2][2]: partial_in = -3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=12 -> result=12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][1]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[3][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][3]: input=7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       12        1      -34      -23 
  Row 1:      -23      -62      -55      -16 
  Row 2:       -3       -6       -3        0 
  Row 3:        7       14        7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │   1 │ -34 │ -23 │
├─────┼─────┼─────┼─────┤
│ -23 │ -62 │ -55 │ -16 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  14 │   7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       12        1      -34      -23 
Row 1:      -23      -62      -55      -16 
Row 2:       -3       -6       -3        0 
Row 3:        7       14        7        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 12 -> clamp(12) -> final(140)
  PE[0][1]: 1 -> clamp(1) -> final(129)
  PE[0][2]: -34 -> clamp(-34) -> final(94)
  PE[0][3]: -23 -> clamp(-23) -> final(105)
  PE[1][0]: -23 -> clamp(-23) -> final(105)
  PE[1][1]: -62 -> clamp(-62) -> final(66)
  PE[1][2]: -55 -> clamp(-55) -> final(73)
  PE[1][3]: -16 -> clamp(-16) -> final(112)
  PE[2][0]: -3 -> clamp(-3) -> final(125)
  PE[2][1]: -6 -> clamp(-6) -> final(122)
  PE[2][2]: -3 -> clamp(-3) -> final(125)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 7 -> clamp(7) -> final(135)
  PE[3][1]: 14 -> clamp(14) -> final(142)
  PE[3][2]: 7 -> clamp(7) -> final(135)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   140    129     94    105 
   105     66     73    112 
   125    122    125    128 
   135    142    135    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -4   41   25  -26 
  -4   30   25  -13 
  -5   18   30   13 
   3   19   44   43 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -4
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-4 * weight=-2 = 8, partial_in=0 -> result=8
  PE[0][1]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[0][2]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        8        4        0       -4 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │   4 │   0 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 41
  Row 1: input_block[1][0] = -4
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=41 * weight=-2 = -82, partial_in=0 -> result=-82
  PE[0][1]: input=41 * weight=-1 = -41, partial_in=0 -> result=-41
  PE[0][2]: input=41 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[1][0]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[1][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][3]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -82      -41        0       41 
  Row 1:        4       -4       -4       -8 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -82 │ -41 │   0 │  41 │
├─────┼─────┼─────┼─────┤
│   4 │  -4 │  -4 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 25
  Row 1: input_block[1][1] = 30
  Row 2: input_block[2][0] = -5
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 4 (from PE[1][0])
  PE[0][1]: partial_in = -4 (from PE[1][1])
  PE[0][2]: partial_in = -4 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=25 * weight=-2 = -50, partial_in=4 -> result=-46
  PE[0][1]: input=25 * weight=-1 = -25, partial_in=-4 -> result=-29
  PE[0][2]: input=25 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[0][3]: input=25 * weight=1 = 25, partial_in=-8 -> result=17
  PE[1][0]: input=30 * weight=-1 = -30, partial_in=0 -> result=-30
  PE[1][1]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][3]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[2][0]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[2][2]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[2][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -46      -29       -4       17 
  Row 1:      -30       30       30       60 
  Row 2:        0       -5      -10       -5 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -46 │ -29 │  -4 │  17 │
├─────┼─────┼─────┼─────┤
│ -30 │  30 │  30 │  60 │
├─────┼─────┼─────┼─────┤
│   0 │  -5 │ -10 │  -5 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -26
  Row 1: input_block[1][2] = 25
  Row 2: input_block[2][1] = 18
  Row 3: input_block[3][0] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -30 (from PE[1][0])
  PE[0][1]: partial_in = 30 (from PE[1][1])
  PE[0][2]: partial_in = 30 (from PE[1][2])
  PE[0][3]: partial_in = 60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -5 (from PE[2][1])
  PE[1][2]: partial_in = -10 (from PE[2][2])
  PE[1][3]: partial_in = -5 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=-30 -> result=22
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=30 -> result=56
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=30 -> result=30
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=60 -> result=34
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=-5 -> result=20
  PE[1][2]: input=25 * weight=1 = 25, partial_in=-10 -> result=15
  PE[1][3]: input=25 * weight=2 = 50, partial_in=-5 -> result=45
  PE[2][0]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[2][2]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[2][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       22       56       30       34 
  Row 1:      -25       20       15       45 
  Row 2:        0       18       36       18 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  56 │  30 │  34 │
├─────┼─────┼─────┼─────┤
│ -25 │  20 │  15 │  45 │
├─────┼─────┼─────┼─────┤
│   0 │  18 │  36 │  18 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -13
  Row 2: input_block[2][2] = 30
  Row 3: input_block[3][1] = 19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 15 (from PE[1][2])
  PE[0][3]: partial_in = 45 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 18 (from PE[2][1])
  PE[1][2]: partial_in = 36 (from PE[2][2])
  PE[1][3]: partial_in = 18 (from PE[2][3])
  PE[2][0]: partial_in = 3 (from PE[3][0])
  PE[2][1]: partial_in = 6 (from PE[3][1])
  PE[2][2]: partial_in = 3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=20 -> result=20
  PE[0][2]: input=0 * weight=0 = 0, partial_in=15 -> result=15
  PE[0][3]: input=0 * weight=1 = 0, partial_in=45 -> result=45
  PE[1][0]: input=-13 * weight=-1 = 13, partial_in=0 -> result=13
  PE[1][1]: input=-13 * weight=1 = -13, partial_in=18 -> result=5
  PE[1][2]: input=-13 * weight=1 = -13, partial_in=36 -> result=23
  PE[1][3]: input=-13 * weight=2 = -26, partial_in=18 -> result=-8
  PE[2][0]: input=30 * weight=0 = 0, partial_in=3 -> result=3
  PE[2][1]: input=30 * weight=1 = 30, partial_in=6 -> result=36
  PE[2][2]: input=30 * weight=2 = 60, partial_in=3 -> result=63
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][1]: input=19 * weight=2 = 38, partial_in=0 -> result=38
  PE[3][2]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][3]: input=19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -25       20       15       45 
  Row 1:       13        5       23       -8 
  Row 2:        3       36       63       30 
  Row 3:       19       38       19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  20 │  15 │  45 │
├─────┼─────┼─────┼─────┤
│  13 │   5 │  23 │  -8 │
├─────┼─────┼─────┼─────┤
│   3 │  36 │  63 │  30 │
├─────┼─────┼─────┼─────┤
│  19 │  38 │  19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 13
  Row 3: input_block[3][2] = 44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 13 (from PE[1][0])
  PE[0][1]: partial_in = 5 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = 3 (from PE[2][0])
  PE[1][1]: partial_in = 36 (from PE[2][1])
  PE[1][2]: partial_in = 63 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = 19 (from PE[3][0])
  PE[2][1]: partial_in = 38 (from PE[3][1])
  PE[2][2]: partial_in = 19 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=13 -> result=13
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=5 -> result=5
  PE[0][2]: input=0 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[1][1]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[1][2]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][3]: input=0 * weight=2 = 0, partial_in=30 -> result=30
  PE[2][0]: input=13 * weight=0 = 0, partial_in=19 -> result=19
  PE[2][1]: input=13 * weight=1 = 13, partial_in=38 -> result=51
  PE[2][2]: input=13 * weight=2 = 26, partial_in=19 -> result=45
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][1]: input=44 * weight=2 = 88, partial_in=0 -> result=88
  PE[3][2]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][3]: input=44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       13        5       23       -8 
  Row 1:        3       36       63       30 
  Row 2:       19       51       45       13 
  Row 3:       44       88       44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  13 │   5 │  23 │  -8 │
├─────┼─────┼─────┼─────┤
│   3 │  36 │  63 │  30 │
├─────┼─────┼─────┼─────┤
│  19 │  51 │  45 │  13 │
├─────┼─────┼─────┼─────┤
│  44 │  88 │  44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = 63 (from PE[1][2])
  PE[0][3]: partial_in = 30 (from PE[1][3])
  PE[1][0]: partial_in = 19 (from PE[2][0])
  PE[1][1]: partial_in = 51 (from PE[2][1])
  PE[1][2]: partial_in = 45 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 44 (from PE[3][0])
  PE[2][1]: partial_in = 88 (from PE[3][1])
  PE[2][2]: partial_in = 44 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=63 -> result=63
  PE[0][3]: input=0 * weight=1 = 0, partial_in=30 -> result=30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=19 -> result=19
  PE[1][1]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][2]: input=0 * weight=1 = 0, partial_in=45 -> result=45
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=0 * weight=0 = 0, partial_in=44 -> result=44
  PE[2][1]: input=0 * weight=1 = 0, partial_in=88 -> result=88
  PE[2][2]: input=0 * weight=2 = 0, partial_in=44 -> result=44
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][1]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[3][2]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][3]: input=43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        3       36       63       30 
  Row 1:       19       51       45       13 
  Row 2:       44       88       44        0 
  Row 3:       43       86       43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │  36 │  63 │  30 │
├─────┼─────┼─────┼─────┤
│  19 │  51 │  45 │  13 │
├─────┼─────┼─────┼─────┤
│  44 │  88 │  44 │   0 │
├─────┼─────┼─────┼─────┤
│  43 │  86 │  43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        3       36       63       30 
Row 1:       19       51       45       13 
Row 2:       44       88       44        0 
Row 3:       43       86       43        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 3 -> clamp(3) -> final(131)
  PE[0][1]: 36 -> clamp(36) -> final(164)
  PE[0][2]: 63 -> clamp(63) -> final(191)
  PE[0][3]: 30 -> clamp(30) -> final(158)
  PE[1][0]: 19 -> clamp(19) -> final(147)
  PE[1][1]: 51 -> clamp(51) -> final(179)
  PE[1][2]: 45 -> clamp(45) -> final(173)
  PE[1][3]: 13 -> clamp(13) -> final(141)
  PE[2][0]: 44 -> clamp(44) -> final(172)
  PE[2][1]: 88 -> clamp(88) -> final(216)
  PE[2][2]: 44 -> clamp(44) -> final(172)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 43 -> clamp(43) -> final(171)
  PE[3][1]: 86 -> clamp(86) -> final(214)
  PE[3][2]: 43 -> clamp(43) -> final(171)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   131    164    191    158 
   147    179    173    141 
   172    216    172    128 
   171    214    171    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -36  -29  -30  -23 
 -32  -36  -36  -27 
 -16  -36  -37  -29 
   5  -26  -28  -20 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -36
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=0 -> result=72
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       72       36        0      -36 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  72 │  36 │   0 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -29
  Row 1: input_block[1][0] = -32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=0 -> result=58
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       58       29        0      -29 
  Row 1:       32      -32      -32      -64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  29 │   0 │ -29 │
├─────┼─────┼─────┼─────┤
│  32 │ -32 │ -32 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -30
  Row 1: input_block[1][1] = -36
  Row 2: input_block[2][0] = -16
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=32 -> result=92
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=-32 -> result=-2
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=-64 -> result=-94
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       92       -2      -32      -94 
  Row 1:       36      -36      -36      -72 
  Row 2:        0      -16      -32      -16 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  92 │  -2 │ -32 │ -94 │
├─────┼─────┼─────┼─────┤
│  36 │ -36 │ -36 │ -72 │
├─────┼─────┼─────┼─────┤
│   0 │ -16 │ -32 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -23
  Row 1: input_block[1][2] = -36
  Row 2: input_block[2][1] = -36
  Row 3: input_block[3][0] = 5

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -36 (from PE[1][2])
  PE[0][3]: partial_in = -72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -32 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=36 -> result=82
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=-36 -> result=-13
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=-72 -> result=-95
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=-16 -> result=-52
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=-32 -> result=-68
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=-16 -> result=-88
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][1]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[3][2]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][3]: input=5 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       82      -13      -36      -95 
  Row 1:       36      -52      -68      -88 
  Row 2:        0      -36      -72      -36 
  Row 3:        5       10        5        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │ -13 │ -36 │ -95 │
├─────┼─────┼─────┼─────┤
│  36 │ -52 │ -68 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │ -36 │ -72 │ -36 │
├─────┼─────┼─────┼─────┤
│   5 │  10 │   5 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -27
  Row 2: input_block[2][2] = -37
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -36 (from PE[2][1])
  PE[1][2]: partial_in = -72 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = 5 (from PE[3][0])
  PE[2][1]: partial_in = 10 (from PE[3][1])
  PE[2][2]: partial_in = 5 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-36 -> result=-63
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-72 -> result=-99
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-36 -> result=-90
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=5 -> result=5
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=10 -> result=-27
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=5 -> result=-69
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       36      -52      -68      -88 
  Row 1:       27      -63      -99      -90 
  Row 2:        5      -27      -69      -37 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -52 │ -68 │ -88 │
├─────┼─────┼─────┼─────┤
│  27 │ -63 │ -99 │ -90 │
├─────┼─────┼─────┼─────┤
│   5 │ -27 │ -69 │ -37 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -29
  Row 3: input_block[3][2] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -99 (from PE[1][2])
  PE[0][3]: partial_in = -90 (from PE[1][3])
  PE[1][0]: partial_in = 5 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -69 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-63 -> result=-63
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-99 -> result=-99
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=5 -> result=5
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-27 -> result=-27
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=-52 -> result=-81
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=-26 -> result=-84
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       27      -63      -99      -90 
  Row 1:        5      -27      -69      -37 
  Row 2:      -26      -81      -84      -29 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -63 │ -99 │ -90 │
├─────┼─────┼─────┼─────┤
│   5 │ -27 │ -69 │ -37 │
├─────┼─────┼─────┼─────┤
│ -26 │ -81 │ -84 │ -29 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -81 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=5 -> result=5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-81 -> result=-81
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-29 -> result=-29
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        5      -27      -69      -37 
  Row 1:      -26      -81      -84      -29 
  Row 2:      -28      -56      -28        0 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   5 │ -27 │ -69 │ -37 │
├─────┼─────┼─────┼─────┤
│ -26 │ -81 │ -84 │ -29 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        5      -27      -69      -37 
Row 1:      -26      -81      -84      -29 
Row 2:      -28      -56      -28        0 
Row 3:      -20      -40      -20        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 5 -> clamp(5) -> final(133)
  PE[0][1]: -27 -> clamp(-27) -> final(101)
  PE[0][2]: -69 -> clamp(-69) -> final(59)
  PE[0][3]: -37 -> clamp(-37) -> final(91)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -81 -> clamp(-81) -> final(47)
  PE[1][2]: -84 -> clamp(-84) -> final(44)
  PE[1][3]: -29 -> clamp(-29) -> final(99)
  PE[2][0]: -28 -> clamp(-28) -> final(100)
  PE[2][1]: -56 -> clamp(-56) -> final(72)
  PE[2][2]: -28 -> clamp(-28) -> final(100)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -20 -> clamp(-20) -> final(108)
  PE[3][1]: -40 -> clamp(-40) -> final(88)
  PE[3][2]: -20 -> clamp(-20) -> final(108)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   133    101     59     91 
   102     47     44     99 
   100     72    100    128 
   108     88    108    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -19  -13  -22  -33 
 -26  -16  -23  -36 
 -12   -7  -21  -38 
   9    8  -15  -36 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -19
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-19 * weight=-2 = 38, partial_in=0 -> result=38
  PE[0][1]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[0][2]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       38       19        0      -19 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │  19 │   0 │ -19 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -13
  Row 1: input_block[1][0] = -26
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-13 * weight=-2 = 26, partial_in=0 -> result=26
  PE[0][1]: input=-13 * weight=-1 = 13, partial_in=0 -> result=13
  PE[0][2]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       26       13        0      -13 
  Row 1:       26      -26      -26      -52 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │  13 │   0 │ -13 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -22
  Row 1: input_block[1][1] = -16
  Row 2: input_block[2][0] = -12
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=26 -> result=70
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=-26 -> result=-4
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=-52 -> result=-74
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       70       -4      -26      -74 
  Row 1:       16      -16      -16      -32 
  Row 2:        0      -12      -24      -12 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │  -4 │ -26 │ -74 │
├─────┼─────┼─────┼─────┤
│  16 │ -16 │ -16 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │ -12 │ -24 │ -12 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -33
  Row 1: input_block[1][2] = -23
  Row 2: input_block[2][1] = -7
  Row 3: input_block[3][0] = 9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -12 (from PE[2][1])
  PE[1][2]: partial_in = -24 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=16 -> result=82
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-16 -> result=17
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-32 -> result=-65
  PE[1][0]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[1][1]: input=-23 * weight=1 = -23, partial_in=-12 -> result=-35
  PE[1][2]: input=-23 * weight=1 = -23, partial_in=-24 -> result=-47
  PE[1][3]: input=-23 * weight=2 = -46, partial_in=-12 -> result=-58
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][1]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[3][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][3]: input=9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       82       17      -16      -65 
  Row 1:       23      -35      -47      -58 
  Row 2:        0       -7      -14       -7 
  Row 3:        9       18        9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │  17 │ -16 │ -65 │
├─────┼─────┼─────┼─────┤
│  23 │ -35 │ -47 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -36
  Row 2: input_block[2][2] = -21
  Row 3: input_block[3][1] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -47 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 9 (from PE[3][0])
  PE[2][1]: partial_in = 18 (from PE[3][1])
  PE[2][2]: partial_in = 9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=-7 -> result=-43
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=-14 -> result=-50
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=-7 -> result=-79
  PE[2][0]: input=-21 * weight=0 = 0, partial_in=9 -> result=9
  PE[2][1]: input=-21 * weight=1 = -21, partial_in=18 -> result=-3
  PE[2][2]: input=-21 * weight=2 = -42, partial_in=9 -> result=-33
  PE[2][3]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       23      -35      -47      -58 
  Row 1:       36      -43      -50      -79 
  Row 2:        9       -3      -33      -21 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │ -35 │ -47 │ -58 │
├─────┼─────┼─────┼─────┤
│  36 │ -43 │ -50 │ -79 │
├─────┼─────┼─────┼─────┤
│   9 │  -3 │ -33 │ -21 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = -79 (from PE[1][3])
  PE[1][0]: partial_in = 9 (from PE[2][0])
  PE[1][1]: partial_in = -3 (from PE[2][1])
  PE[1][2]: partial_in = -33 (from PE[2][2])
  PE[1][3]: partial_in = -21 (from PE[2][3])
  PE[2][0]: partial_in = 8 (from PE[3][0])
  PE[2][1]: partial_in = 16 (from PE[3][1])
  PE[2][2]: partial_in = 8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-79 -> result=-79
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-33 -> result=-33
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-21 -> result=-21
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=8 -> result=8
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=16 -> result=-22
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=8 -> result=-68
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       36      -43      -50      -79 
  Row 1:        9       -3      -33      -21 
  Row 2:        8      -22      -68      -38 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -43 │ -50 │ -79 │
├─────┼─────┼─────┼─────┤
│   9 │  -3 │ -33 │ -21 │
├─────┼─────┼─────┼─────┤
│   8 │ -22 │ -68 │ -38 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 9 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -33 (from PE[1][2])
  PE[0][3]: partial_in = -21 (from PE[1][3])
  PE[1][0]: partial_in = 8 (from PE[2][0])
  PE[1][1]: partial_in = -22 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -15 (from PE[3][0])
  PE[2][1]: partial_in = -30 (from PE[3][1])
  PE[2][2]: partial_in = -15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=9 -> result=9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-3 -> result=-3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-22 -> result=-22
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-15 -> result=-15
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        9       -3      -33      -21 
  Row 1:        8      -22      -68      -38 
  Row 2:      -15      -30      -15        0 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   9 │  -3 │ -33 │ -21 │
├─────┼─────┼─────┼─────┤
│   8 │ -22 │ -68 │ -38 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        9       -3      -33      -21 
Row 1:        8      -22      -68      -38 
Row 2:      -15      -30      -15        0 
Row 3:      -36      -72      -36        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 9 -> clamp(9) -> final(137)
  PE[0][1]: -3 -> clamp(-3) -> final(125)
  PE[0][2]: -33 -> clamp(-33) -> final(95)
  PE[0][3]: -21 -> clamp(-21) -> final(107)
  PE[1][0]: 8 -> clamp(8) -> final(136)
  PE[1][1]: -22 -> clamp(-22) -> final(106)
  PE[1][2]: -68 -> clamp(-68) -> final(60)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -15 -> clamp(-15) -> final(113)
  PE[2][1]: -30 -> clamp(-30) -> final(98)
  PE[2][2]: -15 -> clamp(-15) -> final(113)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -36 -> clamp(-36) -> final(92)
  PE[3][1]: -72 -> clamp(-72) -> final(56)
  PE[3][2]: -36 -> clamp(-36) -> final(92)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   137    125     95    107 
   136    106     60     90 
   113     98    113    128 
    92     56     92    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -30  -29  -30  -27 
 -34  -30  -29  -24 
 -34  -28  -28  -26 
 -32  -25  -28  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -30
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       60       30        0      -30 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -29
  Row 1: input_block[1][0] = -34
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=0 -> result=58
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       58       29        0      -29 
  Row 1:       34      -34      -34      -68 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  29 │   0 │ -29 │
├─────┼─────┼─────┼─────┤
│  34 │ -34 │ -34 │ -68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -30
  Row 1: input_block[1][1] = -30
  Row 2: input_block[2][0] = -34
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -34 (from PE[1][1])
  PE[0][2]: partial_in = -34 (from PE[1][2])
  PE[0][3]: partial_in = -68 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=34 -> result=94
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=-34 -> result=-4
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=-68 -> result=-98
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       94       -4      -34      -98 
  Row 1:       30      -30      -30      -60 
  Row 2:        0      -34      -68      -34 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  94 │  -4 │ -34 │ -98 │
├─────┼─────┼─────┼─────┤
│  30 │ -30 │ -30 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │ -34 │ -68 │ -34 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = -29
  Row 2: input_block[2][1] = -28
  Row 3: input_block[3][0] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -34 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=30 -> result=84
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=-30 -> result=-3
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=-60 -> result=-87
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=-34 -> result=-63
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=-68 -> result=-97
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=-34 -> result=-92
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       84       -3      -30      -87 
  Row 1:       29      -63      -97      -92 
  Row 2:        0      -28      -56      -28 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  84 │  -3 │ -30 │ -87 │
├─────┼─────┼─────┼─────┤
│  29 │ -63 │ -97 │ -92 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -24
  Row 2: input_block[2][2] = -28
  Row 3: input_block[3][1] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -92 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-63 -> result=-63
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=-28 -> result=-52
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=-56 -> result=-80
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=-28 -> result=-76
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=-64 -> result=-92
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=-32 -> result=-88
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       29      -63      -97      -92 
  Row 1:       24      -52      -80      -76 
  Row 2:      -32      -92      -88      -28 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │ -63 │ -97 │ -92 │
├─────┼─────┼─────┼─────┤
│  24 │ -52 │ -80 │ -76 │
├─────┼─────┼─────┼─────┤
│ -32 │ -92 │ -88 │ -28 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -26
  Row 3: input_block[3][2] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -80 (from PE[1][2])
  PE[0][3]: partial_in = -76 (from PE[1][3])
  PE[1][0]: partial_in = -32 (from PE[2][0])
  PE[1][1]: partial_in = -92 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=24 -> result=24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-76 -> result=-76
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=-50 -> result=-76
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=-25 -> result=-77
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       24      -52      -80      -76 
  Row 1:      -32      -92      -88      -28 
  Row 2:      -25      -76      -77      -26 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │ -52 │ -80 │ -76 │
├─────┼─────┼─────┼─────┤
│ -32 │ -92 │ -88 │ -28 │
├─────┼─────┼─────┼─────┤
│ -25 │ -76 │ -77 │ -26 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = -92 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -28 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -76 (from PE[2][1])
  PE[1][2]: partial_in = -77 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-92 -> result=-92
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-28 -> result=-28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-76 -> result=-76
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-77 -> result=-77
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -32      -92      -88      -28 
  Row 1:      -25      -76      -77      -26 
  Row 2:      -28      -56      -28        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │ -92 │ -88 │ -28 │
├─────┼─────┼─────┼─────┤
│ -25 │ -76 │ -77 │ -26 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -32      -92      -88      -28 
Row 1:      -25      -76      -77      -26 
Row 2:      -28      -56      -28        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -32 -> clamp(-32) -> final(96)
  PE[0][1]: -92 -> clamp(-92) -> final(36)
  PE[0][2]: -88 -> clamp(-88) -> final(40)
  PE[0][3]: -28 -> clamp(-28) -> final(100)
  PE[1][0]: -25 -> clamp(-25) -> final(103)
  PE[1][1]: -76 -> clamp(-76) -> final(52)
  PE[1][2]: -77 -> clamp(-77) -> final(51)
  PE[1][3]: -26 -> clamp(-26) -> final(102)
  PE[2][0]: -28 -> clamp(-28) -> final(100)
  PE[2][1]: -56 -> clamp(-56) -> final(72)
  PE[2][2]: -28 -> clamp(-28) -> final(100)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    96     36     40    100 
   103     52     51    102 
   100     72    100    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -21    9   11   11 
 -19   47   66   65 
 -16   58   70   62 
 -16   46   36   23 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -21
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=0 -> result=42
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       42       21        0      -21 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │  21 │   0 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 9
  Row 1: input_block[1][0] = -19
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=0 -> result=-18
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[0][2]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -18       -9        0        9 
  Row 1:       19      -19      -19      -38 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  -9 │   0 │   9 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 11
  Row 1: input_block[1][1] = 47
  Row 2: input_block[2][0] = -16
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=19 -> result=-3
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=-19 -> result=-30
  PE[0][2]: input=11 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=11 * weight=1 = 11, partial_in=-38 -> result=-27
  PE[1][0]: input=47 * weight=-1 = -47, partial_in=0 -> result=-47
  PE[1][1]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[1][2]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[1][3]: input=47 * weight=2 = 94, partial_in=0 -> result=94
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -3      -30      -19      -27 
  Row 1:      -47       47       47       94 
  Row 2:        0      -16      -32      -16 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -30 │ -19 │ -27 │
├─────┼─────┼─────┼─────┤
│ -47 │  47 │  47 │  94 │
├─────┼─────┼─────┼─────┤
│   0 │ -16 │ -32 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 11
  Row 1: input_block[1][2] = 66
  Row 2: input_block[2][1] = 58
  Row 3: input_block[3][0] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -47 (from PE[1][0])
  PE[0][1]: partial_in = 47 (from PE[1][1])
  PE[0][2]: partial_in = 47 (from PE[1][2])
  PE[0][3]: partial_in = 94 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -32 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=-47 -> result=-69
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=47 -> result=36
  PE[0][2]: input=11 * weight=0 = 0, partial_in=47 -> result=47
  PE[0][3]: input=11 * weight=1 = 11, partial_in=94 -> result=105
  PE[1][0]: input=66 * weight=-1 = -66, partial_in=0 -> result=-66
  PE[1][1]: input=66 * weight=1 = 66, partial_in=-16 -> result=50
  PE[1][2]: input=66 * weight=1 = 66, partial_in=-32 -> result=34
  PE[1][3]: input=66 * weight=2 = 132, partial_in=-16 -> result=116
  PE[2][0]: input=58 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[2][2]: input=58 * weight=2 = 116, partial_in=0 -> result=116
  PE[2][3]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -69       36       47      105 
  Row 1:      -66       50       34      116 
  Row 2:        0       58      116       58 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -69 │  36 │  47 │ 105 │
├─────┼─────┼─────┼─────┤
│ -66 │  50 │  34 │ 116 │
├─────┼─────┼─────┼─────┤
│   0 │  58 │ 116 │  58 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 65
  Row 2: input_block[2][2] = 70
  Row 3: input_block[3][1] = 46

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -66 (from PE[1][0])
  PE[0][1]: partial_in = 50 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = 116 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 58 (from PE[2][1])
  PE[1][2]: partial_in = 116 (from PE[2][2])
  PE[1][3]: partial_in = 58 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-66 -> result=-66
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=50 -> result=50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=116 -> result=116
  PE[1][0]: input=65 * weight=-1 = -65, partial_in=0 -> result=-65
  PE[1][1]: input=65 * weight=1 = 65, partial_in=58 -> result=123
  PE[1][2]: input=65 * weight=1 = 65, partial_in=116 -> result=181
  PE[1][3]: input=65 * weight=2 = 130, partial_in=58 -> result=188
  PE[2][0]: input=70 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=70 * weight=1 = 70, partial_in=-32 -> result=38
  PE[2][2]: input=70 * weight=2 = 140, partial_in=-16 -> result=124
  PE[2][3]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[3][0]: input=46 * weight=1 = 46, partial_in=0 -> result=46
  PE[3][1]: input=46 * weight=2 = 92, partial_in=0 -> result=92
  PE[3][2]: input=46 * weight=1 = 46, partial_in=0 -> result=46
  PE[3][3]: input=46 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -66       50       34      116 
  Row 1:      -65      123      181      188 
  Row 2:      -16       38      124       70 
  Row 3:       46       92       46        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │  50 │  34 │ 116 │
├─────┼─────┼─────┼─────┤
│ -65 │ 123 │ 181 │ 188 │
├─────┼─────┼─────┼─────┤
│ -16 │  38 │ 124 │  70 │
├─────┼─────┼─────┼─────┤
│  46 │  92 │  46 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 62
  Row 3: input_block[3][2] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -65 (from PE[1][0])
  PE[0][1]: partial_in = 123 (from PE[1][1])
  PE[0][2]: partial_in = 181 (from PE[1][2])
  PE[0][3]: partial_in = 188 (from PE[1][3])
  PE[1][0]: partial_in = -16 (from PE[2][0])
  PE[1][1]: partial_in = 38 (from PE[2][1])
  PE[1][2]: partial_in = 124 (from PE[2][2])
  PE[1][3]: partial_in = 70 (from PE[2][3])
  PE[2][0]: partial_in = 46 (from PE[3][0])
  PE[2][1]: partial_in = 92 (from PE[3][1])
  PE[2][2]: partial_in = 46 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-65 -> result=-65
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=123 -> result=123
  PE[0][2]: input=0 * weight=0 = 0, partial_in=181 -> result=181
  PE[0][3]: input=0 * weight=1 = 0, partial_in=188 -> result=188
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[1][2]: input=0 * weight=1 = 0, partial_in=124 -> result=124
  PE[1][3]: input=0 * weight=2 = 0, partial_in=70 -> result=70
  PE[2][0]: input=62 * weight=0 = 0, partial_in=46 -> result=46
  PE[2][1]: input=62 * weight=1 = 62, partial_in=92 -> result=154
  PE[2][2]: input=62 * weight=2 = 124, partial_in=46 -> result=170
  PE[2][3]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -65      123      181      188 
  Row 1:      -16       38      124       70 
  Row 2:       46      154      170       62 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -65 │ 123 │ 181 │ 188 │
├─────┼─────┼─────┼─────┤
│ -16 │  38 │ 124 │  70 │
├─────┼─────┼─────┼─────┤
│  46 │ 154 │ 170 │  62 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -16 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 124 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 46 (from PE[2][0])
  PE[1][1]: partial_in = 154 (from PE[2][1])
  PE[1][2]: partial_in = 170 (from PE[2][2])
  PE[1][3]: partial_in = 62 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-16 -> result=-16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=124 -> result=124
  PE[0][3]: input=0 * weight=1 = 0, partial_in=70 -> result=70
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=46 -> result=46
  PE[1][1]: input=0 * weight=1 = 0, partial_in=154 -> result=154
  PE[1][2]: input=0 * weight=1 = 0, partial_in=170 -> result=170
  PE[1][3]: input=0 * weight=2 = 0, partial_in=62 -> result=62
  PE[2][0]: input=0 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[2][2]: input=0 * weight=2 = 0, partial_in=36 -> result=36
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -16       38      124       70 
  Row 1:       46      154      170       62 
  Row 2:       36       72       36        0 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  38 │ 124 │  70 │
├─────┼─────┼─────┼─────┤
│  46 │ 154 │ 170 │  62 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -16       38      124       70 
Row 1:       46      154      170       62 
Row 2:       36       72       36        0 
Row 3:       23       46       23        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -16 -> clamp(-16) -> final(112)
  PE[0][1]: 38 -> clamp(38) -> final(166)
  PE[0][2]: 124 -> clamp(124) -> final(252)
  PE[0][3]: 70 -> clamp(70) -> final(198)
  PE[1][0]: 46 -> clamp(46) -> final(174)
  PE[1][1]: 154 -> clamp(127) -> final(255)
  PE[1][2]: 170 -> clamp(127) -> final(255)
  PE[1][3]: 62 -> clamp(62) -> final(190)
  PE[2][0]: 36 -> clamp(36) -> final(164)
  PE[2][1]: 72 -> clamp(72) -> final(200)
  PE[2][2]: 36 -> clamp(36) -> final(164)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 23 -> clamp(23) -> final(151)
  PE[3][1]: 46 -> clamp(46) -> final(174)
  PE[3][2]: 23 -> clamp(23) -> final(151)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   112    166    252    198 
   174    255    255    190 
   164    200    164    128 
   151    174    151    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  32   -4  -11  -20 
  66    6    1   -2 
  59   -7   -8   -7 
  30  -27  -24  -26 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 32
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=0 -> result=-64
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[0][2]: input=32 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -64      -32        0       32 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │ -32 │   0 │  32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -4
  Row 1: input_block[1][0] = 66
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-4 * weight=-2 = 8, partial_in=0 -> result=8
  PE[0][1]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[0][2]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][0]: input=66 * weight=-1 = -66, partial_in=0 -> result=-66
  PE[1][1]: input=66 * weight=1 = 66, partial_in=0 -> result=66
  PE[1][2]: input=66 * weight=1 = 66, partial_in=0 -> result=66
  PE[1][3]: input=66 * weight=2 = 132, partial_in=0 -> result=132
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        8        4        0       -4 
  Row 1:      -66       66       66      132 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │   4 │   0 │  -4 │
├─────┼─────┼─────┼─────┤
│ -66 │  66 │  66 │ 132 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -11
  Row 1: input_block[1][1] = 6
  Row 2: input_block[2][0] = 59
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -66 (from PE[1][0])
  PE[0][1]: partial_in = 66 (from PE[1][1])
  PE[0][2]: partial_in = 66 (from PE[1][2])
  PE[0][3]: partial_in = 132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=-66 -> result=-44
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=66 -> result=77
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=66 -> result=66
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=132 -> result=121
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][3]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[2][0]: input=59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[2][2]: input=59 * weight=2 = 118, partial_in=0 -> result=118
  PE[2][3]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -44       77       66      121 
  Row 1:       -6        6        6       12 
  Row 2:        0       59      118       59 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │  77 │  66 │ 121 │
├─────┼─────┼─────┼─────┤
│  -6 │   6 │   6 │  12 │
├─────┼─────┼─────┼─────┤
│   0 │  59 │ 118 │  59 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -20
  Row 1: input_block[1][2] = 1
  Row 2: input_block[2][1] = -7
  Row 3: input_block[3][0] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = 6 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 59 (from PE[2][1])
  PE[1][2]: partial_in = 118 (from PE[2][2])
  PE[1][3]: partial_in = 59 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=-6 -> result=34
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=6 -> result=26
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=6 -> result=6
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=12 -> result=-8
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=59 -> result=60
  PE[1][2]: input=1 * weight=1 = 1, partial_in=118 -> result=119
  PE[1][3]: input=1 * weight=2 = 2, partial_in=59 -> result=61
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       34       26        6       -8 
  Row 1:       -1       60      119       61 
  Row 2:        0       -7      -14       -7 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │  26 │   6 │  -8 │
├─────┼─────┼─────┼─────┤
│  -1 │  60 │ 119 │  61 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -2
  Row 2: input_block[2][2] = -8
  Row 3: input_block[3][1] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 119 (from PE[1][2])
  PE[0][3]: partial_in = 61 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 30 (from PE[3][0])
  PE[2][1]: partial_in = 60 (from PE[3][1])
  PE[2][2]: partial_in = 30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=119 -> result=119
  PE[0][3]: input=0 * weight=1 = 0, partial_in=61 -> result=61
  PE[1][0]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[1][1]: input=-2 * weight=1 = -2, partial_in=-7 -> result=-9
  PE[1][2]: input=-2 * weight=1 = -2, partial_in=-14 -> result=-16
  PE[1][3]: input=-2 * weight=2 = -4, partial_in=-7 -> result=-11
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=30 -> result=30
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=60 -> result=52
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=30 -> result=14
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -1       60      119       61 
  Row 1:        2       -9      -16      -11 
  Row 2:       30       52       14       -8 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  60 │ 119 │  61 │
├─────┼─────┼─────┼─────┤
│   2 │  -9 │ -16 │ -11 │
├─────┼─────┼─────┼─────┤
│  30 │  52 │  14 │  -8 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -7
  Row 3: input_block[3][2] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 2 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -11 (from PE[1][3])
  PE[1][0]: partial_in = 30 (from PE[2][0])
  PE[1][1]: partial_in = 52 (from PE[2][1])
  PE[1][2]: partial_in = 14 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=2 -> result=2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][2]: input=0 * weight=1 = 0, partial_in=14 -> result=14
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=-54 -> result=-61
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=-27 -> result=-41
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        2       -9      -16      -11 
  Row 1:       30       52       14       -8 
  Row 2:      -27      -61      -41       -7 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   2 │  -9 │ -16 │ -11 │
├─────┼─────┼─────┼─────┤
│  30 │  52 │  14 │  -8 │
├─────┼─────┼─────┼─────┤
│ -27 │ -61 │ -41 │  -7 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = 52 (from PE[1][1])
  PE[0][2]: partial_in = 14 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = -27 (from PE[2][0])
  PE[1][1]: partial_in = -61 (from PE[2][1])
  PE[1][2]: partial_in = -41 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = -24 (from PE[3][0])
  PE[2][1]: partial_in = -48 (from PE[3][1])
  PE[2][2]: partial_in = -24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=30 -> result=30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=52 -> result=52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=14 -> result=14
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-61 -> result=-61
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-41 -> result=-41
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-7 -> result=-7
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-24 -> result=-24
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       30       52       14       -8 
  Row 1:      -27      -61      -41       -7 
  Row 2:      -24      -48      -24        0 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │  52 │  14 │  -8 │
├─────┼─────┼─────┼─────┤
│ -27 │ -61 │ -41 │  -7 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       30       52       14       -8 
Row 1:      -27      -61      -41       -7 
Row 2:      -24      -48      -24        0 
Row 3:      -26      -52      -26        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 30 -> clamp(30) -> final(158)
  PE[0][1]: 52 -> clamp(52) -> final(180)
  PE[0][2]: 14 -> clamp(14) -> final(142)
  PE[0][3]: -8 -> clamp(-8) -> final(120)
  PE[1][0]: -27 -> clamp(-27) -> final(101)
  PE[1][1]: -61 -> clamp(-61) -> final(67)
  PE[1][2]: -41 -> clamp(-41) -> final(87)
  PE[1][3]: -7 -> clamp(-7) -> final(121)
  PE[2][0]: -24 -> clamp(-24) -> final(104)
  PE[2][1]: -48 -> clamp(-48) -> final(80)
  PE[2][2]: -24 -> clamp(-24) -> final(104)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -26 -> clamp(-26) -> final(102)
  PE[3][1]: -52 -> clamp(-52) -> final(76)
  PE[3][2]: -26 -> clamp(-26) -> final(102)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   158    180    142    120 
   101     67     87    121 
   104     80    104    128 
   102     76    102    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -46  -77  -74  -44 
 -26  -66  -86  -57 
 -23  -59  -95  -68 
 -24  -39  -76  -67 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -46
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=0 -> result=92
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=0 -> result=46
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       92       46        0      -46 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  92 │  46 │   0 │ -46 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -77
  Row 1: input_block[1][0] = -26
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-77 * weight=-2 = 154, partial_in=0 -> result=154
  PE[0][1]: input=-77 * weight=-1 = 77, partial_in=0 -> result=77
  PE[0][2]: input=-77 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      154       77        0      -77 
  Row 1:       26      -26      -26      -52 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 154 │  77 │   0 │ -77 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -74
  Row 1: input_block[1][1] = -66
  Row 2: input_block[2][0] = -23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-74 * weight=-2 = 148, partial_in=26 -> result=174
  PE[0][1]: input=-74 * weight=-1 = 74, partial_in=-26 -> result=48
  PE[0][2]: input=-74 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=-74 * weight=1 = -74, partial_in=-52 -> result=-126
  PE[1][0]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[1][1]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][3]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      174       48      -26     -126 
  Row 1:       66      -66      -66     -132 
  Row 2:        0      -23      -46      -23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 174 │  48 │ -26 │-126 │
├─────┼─────┼─────┼─────┤
│  66 │ -66 │ -66 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -44
  Row 1: input_block[1][2] = -86
  Row 2: input_block[2][1] = -59
  Row 3: input_block[3][0] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 66 (from PE[1][0])
  PE[0][1]: partial_in = -66 (from PE[1][1])
  PE[0][2]: partial_in = -66 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=66 -> result=154
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=-66 -> result=-22
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=-132 -> result=-176
  PE[1][0]: input=-86 * weight=-1 = 86, partial_in=0 -> result=86
  PE[1][1]: input=-86 * weight=1 = -86, partial_in=-23 -> result=-109
  PE[1][2]: input=-86 * weight=1 = -86, partial_in=-46 -> result=-132
  PE[1][3]: input=-86 * weight=2 = -172, partial_in=-23 -> result=-195
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      154      -22      -66     -176 
  Row 1:       86     -109     -132     -195 
  Row 2:        0      -59     -118      -59 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 154 │ -22 │ -66 │-176 │
├─────┼─────┼─────┼─────┤
│  86 │-109 │-132 │-195 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -57
  Row 2: input_block[2][2] = -95
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 86 (from PE[1][0])
  PE[0][1]: partial_in = -109 (from PE[1][1])
  PE[0][2]: partial_in = -132 (from PE[1][2])
  PE[0][3]: partial_in = -195 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = -24 (from PE[3][0])
  PE[2][1]: partial_in = -48 (from PE[3][1])
  PE[2][2]: partial_in = -24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=86 -> result=86
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-109 -> result=-109
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-132 -> result=-132
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-195 -> result=-195
  PE[1][0]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[1][1]: input=-57 * weight=1 = -57, partial_in=-59 -> result=-116
  PE[1][2]: input=-57 * weight=1 = -57, partial_in=-118 -> result=-175
  PE[1][3]: input=-57 * weight=2 = -114, partial_in=-59 -> result=-173
  PE[2][0]: input=-95 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[2][1]: input=-95 * weight=1 = -95, partial_in=-48 -> result=-143
  PE[2][2]: input=-95 * weight=2 = -190, partial_in=-24 -> result=-214
  PE[2][3]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       86     -109     -132     -195 
  Row 1:       57     -116     -175     -173 
  Row 2:      -24     -143     -214      -95 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │-109 │-132 │-195 │
├─────┼─────┼─────┼─────┤
│  57 │-116 │-175 │-173 │
├─────┼─────┼─────┼─────┤
│ -24 │-143 │-214 │ -95 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -68
  Row 3: input_block[3][2] = -76

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 57 (from PE[1][0])
  PE[0][1]: partial_in = -116 (from PE[1][1])
  PE[0][2]: partial_in = -175 (from PE[1][2])
  PE[0][3]: partial_in = -173 (from PE[1][3])
  PE[1][0]: partial_in = -24 (from PE[2][0])
  PE[1][1]: partial_in = -143 (from PE[2][1])
  PE[1][2]: partial_in = -214 (from PE[2][2])
  PE[1][3]: partial_in = -95 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=57 -> result=57
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-116 -> result=-116
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-175 -> result=-175
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-173 -> result=-173
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-24 -> result=-24
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-214 -> result=-214
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-95 -> result=-95
  PE[2][0]: input=-68 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-68 * weight=1 = -68, partial_in=-78 -> result=-146
  PE[2][2]: input=-68 * weight=2 = -136, partial_in=-39 -> result=-175
  PE[2][3]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[3][0]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[3][1]: input=-76 * weight=2 = -152, partial_in=0 -> result=-152
  PE[3][2]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[3][3]: input=-76 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       57     -116     -175     -173 
  Row 1:      -24     -143     -214      -95 
  Row 2:      -39     -146     -175      -68 
  Row 3:      -76     -152      -76        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  57 │-116 │-175 │-173 │
├─────┼─────┼─────┼─────┤
│ -24 │-143 │-214 │ -95 │
├─────┼─────┼─────┼─────┤
│ -39 │-146 │-175 │ -68 │
├─────┼─────┼─────┼─────┤
│ -76 │-152 │ -76 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = -143 (from PE[1][1])
  PE[0][2]: partial_in = -214 (from PE[1][2])
  PE[0][3]: partial_in = -95 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -146 (from PE[2][1])
  PE[1][2]: partial_in = -175 (from PE[2][2])
  PE[1][3]: partial_in = -68 (from PE[2][3])
  PE[2][0]: partial_in = -76 (from PE[3][0])
  PE[2][1]: partial_in = -152 (from PE[3][1])
  PE[2][2]: partial_in = -76 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-24 -> result=-24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-143 -> result=-143
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-214 -> result=-214
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-146 -> result=-146
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-175 -> result=-175
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-68 -> result=-68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-76 -> result=-76
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-152 -> result=-152
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-76 -> result=-76
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][1]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[3][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][3]: input=-67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -24     -143     -214      -95 
  Row 1:      -39     -146     -175      -68 
  Row 2:      -76     -152      -76        0 
  Row 3:      -67     -134      -67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │-143 │-214 │ -95 │
├─────┼─────┼─────┼─────┤
│ -39 │-146 │-175 │ -68 │
├─────┼─────┼─────┼─────┤
│ -76 │-152 │ -76 │   0 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -24     -143     -214      -95 
Row 1:      -39     -146     -175      -68 
Row 2:      -76     -152      -76        0 
Row 3:      -67     -134      -67        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -24 -> clamp(-24) -> final(104)
  PE[0][1]: -143 -> clamp(-128) -> final(0)
  PE[0][2]: -214 -> clamp(-128) -> final(0)
  PE[0][3]: -95 -> clamp(-95) -> final(33)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -146 -> clamp(-128) -> final(0)
  PE[1][2]: -175 -> clamp(-128) -> final(0)
  PE[1][3]: -68 -> clamp(-68) -> final(60)
  PE[2][0]: -76 -> clamp(-76) -> final(52)
  PE[2][1]: -152 -> clamp(-128) -> final(0)
  PE[2][2]: -76 -> clamp(-76) -> final(52)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -67 -> clamp(-67) -> final(61)
  PE[3][1]: -134 -> clamp(-128) -> final(0)
  PE[3][2]: -67 -> clamp(-67) -> final(61)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   104      0      0     33 
    89      0      0     60 
    52      0     52    128 
    61      0     61    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -30  -17    8   24 
 -21   -7    5   25 
 -10    5    6   32 
 -20  -10    6   62 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -30
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       60       30        0      -30 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -17
  Row 1: input_block[1][0] = -21
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-17 * weight=-2 = 34, partial_in=0 -> result=34
  PE[0][1]: input=-17 * weight=-1 = 17, partial_in=0 -> result=17
  PE[0][2]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       34       17        0      -17 
  Row 1:       21      -21      -21      -42 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │  17 │   0 │ -17 │
├─────┼─────┼─────┼─────┤
│  21 │ -21 │ -21 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 8
  Row 1: input_block[1][1] = -7
  Row 2: input_block[2][0] = -10
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=21 -> result=5
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=-21 -> result=-29
  PE[0][2]: input=8 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=8 * weight=1 = 8, partial_in=-42 -> result=-34
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=-10 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[2][2]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[2][3]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        5      -29      -21      -34 
  Row 1:        7       -7       -7      -14 
  Row 2:        0      -10      -20      -10 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   5 │ -29 │ -21 │ -34 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │ -10 │ -20 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 24
  Row 1: input_block[1][2] = 5
  Row 2: input_block[2][1] = 5
  Row 3: input_block[3][0] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -10 (from PE[2][1])
  PE[1][2]: partial_in = -20 (from PE[2][2])
  PE[1][3]: partial_in = -10 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=7 -> result=-41
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=-7 -> result=-31
  PE[0][2]: input=24 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=24 * weight=1 = 24, partial_in=-14 -> result=10
  PE[1][0]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[1][1]: input=5 * weight=1 = 5, partial_in=-10 -> result=-5
  PE[1][2]: input=5 * weight=1 = 5, partial_in=-20 -> result=-15
  PE[1][3]: input=5 * weight=2 = 10, partial_in=-10 -> result=0
  PE[2][0]: input=5 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[2][2]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -41      -31       -7       10 
  Row 1:       -5       -5      -15        0 
  Row 2:        0        5       10        5 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -41 │ -31 │  -7 │  10 │
├─────┼─────┼─────┼─────┤
│  -5 │  -5 │ -15 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   5 │  10 │   5 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 25
  Row 2: input_block[2][2] = 6
  Row 3: input_block[3][1] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -5 (from PE[1][0])
  PE[0][1]: partial_in = -5 (from PE[1][1])
  PE[0][2]: partial_in = -15 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 5 (from PE[2][1])
  PE[1][2]: partial_in = 10 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-5 -> result=-5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-5 -> result=-5
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=5 -> result=30
  PE[1][2]: input=25 * weight=1 = 25, partial_in=10 -> result=35
  PE[1][3]: input=25 * weight=2 = 50, partial_in=5 -> result=55
  PE[2][0]: input=6 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=6 * weight=1 = 6, partial_in=-40 -> result=-34
  PE[2][2]: input=6 * weight=2 = 12, partial_in=-20 -> result=-8
  PE[2][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -5       -5      -15        0 
  Row 1:      -25       30       35       55 
  Row 2:      -20      -34       -8        6 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -5 │  -5 │ -15 │   0 │
├─────┼─────┼─────┼─────┤
│ -25 │  30 │  35 │  55 │
├─────┼─────┼─────┼─────┤
│ -20 │ -34 │  -8 │   6 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 32
  Row 3: input_block[3][2] = 6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 30 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 55 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -34 (from PE[2][1])
  PE[1][2]: partial_in = -8 (from PE[2][2])
  PE[1][3]: partial_in = 6 (from PE[2][3])
  PE[2][0]: partial_in = -10 (from PE[3][0])
  PE[2][1]: partial_in = -20 (from PE[3][1])
  PE[2][2]: partial_in = -10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][3]: input=0 * weight=2 = 0, partial_in=6 -> result=6
  PE[2][0]: input=32 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[2][1]: input=32 * weight=1 = 32, partial_in=-20 -> result=12
  PE[2][2]: input=32 * weight=2 = 64, partial_in=-10 -> result=54
  PE[2][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][0]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][1]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[3][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][3]: input=6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -25       30       35       55 
  Row 1:      -20      -34       -8        6 
  Row 2:      -10       12       54       32 
  Row 3:        6       12        6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  30 │  35 │  55 │
├─────┼─────┼─────┼─────┤
│ -20 │ -34 │  -8 │   6 │
├─────┼─────┼─────┼─────┤
│ -10 │  12 │  54 │  32 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = -34 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -10 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 54 (from PE[2][2])
  PE[1][3]: partial_in = 32 (from PE[2][3])
  PE[2][0]: partial_in = 6 (from PE[3][0])
  PE[2][1]: partial_in = 12 (from PE[3][1])
  PE[2][2]: partial_in = 6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-10 -> result=-10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][2]: input=0 * weight=1 = 0, partial_in=54 -> result=54
  PE[1][3]: input=0 * weight=2 = 0, partial_in=32 -> result=32
  PE[2][0]: input=0 * weight=0 = 0, partial_in=6 -> result=6
  PE[2][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[2][2]: input=0 * weight=2 = 0, partial_in=6 -> result=6
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[3][1]: input=62 * weight=2 = 124, partial_in=0 -> result=124
  PE[3][2]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[3][3]: input=62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -20      -34       -8        6 
  Row 1:      -10       12       54       32 
  Row 2:        6       12        6        0 
  Row 3:       62      124       62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -34 │  -8 │   6 │
├─────┼─────┼─────┼─────┤
│ -10 │  12 │  54 │  32 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
├─────┼─────┼─────┼─────┤
│  62 │ 124 │  62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -20      -34       -8        6 
Row 1:      -10       12       54       32 
Row 2:        6       12        6        0 
Row 3:       62      124       62        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -20 -> clamp(-20) -> final(108)
  PE[0][1]: -34 -> clamp(-34) -> final(94)
  PE[0][2]: -8 -> clamp(-8) -> final(120)
  PE[0][3]: 6 -> clamp(6) -> final(134)
  PE[1][0]: -10 -> clamp(-10) -> final(118)
  PE[1][1]: 12 -> clamp(12) -> final(140)
  PE[1][2]: 54 -> clamp(54) -> final(182)
  PE[1][3]: 32 -> clamp(32) -> final(160)
  PE[2][0]: 6 -> clamp(6) -> final(134)
  PE[2][1]: 12 -> clamp(12) -> final(140)
  PE[2][2]: 6 -> clamp(6) -> final(134)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 62 -> clamp(62) -> final(190)
  PE[3][1]: 124 -> clamp(124) -> final(252)
  PE[3][2]: 62 -> clamp(62) -> final(190)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   108     94    120    134 
   118    140    182    160 
   134    140    134    128 
   190    252    190    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  31   38   37   27 
  42   38   33   26 
  84   44   26   28 
  80   41   10   -7 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 31
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=31 * weight=-2 = -62, partial_in=0 -> result=-62
  PE[0][1]: input=31 * weight=-1 = -31, partial_in=0 -> result=-31
  PE[0][2]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -62      -31        0       31 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │ -31 │   0 │  31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 38
  Row 1: input_block[1][0] = 42
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=38 * weight=-2 = -76, partial_in=0 -> result=-76
  PE[0][1]: input=38 * weight=-1 = -38, partial_in=0 -> result=-38
  PE[0][2]: input=38 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[1][0]: input=42 * weight=-1 = -42, partial_in=0 -> result=-42
  PE[1][1]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[1][2]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[1][3]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -76      -38        0       38 
  Row 1:      -42       42       42       84 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -76 │ -38 │   0 │  38 │
├─────┼─────┼─────┼─────┤
│ -42 │  42 │  42 │  84 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 37
  Row 1: input_block[1][1] = 38
  Row 2: input_block[2][0] = 84
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -42 (from PE[1][0])
  PE[0][1]: partial_in = 42 (from PE[1][1])
  PE[0][2]: partial_in = 42 (from PE[1][2])
  PE[0][3]: partial_in = 84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=37 * weight=-2 = -74, partial_in=-42 -> result=-116
  PE[0][1]: input=37 * weight=-1 = -37, partial_in=42 -> result=5
  PE[0][2]: input=37 * weight=0 = 0, partial_in=42 -> result=42
  PE[0][3]: input=37 * weight=1 = 37, partial_in=84 -> result=121
  PE[1][0]: input=38 * weight=-1 = -38, partial_in=0 -> result=-38
  PE[1][1]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[1][2]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[1][3]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[2][0]: input=84 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=84 * weight=1 = 84, partial_in=0 -> result=84
  PE[2][2]: input=84 * weight=2 = 168, partial_in=0 -> result=168
  PE[2][3]: input=84 * weight=1 = 84, partial_in=0 -> result=84
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -116        5       42      121 
  Row 1:      -38       38       38       76 
  Row 2:        0       84      168       84 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-116 │   5 │  42 │ 121 │
├─────┼─────┼─────┼─────┤
│ -38 │  38 │  38 │  76 │
├─────┼─────┼─────┼─────┤
│   0 │  84 │ 168 │  84 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 27
  Row 1: input_block[1][2] = 33
  Row 2: input_block[2][1] = 44
  Row 3: input_block[3][0] = 80

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -38 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 38 (from PE[1][2])
  PE[0][3]: partial_in = 76 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 84 (from PE[2][1])
  PE[1][2]: partial_in = 168 (from PE[2][2])
  PE[1][3]: partial_in = 84 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=27 * weight=-2 = -54, partial_in=-38 -> result=-92
  PE[0][1]: input=27 * weight=-1 = -27, partial_in=38 -> result=11
  PE[0][2]: input=27 * weight=0 = 0, partial_in=38 -> result=38
  PE[0][3]: input=27 * weight=1 = 27, partial_in=76 -> result=103
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=84 -> result=117
  PE[1][2]: input=33 * weight=1 = 33, partial_in=168 -> result=201
  PE[1][3]: input=33 * weight=2 = 66, partial_in=84 -> result=150
  PE[2][0]: input=44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[2][2]: input=44 * weight=2 = 88, partial_in=0 -> result=88
  PE[2][3]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][0]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[3][1]: input=80 * weight=2 = 160, partial_in=0 -> result=160
  PE[3][2]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[3][3]: input=80 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -92       11       38      103 
  Row 1:      -33      117      201      150 
  Row 2:        0       44       88       44 
  Row 3:       80      160       80        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -92 │  11 │  38 │ 103 │
├─────┼─────┼─────┼─────┤
│ -33 │ 117 │ 201 │ 150 │
├─────┼─────┼─────┼─────┤
│   0 │  44 │  88 │  44 │
├─────┼─────┼─────┼─────┤
│  80 │ 160 │  80 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 26
  Row 2: input_block[2][2] = 26
  Row 3: input_block[3][1] = 41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 117 (from PE[1][1])
  PE[0][2]: partial_in = 201 (from PE[1][2])
  PE[0][3]: partial_in = 150 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 44 (from PE[2][1])
  PE[1][2]: partial_in = 88 (from PE[2][2])
  PE[1][3]: partial_in = 44 (from PE[2][3])
  PE[2][0]: partial_in = 80 (from PE[3][0])
  PE[2][1]: partial_in = 160 (from PE[3][1])
  PE[2][2]: partial_in = 80 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=117 -> result=117
  PE[0][2]: input=0 * weight=0 = 0, partial_in=201 -> result=201
  PE[0][3]: input=0 * weight=1 = 0, partial_in=150 -> result=150
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=44 -> result=70
  PE[1][2]: input=26 * weight=1 = 26, partial_in=88 -> result=114
  PE[1][3]: input=26 * weight=2 = 52, partial_in=44 -> result=96
  PE[2][0]: input=26 * weight=0 = 0, partial_in=80 -> result=80
  PE[2][1]: input=26 * weight=1 = 26, partial_in=160 -> result=186
  PE[2][2]: input=26 * weight=2 = 52, partial_in=80 -> result=132
  PE[2][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][0]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][1]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[3][2]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][3]: input=41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -33      117      201      150 
  Row 1:      -26       70      114       96 
  Row 2:       80      186      132       26 
  Row 3:       41       82       41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │ 117 │ 201 │ 150 │
├─────┼─────┼─────┼─────┤
│ -26 │  70 │ 114 │  96 │
├─────┼─────┼─────┼─────┤
│  80 │ 186 │ 132 │  26 │
├─────┼─────┼─────┼─────┤
│  41 │  82 │  41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 28
  Row 3: input_block[3][2] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 70 (from PE[1][1])
  PE[0][2]: partial_in = 114 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 80 (from PE[2][0])
  PE[1][1]: partial_in = 186 (from PE[2][1])
  PE[1][2]: partial_in = 132 (from PE[2][2])
  PE[1][3]: partial_in = 26 (from PE[2][3])
  PE[2][0]: partial_in = 41 (from PE[3][0])
  PE[2][1]: partial_in = 82 (from PE[3][1])
  PE[2][2]: partial_in = 41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-26 -> result=-26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=70 -> result=70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=114 -> result=114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=96 -> result=96
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=80 -> result=80
  PE[1][1]: input=0 * weight=1 = 0, partial_in=186 -> result=186
  PE[1][2]: input=0 * weight=1 = 0, partial_in=132 -> result=132
  PE[1][3]: input=0 * weight=2 = 0, partial_in=26 -> result=26
  PE[2][0]: input=28 * weight=0 = 0, partial_in=41 -> result=41
  PE[2][1]: input=28 * weight=1 = 28, partial_in=82 -> result=110
  PE[2][2]: input=28 * weight=2 = 56, partial_in=41 -> result=97
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -26       70      114       96 
  Row 1:       80      186      132       26 
  Row 2:       41      110       97       28 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │  70 │ 114 │  96 │
├─────┼─────┼─────┼─────┤
│  80 │ 186 │ 132 │  26 │
├─────┼─────┼─────┼─────┤
│  41 │ 110 │  97 │  28 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 80 (from PE[1][0])
  PE[0][1]: partial_in = 186 (from PE[1][1])
  PE[0][2]: partial_in = 132 (from PE[1][2])
  PE[0][3]: partial_in = 26 (from PE[1][3])
  PE[1][0]: partial_in = 41 (from PE[2][0])
  PE[1][1]: partial_in = 110 (from PE[2][1])
  PE[1][2]: partial_in = 97 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=80 -> result=80
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=186 -> result=186
  PE[0][2]: input=0 * weight=0 = 0, partial_in=132 -> result=132
  PE[0][3]: input=0 * weight=1 = 0, partial_in=26 -> result=26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=41 -> result=41
  PE[1][1]: input=0 * weight=1 = 0, partial_in=110 -> result=110
  PE[1][2]: input=0 * weight=1 = 0, partial_in=97 -> result=97
  PE[1][3]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=0 * weight=1 = 0, partial_in=20 -> result=20
  PE[2][2]: input=0 * weight=2 = 0, partial_in=10 -> result=10
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       80      186      132       26 
  Row 1:       41      110       97       28 
  Row 2:       10       20       10        0 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │ 186 │ 132 │  26 │
├─────┼─────┼─────┼─────┤
│  41 │ 110 │  97 │  28 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       80      186      132       26 
Row 1:       41      110       97       28 
Row 2:       10       20       10        0 
Row 3:       -7      -14       -7        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 80 -> clamp(80) -> final(208)
  PE[0][1]: 186 -> clamp(127) -> final(255)
  PE[0][2]: 132 -> clamp(127) -> final(255)
  PE[0][3]: 26 -> clamp(26) -> final(154)
  PE[1][0]: 41 -> clamp(41) -> final(169)
  PE[1][1]: 110 -> clamp(110) -> final(238)
  PE[1][2]: 97 -> clamp(97) -> final(225)
  PE[1][3]: 28 -> clamp(28) -> final(156)
  PE[2][0]: 10 -> clamp(10) -> final(138)
  PE[2][1]: 20 -> clamp(20) -> final(148)
  PE[2][2]: 10 -> clamp(10) -> final(138)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -7 -> clamp(-7) -> final(121)
  PE[3][1]: -14 -> clamp(-14) -> final(114)
  PE[3][2]: -7 -> clamp(-7) -> final(121)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   208    255    255    154 
   169    238    225    156 
   138    148    138    128 
   121    114    121    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  35   64   60   23 
  29   47   45   19 
  11  -13  -18  -12 
 -25  -26   -8    7 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 35
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=35 * weight=-2 = -70, partial_in=0 -> result=-70
  PE[0][1]: input=35 * weight=-1 = -35, partial_in=0 -> result=-35
  PE[0][2]: input=35 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -70      -35        0       35 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -70 │ -35 │   0 │  35 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 64
  Row 1: input_block[1][0] = 29
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=64 * weight=-2 = -128, partial_in=0 -> result=-128
  PE[0][1]: input=64 * weight=-1 = -64, partial_in=0 -> result=-64
  PE[0][2]: input=64 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=64 * weight=1 = 64, partial_in=0 -> result=64
  PE[1][0]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[1][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][3]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -128      -64        0       64 
  Row 1:      -29       29       29       58 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-128 │ -64 │   0 │  64 │
├─────┼─────┼─────┼─────┤
│ -29 │  29 │  29 │  58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 60
  Row 1: input_block[1][1] = 47
  Row 2: input_block[2][0] = 11
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = 29 (from PE[1][1])
  PE[0][2]: partial_in = 29 (from PE[1][2])
  PE[0][3]: partial_in = 58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=60 * weight=-2 = -120, partial_in=-29 -> result=-149
  PE[0][1]: input=60 * weight=-1 = -60, partial_in=29 -> result=-31
  PE[0][2]: input=60 * weight=0 = 0, partial_in=29 -> result=29
  PE[0][3]: input=60 * weight=1 = 60, partial_in=58 -> result=118
  PE[1][0]: input=47 * weight=-1 = -47, partial_in=0 -> result=-47
  PE[1][1]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[1][2]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[1][3]: input=47 * weight=2 = 94, partial_in=0 -> result=94
  PE[2][0]: input=11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[2][2]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -149      -31       29      118 
  Row 1:      -47       47       47       94 
  Row 2:        0       11       22       11 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-149 │ -31 │  29 │ 118 │
├─────┼─────┼─────┼─────┤
│ -47 │  47 │  47 │  94 │
├─────┼─────┼─────┼─────┤
│   0 │  11 │  22 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 23
  Row 1: input_block[1][2] = 45
  Row 2: input_block[2][1] = -13
  Row 3: input_block[3][0] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -47 (from PE[1][0])
  PE[0][1]: partial_in = 47 (from PE[1][1])
  PE[0][2]: partial_in = 47 (from PE[1][2])
  PE[0][3]: partial_in = 94 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 11 (from PE[2][1])
  PE[1][2]: partial_in = 22 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=-47 -> result=-93
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=47 -> result=24
  PE[0][2]: input=23 * weight=0 = 0, partial_in=47 -> result=47
  PE[0][3]: input=23 * weight=1 = 23, partial_in=94 -> result=117
  PE[1][0]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[1][1]: input=45 * weight=1 = 45, partial_in=11 -> result=56
  PE[1][2]: input=45 * weight=1 = 45, partial_in=22 -> result=67
  PE[1][3]: input=45 * weight=2 = 90, partial_in=11 -> result=101
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -93       24       47      117 
  Row 1:      -45       56       67      101 
  Row 2:        0      -13      -26      -13 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -93 │  24 │  47 │ 117 │
├─────┼─────┼─────┼─────┤
│ -45 │  56 │  67 │ 101 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 19
  Row 2: input_block[2][2] = -18
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = 56 (from PE[1][1])
  PE[0][2]: partial_in = 67 (from PE[1][2])
  PE[0][3]: partial_in = 101 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-45 -> result=-45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=67 -> result=67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=101 -> result=101
  PE[1][0]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[1][1]: input=19 * weight=1 = 19, partial_in=-13 -> result=6
  PE[1][2]: input=19 * weight=1 = 19, partial_in=-26 -> result=-7
  PE[1][3]: input=19 * weight=2 = 38, partial_in=-13 -> result=25
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=-50 -> result=-68
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=-25 -> result=-61
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -45       56       67      101 
  Row 1:      -19        6       -7       25 
  Row 2:      -25      -68      -61      -18 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -45 │  56 │  67 │ 101 │
├─────┼─────┼─────┼─────┤
│ -19 │   6 │  -7 │  25 │
├─────┼─────┼─────┼─────┤
│ -25 │ -68 │ -61 │ -18 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -12
  Row 3: input_block[3][2] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -19 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = 25 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -68 (from PE[2][1])
  PE[1][2]: partial_in = -61 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-19 -> result=-19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=6 -> result=6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=0 * weight=1 = 0, partial_in=25 -> result=25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-61 -> result=-61
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-18 -> result=-18
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=-52 -> result=-64
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=-26 -> result=-50
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -19        6       -7       25 
  Row 1:      -25      -68      -61      -18 
  Row 2:      -26      -64      -50      -12 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -19 │   6 │  -7 │  25 │
├─────┼─────┼─────┼─────┤
│ -25 │ -68 │ -61 │ -18 │
├─────┼─────┼─────┼─────┤
│ -26 │ -64 │ -50 │ -12 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -61 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -64 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-68 -> result=-68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-61 -> result=-61
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-12 -> result=-12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][1]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[3][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][3]: input=7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -25      -68      -61      -18 
  Row 1:      -26      -64      -50      -12 
  Row 2:       -8      -16       -8        0 
  Row 3:        7       14        7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │ -68 │ -61 │ -18 │
├─────┼─────┼─────┼─────┤
│ -26 │ -64 │ -50 │ -12 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
├─────┼─────┼─────┼─────┤
│   7 │  14 │   7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -25      -68      -61      -18 
Row 1:      -26      -64      -50      -12 
Row 2:       -8      -16       -8        0 
Row 3:        7       14        7        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -25 -> clamp(-25) -> final(103)
  PE[0][1]: -68 -> clamp(-68) -> final(60)
  PE[0][2]: -61 -> clamp(-61) -> final(67)
  PE[0][3]: -18 -> clamp(-18) -> final(110)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -64 -> clamp(-64) -> final(64)
  PE[1][2]: -50 -> clamp(-50) -> final(78)
  PE[1][3]: -12 -> clamp(-12) -> final(116)
  PE[2][0]: -8 -> clamp(-8) -> final(120)
  PE[2][1]: -16 -> clamp(-16) -> final(112)
  PE[2][2]: -8 -> clamp(-8) -> final(120)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 7 -> clamp(7) -> final(135)
  PE[3][1]: 14 -> clamp(14) -> final(142)
  PE[3][2]: 7 -> clamp(7) -> final(135)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   103     60     67    110 
   102     64     78    116 
   120    112    120    128 
   135    142    135    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  24   29   28  -22 
 -28   -6  -15  -26 
 -30  -11  -30   -5 
 -36  -10  -25  -26 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 24
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=0 -> result=-48
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[0][2]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -48      -24        0       24 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │ -24 │   0 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 29
  Row 1: input_block[1][0] = -28
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=29 * weight=-2 = -58, partial_in=0 -> result=-58
  PE[0][1]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[0][2]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -58      -29        0       29 
  Row 1:       28      -28      -28      -56 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │ -29 │   0 │  29 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 28
  Row 1: input_block[1][1] = -6
  Row 2: input_block[2][0] = -30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=28 -> result=-28
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=-28 -> result=-56
  PE[0][2]: input=28 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=28 * weight=1 = 28, partial_in=-56 -> result=-28
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -28      -56      -28      -28 
  Row 1:        6       -6       -6      -12 
  Row 2:        0      -30      -60      -30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -56 │ -28 │ -28 │
├─────┼─────┼─────┼─────┤
│   6 │  -6 │  -6 │ -12 │
├─────┼─────┼─────┼─────┤
│   0 │ -30 │ -60 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -22
  Row 1: input_block[1][2] = -15
  Row 2: input_block[2][1] = -11
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = -6 (from PE[1][1])
  PE[0][2]: partial_in = -6 (from PE[1][2])
  PE[0][3]: partial_in = -12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -60 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=6 -> result=50
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=-6 -> result=16
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=-12 -> result=-34
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=-30 -> result=-45
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=-60 -> result=-75
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=-30 -> result=-60
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       50       16       -6      -34 
  Row 1:       15      -45      -75      -60 
  Row 2:        0      -11      -22      -11 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  16 │  -6 │ -34 │
├─────┼─────┼─────┼─────┤
│  15 │ -45 │ -75 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │ -11 │ -22 │ -11 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -26
  Row 2: input_block[2][2] = -30
  Row 3: input_block[3][1] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = -45 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -22 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=-11 -> result=-37
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=-22 -> result=-48
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=-11 -> result=-63
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-72 -> result=-102
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-36 -> result=-96
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       15      -45      -75      -60 
  Row 1:       26      -37      -48      -63 
  Row 2:      -36     -102      -96      -30 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │ -45 │ -75 │ -60 │
├─────┼─────┼─────┼─────┤
│  26 │ -37 │ -48 │ -63 │
├─────┼─────┼─────┼─────┤
│ -36 │-102 │ -96 │ -30 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -5
  Row 3: input_block[3][2] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -48 (from PE[1][2])
  PE[0][3]: partial_in = -63 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -102 (from PE[2][1])
  PE[1][2]: partial_in = -96 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -10 (from PE[3][0])
  PE[2][1]: partial_in = -20 (from PE[3][1])
  PE[2][2]: partial_in = -10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=26 -> result=26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-63 -> result=-63
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=-5 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[2][1]: input=-5 * weight=1 = -5, partial_in=-20 -> result=-25
  PE[2][2]: input=-5 * weight=2 = -10, partial_in=-10 -> result=-20
  PE[2][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       26      -37      -48      -63 
  Row 1:      -36     -102      -96      -30 
  Row 2:      -10      -25      -20       -5 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │ -37 │ -48 │ -63 │
├─────┼─────┼─────┼─────┤
│ -36 │-102 │ -96 │ -30 │
├─────┼─────┼─────┼─────┤
│ -10 │ -25 │ -20 │  -5 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -102 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -30 (from PE[1][3])
  PE[1][0]: partial_in = -10 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -20 (from PE[2][2])
  PE[1][3]: partial_in = -5 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-102 -> result=-102
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-10 -> result=-10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-25 -> result=-25
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-20 -> result=-20
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-5 -> result=-5
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-25 -> result=-25
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36     -102      -96      -30 
  Row 1:      -10      -25      -20       -5 
  Row 2:      -25      -50      -25        0 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │-102 │ -96 │ -30 │
├─────┼─────┼─────┼─────┤
│ -10 │ -25 │ -20 │  -5 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36     -102      -96      -30 
Row 1:      -10      -25      -20       -5 
Row 2:      -25      -50      -25        0 
Row 3:      -26      -52      -26        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -102 -> clamp(-102) -> final(26)
  PE[0][2]: -96 -> clamp(-96) -> final(32)
  PE[0][3]: -30 -> clamp(-30) -> final(98)
  PE[1][0]: -10 -> clamp(-10) -> final(118)
  PE[1][1]: -25 -> clamp(-25) -> final(103)
  PE[1][2]: -20 -> clamp(-20) -> final(108)
  PE[1][3]: -5 -> clamp(-5) -> final(123)
  PE[2][0]: -25 -> clamp(-25) -> final(103)
  PE[2][1]: -50 -> clamp(-50) -> final(78)
  PE[2][2]: -25 -> clamp(-25) -> final(103)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -26 -> clamp(-26) -> final(102)
  PE[3][1]: -52 -> clamp(-52) -> final(76)
  PE[3][2]: -26 -> clamp(-26) -> final(102)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92     26     32     98 
   118    103    108    123 
   103     78    103    128 
   102     76    102    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -91 -115  -16   20 
 -63  -88    0   -6 
 -37  -89   -3   -2 
 -74 -107  -24    4 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -91
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-91 * weight=-2 = 182, partial_in=0 -> result=182
  PE[0][1]: input=-91 * weight=-1 = 91, partial_in=0 -> result=91
  PE[0][2]: input=-91 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      182       91        0      -91 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 182 │  91 │   0 │ -91 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -115
  Row 1: input_block[1][0] = -63
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-115 * weight=-2 = 230, partial_in=0 -> result=230
  PE[0][1]: input=-115 * weight=-1 = 115, partial_in=0 -> result=115
  PE[0][2]: input=-115 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-115 * weight=1 = -115, partial_in=0 -> result=-115
  PE[1][0]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[1][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][3]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      230      115        0     -115 
  Row 1:       63      -63      -63     -126 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 230 │ 115 │   0 │-115 │
├─────┼─────┼─────┼─────┤
│  63 │ -63 │ -63 │-126 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -16
  Row 1: input_block[1][1] = -88
  Row 2: input_block[2][0] = -37
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 63 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=63 -> result=95
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=-63 -> result=-47
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=-126 -> result=-142
  PE[1][0]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[1][1]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][2]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][3]: input=-88 * weight=2 = -176, partial_in=0 -> result=-176
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       95      -47      -63     -142 
  Row 1:       88      -88      -88     -176 
  Row 2:        0      -37      -74      -37 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │ -47 │ -63 │-142 │
├─────┼─────┼─────┼─────┤
│  88 │ -88 │ -88 │-176 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 20
  Row 1: input_block[1][2] = 0
  Row 2: input_block[2][1] = -89
  Row 3: input_block[3][0] = -74

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 88 (from PE[1][0])
  PE[0][1]: partial_in = -88 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -176 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=20 * weight=-2 = -40, partial_in=88 -> result=48
  PE[0][1]: input=20 * weight=-1 = -20, partial_in=-88 -> result=-108
  PE[0][2]: input=20 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=20 * weight=1 = 20, partial_in=-176 -> result=-156
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=-89 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[2][2]: input=-89 * weight=2 = -178, partial_in=0 -> result=-178
  PE[2][3]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[3][0]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[3][1]: input=-74 * weight=2 = -148, partial_in=0 -> result=-148
  PE[3][2]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[3][3]: input=-74 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       48     -108      -88     -156 
  Row 1:        0      -37      -74      -37 
  Row 2:        0      -89     -178      -89 
  Row 3:      -74     -148      -74        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │-108 │ -88 │-156 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │ -89 │-178 │ -89 │
├─────┼─────┼─────┼─────┤
│ -74 │-148 │ -74 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -6
  Row 2: input_block[2][2] = -3
  Row 3: input_block[3][1] = -107

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -89 (from PE[2][1])
  PE[1][2]: partial_in = -178 (from PE[2][2])
  PE[1][3]: partial_in = -89 (from PE[2][3])
  PE[2][0]: partial_in = -74 (from PE[3][0])
  PE[2][1]: partial_in = -148 (from PE[3][1])
  PE[2][2]: partial_in = -74 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=-89 -> result=-95
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=-178 -> result=-184
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=-89 -> result=-101
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=-148 -> result=-151
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=-74 -> result=-80
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[3][1]: input=-107 * weight=2 = -214, partial_in=0 -> result=-214
  PE[3][2]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[3][3]: input=-107 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        0      -37      -74      -37 
  Row 1:        6      -95     -184     -101 
  Row 2:      -74     -151      -80       -3 
  Row 3:     -107     -214     -107        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   6 │ -95 │-184 │-101 │
├─────┼─────┼─────┼─────┤
│ -74 │-151 │ -80 │  -3 │
├─────┼─────┼─────┼─────┤
│-107 │-214 │-107 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -2
  Row 3: input_block[3][2] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -184 (from PE[1][2])
  PE[0][3]: partial_in = -101 (from PE[1][3])
  PE[1][0]: partial_in = -74 (from PE[2][0])
  PE[1][1]: partial_in = -151 (from PE[2][1])
  PE[1][2]: partial_in = -80 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = -107 (from PE[3][0])
  PE[2][1]: partial_in = -214 (from PE[3][1])
  PE[2][2]: partial_in = -107 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=6 -> result=6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-95 -> result=-95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-184 -> result=-184
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-74 -> result=-74
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-151 -> result=-151
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=-214 -> result=-216
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=-107 -> result=-111
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        6      -95     -184     -101 
  Row 1:      -74     -151      -80       -3 
  Row 2:     -107     -216     -111       -2 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │ -95 │-184 │-101 │
├─────┼─────┼─────┼─────┤
│ -74 │-151 │ -80 │  -3 │
├─────┼─────┼─────┼─────┤
│-107 │-216 │-111 │  -2 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -74 (from PE[1][0])
  PE[0][1]: partial_in = -151 (from PE[1][1])
  PE[0][2]: partial_in = -80 (from PE[1][2])
  PE[0][3]: partial_in = -3 (from PE[1][3])
  PE[1][0]: partial_in = -107 (from PE[2][0])
  PE[1][1]: partial_in = -216 (from PE[2][1])
  PE[1][2]: partial_in = -111 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -24 (from PE[3][0])
  PE[2][1]: partial_in = -48 (from PE[3][1])
  PE[2][2]: partial_in = -24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-74 -> result=-74
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-151 -> result=-151
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-107 -> result=-107
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-216 -> result=-216
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-2 -> result=-2
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-24 -> result=-24
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][1]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[3][2]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][3]: input=4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -74     -151      -80       -3 
  Row 1:     -107     -216     -111       -2 
  Row 2:      -24      -48      -24        0 
  Row 3:        4        8        4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -74 │-151 │ -80 │  -3 │
├─────┼─────┼─────┼─────┤
│-107 │-216 │-111 │  -2 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
├─────┼─────┼─────┼─────┤
│   4 │   8 │   4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -74     -151      -80       -3 
Row 1:     -107     -216     -111       -2 
Row 2:      -24      -48      -24        0 
Row 3:        4        8        4        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -74 -> clamp(-74) -> final(54)
  PE[0][1]: -151 -> clamp(-128) -> final(0)
  PE[0][2]: -80 -> clamp(-80) -> final(48)
  PE[0][3]: -3 -> clamp(-3) -> final(125)
  PE[1][0]: -107 -> clamp(-107) -> final(21)
  PE[1][1]: -216 -> clamp(-128) -> final(0)
  PE[1][2]: -111 -> clamp(-111) -> final(17)
  PE[1][3]: -2 -> clamp(-2) -> final(126)
  PE[2][0]: -24 -> clamp(-24) -> final(104)
  PE[2][1]: -48 -> clamp(-48) -> final(80)
  PE[2][2]: -24 -> clamp(-24) -> final(104)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 4 -> clamp(4) -> final(132)
  PE[3][1]: 8 -> clamp(8) -> final(136)
  PE[3][2]: 4 -> clamp(4) -> final(132)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    54      0     48    125 
    21      0     17    126 
   104     80    104    128 
   132    136    132    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  10    9    4    3 
   3    9    7    1 
  -3    4    3   -3 
  -6  -16  -16   -8 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 10
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=0 -> result=-20
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[0][2]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -20      -10        0       10 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -10 │   0 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 9
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=0 -> result=-18
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[0][2]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -18       -9        0        9 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  -9 │   0 │   9 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 4
  Row 1: input_block[1][1] = 9
  Row 2: input_block[2][0] = -3
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=-3 -> result=-11
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=3 -> result=-1
  PE[0][2]: input=4 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=4 * weight=1 = 4, partial_in=6 -> result=10
  PE[1][0]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[1][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][3]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -11       -1        3       10 
  Row 1:       -9        9        9       18 
  Row 2:        0       -3       -6       -3 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │  -1 │   3 │  10 │
├─────┼─────┼─────┼─────┤
│  -9 │   9 │   9 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │  -3 │  -6 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 3
  Row 1: input_block[1][2] = 7
  Row 2: input_block[2][1] = 4
  Row 3: input_block[3][0] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 9 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -3 (from PE[2][1])
  PE[1][2]: partial_in = -6 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=-9 -> result=-15
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=9 -> result=6
  PE[0][2]: input=3 * weight=0 = 0, partial_in=9 -> result=9
  PE[0][3]: input=3 * weight=1 = 3, partial_in=18 -> result=21
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=-3 -> result=4
  PE[1][2]: input=7 * weight=1 = 7, partial_in=-6 -> result=1
  PE[1][3]: input=7 * weight=2 = 14, partial_in=-3 -> result=11
  PE[2][0]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[2][2]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -15        6        9       21 
  Row 1:       -7        4        1       11 
  Row 2:        0        4        8        4 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │   6 │   9 │  21 │
├─────┼─────┼─────┼─────┤
│  -7 │   4 │   1 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   4 │   8 │   4 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 1
  Row 2: input_block[2][2] = 3
  Row 3: input_block[3][1] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = 4 (from PE[1][1])
  PE[0][2]: partial_in = 1 (from PE[1][2])
  PE[0][3]: partial_in = 11 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 4 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 4 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=4 -> result=4
  PE[0][2]: input=0 * weight=0 = 0, partial_in=1 -> result=1
  PE[0][3]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=4 -> result=5
  PE[1][2]: input=1 * weight=1 = 1, partial_in=8 -> result=9
  PE[1][3]: input=1 * weight=2 = 2, partial_in=4 -> result=6
  PE[2][0]: input=3 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=3 * weight=1 = 3, partial_in=-12 -> result=-9
  PE[2][2]: input=3 * weight=2 = 6, partial_in=-6 -> result=0
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -7        4        1       11 
  Row 1:       -1        5        9        6 
  Row 2:       -6       -9        0        3 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │   4 │   1 │  11 │
├─────┼─────┼─────┼─────┤
│  -1 │   5 │   9 │   6 │
├─────┼─────┼─────┼─────┤
│  -6 │  -9 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -3
  Row 3: input_block[3][2] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 5 (from PE[1][1])
  PE[0][2]: partial_in = 9 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -6 (from PE[2][0])
  PE[1][1]: partial_in = -9 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=5 -> result=5
  PE[0][2]: input=0 * weight=0 = 0, partial_in=9 -> result=9
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-9 -> result=-9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=3 -> result=3
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=-32 -> result=-35
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=-16 -> result=-22
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -1        5        9        6 
  Row 1:       -6       -9        0        3 
  Row 2:      -16      -35      -22       -3 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │   5 │   9 │   6 │
├─────┼─────┼─────┼─────┤
│  -6 │  -9 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│ -16 │ -35 │ -22 │  -3 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 3 (from PE[1][3])
  PE[1][0]: partial_in = -16 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -22 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-35 -> result=-35
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-22 -> result=-22
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -6       -9        0        3 
  Row 1:      -16      -35      -22       -3 
  Row 2:      -16      -32      -16        0 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -9 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│ -16 │ -35 │ -22 │  -3 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -6       -9        0        3 
Row 1:      -16      -35      -22       -3 
Row 2:      -16      -32      -16        0 
Row 3:       -8      -16       -8        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -6 -> clamp(-6) -> final(122)
  PE[0][1]: -9 -> clamp(-9) -> final(119)
  PE[0][2]: 0 -> clamp(0) -> final(128)
  PE[0][3]: 3 -> clamp(3) -> final(131)
  PE[1][0]: -16 -> clamp(-16) -> final(112)
  PE[1][1]: -35 -> clamp(-35) -> final(93)
  PE[1][2]: -22 -> clamp(-22) -> final(106)
  PE[1][3]: -3 -> clamp(-3) -> final(125)
  PE[2][0]: -16 -> clamp(-16) -> final(112)
  PE[2][1]: -32 -> clamp(-32) -> final(96)
  PE[2][2]: -16 -> clamp(-16) -> final(112)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -8 -> clamp(-8) -> final(120)
  PE[3][1]: -16 -> clamp(-16) -> final(112)
  PE[3][2]: -8 -> clamp(-8) -> final(120)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   122    119    128    131 
   112     93    106    125 
   112     96    112    128 
   120    112    120    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   3   -7   -4   17 
   1    4   12   25 
  -1   12   24   29 
  -1   10   21   23 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=0 -> result=-6
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[0][2]: input=3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -6       -3        0        3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -3 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -7
  Row 1: input_block[1][0] = 1
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=0 -> result=14
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][3]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       14        7        0       -7 
  Row 1:       -1        1        1        2 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │   7 │   0 │  -7 │
├─────┼─────┼─────┼─────┤
│  -1 │   1 │   1 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -4
  Row 1: input_block[1][1] = 4
  Row 2: input_block[2][0] = -1
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = 1 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-4 * weight=-2 = 8, partial_in=-1 -> result=7
  PE[0][1]: input=-4 * weight=-1 = 4, partial_in=1 -> result=5
  PE[0][2]: input=-4 * weight=0 = 0, partial_in=1 -> result=1
  PE[0][3]: input=-4 * weight=1 = -4, partial_in=2 -> result=-2
  PE[1][0]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[1][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][2]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][3]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        7        5        1       -2 
  Row 1:       -4        4        4        8 
  Row 2:        0       -1       -2       -1 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │   5 │   1 │  -2 │
├─────┼─────┼─────┼─────┤
│  -4 │   4 │   4 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │  -1 │  -2 │  -1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 17
  Row 1: input_block[1][2] = 12
  Row 2: input_block[2][1] = 12
  Row 3: input_block[3][0] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = 4 (from PE[1][1])
  PE[0][2]: partial_in = 4 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -1 (from PE[2][1])
  PE[1][2]: partial_in = -2 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=-4 -> result=-38
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=4 -> result=-13
  PE[0][2]: input=17 * weight=0 = 0, partial_in=4 -> result=4
  PE[0][3]: input=17 * weight=1 = 17, partial_in=8 -> result=25
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=-1 -> result=11
  PE[1][2]: input=12 * weight=1 = 12, partial_in=-2 -> result=10
  PE[1][3]: input=12 * weight=2 = 24, partial_in=-1 -> result=23
  PE[2][0]: input=12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[2][2]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -38      -13        4       25 
  Row 1:      -12       11       10       23 
  Row 2:        0       12       24       12 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │ -13 │   4 │  25 │
├─────┼─────┼─────┼─────┤
│ -12 │  11 │  10 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │  12 │  24 │  12 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 25
  Row 2: input_block[2][2] = 24
  Row 3: input_block[3][1] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = 23 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 24 (from PE[2][2])
  PE[1][3]: partial_in = 12 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=11 -> result=11
  PE[0][2]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=0 * weight=1 = 0, partial_in=23 -> result=23
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=12 -> result=37
  PE[1][2]: input=25 * weight=1 = 25, partial_in=24 -> result=49
  PE[1][3]: input=25 * weight=2 = 50, partial_in=12 -> result=62
  PE[2][0]: input=24 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=24 * weight=1 = 24, partial_in=-2 -> result=22
  PE[2][2]: input=24 * weight=2 = 48, partial_in=-1 -> result=47
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -12       11       10       23 
  Row 1:      -25       37       49       62 
  Row 2:       -1       22       47       24 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  11 │  10 │  23 │
├─────┼─────┼─────┼─────┤
│ -25 │  37 │  49 │  62 │
├─────┼─────┼─────┼─────┤
│  -1 │  22 │  47 │  24 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 29
  Row 3: input_block[3][2] = 21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 37 (from PE[1][1])
  PE[0][2]: partial_in = 49 (from PE[1][2])
  PE[0][3]: partial_in = 62 (from PE[1][3])
  PE[1][0]: partial_in = -1 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = 47 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=37 -> result=37
  PE[0][2]: input=0 * weight=0 = 0, partial_in=49 -> result=49
  PE[0][3]: input=0 * weight=1 = 0, partial_in=62 -> result=62
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=22 -> result=22
  PE[1][2]: input=0 * weight=1 = 0, partial_in=47 -> result=47
  PE[1][3]: input=0 * weight=2 = 0, partial_in=24 -> result=24
  PE[2][0]: input=29 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=29 * weight=1 = 29, partial_in=20 -> result=49
  PE[2][2]: input=29 * weight=2 = 58, partial_in=10 -> result=68
  PE[2][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][0]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][1]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[3][2]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][3]: input=21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -25       37       49       62 
  Row 1:       -1       22       47       24 
  Row 2:       10       49       68       29 
  Row 3:       21       42       21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  37 │  49 │  62 │
├─────┼─────┼─────┼─────┤
│  -1 │  22 │  47 │  24 │
├─────┼─────┼─────┼─────┤
│  10 │  49 │  68 │  29 │
├─────┼─────┼─────┼─────┤
│  21 │  42 │  21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 47 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 10 (from PE[2][0])
  PE[1][1]: partial_in = 49 (from PE[2][1])
  PE[1][2]: partial_in = 68 (from PE[2][2])
  PE[1][3]: partial_in = 29 (from PE[2][3])
  PE[2][0]: partial_in = 21 (from PE[3][0])
  PE[2][1]: partial_in = 42 (from PE[3][1])
  PE[2][2]: partial_in = 21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=47 -> result=47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=49 -> result=49
  PE[1][2]: input=0 * weight=1 = 0, partial_in=68 -> result=68
  PE[1][3]: input=0 * weight=2 = 0, partial_in=29 -> result=29
  PE[2][0]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[2][1]: input=0 * weight=1 = 0, partial_in=42 -> result=42
  PE[2][2]: input=0 * weight=2 = 0, partial_in=21 -> result=21
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -1       22       47       24 
  Row 1:       10       49       68       29 
  Row 2:       21       42       21        0 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  22 │  47 │  24 │
├─────┼─────┼─────┼─────┤
│  10 │  49 │  68 │  29 │
├─────┼─────┼─────┼─────┤
│  21 │  42 │  21 │   0 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -1       22       47       24 
Row 1:       10       49       68       29 
Row 2:       21       42       21        0 
Row 3:       23       46       23        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -1 -> clamp(-1) -> final(127)
  PE[0][1]: 22 -> clamp(22) -> final(150)
  PE[0][2]: 47 -> clamp(47) -> final(175)
  PE[0][3]: 24 -> clamp(24) -> final(152)
  PE[1][0]: 10 -> clamp(10) -> final(138)
  PE[1][1]: 49 -> clamp(49) -> final(177)
  PE[1][2]: 68 -> clamp(68) -> final(196)
  PE[1][3]: 29 -> clamp(29) -> final(157)
  PE[2][0]: 21 -> clamp(21) -> final(149)
  PE[2][1]: 42 -> clamp(42) -> final(170)
  PE[2][2]: 21 -> clamp(21) -> final(149)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 23 -> clamp(23) -> final(151)
  PE[3][1]: 46 -> clamp(46) -> final(174)
  PE[3][2]: 23 -> clamp(23) -> final(151)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   127    150    175    152 
   138    177    196    157 
   149    170    149    128 
   151    174    151    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  23   19   33   48 
  39   35   43   55 
  40   37   39   48 
  28   29   28   35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 23
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=0 -> result=-46
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[0][2]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -46      -23        0       23 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -46 │ -23 │   0 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 19
  Row 1: input_block[1][0] = 39
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=19 * weight=-2 = -38, partial_in=0 -> result=-38
  PE[0][1]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[0][2]: input=19 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[1][0]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[1][1]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][2]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][3]: input=39 * weight=2 = 78, partial_in=0 -> result=78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -38      -19        0       19 
  Row 1:      -39       39       39       78 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │ -19 │   0 │  19 │
├─────┼─────┼─────┼─────┤
│ -39 │  39 │  39 │  78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 33
  Row 1: input_block[1][1] = 35
  Row 2: input_block[2][0] = 40
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = 39 (from PE[1][1])
  PE[0][2]: partial_in = 39 (from PE[1][2])
  PE[0][3]: partial_in = 78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-39 -> result=-105
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=39 -> result=6
  PE[0][2]: input=33 * weight=0 = 0, partial_in=39 -> result=39
  PE[0][3]: input=33 * weight=1 = 33, partial_in=78 -> result=111
  PE[1][0]: input=35 * weight=-1 = -35, partial_in=0 -> result=-35
  PE[1][1]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][3]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[2][0]: input=40 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[2][2]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[2][3]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -105        6       39      111 
  Row 1:      -35       35       35       70 
  Row 2:        0       40       80       40 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-105 │   6 │  39 │ 111 │
├─────┼─────┼─────┼─────┤
│ -35 │  35 │  35 │  70 │
├─────┼─────┼─────┼─────┤
│   0 │  40 │  80 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 48
  Row 1: input_block[1][2] = 43
  Row 2: input_block[2][1] = 37
  Row 3: input_block[3][0] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = 35 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 40 (from PE[2][1])
  PE[1][2]: partial_in = 80 (from PE[2][2])
  PE[1][3]: partial_in = 40 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=48 * weight=-2 = -96, partial_in=-35 -> result=-131
  PE[0][1]: input=48 * weight=-1 = -48, partial_in=35 -> result=-13
  PE[0][2]: input=48 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=48 * weight=1 = 48, partial_in=70 -> result=118
  PE[1][0]: input=43 * weight=-1 = -43, partial_in=0 -> result=-43
  PE[1][1]: input=43 * weight=1 = 43, partial_in=40 -> result=83
  PE[1][2]: input=43 * weight=1 = 43, partial_in=80 -> result=123
  PE[1][3]: input=43 * weight=2 = 86, partial_in=40 -> result=126
  PE[2][0]: input=37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[2][2]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[2][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -131      -13       35      118 
  Row 1:      -43       83      123      126 
  Row 2:        0       37       74       37 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-131 │ -13 │  35 │ 118 │
├─────┼─────┼─────┼─────┤
│ -43 │  83 │ 123 │ 126 │
├─────┼─────┼─────┼─────┤
│   0 │  37 │  74 │  37 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 55
  Row 2: input_block[2][2] = 39
  Row 3: input_block[3][1] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = 83 (from PE[1][1])
  PE[0][2]: partial_in = 123 (from PE[1][2])
  PE[0][3]: partial_in = 126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 37 (from PE[2][1])
  PE[1][2]: partial_in = 74 (from PE[2][2])
  PE[1][3]: partial_in = 37 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=83 -> result=83
  PE[0][2]: input=0 * weight=0 = 0, partial_in=123 -> result=123
  PE[0][3]: input=0 * weight=1 = 0, partial_in=126 -> result=126
  PE[1][0]: input=55 * weight=-1 = -55, partial_in=0 -> result=-55
  PE[1][1]: input=55 * weight=1 = 55, partial_in=37 -> result=92
  PE[1][2]: input=55 * weight=1 = 55, partial_in=74 -> result=129
  PE[1][3]: input=55 * weight=2 = 110, partial_in=37 -> result=147
  PE[2][0]: input=39 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=39 * weight=1 = 39, partial_in=56 -> result=95
  PE[2][2]: input=39 * weight=2 = 78, partial_in=28 -> result=106
  PE[2][3]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -43       83      123      126 
  Row 1:      -55       92      129      147 
  Row 2:       28       95      106       39 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │  83 │ 123 │ 126 │
├─────┼─────┼─────┼─────┤
│ -55 │  92 │ 129 │ 147 │
├─────┼─────┼─────┼─────┤
│  28 │  95 │ 106 │  39 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 48
  Row 3: input_block[3][2] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -55 (from PE[1][0])
  PE[0][1]: partial_in = 92 (from PE[1][1])
  PE[0][2]: partial_in = 129 (from PE[1][2])
  PE[0][3]: partial_in = 147 (from PE[1][3])
  PE[1][0]: partial_in = 28 (from PE[2][0])
  PE[1][1]: partial_in = 95 (from PE[2][1])
  PE[1][2]: partial_in = 106 (from PE[2][2])
  PE[1][3]: partial_in = 39 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-55 -> result=-55
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=92 -> result=92
  PE[0][2]: input=0 * weight=0 = 0, partial_in=129 -> result=129
  PE[0][3]: input=0 * weight=1 = 0, partial_in=147 -> result=147
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=28 -> result=28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=95 -> result=95
  PE[1][2]: input=0 * weight=1 = 0, partial_in=106 -> result=106
  PE[1][3]: input=0 * weight=2 = 0, partial_in=39 -> result=39
  PE[2][0]: input=48 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=48 * weight=1 = 48, partial_in=58 -> result=106
  PE[2][2]: input=48 * weight=2 = 96, partial_in=29 -> result=125
  PE[2][3]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -55       92      129      147 
  Row 1:       28       95      106       39 
  Row 2:       29      106      125       48 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -55 │  92 │ 129 │ 147 │
├─────┼─────┼─────┼─────┤
│  28 │  95 │ 106 │  39 │
├─────┼─────┼─────┼─────┤
│  29 │ 106 │ 125 │  48 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = 95 (from PE[1][1])
  PE[0][2]: partial_in = 106 (from PE[1][2])
  PE[0][3]: partial_in = 39 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 106 (from PE[2][1])
  PE[1][2]: partial_in = 125 (from PE[2][2])
  PE[1][3]: partial_in = 48 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=28 -> result=28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=95 -> result=95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=106 -> result=106
  PE[0][3]: input=0 * weight=1 = 0, partial_in=39 -> result=39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=106 -> result=106
  PE[1][2]: input=0 * weight=1 = 0, partial_in=125 -> result=125
  PE[1][3]: input=0 * weight=2 = 0, partial_in=48 -> result=48
  PE[2][0]: input=0 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=0 * weight=1 = 0, partial_in=56 -> result=56
  PE[2][2]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][1]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[3][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][3]: input=35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       28       95      106       39 
  Row 1:       29      106      125       48 
  Row 2:       28       56       28        0 
  Row 3:       35       70       35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  95 │ 106 │  39 │
├─────┼─────┼─────┼─────┤
│  29 │ 106 │ 125 │  48 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       28       95      106       39 
Row 1:       29      106      125       48 
Row 2:       28       56       28        0 
Row 3:       35       70       35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 28 -> clamp(28) -> final(156)
  PE[0][1]: 95 -> clamp(95) -> final(223)
  PE[0][2]: 106 -> clamp(106) -> final(234)
  PE[0][3]: 39 -> clamp(39) -> final(167)
  PE[1][0]: 29 -> clamp(29) -> final(157)
  PE[1][1]: 106 -> clamp(106) -> final(234)
  PE[1][2]: 125 -> clamp(125) -> final(253)
  PE[1][3]: 48 -> clamp(48) -> final(176)
  PE[2][0]: 28 -> clamp(28) -> final(156)
  PE[2][1]: 56 -> clamp(56) -> final(184)
  PE[2][2]: 28 -> clamp(28) -> final(156)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 35 -> clamp(35) -> final(163)
  PE[3][1]: 70 -> clamp(70) -> final(198)
  PE[3][2]: 35 -> clamp(35) -> final(163)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   156    223    234    167 
   157    234    253    176 
   156    184    156    128 
   163    198    163    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  30  -11  -32  -26 
  39   -4  -28  -23 
  37   -4  -31  -27 
  32   -7  -37  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 30
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=30 * weight=-2 = -60, partial_in=0 -> result=-60
  PE[0][1]: input=30 * weight=-1 = -30, partial_in=0 -> result=-30
  PE[0][2]: input=30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -60      -30        0       30 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -60 │ -30 │   0 │  30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -11
  Row 1: input_block[1][0] = 39
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=0 -> result=22
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][0]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[1][1]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][2]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][3]: input=39 * weight=2 = 78, partial_in=0 -> result=78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       22       11        0      -11 
  Row 1:      -39       39       39       78 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  11 │   0 │ -11 │
├─────┼─────┼─────┼─────┤
│ -39 │  39 │  39 │  78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -32
  Row 1: input_block[1][1] = -4
  Row 2: input_block[2][0] = 37
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = 39 (from PE[1][1])
  PE[0][2]: partial_in = 39 (from PE[1][2])
  PE[0][3]: partial_in = 78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-32 * weight=-2 = 64, partial_in=-39 -> result=25
  PE[0][1]: input=-32 * weight=-1 = 32, partial_in=39 -> result=71
  PE[0][2]: input=-32 * weight=0 = 0, partial_in=39 -> result=39
  PE[0][3]: input=-32 * weight=1 = -32, partial_in=78 -> result=46
  PE[1][0]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[1][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][3]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][0]: input=37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[2][2]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[2][3]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       25       71       39       46 
  Row 1:        4       -4       -4       -8 
  Row 2:        0       37       74       37 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │  71 │  39 │  46 │
├─────┼─────┼─────┼─────┤
│   4 │  -4 │  -4 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │  37 │  74 │  37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -26
  Row 1: input_block[1][2] = -28
  Row 2: input_block[2][1] = -4
  Row 3: input_block[3][0] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 4 (from PE[1][0])
  PE[0][1]: partial_in = -4 (from PE[1][1])
  PE[0][2]: partial_in = -4 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 37 (from PE[2][1])
  PE[1][2]: partial_in = 74 (from PE[2][2])
  PE[1][3]: partial_in = 37 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=4 -> result=56
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=-4 -> result=22
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=-8 -> result=-34
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=37 -> result=9
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=74 -> result=46
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=37 -> result=-19
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       56       22       -4      -34 
  Row 1:       28        9       46      -19 
  Row 2:        0       -4       -8       -4 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │  22 │  -4 │ -34 │
├─────┼─────┼─────┼─────┤
│  28 │   9 │  46 │ -19 │
├─────┼─────┼─────┼─────┤
│   0 │  -4 │  -8 │  -4 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -23
  Row 2: input_block[2][2] = -31
  Row 3: input_block[3][1] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 46 (from PE[1][2])
  PE[0][3]: partial_in = -19 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -4 (from PE[2][1])
  PE[1][2]: partial_in = -8 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = 32 (from PE[3][0])
  PE[2][1]: partial_in = 64 (from PE[3][1])
  PE[2][2]: partial_in = 32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=28 -> result=28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=46 -> result=46
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-19 -> result=-19
  PE[1][0]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[1][1]: input=-23 * weight=1 = -23, partial_in=-4 -> result=-27
  PE[1][2]: input=-23 * weight=1 = -23, partial_in=-8 -> result=-31
  PE[1][3]: input=-23 * weight=2 = -46, partial_in=-4 -> result=-50
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=32 -> result=32
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=64 -> result=33
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=32 -> result=-30
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       28        9       46      -19 
  Row 1:       23      -27      -31      -50 
  Row 2:       32       33      -30      -31 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │   9 │  46 │ -19 │
├─────┼─────┼─────┼─────┤
│  23 │ -27 │ -31 │ -50 │
├─────┼─────┼─────┼─────┤
│  32 │  33 │ -30 │ -31 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -27
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -31 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 32 (from PE[2][0])
  PE[1][1]: partial_in = 33 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=-14 -> result=-41
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=-7 -> result=-61
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       23      -27      -31      -50 
  Row 1:       32       33      -30      -31 
  Row 2:       -7      -41      -61      -27 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │ -27 │ -31 │ -50 │
├─────┼─────┼─────┼─────┤
│  32 │  33 │ -30 │ -31 │
├─────┼─────┼─────┼─────┤
│  -7 │ -41 │ -61 │ -27 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = 33 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -31 (from PE[1][3])
  PE[1][0]: partial_in = -7 (from PE[2][0])
  PE[1][1]: partial_in = -41 (from PE[2][1])
  PE[1][2]: partial_in = -61 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-41 -> result=-41
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-61 -> result=-61
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       32       33      -30      -31 
  Row 1:       -7      -41      -61      -27 
  Row 2:      -37      -74      -37        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  33 │ -30 │ -31 │
├─────┼─────┼─────┼─────┤
│  -7 │ -41 │ -61 │ -27 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       32       33      -30      -31 
Row 1:       -7      -41      -61      -27 
Row 2:      -37      -74      -37        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 32 -> clamp(32) -> final(160)
  PE[0][1]: 33 -> clamp(33) -> final(161)
  PE[0][2]: -30 -> clamp(-30) -> final(98)
  PE[0][3]: -31 -> clamp(-31) -> final(97)
  PE[1][0]: -7 -> clamp(-7) -> final(121)
  PE[1][1]: -41 -> clamp(-41) -> final(87)
  PE[1][2]: -61 -> clamp(-61) -> final(67)
  PE[1][3]: -27 -> clamp(-27) -> final(101)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   160    161     98     97 
   121     87     67    101 
    91     54     91    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  26   68  -10  -48 
  22   80   21  -34 
  11   71   35  -26 
 -11   29   12  -24 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=26 * weight=-2 = -52, partial_in=0 -> result=-52
  PE[0][1]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[0][2]: input=26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -52      -26        0       26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -52 │ -26 │   0 │  26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 68
  Row 1: input_block[1][0] = 22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=68 * weight=-2 = -136, partial_in=0 -> result=-136
  PE[0][1]: input=68 * weight=-1 = -68, partial_in=0 -> result=-68
  PE[0][2]: input=68 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=68 * weight=1 = 68, partial_in=0 -> result=68
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][3]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -136      -68        0       68 
  Row 1:      -22       22       22       44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-136 │ -68 │   0 │  68 │
├─────┼─────┼─────┼─────┤
│ -22 │  22 │  22 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -10
  Row 1: input_block[1][1] = 80
  Row 2: input_block[2][0] = 11
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 22 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-10 * weight=-2 = 20, partial_in=-22 -> result=-2
  PE[0][1]: input=-10 * weight=-1 = 10, partial_in=22 -> result=32
  PE[0][2]: input=-10 * weight=0 = 0, partial_in=22 -> result=22
  PE[0][3]: input=-10 * weight=1 = -10, partial_in=44 -> result=34
  PE[1][0]: input=80 * weight=-1 = -80, partial_in=0 -> result=-80
  PE[1][1]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[1][2]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[1][3]: input=80 * weight=2 = 160, partial_in=0 -> result=160
  PE[2][0]: input=11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[2][2]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -2       32       22       34 
  Row 1:      -80       80       80      160 
  Row 2:        0       11       22       11 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  32 │  22 │  34 │
├─────┼─────┼─────┼─────┤
│ -80 │  80 │  80 │ 160 │
├─────┼─────┼─────┼─────┤
│   0 │  11 │  22 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -48
  Row 1: input_block[1][2] = 21
  Row 2: input_block[2][1] = 71
  Row 3: input_block[3][0] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -80 (from PE[1][0])
  PE[0][1]: partial_in = 80 (from PE[1][1])
  PE[0][2]: partial_in = 80 (from PE[1][2])
  PE[0][3]: partial_in = 160 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 11 (from PE[2][1])
  PE[1][2]: partial_in = 22 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=-80 -> result=16
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=80 -> result=128
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=80 -> result=80
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=160 -> result=112
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=11 -> result=32
  PE[1][2]: input=21 * weight=1 = 21, partial_in=22 -> result=43
  PE[1][3]: input=21 * weight=2 = 42, partial_in=11 -> result=53
  PE[2][0]: input=71 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=71 * weight=1 = 71, partial_in=0 -> result=71
  PE[2][2]: input=71 * weight=2 = 142, partial_in=0 -> result=142
  PE[2][3]: input=71 * weight=1 = 71, partial_in=0 -> result=71
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       16      128       80      112 
  Row 1:      -21       32       43       53 
  Row 2:        0       71      142       71 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │ 128 │  80 │ 112 │
├─────┼─────┼─────┼─────┤
│ -21 │  32 │  43 │  53 │
├─────┼─────┼─────┼─────┤
│   0 │  71 │ 142 │  71 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -34
  Row 2: input_block[2][2] = 35
  Row 3: input_block[3][1] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 43 (from PE[1][2])
  PE[0][3]: partial_in = 53 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 71 (from PE[2][1])
  PE[1][2]: partial_in = 142 (from PE[2][2])
  PE[1][3]: partial_in = 71 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-21 -> result=-21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=43 -> result=43
  PE[0][3]: input=0 * weight=1 = 0, partial_in=53 -> result=53
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=71 -> result=37
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=142 -> result=108
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=71 -> result=3
  PE[2][0]: input=35 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=35 * weight=1 = 35, partial_in=-22 -> result=13
  PE[2][2]: input=35 * weight=2 = 70, partial_in=-11 -> result=59
  PE[2][3]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -21       32       43       53 
  Row 1:       34       37      108        3 
  Row 2:      -11       13       59       35 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  32 │  43 │  53 │
├─────┼─────┼─────┼─────┤
│  34 │  37 │ 108 │   3 │
├─────┼─────┼─────┼─────┤
│ -11 │  13 │  59 │  35 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -26
  Row 3: input_block[3][2] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = 37 (from PE[1][1])
  PE[0][2]: partial_in = 108 (from PE[1][2])
  PE[0][3]: partial_in = 3 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = 59 (from PE[2][2])
  PE[1][3]: partial_in = 35 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=34 -> result=34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=37 -> result=37
  PE[0][2]: input=0 * weight=0 = 0, partial_in=108 -> result=108
  PE[0][3]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=13 -> result=13
  PE[1][2]: input=0 * weight=1 = 0, partial_in=59 -> result=59
  PE[1][3]: input=0 * weight=2 = 0, partial_in=35 -> result=35
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=58 -> result=32
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=29 -> result=-23
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       34       37      108        3 
  Row 1:      -11       13       59       35 
  Row 2:       29       32      -23      -26 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │  37 │ 108 │   3 │
├─────┼─────┼─────┼─────┤
│ -11 │  13 │  59 │  35 │
├─────┼─────┼─────┼─────┤
│  29 │  32 │ -23 │ -26 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 13 (from PE[1][1])
  PE[0][2]: partial_in = 59 (from PE[1][2])
  PE[0][3]: partial_in = 35 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 32 (from PE[2][1])
  PE[1][2]: partial_in = -23 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=13 -> result=13
  PE[0][2]: input=0 * weight=0 = 0, partial_in=59 -> result=59
  PE[0][3]: input=0 * weight=1 = 0, partial_in=35 -> result=35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[2][2]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -11       13       59       35 
  Row 1:       29       32      -23      -26 
  Row 2:       12       24       12        0 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │  13 │  59 │  35 │
├─────┼─────┼─────┼─────┤
│  29 │  32 │ -23 │ -26 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -11       13       59       35 
Row 1:       29       32      -23      -26 
Row 2:       12       24       12        0 
Row 3:      -24      -48      -24        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -11 -> clamp(-11) -> final(117)
  PE[0][1]: 13 -> clamp(13) -> final(141)
  PE[0][2]: 59 -> clamp(59) -> final(187)
  PE[0][3]: 35 -> clamp(35) -> final(163)
  PE[1][0]: 29 -> clamp(29) -> final(157)
  PE[1][1]: 32 -> clamp(32) -> final(160)
  PE[1][2]: -23 -> clamp(-23) -> final(105)
  PE[1][3]: -26 -> clamp(-26) -> final(102)
  PE[2][0]: 12 -> clamp(12) -> final(140)
  PE[2][1]: 24 -> clamp(24) -> final(152)
  PE[2][2]: 12 -> clamp(12) -> final(140)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -24 -> clamp(-24) -> final(104)
  PE[3][1]: -48 -> clamp(-48) -> final(80)
  PE[3][2]: -24 -> clamp(-24) -> final(104)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   117    141    187    163 
   157    160    105    102 
   140    152    140    128 
   104     80    104    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -22  -34  -35  -36 
 -37  -42  -27  -27 
 -51  -50  -30  -41 
 -43  -37  -21  -39 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       44       22        0      -22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -34
  Row 1: input_block[1][0] = -37
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       68       34        0      -34 
  Row 1:       37      -37      -37      -74 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -35
  Row 1: input_block[1][1] = -42
  Row 2: input_block[2][0] = -51
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=37 -> result=107
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=-37 -> result=-2
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=-74 -> result=-109
  PE[1][0]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[1][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][3]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][0]: input=-51 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[2][2]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][3]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      107       -2      -37     -109 
  Row 1:       42      -42      -42      -84 
  Row 2:        0      -51     -102      -51 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 107 │  -2 │ -37 │-109 │
├─────┼─────┼─────┼─────┤
│  42 │ -42 │ -42 │ -84 │
├─────┼─────┼─────┼─────┤
│   0 │ -51 │-102 │ -51 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -36
  Row 1: input_block[1][2] = -27
  Row 2: input_block[2][1] = -50
  Row 3: input_block[3][0] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 42 (from PE[1][0])
  PE[0][1]: partial_in = -42 (from PE[1][1])
  PE[0][2]: partial_in = -42 (from PE[1][2])
  PE[0][3]: partial_in = -84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -51 (from PE[2][1])
  PE[1][2]: partial_in = -102 (from PE[2][2])
  PE[1][3]: partial_in = -51 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=42 -> result=114
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=-42 -> result=-6
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=-84 -> result=-120
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-51 -> result=-78
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-102 -> result=-129
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-51 -> result=-105
  PE[2][0]: input=-50 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[2][2]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[2][3]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      114       -6      -42     -120 
  Row 1:       27      -78     -129     -105 
  Row 2:        0      -50     -100      -50 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 114 │  -6 │ -42 │-120 │
├─────┼─────┼─────┼─────┤
│  27 │ -78 │-129 │-105 │
├─────┼─────┼─────┼─────┤
│   0 │ -50 │-100 │ -50 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -27
  Row 2: input_block[2][2] = -30
  Row 3: input_block[3][1] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -78 (from PE[1][1])
  PE[0][2]: partial_in = -129 (from PE[1][2])
  PE[0][3]: partial_in = -105 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -50 (from PE[2][1])
  PE[1][2]: partial_in = -100 (from PE[2][2])
  PE[1][3]: partial_in = -50 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-78 -> result=-78
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-129 -> result=-129
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-105 -> result=-105
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-50 -> result=-77
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-100 -> result=-127
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-50 -> result=-104
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=-86 -> result=-116
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=-43 -> result=-103
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       27      -78     -129     -105 
  Row 1:       27      -77     -127     -104 
  Row 2:      -43     -116     -103      -30 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -78 │-129 │-105 │
├─────┼─────┼─────┼─────┤
│  27 │ -77 │-127 │-104 │
├─────┼─────┼─────┼─────┤
│ -43 │-116 │-103 │ -30 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -41
  Row 3: input_block[3][2] = -21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -77 (from PE[1][1])
  PE[0][2]: partial_in = -127 (from PE[1][2])
  PE[0][3]: partial_in = -104 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -116 (from PE[2][1])
  PE[1][2]: partial_in = -103 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-77 -> result=-77
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-127 -> result=-127
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-104 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][0]: input=-41 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=-41 * weight=1 = -41, partial_in=-74 -> result=-115
  PE[2][2]: input=-41 * weight=2 = -82, partial_in=-37 -> result=-119
  PE[2][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][0]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][1]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[3][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][3]: input=-21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       27      -77     -127     -104 
  Row 1:      -43     -116     -103      -30 
  Row 2:      -37     -115     -119      -41 
  Row 3:      -21      -42      -21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -77 │-127 │-104 │
├─────┼─────┼─────┼─────┤
│ -43 │-116 │-103 │ -30 │
├─────┼─────┼─────┼─────┤
│ -37 │-115 │-119 │ -41 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = -116 (from PE[1][1])
  PE[0][2]: partial_in = -103 (from PE[1][2])
  PE[0][3]: partial_in = -30 (from PE[1][3])
  PE[1][0]: partial_in = -37 (from PE[2][0])
  PE[1][1]: partial_in = -115 (from PE[2][1])
  PE[1][2]: partial_in = -119 (from PE[2][2])
  PE[1][3]: partial_in = -41 (from PE[2][3])
  PE[2][0]: partial_in = -21 (from PE[3][0])
  PE[2][1]: partial_in = -42 (from PE[3][1])
  PE[2][2]: partial_in = -21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-116 -> result=-116
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-103 -> result=-103
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-115 -> result=-115
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-119 -> result=-119
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-41 -> result=-41
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-21 -> result=-21
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -43     -116     -103      -30 
  Row 1:      -37     -115     -119      -41 
  Row 2:      -21      -42      -21        0 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │-116 │-103 │ -30 │
├─────┼─────┼─────┼─────┤
│ -37 │-115 │-119 │ -41 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -43     -116     -103      -30 
Row 1:      -37     -115     -119      -41 
Row 2:      -21      -42      -21        0 
Row 3:      -39      -78      -39        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -43 -> clamp(-43) -> final(85)
  PE[0][1]: -116 -> clamp(-116) -> final(12)
  PE[0][2]: -103 -> clamp(-103) -> final(25)
  PE[0][3]: -30 -> clamp(-30) -> final(98)
  PE[1][0]: -37 -> clamp(-37) -> final(91)
  PE[1][1]: -115 -> clamp(-115) -> final(13)
  PE[1][2]: -119 -> clamp(-119) -> final(9)
  PE[1][3]: -41 -> clamp(-41) -> final(87)
  PE[2][0]: -21 -> clamp(-21) -> final(107)
  PE[2][1]: -42 -> clamp(-42) -> final(86)
  PE[2][2]: -21 -> clamp(-21) -> final(107)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -39 -> clamp(-39) -> final(89)
  PE[3][1]: -78 -> clamp(-78) -> final(50)
  PE[3][2]: -39 -> clamp(-39) -> final(89)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    85     12     25     98 
    91     13      9     87 
   107     86    107    128 
    89     50     89    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -19    4    4  -25 
 -25  -20  -20  -20 
 -27  -26  -29  -20 
 -33  -19  -26  -28 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -19
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-19 * weight=-2 = 38, partial_in=0 -> result=38
  PE[0][1]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[0][2]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       38       19        0      -19 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │  19 │   0 │ -19 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 4
  Row 1: input_block[1][0] = -25
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=0 -> result=-8
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[0][2]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       -8       -4        0        4 
  Row 1:       25      -25      -25      -50 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  -4 │   0 │   4 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 4
  Row 1: input_block[1][1] = -20
  Row 2: input_block[2][0] = -27
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=25 -> result=17
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=-25 -> result=-29
  PE[0][2]: input=4 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=4 * weight=1 = 4, partial_in=-50 -> result=-46
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       17      -29      -25      -46 
  Row 1:       20      -20      -20      -40 
  Row 2:        0      -27      -54      -27 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  17 │ -29 │ -25 │ -46 │
├─────┼─────┼─────┼─────┤
│  20 │ -20 │ -20 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │ -27 │ -54 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -25
  Row 1: input_block[1][2] = -20
  Row 2: input_block[2][1] = -26
  Row 3: input_block[3][0] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=20 -> result=70
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=-20 -> result=5
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=-40 -> result=-65
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=-27 -> result=-47
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=-54 -> result=-74
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=-27 -> result=-67
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       70        5      -20      -65 
  Row 1:       20      -47      -74      -67 
  Row 2:        0      -26      -52      -26 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │   5 │ -20 │ -65 │
├─────┼─────┼─────┼─────┤
│  20 │ -47 │ -74 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -20
  Row 2: input_block[2][2] = -29
  Row 3: input_block[3][1] = -19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -47 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -67 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=-26 -> result=-46
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=-52 -> result=-72
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=-26 -> result=-66
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=-66 -> result=-95
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=-33 -> result=-91
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][1]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[3][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][3]: input=-19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       20      -47      -74      -67 
  Row 1:       20      -46      -72      -66 
  Row 2:      -33      -95      -91      -29 
  Row 3:      -19      -38      -19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -47 │ -74 │ -67 │
├─────┼─────┼─────┼─────┤
│  20 │ -46 │ -72 │ -66 │
├─────┼─────┼─────┼─────┤
│ -33 │ -95 │ -91 │ -29 │
├─────┼─────┼─────┼─────┤
│ -19 │ -38 │ -19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -20
  Row 3: input_block[3][2] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -46 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = -33 (from PE[2][0])
  PE[1][1]: partial_in = -95 (from PE[2][1])
  PE[1][2]: partial_in = -91 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = -19 (from PE[3][0])
  PE[2][1]: partial_in = -38 (from PE[3][1])
  PE[2][2]: partial_in = -19 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-46 -> result=-46
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-33 -> result=-33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-29 -> result=-29
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=-38 -> result=-58
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=-19 -> result=-59
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       20      -46      -72      -66 
  Row 1:      -33      -95      -91      -29 
  Row 2:      -19      -58      -59      -20 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -46 │ -72 │ -66 │
├─────┼─────┼─────┼─────┤
│ -33 │ -95 │ -91 │ -29 │
├─────┼─────┼─────┼─────┤
│ -19 │ -58 │ -59 │ -20 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -91 (from PE[1][2])
  PE[0][3]: partial_in = -29 (from PE[1][3])
  PE[1][0]: partial_in = -19 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -59 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-95 -> result=-95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-29 -> result=-29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-19 -> result=-19
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-59 -> result=-59
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-20 -> result=-20
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -33      -95      -91      -29 
  Row 1:      -19      -58      -59      -20 
  Row 2:      -26      -52      -26        0 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │ -95 │ -91 │ -29 │
├─────┼─────┼─────┼─────┤
│ -19 │ -58 │ -59 │ -20 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -33      -95      -91      -29 
Row 1:      -19      -58      -59      -20 
Row 2:      -26      -52      -26        0 
Row 3:      -28      -56      -28        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -33 -> clamp(-33) -> final(95)
  PE[0][1]: -95 -> clamp(-95) -> final(33)
  PE[0][2]: -91 -> clamp(-91) -> final(37)
  PE[0][3]: -29 -> clamp(-29) -> final(99)
  PE[1][0]: -19 -> clamp(-19) -> final(109)
  PE[1][1]: -58 -> clamp(-58) -> final(70)
  PE[1][2]: -59 -> clamp(-59) -> final(69)
  PE[1][3]: -20 -> clamp(-20) -> final(108)
  PE[2][0]: -26 -> clamp(-26) -> final(102)
  PE[2][1]: -52 -> clamp(-52) -> final(76)
  PE[2][2]: -26 -> clamp(-26) -> final(102)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -28 -> clamp(-28) -> final(100)
  PE[3][1]: -56 -> clamp(-56) -> final(72)
  PE[3][2]: -28 -> clamp(-28) -> final(100)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    95     33     37     99 
   109     70     69    108 
   102     76    102    128 
   100     72    100    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -14  -22  -40   22 
 -16  -35  -21   56 
 -29  -39    5   58 
 -39  -16   36   24 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -14
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       28       14        0      -14 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -22
  Row 1: input_block[1][0] = -16
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       44       22        0      -22 
  Row 1:       16      -16      -16      -32 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│  16 │ -16 │ -16 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -40
  Row 1: input_block[1][1] = -35
  Row 2: input_block[2][0] = -29
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=16 -> result=96
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=-16 -> result=24
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=-32 -> result=-72
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       96       24      -16      -72 
  Row 1:       35      -35      -35      -70 
  Row 2:        0      -29      -58      -29 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │  24 │ -16 │ -72 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │ -29 │ -58 │ -29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 22
  Row 1: input_block[1][2] = -21
  Row 2: input_block[2][1] = -39
  Row 3: input_block[3][0] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -29 (from PE[2][1])
  PE[1][2]: partial_in = -58 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=35 -> result=-9
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=-35 -> result=-57
  PE[0][2]: input=22 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=22 * weight=1 = 22, partial_in=-70 -> result=-48
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=-29 -> result=-50
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=-58 -> result=-79
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=-29 -> result=-71
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       -9      -57      -35      -48 
  Row 1:       21      -50      -79      -71 
  Row 2:        0      -39      -78      -39 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -9 │ -57 │ -35 │ -48 │
├─────┼─────┼─────┼─────┤
│  21 │ -50 │ -79 │ -71 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 56
  Row 2: input_block[2][2] = 5
  Row 3: input_block[3][1] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -79 (from PE[1][2])
  PE[0][3]: partial_in = -71 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-79 -> result=-79
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-71 -> result=-71
  PE[1][0]: input=56 * weight=-1 = -56, partial_in=0 -> result=-56
  PE[1][1]: input=56 * weight=1 = 56, partial_in=-39 -> result=17
  PE[1][2]: input=56 * weight=1 = 56, partial_in=-78 -> result=-22
  PE[1][3]: input=56 * weight=2 = 112, partial_in=-39 -> result=73
  PE[2][0]: input=5 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=5 * weight=1 = 5, partial_in=-78 -> result=-73
  PE[2][2]: input=5 * weight=2 = 10, partial_in=-39 -> result=-29
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       21      -50      -79      -71 
  Row 1:      -56       17      -22       73 
  Row 2:      -39      -73      -29        5 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │ -50 │ -79 │ -71 │
├─────┼─────┼─────┼─────┤
│ -56 │  17 │ -22 │  73 │
├─────┼─────┼─────┼─────┤
│ -39 │ -73 │ -29 │   5 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 58
  Row 3: input_block[3][2] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -56 (from PE[1][0])
  PE[0][1]: partial_in = 17 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = 73 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -73 (from PE[2][1])
  PE[1][2]: partial_in = -29 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-56 -> result=-56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=17 -> result=17
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=0 * weight=1 = 0, partial_in=73 -> result=73
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-73 -> result=-73
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-29 -> result=-29
  PE[1][3]: input=0 * weight=2 = 0, partial_in=5 -> result=5
  PE[2][0]: input=58 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=58 * weight=1 = 58, partial_in=-32 -> result=26
  PE[2][2]: input=58 * weight=2 = 116, partial_in=-16 -> result=100
  PE[2][3]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -56       17      -22       73 
  Row 1:      -39      -73      -29        5 
  Row 2:      -16       26      100       58 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │  17 │ -22 │  73 │
├─────┼─────┼─────┼─────┤
│ -39 │ -73 │ -29 │   5 │
├─────┼─────┼─────┼─────┤
│ -16 │  26 │ 100 │  58 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = -73 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = 5 (from PE[1][3])
  PE[1][0]: partial_in = -16 (from PE[2][0])
  PE[1][1]: partial_in = 26 (from PE[2][1])
  PE[1][2]: partial_in = 100 (from PE[2][2])
  PE[1][3]: partial_in = 58 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-39 -> result=-39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=26 -> result=26
  PE[1][2]: input=0 * weight=1 = 0, partial_in=100 -> result=100
  PE[1][3]: input=0 * weight=2 = 0, partial_in=58 -> result=58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[2][2]: input=0 * weight=2 = 0, partial_in=36 -> result=36
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][1]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[3][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][3]: input=24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -39      -73      -29        5 
  Row 1:      -16       26      100       58 
  Row 2:       36       72       36        0 
  Row 3:       24       48       24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │ -73 │ -29 │   5 │
├─────┼─────┼─────┼─────┤
│ -16 │  26 │ 100 │  58 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -39      -73      -29        5 
Row 1:      -16       26      100       58 
Row 2:       36       72       36        0 
Row 3:       24       48       24        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -39 -> clamp(-39) -> final(89)
  PE[0][1]: -73 -> clamp(-73) -> final(55)
  PE[0][2]: -29 -> clamp(-29) -> final(99)
  PE[0][3]: 5 -> clamp(5) -> final(133)
  PE[1][0]: -16 -> clamp(-16) -> final(112)
  PE[1][1]: 26 -> clamp(26) -> final(154)
  PE[1][2]: 100 -> clamp(100) -> final(228)
  PE[1][3]: 58 -> clamp(58) -> final(186)
  PE[2][0]: 36 -> clamp(36) -> final(164)
  PE[2][1]: 72 -> clamp(72) -> final(200)
  PE[2][2]: 36 -> clamp(36) -> final(164)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 24 -> clamp(24) -> final(152)
  PE[3][1]: 48 -> clamp(48) -> final(176)
  PE[3][2]: 24 -> clamp(24) -> final(152)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    89     55     99    133 
   112    154    228    186 
   164    200    164    128 
   152    176    152    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   6  -33  -66  -61 
  41  -24  -79  -70 
  23  -44  -96  -72 
 -28  -71 -101  -70 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 6
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=0 -> result=-12
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[0][2]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -12       -6        0        6 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  -6 │   0 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -33
  Row 1: input_block[1][0] = 41
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=0 -> result=66
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[1][0]: input=41 * weight=-1 = -41, partial_in=0 -> result=-41
  PE[1][1]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[1][2]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[1][3]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       66       33        0      -33 
  Row 1:      -41       41       41       82 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  66 │  33 │   0 │ -33 │
├─────┼─────┼─────┼─────┤
│ -41 │  41 │  41 │  82 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -66
  Row 1: input_block[1][1] = -24
  Row 2: input_block[2][0] = 23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -41 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 41 (from PE[1][2])
  PE[0][3]: partial_in = 82 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-66 * weight=-2 = 132, partial_in=-41 -> result=91
  PE[0][1]: input=-66 * weight=-1 = 66, partial_in=41 -> result=107
  PE[0][2]: input=-66 * weight=0 = 0, partial_in=41 -> result=41
  PE[0][3]: input=-66 * weight=1 = -66, partial_in=82 -> result=16
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       91      107       41       16 
  Row 1:       24      -24      -24      -48 
  Row 2:        0       23       46       23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  91 │ 107 │  41 │  16 │
├─────┼─────┼─────┼─────┤
│  24 │ -24 │ -24 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -61
  Row 1: input_block[1][2] = -79
  Row 2: input_block[2][1] = -44
  Row 3: input_block[3][0] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -24 (from PE[1][2])
  PE[0][3]: partial_in = -48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=24 -> result=146
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-24 -> result=37
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-48 -> result=-109
  PE[1][0]: input=-79 * weight=-1 = 79, partial_in=0 -> result=79
  PE[1][1]: input=-79 * weight=1 = -79, partial_in=23 -> result=-56
  PE[1][2]: input=-79 * weight=1 = -79, partial_in=46 -> result=-33
  PE[1][3]: input=-79 * weight=2 = -158, partial_in=23 -> result=-135
  PE[2][0]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[2][2]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      146       37      -24     -109 
  Row 1:       79      -56      -33     -135 
  Row 2:        0      -44      -88      -44 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 146 │  37 │ -24 │-109 │
├─────┼─────┼─────┼─────┤
│  79 │ -56 │ -33 │-135 │
├─────┼─────┼─────┼─────┤
│   0 │ -44 │ -88 │ -44 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -70
  Row 2: input_block[2][2] = -96
  Row 3: input_block[3][1] = -71

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 79 (from PE[1][0])
  PE[0][1]: partial_in = -56 (from PE[1][1])
  PE[0][2]: partial_in = -33 (from PE[1][2])
  PE[0][3]: partial_in = -135 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -44 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=79 -> result=79
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-56 -> result=-56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-135 -> result=-135
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=-44 -> result=-114
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=-88 -> result=-158
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=-44 -> result=-184
  PE[2][0]: input=-96 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-96 * weight=1 = -96, partial_in=-56 -> result=-152
  PE[2][2]: input=-96 * weight=2 = -192, partial_in=-28 -> result=-220
  PE[2][3]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][0]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][1]: input=-71 * weight=2 = -142, partial_in=0 -> result=-142
  PE[3][2]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][3]: input=-71 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       79      -56      -33     -135 
  Row 1:       70     -114     -158     -184 
  Row 2:      -28     -152     -220      -96 
  Row 3:      -71     -142      -71        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  79 │ -56 │ -33 │-135 │
├─────┼─────┼─────┼─────┤
│  70 │-114 │-158 │-184 │
├─────┼─────┼─────┼─────┤
│ -28 │-152 │-220 │ -96 │
├─────┼─────┼─────┼─────┤
│ -71 │-142 │ -71 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -72
  Row 3: input_block[3][2] = -101

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -114 (from PE[1][1])
  PE[0][2]: partial_in = -158 (from PE[1][2])
  PE[0][3]: partial_in = -184 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -152 (from PE[2][1])
  PE[1][2]: partial_in = -220 (from PE[2][2])
  PE[1][3]: partial_in = -96 (from PE[2][3])
  PE[2][0]: partial_in = -71 (from PE[3][0])
  PE[2][1]: partial_in = -142 (from PE[3][1])
  PE[2][2]: partial_in = -71 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=70 -> result=70
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-114 -> result=-114
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-158 -> result=-158
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-184 -> result=-184
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-152 -> result=-152
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-220 -> result=-220
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-96 -> result=-96
  PE[2][0]: input=-72 * weight=0 = 0, partial_in=-71 -> result=-71
  PE[2][1]: input=-72 * weight=1 = -72, partial_in=-142 -> result=-214
  PE[2][2]: input=-72 * weight=2 = -144, partial_in=-71 -> result=-215
  PE[2][3]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][0]: input=-101 * weight=1 = -101, partial_in=0 -> result=-101
  PE[3][1]: input=-101 * weight=2 = -202, partial_in=0 -> result=-202
  PE[3][2]: input=-101 * weight=1 = -101, partial_in=0 -> result=-101
  PE[3][3]: input=-101 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       70     -114     -158     -184 
  Row 1:      -28     -152     -220      -96 
  Row 2:      -71     -214     -215      -72 
  Row 3:     -101     -202     -101        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │-114 │-158 │-184 │
├─────┼─────┼─────┼─────┤
│ -28 │-152 │-220 │ -96 │
├─────┼─────┼─────┼─────┤
│ -71 │-214 │-215 │ -72 │
├─────┼─────┼─────┼─────┤
│-101 │-202 │-101 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = -152 (from PE[1][1])
  PE[0][2]: partial_in = -220 (from PE[1][2])
  PE[0][3]: partial_in = -96 (from PE[1][3])
  PE[1][0]: partial_in = -71 (from PE[2][0])
  PE[1][1]: partial_in = -214 (from PE[2][1])
  PE[1][2]: partial_in = -215 (from PE[2][2])
  PE[1][3]: partial_in = -72 (from PE[2][3])
  PE[2][0]: partial_in = -101 (from PE[3][0])
  PE[2][1]: partial_in = -202 (from PE[3][1])
  PE[2][2]: partial_in = -101 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-28 -> result=-28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-152 -> result=-152
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-220 -> result=-220
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-71 -> result=-71
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-214 -> result=-214
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-215 -> result=-215
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-72 -> result=-72
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-101 -> result=-101
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-202 -> result=-202
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-101 -> result=-101
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -28     -152     -220      -96 
  Row 1:      -71     -214     -215      -72 
  Row 2:     -101     -202     -101        0 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │-152 │-220 │ -96 │
├─────┼─────┼─────┼─────┤
│ -71 │-214 │-215 │ -72 │
├─────┼─────┼─────┼─────┤
│-101 │-202 │-101 │   0 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -28     -152     -220      -96 
Row 1:      -71     -214     -215      -72 
Row 2:     -101     -202     -101        0 
Row 3:      -70     -140      -70        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -28 -> clamp(-28) -> final(100)
  PE[0][1]: -152 -> clamp(-128) -> final(0)
  PE[0][2]: -220 -> clamp(-128) -> final(0)
  PE[0][3]: -96 -> clamp(-96) -> final(32)
  PE[1][0]: -71 -> clamp(-71) -> final(57)
  PE[1][1]: -214 -> clamp(-128) -> final(0)
  PE[1][2]: -215 -> clamp(-128) -> final(0)
  PE[1][3]: -72 -> clamp(-72) -> final(56)
  PE[2][0]: -101 -> clamp(-101) -> final(27)
  PE[2][1]: -202 -> clamp(-128) -> final(0)
  PE[2][2]: -101 -> clamp(-101) -> final(27)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -70 -> clamp(-70) -> final(58)
  PE[3][1]: -140 -> clamp(-128) -> final(0)
  PE[3][2]: -70 -> clamp(-70) -> final(58)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   100      0      0     32 
    57      0      0     56 
    27      0     27    128 
    58      0     58    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -23   -5   11   57 
 -22   -1   13   50 
 -24  -12    0   30 
 -45  -50  -30   -1 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -23
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=0 -> result=46
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       46       23        0      -23 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │  23 │   0 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -5
  Row 1: input_block[1][0] = -22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=0 -> result=10
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       10        5        0       -5 
  Row 1:       22      -22      -22      -44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   5 │   0 │  -5 │
├─────┼─────┼─────┼─────┤
│  22 │ -22 │ -22 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 11
  Row 1: input_block[1][1] = -1
  Row 2: input_block[2][0] = -24
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=22 -> result=0
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=-22 -> result=-33
  PE[0][2]: input=11 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=11 * weight=1 = 11, partial_in=-44 -> result=-33
  PE[1][0]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[1][1]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[1][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[1][3]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        0      -33      -22      -33 
  Row 1:        1       -1       -1       -2 
  Row 2:        0      -24      -48      -24 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │ -33 │ -22 │ -33 │
├─────┼─────┼─────┼─────┤
│   1 │  -1 │  -1 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 57
  Row 1: input_block[1][2] = 13
  Row 2: input_block[2][1] = -12
  Row 3: input_block[3][0] = -45

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 1 (from PE[1][0])
  PE[0][1]: partial_in = -1 (from PE[1][1])
  PE[0][2]: partial_in = -1 (from PE[1][2])
  PE[0][3]: partial_in = -2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=57 * weight=-2 = -114, partial_in=1 -> result=-113
  PE[0][1]: input=57 * weight=-1 = -57, partial_in=-1 -> result=-58
  PE[0][2]: input=57 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[0][3]: input=57 * weight=1 = 57, partial_in=-2 -> result=55
  PE[1][0]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[1][1]: input=13 * weight=1 = 13, partial_in=-24 -> result=-11
  PE[1][2]: input=13 * weight=1 = 13, partial_in=-48 -> result=-35
  PE[1][3]: input=13 * weight=2 = 26, partial_in=-24 -> result=2
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][1]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[3][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][3]: input=-45 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -113      -58       -1       55 
  Row 1:      -13      -11      -35        2 
  Row 2:        0      -12      -24      -12 
  Row 3:      -45      -90      -45        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-113 │ -58 │  -1 │  55 │
├─────┼─────┼─────┼─────┤
│ -13 │ -11 │ -35 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │ -12 │ -24 │ -12 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 50
  Row 2: input_block[2][2] = 0
  Row 3: input_block[3][1] = -50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -13 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -12 (from PE[2][1])
  PE[1][2]: partial_in = -24 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = -45 (from PE[3][0])
  PE[2][1]: partial_in = -90 (from PE[3][1])
  PE[2][2]: partial_in = -45 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-13 -> result=-13
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][0]: input=50 * weight=-1 = -50, partial_in=0 -> result=-50
  PE[1][1]: input=50 * weight=1 = 50, partial_in=-12 -> result=38
  PE[1][2]: input=50 * weight=1 = 50, partial_in=-24 -> result=26
  PE[1][3]: input=50 * weight=2 = 100, partial_in=-12 -> result=88
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][1]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[3][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][3]: input=-50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -13      -11      -35        2 
  Row 1:      -50       38       26       88 
  Row 2:      -45      -90      -45        0 
  Row 3:      -50     -100      -50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -13 │ -11 │ -35 │   2 │
├─────┼─────┼─────┼─────┤
│ -50 │  38 │  26 │  88 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
├─────┼─────┼─────┼─────┤
│ -50 │-100 │ -50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 30
  Row 3: input_block[3][2] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -50 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 88 (from PE[1][3])
  PE[1][0]: partial_in = -45 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = -45 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -50 (from PE[3][0])
  PE[2][1]: partial_in = -100 (from PE[3][1])
  PE[2][2]: partial_in = -50 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-50 -> result=-50
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=0 * weight=1 = 0, partial_in=88 -> result=88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-45 -> result=-45
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=30 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[2][1]: input=30 * weight=1 = 30, partial_in=-100 -> result=-70
  PE[2][2]: input=30 * weight=2 = 60, partial_in=-50 -> result=10
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -50       38       26       88 
  Row 1:      -45      -90      -45        0 
  Row 2:      -50      -70       10       30 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -50 │  38 │  26 │  88 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
├─────┼─────┼─────┼─────┤
│ -50 │ -70 │  10 │  30 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = -90 (from PE[1][1])
  PE[0][2]: partial_in = -45 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = -50 (from PE[2][0])
  PE[1][1]: partial_in = -70 (from PE[2][1])
  PE[1][2]: partial_in = 10 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-45 -> result=-45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-90 -> result=-90
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[1][2]: input=0 * weight=1 = 0, partial_in=10 -> result=10
  PE[1][3]: input=0 * weight=2 = 0, partial_in=30 -> result=30
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -45      -90      -45        0 
  Row 1:      -50      -70       10       30 
  Row 2:      -30      -60      -30        0 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -45 │ -90 │ -45 │   0 │
├─────┼─────┼─────┼─────┤
│ -50 │ -70 │  10 │  30 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -45      -90      -45        0 
Row 1:      -50      -70       10       30 
Row 2:      -30      -60      -30        0 
Row 3:       -1       -2       -1        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -45 -> clamp(-45) -> final(83)
  PE[0][1]: -90 -> clamp(-90) -> final(38)
  PE[0][2]: -45 -> clamp(-45) -> final(83)
  PE[0][3]: 0 -> clamp(0) -> final(128)
  PE[1][0]: -50 -> clamp(-50) -> final(78)
  PE[1][1]: -70 -> clamp(-70) -> final(58)
  PE[1][2]: 10 -> clamp(10) -> final(138)
  PE[1][3]: 30 -> clamp(30) -> final(158)
  PE[2][0]: -30 -> clamp(-30) -> final(98)
  PE[2][1]: -60 -> clamp(-60) -> final(68)
  PE[2][2]: -30 -> clamp(-30) -> final(98)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -1 -> clamp(-1) -> final(127)
  PE[3][1]: -2 -> clamp(-2) -> final(126)
  PE[3][2]: -1 -> clamp(-1) -> final(127)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    83     38     83    128 
    78     58    138    158 
    98     68     98    128 
   127    126    127    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  92   32    2  -24 
  73   62   10    1 
  63   50   22   36 
  23   18   37   51 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 92
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=92 * weight=-2 = -184, partial_in=0 -> result=-184
  PE[0][1]: input=92 * weight=-1 = -92, partial_in=0 -> result=-92
  PE[0][2]: input=92 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=92 * weight=1 = 92, partial_in=0 -> result=92
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:     -184      -92        0       92 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-184 │ -92 │   0 │  92 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 32
  Row 1: input_block[1][0] = 73
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=0 -> result=-64
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[0][2]: input=32 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][0]: input=73 * weight=-1 = -73, partial_in=0 -> result=-73
  PE[1][1]: input=73 * weight=1 = 73, partial_in=0 -> result=73
  PE[1][2]: input=73 * weight=1 = 73, partial_in=0 -> result=73
  PE[1][3]: input=73 * weight=2 = 146, partial_in=0 -> result=146
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -64      -32        0       32 
  Row 1:      -73       73       73      146 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │ -32 │   0 │  32 │
├─────┼─────┼─────┼─────┤
│ -73 │  73 │  73 │ 146 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 2
  Row 1: input_block[1][1] = 62
  Row 2: input_block[2][0] = 63
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -73 (from PE[1][0])
  PE[0][1]: partial_in = 73 (from PE[1][1])
  PE[0][2]: partial_in = 73 (from PE[1][2])
  PE[0][3]: partial_in = 146 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=2 * weight=-2 = -4, partial_in=-73 -> result=-77
  PE[0][1]: input=2 * weight=-1 = -2, partial_in=73 -> result=71
  PE[0][2]: input=2 * weight=0 = 0, partial_in=73 -> result=73
  PE[0][3]: input=2 * weight=1 = 2, partial_in=146 -> result=148
  PE[1][0]: input=62 * weight=-1 = -62, partial_in=0 -> result=-62
  PE[1][1]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[1][2]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[1][3]: input=62 * weight=2 = 124, partial_in=0 -> result=124
  PE[2][0]: input=63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[2][2]: input=63 * weight=2 = 126, partial_in=0 -> result=126
  PE[2][3]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -77       71       73      148 
  Row 1:      -62       62       62      124 
  Row 2:        0       63      126       63 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -77 │  71 │  73 │ 148 │
├─────┼─────┼─────┼─────┤
│ -62 │  62 │  62 │ 124 │
├─────┼─────┼─────┼─────┤
│   0 │  63 │ 126 │  63 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -24
  Row 1: input_block[1][2] = 10
  Row 2: input_block[2][1] = 50
  Row 3: input_block[3][0] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -62 (from PE[1][0])
  PE[0][1]: partial_in = 62 (from PE[1][1])
  PE[0][2]: partial_in = 62 (from PE[1][2])
  PE[0][3]: partial_in = 124 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 126 (from PE[2][2])
  PE[1][3]: partial_in = 63 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=-62 -> result=-14
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=62 -> result=86
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=62 -> result=62
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=124 -> result=100
  PE[1][0]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[1][1]: input=10 * weight=1 = 10, partial_in=63 -> result=73
  PE[1][2]: input=10 * weight=1 = 10, partial_in=126 -> result=136
  PE[1][3]: input=10 * weight=2 = 20, partial_in=63 -> result=83
  PE[2][0]: input=50 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[2][2]: input=50 * weight=2 = 100, partial_in=0 -> result=100
  PE[2][3]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -14       86       62      100 
  Row 1:      -10       73      136       83 
  Row 2:        0       50      100       50 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -14 │  86 │  62 │ 100 │
├─────┼─────┼─────┼─────┤
│ -10 │  73 │ 136 │  83 │
├─────┼─────┼─────┼─────┤
│   0 │  50 │ 100 │  50 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 1
  Row 2: input_block[2][2] = 22
  Row 3: input_block[3][1] = 18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -10 (from PE[1][0])
  PE[0][1]: partial_in = 73 (from PE[1][1])
  PE[0][2]: partial_in = 136 (from PE[1][2])
  PE[0][3]: partial_in = 83 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 50 (from PE[2][1])
  PE[1][2]: partial_in = 100 (from PE[2][2])
  PE[1][3]: partial_in = 50 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-10 -> result=-10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=73 -> result=73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=136 -> result=136
  PE[0][3]: input=0 * weight=1 = 0, partial_in=83 -> result=83
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=50 -> result=51
  PE[1][2]: input=1 * weight=1 = 1, partial_in=100 -> result=101
  PE[1][3]: input=1 * weight=2 = 2, partial_in=50 -> result=52
  PE[2][0]: input=22 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=22 * weight=1 = 22, partial_in=46 -> result=68
  PE[2][2]: input=22 * weight=2 = 44, partial_in=23 -> result=67
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][1]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[3][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][3]: input=18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -10       73      136       83 
  Row 1:       -1       51      101       52 
  Row 2:       23       68       67       22 
  Row 3:       18       36       18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -10 │  73 │ 136 │  83 │
├─────┼─────┼─────┼─────┤
│  -1 │  51 │ 101 │  52 │
├─────┼─────┼─────┼─────┤
│  23 │  68 │  67 │  22 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 36
  Row 3: input_block[3][2] = 37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 51 (from PE[1][1])
  PE[0][2]: partial_in = 101 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 23 (from PE[2][0])
  PE[1][1]: partial_in = 68 (from PE[2][1])
  PE[1][2]: partial_in = 67 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = 18 (from PE[3][0])
  PE[2][1]: partial_in = 36 (from PE[3][1])
  PE[2][2]: partial_in = 18 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=51 -> result=51
  PE[0][2]: input=0 * weight=0 = 0, partial_in=101 -> result=101
  PE[0][3]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=23 -> result=23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=68 -> result=68
  PE[1][2]: input=0 * weight=1 = 0, partial_in=67 -> result=67
  PE[1][3]: input=0 * weight=2 = 0, partial_in=22 -> result=22
  PE[2][0]: input=36 * weight=0 = 0, partial_in=18 -> result=18
  PE[2][1]: input=36 * weight=1 = 36, partial_in=36 -> result=72
  PE[2][2]: input=36 * weight=2 = 72, partial_in=18 -> result=90
  PE[2][3]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][0]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][1]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[3][2]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][3]: input=37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -1       51      101       52 
  Row 1:       23       68       67       22 
  Row 2:       18       72       90       36 
  Row 3:       37       74       37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  51 │ 101 │  52 │
├─────┼─────┼─────┼─────┤
│  23 │  68 │  67 │  22 │
├─────┼─────┼─────┼─────┤
│  18 │  72 │  90 │  36 │
├─────┼─────┼─────┼─────┤
│  37 │  74 │  37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = 68 (from PE[1][1])
  PE[0][2]: partial_in = 67 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 18 (from PE[2][0])
  PE[1][1]: partial_in = 72 (from PE[2][1])
  PE[1][2]: partial_in = 90 (from PE[2][2])
  PE[1][3]: partial_in = 36 (from PE[2][3])
  PE[2][0]: partial_in = 37 (from PE[3][0])
  PE[2][1]: partial_in = 74 (from PE[3][1])
  PE[2][2]: partial_in = 37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=68 -> result=68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=67 -> result=67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=22 -> result=22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=18 -> result=18
  PE[1][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=90 -> result=90
  PE[1][3]: input=0 * weight=2 = 0, partial_in=36 -> result=36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=37 -> result=37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=74 -> result=74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=37 -> result=37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][1]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[3][2]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][3]: input=51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       23       68       67       22 
  Row 1:       18       72       90       36 
  Row 2:       37       74       37        0 
  Row 3:       51      102       51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │  68 │  67 │  22 │
├─────┼─────┼─────┼─────┤
│  18 │  72 │  90 │  36 │
├─────┼─────┼─────┼─────┤
│  37 │  74 │  37 │   0 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       23       68       67       22 
Row 1:       18       72       90       36 
Row 2:       37       74       37        0 
Row 3:       51      102       51        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 23 -> clamp(23) -> final(151)
  PE[0][1]: 68 -> clamp(68) -> final(196)
  PE[0][2]: 67 -> clamp(67) -> final(195)
  PE[0][3]: 22 -> clamp(22) -> final(150)
  PE[1][0]: 18 -> clamp(18) -> final(146)
  PE[1][1]: 72 -> clamp(72) -> final(200)
  PE[1][2]: 90 -> clamp(90) -> final(218)
  PE[1][3]: 36 -> clamp(36) -> final(164)
  PE[2][0]: 37 -> clamp(37) -> final(165)
  PE[2][1]: 74 -> clamp(74) -> final(202)
  PE[2][2]: 37 -> clamp(37) -> final(165)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 51 -> clamp(51) -> final(179)
  PE[3][1]: 102 -> clamp(102) -> final(230)
  PE[3][2]: 51 -> clamp(51) -> final(179)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   151    196    195    150 
   146    200    218    164 
   165    202    165    128 
   179    230    179    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -14   18    7    3 
  33   15   -7   14 
  13  -27   -3    7 
  -4  -37   -3    2 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -14
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       28       14        0      -14 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 18
  Row 1: input_block[1][0] = 33
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[1][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[1][3]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -36      -18        0       18 
  Row 1:      -33       33       33       66 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│ -33 │  33 │  33 │  66 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 7
  Row 1: input_block[1][1] = 15
  Row 2: input_block[2][0] = 13
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 33 (from PE[1][1])
  PE[0][2]: partial_in = 33 (from PE[1][2])
  PE[0][3]: partial_in = 66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=7 * weight=-2 = -14, partial_in=-33 -> result=-47
  PE[0][1]: input=7 * weight=-1 = -7, partial_in=33 -> result=26
  PE[0][2]: input=7 * weight=0 = 0, partial_in=33 -> result=33
  PE[0][3]: input=7 * weight=1 = 7, partial_in=66 -> result=73
  PE[1][0]: input=15 * weight=-1 = -15, partial_in=0 -> result=-15
  PE[1][1]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[1][2]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[1][3]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[2][0]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[2][2]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -47       26       33       73 
  Row 1:      -15       15       15       30 
  Row 2:        0       13       26       13 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -47 │  26 │  33 │  73 │
├─────┼─────┼─────┼─────┤
│ -15 │  15 │  15 │  30 │
├─────┼─────┼─────┼─────┤
│   0 │  13 │  26 │  13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 3
  Row 1: input_block[1][2] = -7
  Row 2: input_block[2][1] = -27
  Row 3: input_block[3][0] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = 15 (from PE[1][1])
  PE[0][2]: partial_in = 15 (from PE[1][2])
  PE[0][3]: partial_in = 30 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = 26 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=-15 -> result=-21
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=15 -> result=12
  PE[0][2]: input=3 * weight=0 = 0, partial_in=15 -> result=15
  PE[0][3]: input=3 * weight=1 = 3, partial_in=30 -> result=33
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=13 -> result=6
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=26 -> result=19
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=13 -> result=-1
  PE[2][0]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[2][2]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -21       12       15       33 
  Row 1:        7        6       19       -1 
  Row 2:        0      -27      -54      -27 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  12 │  15 │  33 │
├─────┼─────┼─────┼─────┤
│   7 │   6 │  19 │  -1 │
├─────┼─────┼─────┼─────┤
│   0 │ -27 │ -54 │ -27 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 14
  Row 2: input_block[2][2] = -3
  Row 3: input_block[3][1] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = -1 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -27 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=7 -> result=7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=6 -> result=6
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][0]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[1][1]: input=14 * weight=1 = 14, partial_in=-27 -> result=-13
  PE[1][2]: input=14 * weight=1 = 14, partial_in=-54 -> result=-40
  PE[1][3]: input=14 * weight=2 = 28, partial_in=-27 -> result=1
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=-8 -> result=-11
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=-4 -> result=-10
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        7        6       19       -1 
  Row 1:      -14      -13      -40        1 
  Row 2:       -4      -11      -10       -3 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │   6 │  19 │  -1 │
├─────┼─────┼─────┼─────┤
│ -14 │ -13 │ -40 │   1 │
├─────┼─────┼─────┼─────┤
│  -4 │ -11 │ -10 │  -3 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 7
  Row 3: input_block[3][2] = -3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -14 (from PE[1][0])
  PE[0][1]: partial_in = -13 (from PE[1][1])
  PE[0][2]: partial_in = -40 (from PE[1][2])
  PE[0][3]: partial_in = 1 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -10 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-14 -> result=-14
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-13 -> result=-13
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[0][3]: input=0 * weight=1 = 0, partial_in=1 -> result=1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][0]: input=7 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=7 * weight=1 = 7, partial_in=-74 -> result=-67
  PE[2][2]: input=7 * weight=2 = 14, partial_in=-37 -> result=-23
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][1]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[3][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][3]: input=-3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -14      -13      -40        1 
  Row 1:       -4      -11      -10       -3 
  Row 2:      -37      -67      -23        7 
  Row 3:       -3       -6       -3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -14 │ -13 │ -40 │   1 │
├─────┼─────┼─────┼─────┤
│  -4 │ -11 │ -10 │  -3 │
├─────┼─────┼─────┼─────┤
│ -37 │ -67 │ -23 │   7 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -10 (from PE[1][2])
  PE[0][3]: partial_in = -3 (from PE[1][3])
  PE[1][0]: partial_in = -37 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -23 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = -3 (from PE[3][0])
  PE[2][1]: partial_in = -6 (from PE[3][1])
  PE[2][2]: partial_in = -3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-4 -> result=-4
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -4      -11      -10       -3 
  Row 1:      -37      -67      -23        7 
  Row 2:       -3       -6       -3        0 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -4 │ -11 │ -10 │  -3 │
├─────┼─────┼─────┼─────┤
│ -37 │ -67 │ -23 │   7 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -4      -11      -10       -3 
Row 1:      -37      -67      -23        7 
Row 2:       -3       -6       -3        0 
Row 3:        2        4        2        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -4 -> clamp(-4) -> final(124)
  PE[0][1]: -11 -> clamp(-11) -> final(117)
  PE[0][2]: -10 -> clamp(-10) -> final(118)
  PE[0][3]: -3 -> clamp(-3) -> final(125)
  PE[1][0]: -37 -> clamp(-37) -> final(91)
  PE[1][1]: -67 -> clamp(-67) -> final(61)
  PE[1][2]: -23 -> clamp(-23) -> final(105)
  PE[1][3]: 7 -> clamp(7) -> final(135)
  PE[2][0]: -3 -> clamp(-3) -> final(125)
  PE[2][1]: -6 -> clamp(-6) -> final(122)
  PE[2][2]: -3 -> clamp(-3) -> final(125)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 2 -> clamp(2) -> final(130)
  PE[3][1]: 4 -> clamp(4) -> final(132)
  PE[3][2]: 2 -> clamp(2) -> final(130)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   124    117    118    125 
    91     61    105    135 
   125    122    125    128 
   130    132    130    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -85  -61  -64  -93 
 -81 -107 -113  -95 
 -31  -65  -88  -45 
 -20   14  -23  -27 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -85
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-85 * weight=-2 = 170, partial_in=0 -> result=170
  PE[0][1]: input=-85 * weight=-1 = 85, partial_in=0 -> result=85
  PE[0][2]: input=-85 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-85 * weight=1 = -85, partial_in=0 -> result=-85
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      170       85        0      -85 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 170 │  85 │   0 │ -85 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -61
  Row 1: input_block[1][0] = -81
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=0 -> result=122
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=0 -> result=61
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[1][0]: input=-81 * weight=-1 = 81, partial_in=0 -> result=81
  PE[1][1]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[1][2]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[1][3]: input=-81 * weight=2 = -162, partial_in=0 -> result=-162
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      122       61        0      -61 
  Row 1:       81      -81      -81     -162 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 122 │  61 │   0 │ -61 │
├─────┼─────┼─────┼─────┤
│  81 │ -81 │ -81 │-162 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -64
  Row 1: input_block[1][1] = -107
  Row 2: input_block[2][0] = -31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 81 (from PE[1][0])
  PE[0][1]: partial_in = -81 (from PE[1][1])
  PE[0][2]: partial_in = -81 (from PE[1][2])
  PE[0][3]: partial_in = -162 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-64 * weight=-2 = 128, partial_in=81 -> result=209
  PE[0][1]: input=-64 * weight=-1 = 64, partial_in=-81 -> result=-17
  PE[0][2]: input=-64 * weight=0 = 0, partial_in=-81 -> result=-81
  PE[0][3]: input=-64 * weight=1 = -64, partial_in=-162 -> result=-226
  PE[1][0]: input=-107 * weight=-1 = 107, partial_in=0 -> result=107
  PE[1][1]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[1][2]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[1][3]: input=-107 * weight=2 = -214, partial_in=0 -> result=-214
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      209      -17      -81     -226 
  Row 1:      107     -107     -107     -214 
  Row 2:        0      -31      -62      -31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 209 │ -17 │ -81 │-226 │
├─────┼─────┼─────┼─────┤
│ 107 │-107 │-107 │-214 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -93
  Row 1: input_block[1][2] = -113
  Row 2: input_block[2][1] = -65
  Row 3: input_block[3][0] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 107 (from PE[1][0])
  PE[0][1]: partial_in = -107 (from PE[1][1])
  PE[0][2]: partial_in = -107 (from PE[1][2])
  PE[0][3]: partial_in = -214 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-93 * weight=-2 = 186, partial_in=107 -> result=293
  PE[0][1]: input=-93 * weight=-1 = 93, partial_in=-107 -> result=-14
  PE[0][2]: input=-93 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[0][3]: input=-93 * weight=1 = -93, partial_in=-214 -> result=-307
  PE[1][0]: input=-113 * weight=-1 = 113, partial_in=0 -> result=113
  PE[1][1]: input=-113 * weight=1 = -113, partial_in=-31 -> result=-144
  PE[1][2]: input=-113 * weight=1 = -113, partial_in=-62 -> result=-175
  PE[1][3]: input=-113 * weight=2 = -226, partial_in=-31 -> result=-257
  PE[2][0]: input=-65 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[2][2]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[2][3]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      293      -14     -107     -307 
  Row 1:      113     -144     -175     -257 
  Row 2:        0      -65     -130      -65 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 293 │ -14 │-107 │-307 │
├─────┼─────┼─────┼─────┤
│ 113 │-144 │-175 │-257 │
├─────┼─────┼─────┼─────┤
│   0 │ -65 │-130 │ -65 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -95
  Row 2: input_block[2][2] = -88
  Row 3: input_block[3][1] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 113 (from PE[1][0])
  PE[0][1]: partial_in = -144 (from PE[1][1])
  PE[0][2]: partial_in = -175 (from PE[1][2])
  PE[0][3]: partial_in = -257 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -65 (from PE[2][1])
  PE[1][2]: partial_in = -130 (from PE[2][2])
  PE[1][3]: partial_in = -65 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=113 -> result=113
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-144 -> result=-144
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-175 -> result=-175
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-257 -> result=-257
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=-65 -> result=-160
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=-130 -> result=-225
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=-65 -> result=-255
  PE[2][0]: input=-88 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=-88 * weight=1 = -88, partial_in=-40 -> result=-128
  PE[2][2]: input=-88 * weight=2 = -176, partial_in=-20 -> result=-196
  PE[2][3]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      113     -144     -175     -257 
  Row 1:       95     -160     -225     -255 
  Row 2:      -20     -128     -196      -88 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 113 │-144 │-175 │-257 │
├─────┼─────┼─────┼─────┤
│  95 │-160 │-225 │-255 │
├─────┼─────┼─────┼─────┤
│ -20 │-128 │-196 │ -88 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -45
  Row 3: input_block[3][2] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -160 (from PE[1][1])
  PE[0][2]: partial_in = -225 (from PE[1][2])
  PE[0][3]: partial_in = -255 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -128 (from PE[2][1])
  PE[1][2]: partial_in = -196 (from PE[2][2])
  PE[1][3]: partial_in = -88 (from PE[2][3])
  PE[2][0]: partial_in = 14 (from PE[3][0])
  PE[2][1]: partial_in = 28 (from PE[3][1])
  PE[2][2]: partial_in = 14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=95 -> result=95
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-160 -> result=-160
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-225 -> result=-225
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-255 -> result=-255
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-128 -> result=-128
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-196 -> result=-196
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-88 -> result=-88
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=14 -> result=14
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=28 -> result=-17
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=14 -> result=-76
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       95     -160     -225     -255 
  Row 1:      -20     -128     -196      -88 
  Row 2:       14      -17      -76      -45 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │-160 │-225 │-255 │
├─────┼─────┼─────┼─────┤
│ -20 │-128 │-196 │ -88 │
├─────┼─────┼─────┼─────┤
│  14 │ -17 │ -76 │ -45 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = -128 (from PE[1][1])
  PE[0][2]: partial_in = -196 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 14 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -76 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-128 -> result=-128
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-196 -> result=-196
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=14 -> result=14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-17 -> result=-17
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-76 -> result=-76
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -20     -128     -196      -88 
  Row 1:       14      -17      -76      -45 
  Row 2:      -23      -46      -23        0 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │-128 │-196 │ -88 │
├─────┼─────┼─────┼─────┤
│  14 │ -17 │ -76 │ -45 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -20     -128     -196      -88 
Row 1:       14      -17      -76      -45 
Row 2:      -23      -46      -23        0 
Row 3:      -27      -54      -27        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -20 -> clamp(-20) -> final(108)
  PE[0][1]: -128 -> clamp(-128) -> final(0)
  PE[0][2]: -196 -> clamp(-128) -> final(0)
  PE[0][3]: -88 -> clamp(-88) -> final(40)
  PE[1][0]: 14 -> clamp(14) -> final(142)
  PE[1][1]: -17 -> clamp(-17) -> final(111)
  PE[1][2]: -76 -> clamp(-76) -> final(52)
  PE[1][3]: -45 -> clamp(-45) -> final(83)
  PE[2][0]: -23 -> clamp(-23) -> final(105)
  PE[2][1]: -46 -> clamp(-46) -> final(82)
  PE[2][2]: -23 -> clamp(-23) -> final(105)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -27 -> clamp(-27) -> final(101)
  PE[3][1]: -54 -> clamp(-54) -> final(74)
  PE[3][2]: -27 -> clamp(-27) -> final(101)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   108      0      0     40 
   142    111     52     83 
   105     82    105    128 
   101     74    101    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-120  -95  -46  -23 
 -87  -69  -69  -38 
 -44  -63  -74  -40 
 -62  -72  -59  -54 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -120
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-120 * weight=-2 = 240, partial_in=0 -> result=240
  PE[0][1]: input=-120 * weight=-1 = 120, partial_in=0 -> result=120
  PE[0][2]: input=-120 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-120 * weight=1 = -120, partial_in=0 -> result=-120
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      240      120        0     -120 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 240 │ 120 │   0 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -95
  Row 1: input_block[1][0] = -87
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-95 * weight=-2 = 190, partial_in=0 -> result=190
  PE[0][1]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[0][2]: input=-95 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][0]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[1][1]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][2]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][3]: input=-87 * weight=2 = -174, partial_in=0 -> result=-174
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      190       95        0      -95 
  Row 1:       87      -87      -87     -174 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 190 │  95 │   0 │ -95 │
├─────┼─────┼─────┼─────┤
│  87 │ -87 │ -87 │-174 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -46
  Row 1: input_block[1][1] = -69
  Row 2: input_block[2][0] = -44
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 87 (from PE[1][0])
  PE[0][1]: partial_in = -87 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -174 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=87 -> result=179
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=-87 -> result=-41
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=-174 -> result=-220
  PE[1][0]: input=-69 * weight=-1 = 69, partial_in=0 -> result=69
  PE[1][1]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[1][2]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[1][3]: input=-69 * weight=2 = -138, partial_in=0 -> result=-138
  PE[2][0]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[2][2]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      179      -41      -87     -220 
  Row 1:       69      -69      -69     -138 
  Row 2:        0      -44      -88      -44 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 179 │ -41 │ -87 │-220 │
├─────┼─────┼─────┼─────┤
│  69 │ -69 │ -69 │-138 │
├─────┼─────┼─────┼─────┤
│   0 │ -44 │ -88 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -23
  Row 1: input_block[1][2] = -69
  Row 2: input_block[2][1] = -63
  Row 3: input_block[3][0] = -62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 69 (from PE[1][0])
  PE[0][1]: partial_in = -69 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -138 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -44 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=69 -> result=115
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=-69 -> result=-46
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=-138 -> result=-161
  PE[1][0]: input=-69 * weight=-1 = 69, partial_in=0 -> result=69
  PE[1][1]: input=-69 * weight=1 = -69, partial_in=-44 -> result=-113
  PE[1][2]: input=-69 * weight=1 = -69, partial_in=-88 -> result=-157
  PE[1][3]: input=-69 * weight=2 = -138, partial_in=-44 -> result=-182
  PE[2][0]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[2][2]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][0]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][1]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[3][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][3]: input=-62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      115      -46      -69     -161 
  Row 1:       69     -113     -157     -182 
  Row 2:        0      -63     -126      -63 
  Row 3:      -62     -124      -62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 115 │ -46 │ -69 │-161 │
├─────┼─────┼─────┼─────┤
│  69 │-113 │-157 │-182 │
├─────┼─────┼─────┼─────┤
│   0 │ -63 │-126 │ -63 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -38
  Row 2: input_block[2][2] = -74
  Row 3: input_block[3][1] = -72

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 69 (from PE[1][0])
  PE[0][1]: partial_in = -113 (from PE[1][1])
  PE[0][2]: partial_in = -157 (from PE[1][2])
  PE[0][3]: partial_in = -182 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -63 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -63 (from PE[2][3])
  PE[2][0]: partial_in = -62 (from PE[3][0])
  PE[2][1]: partial_in = -124 (from PE[3][1])
  PE[2][2]: partial_in = -62 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=69 -> result=69
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-113 -> result=-113
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-157 -> result=-157
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-182 -> result=-182
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=-63 -> result=-101
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=-126 -> result=-164
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=-63 -> result=-139
  PE[2][0]: input=-74 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[2][1]: input=-74 * weight=1 = -74, partial_in=-124 -> result=-198
  PE[2][2]: input=-74 * weight=2 = -148, partial_in=-62 -> result=-210
  PE[2][3]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[3][0]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][1]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[3][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][3]: input=-72 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       69     -113     -157     -182 
  Row 1:       38     -101     -164     -139 
  Row 2:      -62     -198     -210      -74 
  Row 3:      -72     -144      -72        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  69 │-113 │-157 │-182 │
├─────┼─────┼─────┼─────┤
│  38 │-101 │-164 │-139 │
├─────┼─────┼─────┼─────┤
│ -62 │-198 │-210 │ -74 │
├─────┼─────┼─────┼─────┤
│ -72 │-144 │ -72 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -40
  Row 3: input_block[3][2] = -59

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -101 (from PE[1][1])
  PE[0][2]: partial_in = -164 (from PE[1][2])
  PE[0][3]: partial_in = -139 (from PE[1][3])
  PE[1][0]: partial_in = -62 (from PE[2][0])
  PE[1][1]: partial_in = -198 (from PE[2][1])
  PE[1][2]: partial_in = -210 (from PE[2][2])
  PE[1][3]: partial_in = -74 (from PE[2][3])
  PE[2][0]: partial_in = -72 (from PE[3][0])
  PE[2][1]: partial_in = -144 (from PE[3][1])
  PE[2][2]: partial_in = -72 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=38 -> result=38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-101 -> result=-101
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-164 -> result=-164
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-139 -> result=-139
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-198 -> result=-198
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-210 -> result=-210
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-74 -> result=-74
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=-144 -> result=-184
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=-72 -> result=-152
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][1]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[3][2]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][3]: input=-59 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       38     -101     -164     -139 
  Row 1:      -62     -198     -210      -74 
  Row 2:      -72     -184     -152      -40 
  Row 3:      -59     -118      -59        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │-101 │-164 │-139 │
├─────┼─────┼─────┼─────┤
│ -62 │-198 │-210 │ -74 │
├─────┼─────┼─────┼─────┤
│ -72 │-184 │-152 │ -40 │
├─────┼─────┼─────┼─────┤
│ -59 │-118 │ -59 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -54

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -62 (from PE[1][0])
  PE[0][1]: partial_in = -198 (from PE[1][1])
  PE[0][2]: partial_in = -210 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = -72 (from PE[2][0])
  PE[1][1]: partial_in = -184 (from PE[2][1])
  PE[1][2]: partial_in = -152 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = -59 (from PE[3][0])
  PE[2][1]: partial_in = -118 (from PE[3][1])
  PE[2][2]: partial_in = -59 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-62 -> result=-62
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-198 -> result=-198
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-210 -> result=-210
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-72 -> result=-72
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-184 -> result=-184
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-152 -> result=-152
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-118 -> result=-118
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-59 -> result=-59
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][1]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[3][2]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][3]: input=-54 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -62     -198     -210      -74 
  Row 1:      -72     -184     -152      -40 
  Row 2:      -59     -118      -59        0 
  Row 3:      -54     -108      -54        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │-198 │-210 │ -74 │
├─────┼─────┼─────┼─────┤
│ -72 │-184 │-152 │ -40 │
├─────┼─────┼─────┼─────┤
│ -59 │-118 │ -59 │   0 │
├─────┼─────┼─────┼─────┤
│ -54 │-108 │ -54 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -62     -198     -210      -74 
Row 1:      -72     -184     -152      -40 
Row 2:      -59     -118      -59        0 
Row 3:      -54     -108      -54        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -62 -> clamp(-62) -> final(66)
  PE[0][1]: -198 -> clamp(-128) -> final(0)
  PE[0][2]: -210 -> clamp(-128) -> final(0)
  PE[0][3]: -74 -> clamp(-74) -> final(54)
  PE[1][0]: -72 -> clamp(-72) -> final(56)
  PE[1][1]: -184 -> clamp(-128) -> final(0)
  PE[1][2]: -152 -> clamp(-128) -> final(0)
  PE[1][3]: -40 -> clamp(-40) -> final(88)
  PE[2][0]: -59 -> clamp(-59) -> final(69)
  PE[2][1]: -118 -> clamp(-118) -> final(10)
  PE[2][2]: -59 -> clamp(-59) -> final(69)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -54 -> clamp(-54) -> final(74)
  PE[3][1]: -108 -> clamp(-108) -> final(20)
  PE[3][2]: -54 -> clamp(-54) -> final(74)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    66      0      0     54 
    56      0      0     88 
    69     10     69    128 
    74     20     74    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -18  -47  -42  -11 
 -40  -74  -56   -8 
 -61  -80  -47    0 
 -71  -75  -32    8 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -18
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=0 -> result=36
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       36       18        0      -18 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │  18 │   0 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -47
  Row 1: input_block[1][0] = -40
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-47 * weight=-2 = 94, partial_in=0 -> result=94
  PE[0][1]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[0][2]: input=-47 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       94       47        0      -47 
  Row 1:       40      -40      -40      -80 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  94 │  47 │   0 │ -47 │
├─────┼─────┼─────┼─────┤
│  40 │ -40 │ -40 │ -80 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -42
  Row 1: input_block[1][1] = -74
  Row 2: input_block[2][0] = -61
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = -40 (from PE[1][1])
  PE[0][2]: partial_in = -40 (from PE[1][2])
  PE[0][3]: partial_in = -80 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-42 * weight=-2 = 84, partial_in=40 -> result=124
  PE[0][1]: input=-42 * weight=-1 = 42, partial_in=-40 -> result=2
  PE[0][2]: input=-42 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[0][3]: input=-42 * weight=1 = -42, partial_in=-80 -> result=-122
  PE[1][0]: input=-74 * weight=-1 = 74, partial_in=0 -> result=74
  PE[1][1]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][2]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][3]: input=-74 * weight=2 = -148, partial_in=0 -> result=-148
  PE[2][0]: input=-61 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[2][2]: input=-61 * weight=2 = -122, partial_in=0 -> result=-122
  PE[2][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      124        2      -40     -122 
  Row 1:       74      -74      -74     -148 
  Row 2:        0      -61     -122      -61 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 124 │   2 │ -40 │-122 │
├─────┼─────┼─────┼─────┤
│  74 │ -74 │ -74 │-148 │
├─────┼─────┼─────┼─────┤
│   0 │ -61 │-122 │ -61 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -11
  Row 1: input_block[1][2] = -56
  Row 2: input_block[2][1] = -80
  Row 3: input_block[3][0] = -71

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 74 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -148 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -61 (from PE[2][1])
  PE[1][2]: partial_in = -122 (from PE[2][2])
  PE[1][3]: partial_in = -61 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=74 -> result=96
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=-74 -> result=-63
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=-148 -> result=-159
  PE[1][0]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[1][1]: input=-56 * weight=1 = -56, partial_in=-61 -> result=-117
  PE[1][2]: input=-56 * weight=1 = -56, partial_in=-122 -> result=-178
  PE[1][3]: input=-56 * weight=2 = -112, partial_in=-61 -> result=-173
  PE[2][0]: input=-80 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[2][2]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[2][3]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][0]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][1]: input=-71 * weight=2 = -142, partial_in=0 -> result=-142
  PE[3][2]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][3]: input=-71 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       96      -63      -74     -159 
  Row 1:       56     -117     -178     -173 
  Row 2:        0      -80     -160      -80 
  Row 3:      -71     -142      -71        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │ -63 │ -74 │-159 │
├─────┼─────┼─────┼─────┤
│  56 │-117 │-178 │-173 │
├─────┼─────┼─────┼─────┤
│   0 │ -80 │-160 │ -80 │
├─────┼─────┼─────┼─────┤
│ -71 │-142 │ -71 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -8
  Row 2: input_block[2][2] = -47
  Row 3: input_block[3][1] = -75

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 56 (from PE[1][0])
  PE[0][1]: partial_in = -117 (from PE[1][1])
  PE[0][2]: partial_in = -178 (from PE[1][2])
  PE[0][3]: partial_in = -173 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -80 (from PE[2][1])
  PE[1][2]: partial_in = -160 (from PE[2][2])
  PE[1][3]: partial_in = -80 (from PE[2][3])
  PE[2][0]: partial_in = -71 (from PE[3][0])
  PE[2][1]: partial_in = -142 (from PE[3][1])
  PE[2][2]: partial_in = -71 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=56 -> result=56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-117 -> result=-117
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-178 -> result=-178
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-173 -> result=-173
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=-80 -> result=-88
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=-160 -> result=-168
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=-80 -> result=-96
  PE[2][0]: input=-47 * weight=0 = 0, partial_in=-71 -> result=-71
  PE[2][1]: input=-47 * weight=1 = -47, partial_in=-142 -> result=-189
  PE[2][2]: input=-47 * weight=2 = -94, partial_in=-71 -> result=-165
  PE[2][3]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][0]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][1]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[3][2]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][3]: input=-75 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       56     -117     -178     -173 
  Row 1:        8      -88     -168      -96 
  Row 2:      -71     -189     -165      -47 
  Row 3:      -75     -150      -75        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │-117 │-178 │-173 │
├─────┼─────┼─────┼─────┤
│   8 │ -88 │-168 │ -96 │
├─────┼─────┼─────┼─────┤
│ -71 │-189 │-165 │ -47 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 0
  Row 3: input_block[3][2] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -88 (from PE[1][1])
  PE[0][2]: partial_in = -168 (from PE[1][2])
  PE[0][3]: partial_in = -96 (from PE[1][3])
  PE[1][0]: partial_in = -71 (from PE[2][0])
  PE[1][1]: partial_in = -189 (from PE[2][1])
  PE[1][2]: partial_in = -165 (from PE[2][2])
  PE[1][3]: partial_in = -47 (from PE[2][3])
  PE[2][0]: partial_in = -75 (from PE[3][0])
  PE[2][1]: partial_in = -150 (from PE[3][1])
  PE[2][2]: partial_in = -75 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=8 -> result=8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-88 -> result=-88
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-168 -> result=-168
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-71 -> result=-71
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-189 -> result=-189
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-165 -> result=-165
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-47 -> result=-47
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-150 -> result=-150
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-75 -> result=-75
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        8      -88     -168      -96 
  Row 1:      -71     -189     -165      -47 
  Row 2:      -75     -150      -75        0 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │ -88 │-168 │ -96 │
├─────┼─────┼─────┼─────┤
│ -71 │-189 │-165 │ -47 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -71 (from PE[1][0])
  PE[0][1]: partial_in = -189 (from PE[1][1])
  PE[0][2]: partial_in = -165 (from PE[1][2])
  PE[0][3]: partial_in = -47 (from PE[1][3])
  PE[1][0]: partial_in = -75 (from PE[2][0])
  PE[1][1]: partial_in = -150 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-71 -> result=-71
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-189 -> result=-189
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-165 -> result=-165
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-47 -> result=-47
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-75 -> result=-75
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-150 -> result=-150
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -71     -189     -165      -47 
  Row 1:      -75     -150      -75        0 
  Row 2:      -32      -64      -32        0 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -71 │-189 │-165 │ -47 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -71     -189     -165      -47 
Row 1:      -75     -150      -75        0 
Row 2:      -32      -64      -32        0 
Row 3:        8       16        8        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -71 -> clamp(-71) -> final(57)
  PE[0][1]: -189 -> clamp(-128) -> final(0)
  PE[0][2]: -165 -> clamp(-128) -> final(0)
  PE[0][3]: -47 -> clamp(-47) -> final(81)
  PE[1][0]: -75 -> clamp(-75) -> final(53)
  PE[1][1]: -150 -> clamp(-128) -> final(0)
  PE[1][2]: -75 -> clamp(-75) -> final(53)
  PE[1][3]: 0 -> clamp(0) -> final(128)
  PE[2][0]: -32 -> clamp(-32) -> final(96)
  PE[2][1]: -64 -> clamp(-64) -> final(64)
  PE[2][2]: -32 -> clamp(-32) -> final(96)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 8 -> clamp(8) -> final(136)
  PE[3][1]: 16 -> clamp(16) -> final(144)
  PE[3][2]: 8 -> clamp(8) -> final(136)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    57      0      0     81 
    53      0     53    128 
    96     64     96    128 
   136    144    136    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   1    3   11   17 
   3   -2    8   15 
   2   -2   10   13 
  -1   -2   13   10 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 1
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=0 -> result=-2
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[0][2]: input=1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -2       -1        0        1 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  -1 │   0 │   1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 3
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=0 -> result=-6
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[0][2]: input=3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       -6       -3        0        3 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -3 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 11
  Row 1: input_block[1][1] = -2
  Row 2: input_block[2][0] = 2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=-3 -> result=-25
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=3 -> result=-8
  PE[0][2]: input=11 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=11 * weight=1 = 11, partial_in=6 -> result=17
  PE[1][0]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[1][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][3]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][0]: input=2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[2][2]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][3]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -25       -8        3       17 
  Row 1:        2       -2       -2       -4 
  Row 2:        0        2        4        2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  -8 │   3 │  17 │
├─────┼─────┼─────┼─────┤
│   2 │  -2 │  -2 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   2 │   4 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 17
  Row 1: input_block[1][2] = 8
  Row 2: input_block[2][1] = -2
  Row 3: input_block[3][0] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 2 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = -2 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 4 (from PE[2][2])
  PE[1][3]: partial_in = 2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=2 -> result=-32
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=-2 -> result=-19
  PE[0][2]: input=17 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[0][3]: input=17 * weight=1 = 17, partial_in=-4 -> result=13
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=2 -> result=10
  PE[1][2]: input=8 * weight=1 = 8, partial_in=4 -> result=12
  PE[1][3]: input=8 * weight=2 = 16, partial_in=2 -> result=18
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -32      -19       -2       13 
  Row 1:       -8       10       12       18 
  Row 2:        0       -2       -4       -2 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │ -19 │  -2 │  13 │
├─────┼─────┼─────┼─────┤
│  -8 │  10 │  12 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 15
  Row 2: input_block[2][2] = 10
  Row 3: input_block[3][1] = -2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 10 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[0][2]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][0]: input=15 * weight=-1 = -15, partial_in=0 -> result=-15
  PE[1][1]: input=15 * weight=1 = 15, partial_in=-2 -> result=13
  PE[1][2]: input=15 * weight=1 = 15, partial_in=-4 -> result=11
  PE[1][3]: input=15 * weight=2 = 30, partial_in=-2 -> result=28
  PE[2][0]: input=10 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=10 * weight=1 = 10, partial_in=-2 -> result=8
  PE[2][2]: input=10 * weight=2 = 20, partial_in=-1 -> result=19
  PE[2][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][0]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][1]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[3][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][3]: input=-2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -8       10       12       18 
  Row 1:      -15       13       11       28 
  Row 2:       -1        8       19       10 
  Row 3:       -2       -4       -2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  10 │  12 │  18 │
├─────┼─────┼─────┼─────┤
│ -15 │  13 │  11 │  28 │
├─────┼─────┼─────┼─────┤
│  -1 │   8 │  19 │  10 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 13
  Row 3: input_block[3][2] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = 13 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = -1 (from PE[2][0])
  PE[1][1]: partial_in = 8 (from PE[2][1])
  PE[1][2]: partial_in = 19 (from PE[2][2])
  PE[1][3]: partial_in = 10 (from PE[2][3])
  PE[2][0]: partial_in = -2 (from PE[3][0])
  PE[2][1]: partial_in = -4 (from PE[3][1])
  PE[2][2]: partial_in = -2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-15 -> result=-15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=13 -> result=13
  PE[0][2]: input=0 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][2]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][3]: input=0 * weight=2 = 0, partial_in=10 -> result=10
  PE[2][0]: input=13 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[2][1]: input=13 * weight=1 = 13, partial_in=-4 -> result=9
  PE[2][2]: input=13 * weight=2 = 26, partial_in=-2 -> result=24
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -15       13       11       28 
  Row 1:       -1        8       19       10 
  Row 2:       -2        9       24       13 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │  13 │  11 │  28 │
├─────┼─────┼─────┼─────┤
│  -1 │   8 │  19 │  10 │
├─────┼─────┼─────┼─────┤
│  -2 │   9 │  24 │  13 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 8 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = 10 (from PE[1][3])
  PE[1][0]: partial_in = -2 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 24 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 13 (from PE[3][0])
  PE[2][1]: partial_in = 26 (from PE[3][1])
  PE[2][2]: partial_in = 13 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=10 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-2 -> result=-2
  PE[1][1]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=0 * weight=0 = 0, partial_in=13 -> result=13
  PE[2][1]: input=0 * weight=1 = 0, partial_in=26 -> result=26
  PE[2][2]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -1        8       19       10 
  Row 1:       -2        9       24       13 
  Row 2:       13       26       13        0 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │   8 │  19 │  10 │
├─────┼─────┼─────┼─────┤
│  -2 │   9 │  24 │  13 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -1        8       19       10 
Row 1:       -2        9       24       13 
Row 2:       13       26       13        0 
Row 3:       10       20       10        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -1 -> clamp(-1) -> final(127)
  PE[0][1]: 8 -> clamp(8) -> final(136)
  PE[0][2]: 19 -> clamp(19) -> final(147)
  PE[0][3]: 10 -> clamp(10) -> final(138)
  PE[1][0]: -2 -> clamp(-2) -> final(126)
  PE[1][1]: 9 -> clamp(9) -> final(137)
  PE[1][2]: 24 -> clamp(24) -> final(152)
  PE[1][3]: 13 -> clamp(13) -> final(141)
  PE[2][0]: 13 -> clamp(13) -> final(141)
  PE[2][1]: 26 -> clamp(26) -> final(154)
  PE[2][2]: 13 -> clamp(13) -> final(141)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 10 -> clamp(10) -> final(138)
  PE[3][1]: 20 -> clamp(20) -> final(148)
  PE[3][2]: 10 -> clamp(10) -> final(138)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   127    136    147    138 
   126    137    152    141 
   141    154    141    128 
   138    148    138    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  25   32   28   32 
  26   40   33   32 
  21   42   35   29 
  17   42   35   28 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 25
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=25 * weight=-2 = -50, partial_in=0 -> result=-50
  PE[0][1]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[0][2]: input=25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -50      -25        0       25 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -50 │ -25 │   0 │  25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 32
  Row 1: input_block[1][0] = 26
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=0 -> result=-64
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[0][2]: input=32 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][3]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -64      -32        0       32 
  Row 1:      -26       26       26       52 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │ -32 │   0 │  32 │
├─────┼─────┼─────┼─────┤
│ -26 │  26 │  26 │  52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 28
  Row 1: input_block[1][1] = 40
  Row 2: input_block[2][0] = 21
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 26 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=-26 -> result=-82
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=26 -> result=-2
  PE[0][2]: input=28 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=28 * weight=1 = 28, partial_in=52 -> result=80
  PE[1][0]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[1][1]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[1][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[1][3]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[2][0]: input=21 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[2][2]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -82       -2       26       80 
  Row 1:      -40       40       40       80 
  Row 2:        0       21       42       21 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -82 │  -2 │  26 │  80 │
├─────┼─────┼─────┼─────┤
│ -40 │  40 │  40 │  80 │
├─────┼─────┼─────┼─────┤
│   0 │  21 │  42 │  21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 32
  Row 1: input_block[1][2] = 33
  Row 2: input_block[2][1] = 42
  Row 3: input_block[3][0] = 17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -40 (from PE[1][0])
  PE[0][1]: partial_in = 40 (from PE[1][1])
  PE[0][2]: partial_in = 40 (from PE[1][2])
  PE[0][3]: partial_in = 80 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 21 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=-40 -> result=-104
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=40 -> result=8
  PE[0][2]: input=32 * weight=0 = 0, partial_in=40 -> result=40
  PE[0][3]: input=32 * weight=1 = 32, partial_in=80 -> result=112
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=21 -> result=54
  PE[1][2]: input=33 * weight=1 = 33, partial_in=42 -> result=75
  PE[1][3]: input=33 * weight=2 = 66, partial_in=21 -> result=87
  PE[2][0]: input=42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[2][2]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[2][3]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][0]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][1]: input=17 * weight=2 = 34, partial_in=0 -> result=34
  PE[3][2]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][3]: input=17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -104        8       40      112 
  Row 1:      -33       54       75       87 
  Row 2:        0       42       84       42 
  Row 3:       17       34       17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-104 │   8 │  40 │ 112 │
├─────┼─────┼─────┼─────┤
│ -33 │  54 │  75 │  87 │
├─────┼─────┼─────┼─────┤
│   0 │  42 │  84 │  42 │
├─────┼─────┼─────┼─────┤
│  17 │  34 │  17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 32
  Row 2: input_block[2][2] = 35
  Row 3: input_block[3][1] = 42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 54 (from PE[1][1])
  PE[0][2]: partial_in = 75 (from PE[1][2])
  PE[0][3]: partial_in = 87 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 42 (from PE[2][1])
  PE[1][2]: partial_in = 84 (from PE[2][2])
  PE[1][3]: partial_in = 42 (from PE[2][3])
  PE[2][0]: partial_in = 17 (from PE[3][0])
  PE[2][1]: partial_in = 34 (from PE[3][1])
  PE[2][2]: partial_in = 17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=54 -> result=54
  PE[0][2]: input=0 * weight=0 = 0, partial_in=75 -> result=75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=87 -> result=87
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=42 -> result=74
  PE[1][2]: input=32 * weight=1 = 32, partial_in=84 -> result=116
  PE[1][3]: input=32 * weight=2 = 64, partial_in=42 -> result=106
  PE[2][0]: input=35 * weight=0 = 0, partial_in=17 -> result=17
  PE[2][1]: input=35 * weight=1 = 35, partial_in=34 -> result=69
  PE[2][2]: input=35 * weight=2 = 70, partial_in=17 -> result=87
  PE[2][3]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][0]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][1]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[3][2]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][3]: input=42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -33       54       75       87 
  Row 1:      -32       74      116      106 
  Row 2:       17       69       87       35 
  Row 3:       42       84       42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │  54 │  75 │  87 │
├─────┼─────┼─────┼─────┤
│ -32 │  74 │ 116 │ 106 │
├─────┼─────┼─────┼─────┤
│  17 │  69 │  87 │  35 │
├─────┼─────┼─────┼─────┤
│  42 │  84 │  42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 29
  Row 3: input_block[3][2] = 35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 74 (from PE[1][1])
  PE[0][2]: partial_in = 116 (from PE[1][2])
  PE[0][3]: partial_in = 106 (from PE[1][3])
  PE[1][0]: partial_in = 17 (from PE[2][0])
  PE[1][1]: partial_in = 69 (from PE[2][1])
  PE[1][2]: partial_in = 87 (from PE[2][2])
  PE[1][3]: partial_in = 35 (from PE[2][3])
  PE[2][0]: partial_in = 42 (from PE[3][0])
  PE[2][1]: partial_in = 84 (from PE[3][1])
  PE[2][2]: partial_in = 42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=74 -> result=74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=116 -> result=116
  PE[0][3]: input=0 * weight=1 = 0, partial_in=106 -> result=106
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=17 -> result=17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=69 -> result=69
  PE[1][2]: input=0 * weight=1 = 0, partial_in=87 -> result=87
  PE[1][3]: input=0 * weight=2 = 0, partial_in=35 -> result=35
  PE[2][0]: input=29 * weight=0 = 0, partial_in=42 -> result=42
  PE[2][1]: input=29 * weight=1 = 29, partial_in=84 -> result=113
  PE[2][2]: input=29 * weight=2 = 58, partial_in=42 -> result=100
  PE[2][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][0]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][1]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[3][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][3]: input=35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -32       74      116      106 
  Row 1:       17       69       87       35 
  Row 2:       42      113      100       29 
  Row 3:       35       70       35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │  74 │ 116 │ 106 │
├─────┼─────┼─────┼─────┤
│  17 │  69 │  87 │  35 │
├─────┼─────┼─────┼─────┤
│  42 │ 113 │ 100 │  29 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 17 (from PE[1][0])
  PE[0][1]: partial_in = 69 (from PE[1][1])
  PE[0][2]: partial_in = 87 (from PE[1][2])
  PE[0][3]: partial_in = 35 (from PE[1][3])
  PE[1][0]: partial_in = 42 (from PE[2][0])
  PE[1][1]: partial_in = 113 (from PE[2][1])
  PE[1][2]: partial_in = 100 (from PE[2][2])
  PE[1][3]: partial_in = 29 (from PE[2][3])
  PE[2][0]: partial_in = 35 (from PE[3][0])
  PE[2][1]: partial_in = 70 (from PE[3][1])
  PE[2][2]: partial_in = 35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=17 -> result=17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=69 -> result=69
  PE[0][2]: input=0 * weight=0 = 0, partial_in=87 -> result=87
  PE[0][3]: input=0 * weight=1 = 0, partial_in=35 -> result=35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=42 -> result=42
  PE[1][1]: input=0 * weight=1 = 0, partial_in=113 -> result=113
  PE[1][2]: input=0 * weight=1 = 0, partial_in=100 -> result=100
  PE[1][3]: input=0 * weight=2 = 0, partial_in=29 -> result=29
  PE[2][0]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=70 -> result=70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=35 -> result=35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       17       69       87       35 
  Row 1:       42      113      100       29 
  Row 2:       35       70       35        0 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  17 │  69 │  87 │  35 │
├─────┼─────┼─────┼─────┤
│  42 │ 113 │ 100 │  29 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       17       69       87       35 
Row 1:       42      113      100       29 
Row 2:       35       70       35        0 
Row 3:       28       56       28        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 17 -> clamp(17) -> final(145)
  PE[0][1]: 69 -> clamp(69) -> final(197)
  PE[0][2]: 87 -> clamp(87) -> final(215)
  PE[0][3]: 35 -> clamp(35) -> final(163)
  PE[1][0]: 42 -> clamp(42) -> final(170)
  PE[1][1]: 113 -> clamp(113) -> final(241)
  PE[1][2]: 100 -> clamp(100) -> final(228)
  PE[1][3]: 29 -> clamp(29) -> final(157)
  PE[2][0]: 35 -> clamp(35) -> final(163)
  PE[2][1]: 70 -> clamp(70) -> final(198)
  PE[2][2]: 35 -> clamp(35) -> final(163)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 28 -> clamp(28) -> final(156)
  PE[3][1]: 56 -> clamp(56) -> final(184)
  PE[3][2]: 28 -> clamp(28) -> final(156)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   145    197    215    163 
   170    241    228    157 
   163    198    163    128 
   156    184    156    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  33   -5  -38  -28 
  34   -8  -45  -33 
  30  -15  -55  -40 
  29  -17  -58  -41 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 33
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=0 -> result=-66
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[0][2]: input=33 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -66      -33        0       33 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │ -33 │   0 │  33 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -5
  Row 1: input_block[1][0] = 34
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=0 -> result=10
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[1][2]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[1][3]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       10        5        0       -5 
  Row 1:      -34       34       34       68 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   5 │   0 │  -5 │
├─────┼─────┼─────┼─────┤
│ -34 │  34 │  34 │  68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -38
  Row 1: input_block[1][1] = -8
  Row 2: input_block[2][0] = 30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 34 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = 68 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-38 * weight=-2 = 76, partial_in=-34 -> result=42
  PE[0][1]: input=-38 * weight=-1 = 38, partial_in=34 -> result=72
  PE[0][2]: input=-38 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=-38 * weight=1 = -38, partial_in=68 -> result=30
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[2][2]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       42       72       34       30 
  Row 1:        8       -8       -8      -16 
  Row 2:        0       30       60       30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │  72 │  34 │  30 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │  30 │  60 │  30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -28
  Row 1: input_block[1][2] = -45
  Row 2: input_block[2][1] = -15
  Row 3: input_block[3][0] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 30 (from PE[2][1])
  PE[1][2]: partial_in = 60 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=8 -> result=64
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=-8 -> result=20
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=-16 -> result=-44
  PE[1][0]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[1][1]: input=-45 * weight=1 = -45, partial_in=30 -> result=-15
  PE[1][2]: input=-45 * weight=1 = -45, partial_in=60 -> result=15
  PE[1][3]: input=-45 * weight=2 = -90, partial_in=30 -> result=-60
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       64       20       -8      -44 
  Row 1:       45      -15       15      -60 
  Row 2:        0      -15      -30      -15 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  64 │  20 │  -8 │ -44 │
├─────┼─────┼─────┼─────┤
│  45 │ -15 │  15 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │ -15 │ -30 │ -15 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -33
  Row 2: input_block[2][2] = -55
  Row 3: input_block[3][1] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 45 (from PE[1][0])
  PE[0][1]: partial_in = -15 (from PE[1][1])
  PE[0][2]: partial_in = 15 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -15 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=45 -> result=45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[0][2]: input=0 * weight=0 = 0, partial_in=15 -> result=15
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][0]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[1][1]: input=-33 * weight=1 = -33, partial_in=-15 -> result=-48
  PE[1][2]: input=-33 * weight=1 = -33, partial_in=-30 -> result=-63
  PE[1][3]: input=-33 * weight=2 = -66, partial_in=-15 -> result=-81
  PE[2][0]: input=-55 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=-55 * weight=1 = -55, partial_in=58 -> result=3
  PE[2][2]: input=-55 * weight=2 = -110, partial_in=29 -> result=-81
  PE[2][3]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       45      -15       15      -60 
  Row 1:       33      -48      -63      -81 
  Row 2:       29        3      -81      -55 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  45 │ -15 │  15 │ -60 │
├─────┼─────┼─────┼─────┤
│  33 │ -48 │ -63 │ -81 │
├─────┼─────┼─────┼─────┤
│  29 │   3 │ -81 │ -55 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -40
  Row 3: input_block[3][2] = -58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -81 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 3 (from PE[2][1])
  PE[1][2]: partial_in = -81 (from PE[2][2])
  PE[1][3]: partial_in = -55 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=33 -> result=33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-81 -> result=-81
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-81 -> result=-81
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-55 -> result=-55
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=-34 -> result=-74
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=-17 -> result=-97
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][1]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[3][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][3]: input=-58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       33      -48      -63      -81 
  Row 1:       29        3      -81      -55 
  Row 2:      -17      -74      -97      -40 
  Row 3:      -58     -116      -58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │ -48 │ -63 │ -81 │
├─────┼─────┼─────┼─────┤
│  29 │   3 │ -81 │ -55 │
├─────┼─────┼─────┼─────┤
│ -17 │ -74 │ -97 │ -40 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = -81 (from PE[1][2])
  PE[0][3]: partial_in = -55 (from PE[1][3])
  PE[1][0]: partial_in = -17 (from PE[2][0])
  PE[1][1]: partial_in = -74 (from PE[2][1])
  PE[1][2]: partial_in = -97 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = -58 (from PE[3][0])
  PE[2][1]: partial_in = -116 (from PE[3][1])
  PE[2][2]: partial_in = -58 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-81 -> result=-81
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-97 -> result=-97
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-58 -> result=-58
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       29        3      -81      -55 
  Row 1:      -17      -74      -97      -40 
  Row 2:      -58     -116      -58        0 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │   3 │ -81 │ -55 │
├─────┼─────┼─────┼─────┤
│ -17 │ -74 │ -97 │ -40 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       29        3      -81      -55 
Row 1:      -17      -74      -97      -40 
Row 2:      -58     -116      -58        0 
Row 3:      -41      -82      -41        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 29 -> clamp(29) -> final(157)
  PE[0][1]: 3 -> clamp(3) -> final(131)
  PE[0][2]: -81 -> clamp(-81) -> final(47)
  PE[0][3]: -55 -> clamp(-55) -> final(73)
  PE[1][0]: -17 -> clamp(-17) -> final(111)
  PE[1][1]: -74 -> clamp(-74) -> final(54)
  PE[1][2]: -97 -> clamp(-97) -> final(31)
  PE[1][3]: -40 -> clamp(-40) -> final(88)
  PE[2][0]: -58 -> clamp(-58) -> final(70)
  PE[2][1]: -116 -> clamp(-116) -> final(12)
  PE[2][2]: -58 -> clamp(-58) -> final(70)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -41 -> clamp(-41) -> final(87)
  PE[3][1]: -82 -> clamp(-82) -> final(46)
  PE[3][2]: -41 -> clamp(-41) -> final(87)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   157    131     47     73 
   111     54     31     88 
    70     12     70    128 
    87     46     87    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -30  -14  -14  -20 
 -31  -26  -19  -17 
 -31  -26  -18  -20 
 -40  -32  -24  -24 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -30
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       60       30        0      -30 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -14
  Row 1: input_block[1][0] = -31
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       28       14        0      -14 
  Row 1:       31      -31      -31      -62 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│  31 │ -31 │ -31 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -14
  Row 1: input_block[1][1] = -26
  Row 2: input_block[2][0] = -31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -31 (from PE[1][1])
  PE[0][2]: partial_in = -31 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=31 -> result=59
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=-31 -> result=-17
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=-62 -> result=-76
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       59      -17      -31      -76 
  Row 1:       26      -26      -26      -52 
  Row 2:        0      -31      -62      -31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  59 │ -17 │ -31 │ -76 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -20
  Row 1: input_block[1][2] = -19
  Row 2: input_block[2][1] = -26
  Row 3: input_block[3][0] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=26 -> result=66
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=-26 -> result=-6
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=-52 -> result=-72
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=-31 -> result=-50
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=-62 -> result=-81
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=-31 -> result=-69
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       66       -6      -26      -72 
  Row 1:       19      -50      -81      -69 
  Row 2:        0      -26      -52      -26 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  66 │  -6 │ -26 │ -72 │
├─────┼─────┼─────┼─────┤
│  19 │ -50 │ -81 │ -69 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -17
  Row 2: input_block[2][2] = -18
  Row 3: input_block[3][1] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -81 (from PE[1][2])
  PE[0][3]: partial_in = -69 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=19 -> result=19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-81 -> result=-81
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][0]: input=-17 * weight=-1 = 17, partial_in=0 -> result=17
  PE[1][1]: input=-17 * weight=1 = -17, partial_in=-26 -> result=-43
  PE[1][2]: input=-17 * weight=1 = -17, partial_in=-52 -> result=-69
  PE[1][3]: input=-17 * weight=2 = -34, partial_in=-26 -> result=-60
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=-80 -> result=-98
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=-40 -> result=-76
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       19      -50      -81      -69 
  Row 1:       17      -43      -69      -60 
  Row 2:      -40      -98      -76      -18 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  19 │ -50 │ -81 │ -69 │
├─────┼─────┼─────┼─────┤
│  17 │ -43 │ -69 │ -60 │
├─────┼─────┼─────┼─────┤
│ -40 │ -98 │ -76 │ -18 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -20
  Row 3: input_block[3][2] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 17 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = -40 (from PE[2][0])
  PE[1][1]: partial_in = -98 (from PE[2][1])
  PE[1][2]: partial_in = -76 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=17 -> result=17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-40 -> result=-40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-76 -> result=-76
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-18 -> result=-18
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=-64 -> result=-84
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=-32 -> result=-72
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       17      -43      -69      -60 
  Row 1:      -40      -98      -76      -18 
  Row 2:      -32      -84      -72      -20 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  17 │ -43 │ -69 │ -60 │
├─────┼─────┼─────┼─────┤
│ -40 │ -98 │ -76 │ -18 │
├─────┼─────┼─────┼─────┤
│ -32 │ -84 │ -72 │ -20 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -40 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -76 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = -32 (from PE[2][0])
  PE[1][1]: partial_in = -84 (from PE[2][1])
  PE[1][2]: partial_in = -72 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = -24 (from PE[3][0])
  PE[2][1]: partial_in = -48 (from PE[3][1])
  PE[2][2]: partial_in = -24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-40 -> result=-40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-98 -> result=-98
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-76 -> result=-76
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-20 -> result=-20
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-24 -> result=-24
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -40      -98      -76      -18 
  Row 1:      -32      -84      -72      -20 
  Row 2:      -24      -48      -24        0 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -40 │ -98 │ -76 │ -18 │
├─────┼─────┼─────┼─────┤
│ -32 │ -84 │ -72 │ -20 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -40      -98      -76      -18 
Row 1:      -32      -84      -72      -20 
Row 2:      -24      -48      -24        0 
Row 3:      -24      -48      -24        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -40 -> clamp(-40) -> final(88)
  PE[0][1]: -98 -> clamp(-98) -> final(30)
  PE[0][2]: -76 -> clamp(-76) -> final(52)
  PE[0][3]: -18 -> clamp(-18) -> final(110)
  PE[1][0]: -32 -> clamp(-32) -> final(96)
  PE[1][1]: -84 -> clamp(-84) -> final(44)
  PE[1][2]: -72 -> clamp(-72) -> final(56)
  PE[1][3]: -20 -> clamp(-20) -> final(108)
  PE[2][0]: -24 -> clamp(-24) -> final(104)
  PE[2][1]: -48 -> clamp(-48) -> final(80)
  PE[2][2]: -24 -> clamp(-24) -> final(104)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -24 -> clamp(-24) -> final(104)
  PE[3][1]: -48 -> clamp(-48) -> final(80)
  PE[3][2]: -24 -> clamp(-24) -> final(104)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    88     30     52    110 
    96     44     56    108 
   104     80    104    128 
   104     80    104    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -27  -20    5   11 
 -28  -29    7   50 
 -31  -39  -11   47 
 -22  -29  -17   33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -27
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=0 -> result=54
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       54       27        0      -27 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │  27 │   0 │ -27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -20
  Row 1: input_block[1][0] = -28
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=0 -> result=40
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       40       20        0      -20 
  Row 1:       28      -28      -28      -56 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  20 │   0 │ -20 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 5
  Row 1: input_block[1][1] = -29
  Row 2: input_block[2][0] = -31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=5 * weight=-2 = -10, partial_in=28 -> result=18
  PE[0][1]: input=5 * weight=-1 = -5, partial_in=-28 -> result=-33
  PE[0][2]: input=5 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=5 * weight=1 = 5, partial_in=-56 -> result=-51
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       18      -33      -28      -51 
  Row 1:       29      -29      -29      -58 
  Row 2:        0      -31      -62      -31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │ -33 │ -28 │ -51 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 11
  Row 1: input_block[1][2] = 7
  Row 2: input_block[2][1] = -39
  Row 3: input_block[3][0] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=29 -> result=7
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=-29 -> result=-40
  PE[0][2]: input=11 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=11 * weight=1 = 11, partial_in=-58 -> result=-47
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=-31 -> result=-24
  PE[1][2]: input=7 * weight=1 = 7, partial_in=-62 -> result=-55
  PE[1][3]: input=7 * weight=2 = 14, partial_in=-31 -> result=-17
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:        7      -40      -29      -47 
  Row 1:       -7      -24      -55      -17 
  Row 2:        0      -39      -78      -39 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │ -40 │ -29 │ -47 │
├─────┼─────┼─────┼─────┤
│  -7 │ -24 │ -55 │ -17 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 50
  Row 2: input_block[2][2] = -11
  Row 3: input_block[3][1] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -17 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-24 -> result=-24
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-17 -> result=-17
  PE[1][0]: input=50 * weight=-1 = -50, partial_in=0 -> result=-50
  PE[1][1]: input=50 * weight=1 = 50, partial_in=-39 -> result=11
  PE[1][2]: input=50 * weight=1 = 50, partial_in=-78 -> result=-28
  PE[1][3]: input=50 * weight=2 = 100, partial_in=-39 -> result=61
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=-44 -> result=-55
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=-22 -> result=-44
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -7      -24      -55      -17 
  Row 1:      -50       11      -28       61 
  Row 2:      -22      -55      -44      -11 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -24 │ -55 │ -17 │
├─────┼─────┼─────┼─────┤
│ -50 │  11 │ -28 │  61 │
├─────┼─────┼─────┼─────┤
│ -22 │ -55 │ -44 │ -11 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 47
  Row 3: input_block[3][2] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -50 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = 61 (from PE[1][3])
  PE[1][0]: partial_in = -22 (from PE[2][0])
  PE[1][1]: partial_in = -55 (from PE[2][1])
  PE[1][2]: partial_in = -44 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-50 -> result=-50
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=11 -> result=11
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=0 * weight=1 = 0, partial_in=61 -> result=61
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-44 -> result=-44
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-11 -> result=-11
  PE[2][0]: input=47 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=47 * weight=1 = 47, partial_in=-58 -> result=-11
  PE[2][2]: input=47 * weight=2 = 94, partial_in=-29 -> result=65
  PE[2][3]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -50       11      -28       61 
  Row 1:      -22      -55      -44      -11 
  Row 2:      -29      -11       65       47 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -50 │  11 │ -28 │  61 │
├─────┼─────┼─────┼─────┤
│ -22 │ -55 │ -44 │ -11 │
├─────┼─────┼─────┼─────┤
│ -29 │ -11 │  65 │  47 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -11 (from PE[1][3])
  PE[1][0]: partial_in = -29 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = 65 (from PE[2][2])
  PE[1][3]: partial_in = 47 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-22 -> result=-22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][2]: input=0 * weight=1 = 0, partial_in=65 -> result=65
  PE[1][3]: input=0 * weight=2 = 0, partial_in=47 -> result=47
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-17 -> result=-17
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -22      -55      -44      -11 
  Row 1:      -29      -11       65       47 
  Row 2:      -17      -34      -17        0 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │ -55 │ -44 │ -11 │
├─────┼─────┼─────┼─────┤
│ -29 │ -11 │  65 │  47 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -22      -55      -44      -11 
Row 1:      -29      -11       65       47 
Row 2:      -17      -34      -17        0 
Row 3:       33       66       33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -22 -> clamp(-22) -> final(106)
  PE[0][1]: -55 -> clamp(-55) -> final(73)
  PE[0][2]: -44 -> clamp(-44) -> final(84)
  PE[0][3]: -11 -> clamp(-11) -> final(117)
  PE[1][0]: -29 -> clamp(-29) -> final(99)
  PE[1][1]: -11 -> clamp(-11) -> final(117)
  PE[1][2]: 65 -> clamp(65) -> final(193)
  PE[1][3]: 47 -> clamp(47) -> final(175)
  PE[2][0]: -17 -> clamp(-17) -> final(111)
  PE[2][1]: -34 -> clamp(-34) -> final(94)
  PE[2][2]: -17 -> clamp(-17) -> final(111)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 33 -> clamp(33) -> final(161)
  PE[3][1]: 66 -> clamp(66) -> final(194)
  PE[3][2]: 33 -> clamp(33) -> final(161)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   106     73     84    117 
    99    117    193    175 
   111     94    111    128 
   161    194    161    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -37  -30  -34  -29 
 -12  -43  -44  -21 
  16  -43  -42  -22 
  22  -40  -37  -33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -37
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-37 * weight=-2 = 74, partial_in=0 -> result=74
  PE[0][1]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[0][2]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       74       37        0      -37 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  74 │  37 │   0 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -30
  Row 1: input_block[1][0] = -12
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=-12 * weight=-1 = 12, partial_in=0 -> result=12
  PE[1][1]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[1][2]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[1][3]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       60       30        0      -30 
  Row 1:       12      -12      -12      -24 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│  12 │ -12 │ -12 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -34
  Row 1: input_block[1][1] = -43
  Row 2: input_block[2][0] = 16
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 12 (from PE[1][0])
  PE[0][1]: partial_in = -12 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = -24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=12 -> result=80
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-12 -> result=22
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-24 -> result=-58
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][0]: input=16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[2][2]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[2][3]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       80       22      -12      -58 
  Row 1:       43      -43      -43      -86 
  Row 2:        0       16       32       16 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │  22 │ -12 │ -58 │
├─────┼─────┼─────┼─────┤
│  43 │ -43 │ -43 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │  16 │  32 │  16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -29
  Row 1: input_block[1][2] = -44
  Row 2: input_block[2][1] = -43
  Row 3: input_block[3][0] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -43 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 16 (from PE[2][1])
  PE[1][2]: partial_in = 32 (from PE[2][2])
  PE[1][3]: partial_in = 16 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=43 -> result=101
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=-43 -> result=-14
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=-86 -> result=-115
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=16 -> result=-28
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=32 -> result=-12
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=16 -> result=-72
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      101      -14      -43     -115 
  Row 1:       44      -28      -12      -72 
  Row 2:        0      -43      -86      -43 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 101 │ -14 │ -43 │-115 │
├─────┼─────┼─────┼─────┤
│  44 │ -28 │ -12 │ -72 │
├─────┼─────┼─────┼─────┤
│   0 │ -43 │ -86 │ -43 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -21
  Row 2: input_block[2][2] = -42
  Row 3: input_block[3][1] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = -72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -86 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=44 -> result=44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=-43 -> result=-64
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=-86 -> result=-107
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=-43 -> result=-85
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=44 -> result=2
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=22 -> result=-62
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       44      -28      -12      -72 
  Row 1:       21      -64     -107      -85 
  Row 2:       22        2      -62      -42 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │ -28 │ -12 │ -72 │
├─────┼─────┼─────┼─────┤
│  21 │ -64 │-107 │ -85 │
├─────┼─────┼─────┼─────┤
│  22 │   2 │ -62 │ -42 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -22
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -64 (from PE[1][1])
  PE[0][2]: partial_in = -107 (from PE[1][2])
  PE[0][3]: partial_in = -85 (from PE[1][3])
  PE[1][0]: partial_in = 22 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-64 -> result=-64
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-85 -> result=-85
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=-80 -> result=-102
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=-40 -> result=-84
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       21      -64     -107      -85 
  Row 1:       22        2      -62      -42 
  Row 2:      -40     -102      -84      -22 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │ -64 │-107 │ -85 │
├─────┼─────┼─────┼─────┤
│  22 │   2 │ -62 │ -42 │
├─────┼─────┼─────┼─────┤
│ -40 │-102 │ -84 │ -22 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = 2 (from PE[1][1])
  PE[0][2]: partial_in = -62 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = -40 (from PE[2][0])
  PE[1][1]: partial_in = -102 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=22 -> result=22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=2 -> result=2
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-40 -> result=-40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-22 -> result=-22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       22        2      -62      -42 
  Row 1:      -40     -102      -84      -22 
  Row 2:      -37      -74      -37        0 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │   2 │ -62 │ -42 │
├─────┼─────┼─────┼─────┤
│ -40 │-102 │ -84 │ -22 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       22        2      -62      -42 
Row 1:      -40     -102      -84      -22 
Row 2:      -37      -74      -37        0 
Row 3:      -33      -66      -33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 22 -> clamp(22) -> final(150)
  PE[0][1]: 2 -> clamp(2) -> final(130)
  PE[0][2]: -62 -> clamp(-62) -> final(66)
  PE[0][3]: -42 -> clamp(-42) -> final(86)
  PE[1][0]: -40 -> clamp(-40) -> final(88)
  PE[1][1]: -102 -> clamp(-102) -> final(26)
  PE[1][2]: -84 -> clamp(-84) -> final(44)
  PE[1][3]: -22 -> clamp(-22) -> final(106)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -33 -> clamp(-33) -> final(95)
  PE[3][1]: -66 -> clamp(-66) -> final(62)
  PE[3][2]: -33 -> clamp(-33) -> final(95)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   150    130     66     86 
    88     26     44    106 
    91     54     91    128 
    95     62     95    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -29   12   50   -5 
 -16   11   24  -25 
 -22  -11  -15  -38 
 -39  -23  -32  -40 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -29
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=0 -> result=58
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       58       29        0      -29 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  29 │   0 │ -29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 12
  Row 1: input_block[1][0] = -16
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=0 -> result=-24
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[0][2]: input=12 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -24      -12        0       12 
  Row 1:       16      -16      -16      -32 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │ -12 │   0 │  12 │
├─────┼─────┼─────┼─────┤
│  16 │ -16 │ -16 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 50
  Row 1: input_block[1][1] = 11
  Row 2: input_block[2][0] = -22
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=50 * weight=-2 = -100, partial_in=16 -> result=-84
  PE[0][1]: input=50 * weight=-1 = -50, partial_in=-16 -> result=-66
  PE[0][2]: input=50 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=50 * weight=1 = 50, partial_in=-32 -> result=18
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][3]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -84      -66      -16       18 
  Row 1:      -11       11       11       22 
  Row 2:        0      -22      -44      -22 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -84 │ -66 │ -16 │  18 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  11 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │ -22 │ -44 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -5
  Row 1: input_block[1][2] = 24
  Row 2: input_block[2][1] = -11
  Row 3: input_block[3][0] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -22 (from PE[2][1])
  PE[1][2]: partial_in = -44 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=-11 -> result=-1
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=11 -> result=16
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=22 -> result=17
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=-22 -> result=2
  PE[1][2]: input=24 * weight=1 = 24, partial_in=-44 -> result=-20
  PE[1][3]: input=24 * weight=2 = 48, partial_in=-22 -> result=26
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       -1       16       11       17 
  Row 1:      -24        2      -20       26 
  Row 2:        0      -11      -22      -11 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  16 │  11 │  17 │
├─────┼─────┼─────┼─────┤
│ -24 │   2 │ -20 │  26 │
├─────┼─────┼─────┼─────┤
│   0 │ -11 │ -22 │ -11 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -25
  Row 2: input_block[2][2] = -15
  Row 3: input_block[3][1] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 2 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = 26 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -22 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-24 -> result=-24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=2 -> result=2
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=0 * weight=1 = 0, partial_in=26 -> result=26
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=-11 -> result=-36
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=-22 -> result=-47
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=-11 -> result=-61
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=-78 -> result=-93
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=-39 -> result=-69
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -24        2      -20       26 
  Row 1:       25      -36      -47      -61 
  Row 2:      -39      -93      -69      -15 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │   2 │ -20 │  26 │
├─────┼─────┼─────┼─────┤
│  25 │ -36 │ -47 │ -61 │
├─────┼─────┼─────┼─────┤
│ -39 │ -93 │ -69 │ -15 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -47 (from PE[1][2])
  PE[0][3]: partial_in = -61 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -93 (from PE[2][1])
  PE[1][2]: partial_in = -69 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=25 -> result=25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-61 -> result=-61
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-15 -> result=-15
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-46 -> result=-84
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-23 -> result=-99
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       25      -36      -47      -61 
  Row 1:      -39      -93      -69      -15 
  Row 2:      -23      -84      -99      -38 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │ -36 │ -47 │ -61 │
├─────┼─────┼─────┼─────┤
│ -39 │ -93 │ -69 │ -15 │
├─────┼─────┼─────┼─────┤
│ -23 │ -84 │ -99 │ -38 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = -93 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -15 (from PE[1][3])
  PE[1][0]: partial_in = -23 (from PE[2][0])
  PE[1][1]: partial_in = -84 (from PE[2][1])
  PE[1][2]: partial_in = -99 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-39 -> result=-39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-93 -> result=-93
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-99 -> result=-99
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -39      -93      -69      -15 
  Row 1:      -23      -84      -99      -38 
  Row 2:      -32      -64      -32        0 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │ -93 │ -69 │ -15 │
├─────┼─────┼─────┼─────┤
│ -23 │ -84 │ -99 │ -38 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -39      -93      -69      -15 
Row 1:      -23      -84      -99      -38 
Row 2:      -32      -64      -32        0 
Row 3:      -40      -80      -40        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -39 -> clamp(-39) -> final(89)
  PE[0][1]: -93 -> clamp(-93) -> final(35)
  PE[0][2]: -69 -> clamp(-69) -> final(59)
  PE[0][3]: -15 -> clamp(-15) -> final(113)
  PE[1][0]: -23 -> clamp(-23) -> final(105)
  PE[1][1]: -84 -> clamp(-84) -> final(44)
  PE[1][2]: -99 -> clamp(-99) -> final(29)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -32 -> clamp(-32) -> final(96)
  PE[2][1]: -64 -> clamp(-64) -> final(64)
  PE[2][2]: -32 -> clamp(-32) -> final(96)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -40 -> clamp(-40) -> final(88)
  PE[3][1]: -80 -> clamp(-80) -> final(48)
  PE[3][2]: -40 -> clamp(-40) -> final(88)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    89     35     59    113 
   105     44     29     90 
    96     64     96    128 
    88     48     88    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -35  -65 -100  -88 
 -18  -46 -102 -116 
 -40  -42  -90 -115 
 -80  -46  -67  -93 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -35
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=0 -> result=70
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       70       35        0      -35 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │  35 │   0 │ -35 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -65
  Row 1: input_block[1][0] = -18
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-65 * weight=-2 = 130, partial_in=0 -> result=130
  PE[0][1]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[0][2]: input=-65 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][0]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[1][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][2]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][3]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      130       65        0      -65 
  Row 1:       18      -18      -18      -36 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 130 │  65 │   0 │ -65 │
├─────┼─────┼─────┼─────┤
│  18 │ -18 │ -18 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -100
  Row 1: input_block[1][1] = -46
  Row 2: input_block[2][0] = -40
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -18 (from PE[1][1])
  PE[0][2]: partial_in = -18 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-100 * weight=-2 = 200, partial_in=18 -> result=218
  PE[0][1]: input=-100 * weight=-1 = 100, partial_in=-18 -> result=82
  PE[0][2]: input=-100 * weight=0 = 0, partial_in=-18 -> result=-18
  PE[0][3]: input=-100 * weight=1 = -100, partial_in=-36 -> result=-136
  PE[1][0]: input=-46 * weight=-1 = 46, partial_in=0 -> result=46
  PE[1][1]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][2]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][3]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      218       82      -18     -136 
  Row 1:       46      -46      -46      -92 
  Row 2:        0      -40      -80      -40 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 218 │  82 │ -18 │-136 │
├─────┼─────┼─────┼─────┤
│  46 │ -46 │ -46 │ -92 │
├─────┼─────┼─────┼─────┤
│   0 │ -40 │ -80 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -88
  Row 1: input_block[1][2] = -102
  Row 2: input_block[2][1] = -42
  Row 3: input_block[3][0] = -80

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 46 (from PE[1][0])
  PE[0][1]: partial_in = -46 (from PE[1][1])
  PE[0][2]: partial_in = -46 (from PE[1][2])
  PE[0][3]: partial_in = -92 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -40 (from PE[2][1])
  PE[1][2]: partial_in = -80 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-88 * weight=-2 = 176, partial_in=46 -> result=222
  PE[0][1]: input=-88 * weight=-1 = 88, partial_in=-46 -> result=42
  PE[0][2]: input=-88 * weight=0 = 0, partial_in=-46 -> result=-46
  PE[0][3]: input=-88 * weight=1 = -88, partial_in=-92 -> result=-180
  PE[1][0]: input=-102 * weight=-1 = 102, partial_in=0 -> result=102
  PE[1][1]: input=-102 * weight=1 = -102, partial_in=-40 -> result=-142
  PE[1][2]: input=-102 * weight=1 = -102, partial_in=-80 -> result=-182
  PE[1][3]: input=-102 * weight=2 = -204, partial_in=-40 -> result=-244
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][1]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[3][2]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][3]: input=-80 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      222       42      -46     -180 
  Row 1:      102     -142     -182     -244 
  Row 2:        0      -42      -84      -42 
  Row 3:      -80     -160      -80        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 222 │  42 │ -46 │-180 │
├─────┼─────┼─────┼─────┤
│ 102 │-142 │-182 │-244 │
├─────┼─────┼─────┼─────┤
│   0 │ -42 │ -84 │ -42 │
├─────┼─────┼─────┼─────┤
│ -80 │-160 │ -80 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -116
  Row 2: input_block[2][2] = -90
  Row 3: input_block[3][1] = -46

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 102 (from PE[1][0])
  PE[0][1]: partial_in = -142 (from PE[1][1])
  PE[0][2]: partial_in = -182 (from PE[1][2])
  PE[0][3]: partial_in = -244 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -42 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -80 (from PE[3][0])
  PE[2][1]: partial_in = -160 (from PE[3][1])
  PE[2][2]: partial_in = -80 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=102 -> result=102
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-142 -> result=-142
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-182 -> result=-182
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-244 -> result=-244
  PE[1][0]: input=-116 * weight=-1 = 116, partial_in=0 -> result=116
  PE[1][1]: input=-116 * weight=1 = -116, partial_in=-42 -> result=-158
  PE[1][2]: input=-116 * weight=1 = -116, partial_in=-84 -> result=-200
  PE[1][3]: input=-116 * weight=2 = -232, partial_in=-42 -> result=-274
  PE[2][0]: input=-90 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[2][1]: input=-90 * weight=1 = -90, partial_in=-160 -> result=-250
  PE[2][2]: input=-90 * weight=2 = -180, partial_in=-80 -> result=-260
  PE[2][3]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][0]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][1]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[3][2]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][3]: input=-46 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      102     -142     -182     -244 
  Row 1:      116     -158     -200     -274 
  Row 2:      -80     -250     -260      -90 
  Row 3:      -46      -92      -46        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 102 │-142 │-182 │-244 │
├─────┼─────┼─────┼─────┤
│ 116 │-158 │-200 │-274 │
├─────┼─────┼─────┼─────┤
│ -80 │-250 │-260 │ -90 │
├─────┼─────┼─────┼─────┤
│ -46 │ -92 │ -46 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -115
  Row 3: input_block[3][2] = -67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 116 (from PE[1][0])
  PE[0][1]: partial_in = -158 (from PE[1][1])
  PE[0][2]: partial_in = -200 (from PE[1][2])
  PE[0][3]: partial_in = -274 (from PE[1][3])
  PE[1][0]: partial_in = -80 (from PE[2][0])
  PE[1][1]: partial_in = -250 (from PE[2][1])
  PE[1][2]: partial_in = -260 (from PE[2][2])
  PE[1][3]: partial_in = -90 (from PE[2][3])
  PE[2][0]: partial_in = -46 (from PE[3][0])
  PE[2][1]: partial_in = -92 (from PE[3][1])
  PE[2][2]: partial_in = -46 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=116 -> result=116
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-158 -> result=-158
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-200 -> result=-200
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-274 -> result=-274
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-80 -> result=-80
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-250 -> result=-250
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-260 -> result=-260
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-90 -> result=-90
  PE[2][0]: input=-115 * weight=0 = 0, partial_in=-46 -> result=-46
  PE[2][1]: input=-115 * weight=1 = -115, partial_in=-92 -> result=-207
  PE[2][2]: input=-115 * weight=2 = -230, partial_in=-46 -> result=-276
  PE[2][3]: input=-115 * weight=1 = -115, partial_in=0 -> result=-115
  PE[3][0]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][1]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[3][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][3]: input=-67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      116     -158     -200     -274 
  Row 1:      -80     -250     -260      -90 
  Row 2:      -46     -207     -276     -115 
  Row 3:      -67     -134      -67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 116 │-158 │-200 │-274 │
├─────┼─────┼─────┼─────┤
│ -80 │-250 │-260 │ -90 │
├─────┼─────┼─────┼─────┤
│ -46 │-207 │-276 │-115 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -93

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -80 (from PE[1][0])
  PE[0][1]: partial_in = -250 (from PE[1][1])
  PE[0][2]: partial_in = -260 (from PE[1][2])
  PE[0][3]: partial_in = -90 (from PE[1][3])
  PE[1][0]: partial_in = -46 (from PE[2][0])
  PE[1][1]: partial_in = -207 (from PE[2][1])
  PE[1][2]: partial_in = -276 (from PE[2][2])
  PE[1][3]: partial_in = -115 (from PE[2][3])
  PE[2][0]: partial_in = -67 (from PE[3][0])
  PE[2][1]: partial_in = -134 (from PE[3][1])
  PE[2][2]: partial_in = -67 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-80 -> result=-80
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-250 -> result=-250
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-260 -> result=-260
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-46 -> result=-46
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-207 -> result=-207
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-276 -> result=-276
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-115 -> result=-115
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-134 -> result=-134
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-67 -> result=-67
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][1]: input=-93 * weight=2 = -186, partial_in=0 -> result=-186
  PE[3][2]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][3]: input=-93 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -80     -250     -260      -90 
  Row 1:      -46     -207     -276     -115 
  Row 2:      -67     -134      -67        0 
  Row 3:      -93     -186      -93        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │-250 │-260 │ -90 │
├─────┼─────┼─────┼─────┤
│ -46 │-207 │-276 │-115 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
├─────┼─────┼─────┼─────┤
│ -93 │-186 │ -93 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -80     -250     -260      -90 
Row 1:      -46     -207     -276     -115 
Row 2:      -67     -134      -67        0 
Row 3:      -93     -186      -93        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -80 -> clamp(-80) -> final(48)
  PE[0][1]: -250 -> clamp(-128) -> final(0)
  PE[0][2]: -260 -> clamp(-128) -> final(0)
  PE[0][3]: -90 -> clamp(-90) -> final(38)
  PE[1][0]: -46 -> clamp(-46) -> final(82)
  PE[1][1]: -207 -> clamp(-128) -> final(0)
  PE[1][2]: -276 -> clamp(-128) -> final(0)
  PE[1][3]: -115 -> clamp(-115) -> final(13)
  PE[2][0]: -67 -> clamp(-67) -> final(61)
  PE[2][1]: -134 -> clamp(-128) -> final(0)
  PE[2][2]: -67 -> clamp(-67) -> final(61)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -93 -> clamp(-93) -> final(35)
  PE[3][1]: -186 -> clamp(-128) -> final(0)
  PE[3][2]: -93 -> clamp(-93) -> final(35)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    48      0      0     38 
    82      0      0     13 
    61      0     61    128 
    35      0     35    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -84  -83  -37   -7 
-115  -81    0   27 
-120  -67   31   44 
-113  -67   26   25 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -84
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-84 * weight=-2 = 168, partial_in=0 -> result=168
  PE[0][1]: input=-84 * weight=-1 = 84, partial_in=0 -> result=84
  PE[0][2]: input=-84 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      168       84        0      -84 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 168 │  84 │   0 │ -84 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -83
  Row 1: input_block[1][0] = -115
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-83 * weight=-2 = 166, partial_in=0 -> result=166
  PE[0][1]: input=-83 * weight=-1 = 83, partial_in=0 -> result=83
  PE[0][2]: input=-83 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[1][0]: input=-115 * weight=-1 = 115, partial_in=0 -> result=115
  PE[1][1]: input=-115 * weight=1 = -115, partial_in=0 -> result=-115
  PE[1][2]: input=-115 * weight=1 = -115, partial_in=0 -> result=-115
  PE[1][3]: input=-115 * weight=2 = -230, partial_in=0 -> result=-230
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      166       83        0      -83 
  Row 1:      115     -115     -115     -230 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 166 │  83 │   0 │ -83 │
├─────┼─────┼─────┼─────┤
│ 115 │-115 │-115 │-230 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -37
  Row 1: input_block[1][1] = -81
  Row 2: input_block[2][0] = -120
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 115 (from PE[1][0])
  PE[0][1]: partial_in = -115 (from PE[1][1])
  PE[0][2]: partial_in = -115 (from PE[1][2])
  PE[0][3]: partial_in = -230 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-37 * weight=-2 = 74, partial_in=115 -> result=189
  PE[0][1]: input=-37 * weight=-1 = 37, partial_in=-115 -> result=-78
  PE[0][2]: input=-37 * weight=0 = 0, partial_in=-115 -> result=-115
  PE[0][3]: input=-37 * weight=1 = -37, partial_in=-230 -> result=-267
  PE[1][0]: input=-81 * weight=-1 = 81, partial_in=0 -> result=81
  PE[1][1]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[1][2]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[1][3]: input=-81 * weight=2 = -162, partial_in=0 -> result=-162
  PE[2][0]: input=-120 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-120 * weight=1 = -120, partial_in=0 -> result=-120
  PE[2][2]: input=-120 * weight=2 = -240, partial_in=0 -> result=-240
  PE[2][3]: input=-120 * weight=1 = -120, partial_in=0 -> result=-120
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      189      -78     -115     -267 
  Row 1:       81      -81      -81     -162 
  Row 2:        0     -120     -240     -120 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 189 │ -78 │-115 │-267 │
├─────┼─────┼─────┼─────┤
│  81 │ -81 │ -81 │-162 │
├─────┼─────┼─────┼─────┤
│   0 │-120 │-240 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -7
  Row 1: input_block[1][2] = 0
  Row 2: input_block[2][1] = -67
  Row 3: input_block[3][0] = -113

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 81 (from PE[1][0])
  PE[0][1]: partial_in = -81 (from PE[1][1])
  PE[0][2]: partial_in = -81 (from PE[1][2])
  PE[0][3]: partial_in = -162 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -120 (from PE[2][1])
  PE[1][2]: partial_in = -240 (from PE[2][2])
  PE[1][3]: partial_in = -120 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=81 -> result=95
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=-81 -> result=-74
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=-81 -> result=-81
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=-162 -> result=-169
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-120 -> result=-120
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-240 -> result=-240
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-120 -> result=-120
  PE[2][0]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[2][2]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][0]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][1]: input=-113 * weight=2 = -226, partial_in=0 -> result=-226
  PE[3][2]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][3]: input=-113 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       95      -74      -81     -169 
  Row 1:        0     -120     -240     -120 
  Row 2:        0      -67     -134      -67 
  Row 3:     -113     -226     -113        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │ -74 │ -81 │-169 │
├─────┼─────┼─────┼─────┤
│   0 │-120 │-240 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │ -67 │-134 │ -67 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 27
  Row 2: input_block[2][2] = 31
  Row 3: input_block[3][1] = -67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = -120 (from PE[1][1])
  PE[0][2]: partial_in = -240 (from PE[1][2])
  PE[0][3]: partial_in = -120 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -134 (from PE[2][2])
  PE[1][3]: partial_in = -67 (from PE[2][3])
  PE[2][0]: partial_in = -113 (from PE[3][0])
  PE[2][1]: partial_in = -226 (from PE[3][1])
  PE[2][2]: partial_in = -113 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-120 -> result=-120
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-240 -> result=-240
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-120 -> result=-120
  PE[1][0]: input=27 * weight=-1 = -27, partial_in=0 -> result=-27
  PE[1][1]: input=27 * weight=1 = 27, partial_in=-67 -> result=-40
  PE[1][2]: input=27 * weight=1 = 27, partial_in=-134 -> result=-107
  PE[1][3]: input=27 * weight=2 = 54, partial_in=-67 -> result=-13
  PE[2][0]: input=31 * weight=0 = 0, partial_in=-113 -> result=-113
  PE[2][1]: input=31 * weight=1 = 31, partial_in=-226 -> result=-195
  PE[2][2]: input=31 * weight=2 = 62, partial_in=-113 -> result=-51
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][1]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[3][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][3]: input=-67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        0     -120     -240     -120 
  Row 1:      -27      -40     -107      -13 
  Row 2:     -113     -195      -51       31 
  Row 3:      -67     -134      -67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │-120 │-240 │-120 │
├─────┼─────┼─────┼─────┤
│ -27 │ -40 │-107 │ -13 │
├─────┼─────┼─────┼─────┤
│-113 │-195 │ -51 │  31 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 44
  Row 3: input_block[3][2] = 26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -27 (from PE[1][0])
  PE[0][1]: partial_in = -40 (from PE[1][1])
  PE[0][2]: partial_in = -107 (from PE[1][2])
  PE[0][3]: partial_in = -13 (from PE[1][3])
  PE[1][0]: partial_in = -113 (from PE[2][0])
  PE[1][1]: partial_in = -195 (from PE[2][1])
  PE[1][2]: partial_in = -51 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = -67 (from PE[3][0])
  PE[2][1]: partial_in = -134 (from PE[3][1])
  PE[2][2]: partial_in = -67 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-27 -> result=-27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-40 -> result=-40
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-113 -> result=-113
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-195 -> result=-195
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-51 -> result=-51
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=44 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[2][1]: input=44 * weight=1 = 44, partial_in=-134 -> result=-90
  PE[2][2]: input=44 * weight=2 = 88, partial_in=-67 -> result=21
  PE[2][3]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][0]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][1]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[3][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][3]: input=26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -27      -40     -107      -13 
  Row 1:     -113     -195      -51       31 
  Row 2:      -67      -90       21       44 
  Row 3:       26       52       26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -27 │ -40 │-107 │ -13 │
├─────┼─────┼─────┼─────┤
│-113 │-195 │ -51 │  31 │
├─────┼─────┼─────┼─────┤
│ -67 │ -90 │  21 │  44 │
├─────┼─────┼─────┼─────┤
│  26 │  52 │  26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -113 (from PE[1][0])
  PE[0][1]: partial_in = -195 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = 31 (from PE[1][3])
  PE[1][0]: partial_in = -67 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = 21 (from PE[2][2])
  PE[1][3]: partial_in = 44 (from PE[2][3])
  PE[2][0]: partial_in = 26 (from PE[3][0])
  PE[2][1]: partial_in = 52 (from PE[3][1])
  PE[2][2]: partial_in = 26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-113 -> result=-113
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-195 -> result=-195
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-67 -> result=-67
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=21 -> result=21
  PE[1][3]: input=0 * weight=2 = 0, partial_in=44 -> result=44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=26 -> result=26
  PE[2][1]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[2][2]: input=0 * weight=2 = 0, partial_in=26 -> result=26
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -113     -195      -51       31 
  Row 1:      -67      -90       21       44 
  Row 2:       26       52       26        0 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-113 │-195 │ -51 │  31 │
├─────┼─────┼─────┼─────┤
│ -67 │ -90 │  21 │  44 │
├─────┼─────┼─────┼─────┤
│  26 │  52 │  26 │   0 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -113     -195      -51       31 
Row 1:      -67      -90       21       44 
Row 2:       26       52       26        0 
Row 3:       25       50       25        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -113 -> clamp(-113) -> final(15)
  PE[0][1]: -195 -> clamp(-128) -> final(0)
  PE[0][2]: -51 -> clamp(-51) -> final(77)
  PE[0][3]: 31 -> clamp(31) -> final(159)
  PE[1][0]: -67 -> clamp(-67) -> final(61)
  PE[1][1]: -90 -> clamp(-90) -> final(38)
  PE[1][2]: 21 -> clamp(21) -> final(149)
  PE[1][3]: 44 -> clamp(44) -> final(172)
  PE[2][0]: 26 -> clamp(26) -> final(154)
  PE[2][1]: 52 -> clamp(52) -> final(180)
  PE[2][2]: 26 -> clamp(26) -> final(154)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 25 -> clamp(25) -> final(153)
  PE[3][1]: 50 -> clamp(50) -> final(178)
  PE[3][2]: 25 -> clamp(25) -> final(153)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    15      0     77    159 
    61     38    149    172 
   154    180    154    128 
   153    178    153    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -15   17   54   53 
  28   26   66   67 
  69   36   63   79 
  40   56   53   77 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -15
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=0 -> result=30
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       30       15        0      -15 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │  15 │   0 │ -15 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 17
  Row 1: input_block[1][0] = 28
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[1][1]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][3]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -34      -17        0       17 
  Row 1:      -28       28       28       56 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│ -28 │  28 │  28 │  56 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 54
  Row 1: input_block[1][1] = 26
  Row 2: input_block[2][0] = 69
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = 28 (from PE[1][1])
  PE[0][2]: partial_in = 28 (from PE[1][2])
  PE[0][3]: partial_in = 56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=54 * weight=-2 = -108, partial_in=-28 -> result=-136
  PE[0][1]: input=54 * weight=-1 = -54, partial_in=28 -> result=-26
  PE[0][2]: input=54 * weight=0 = 0, partial_in=28 -> result=28
  PE[0][3]: input=54 * weight=1 = 54, partial_in=56 -> result=110
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][3]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][0]: input=69 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=69 * weight=1 = 69, partial_in=0 -> result=69
  PE[2][2]: input=69 * weight=2 = 138, partial_in=0 -> result=138
  PE[2][3]: input=69 * weight=1 = 69, partial_in=0 -> result=69
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -136      -26       28      110 
  Row 1:      -26       26       26       52 
  Row 2:        0       69      138       69 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-136 │ -26 │  28 │ 110 │
├─────┼─────┼─────┼─────┤
│ -26 │  26 │  26 │  52 │
├─────┼─────┼─────┼─────┤
│   0 │  69 │ 138 │  69 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 53
  Row 1: input_block[1][2] = 66
  Row 2: input_block[2][1] = 36
  Row 3: input_block[3][0] = 40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 26 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 69 (from PE[2][1])
  PE[1][2]: partial_in = 138 (from PE[2][2])
  PE[1][3]: partial_in = 69 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=53 * weight=-2 = -106, partial_in=-26 -> result=-132
  PE[0][1]: input=53 * weight=-1 = -53, partial_in=26 -> result=-27
  PE[0][2]: input=53 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=53 * weight=1 = 53, partial_in=52 -> result=105
  PE[1][0]: input=66 * weight=-1 = -66, partial_in=0 -> result=-66
  PE[1][1]: input=66 * weight=1 = 66, partial_in=69 -> result=135
  PE[1][2]: input=66 * weight=1 = 66, partial_in=138 -> result=204
  PE[1][3]: input=66 * weight=2 = 132, partial_in=69 -> result=201
  PE[2][0]: input=36 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[2][2]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][3]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][0]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][1]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[3][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][3]: input=40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -132      -27       26      105 
  Row 1:      -66      135      204      201 
  Row 2:        0       36       72       36 
  Row 3:       40       80       40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-132 │ -27 │  26 │ 105 │
├─────┼─────┼─────┼─────┤
│ -66 │ 135 │ 204 │ 201 │
├─────┼─────┼─────┼─────┤
│   0 │  36 │  72 │  36 │
├─────┼─────┼─────┼─────┤
│  40 │  80 │  40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 67
  Row 2: input_block[2][2] = 63
  Row 3: input_block[3][1] = 56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -66 (from PE[1][0])
  PE[0][1]: partial_in = 135 (from PE[1][1])
  PE[0][2]: partial_in = 204 (from PE[1][2])
  PE[0][3]: partial_in = 201 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 36 (from PE[2][1])
  PE[1][2]: partial_in = 72 (from PE[2][2])
  PE[1][3]: partial_in = 36 (from PE[2][3])
  PE[2][0]: partial_in = 40 (from PE[3][0])
  PE[2][1]: partial_in = 80 (from PE[3][1])
  PE[2][2]: partial_in = 40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-66 -> result=-66
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=135 -> result=135
  PE[0][2]: input=0 * weight=0 = 0, partial_in=204 -> result=204
  PE[0][3]: input=0 * weight=1 = 0, partial_in=201 -> result=201
  PE[1][0]: input=67 * weight=-1 = -67, partial_in=0 -> result=-67
  PE[1][1]: input=67 * weight=1 = 67, partial_in=36 -> result=103
  PE[1][2]: input=67 * weight=1 = 67, partial_in=72 -> result=139
  PE[1][3]: input=67 * weight=2 = 134, partial_in=36 -> result=170
  PE[2][0]: input=63 * weight=0 = 0, partial_in=40 -> result=40
  PE[2][1]: input=63 * weight=1 = 63, partial_in=80 -> result=143
  PE[2][2]: input=63 * weight=2 = 126, partial_in=40 -> result=166
  PE[2][3]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[3][0]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][1]: input=56 * weight=2 = 112, partial_in=0 -> result=112
  PE[3][2]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][3]: input=56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -66      135      204      201 
  Row 1:      -67      103      139      170 
  Row 2:       40      143      166       63 
  Row 3:       56      112       56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │ 135 │ 204 │ 201 │
├─────┼─────┼─────┼─────┤
│ -67 │ 103 │ 139 │ 170 │
├─────┼─────┼─────┼─────┤
│  40 │ 143 │ 166 │  63 │
├─────┼─────┼─────┼─────┤
│  56 │ 112 │  56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 79
  Row 3: input_block[3][2] = 53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -67 (from PE[1][0])
  PE[0][1]: partial_in = 103 (from PE[1][1])
  PE[0][2]: partial_in = 139 (from PE[1][2])
  PE[0][3]: partial_in = 170 (from PE[1][3])
  PE[1][0]: partial_in = 40 (from PE[2][0])
  PE[1][1]: partial_in = 143 (from PE[2][1])
  PE[1][2]: partial_in = 166 (from PE[2][2])
  PE[1][3]: partial_in = 63 (from PE[2][3])
  PE[2][0]: partial_in = 56 (from PE[3][0])
  PE[2][1]: partial_in = 112 (from PE[3][1])
  PE[2][2]: partial_in = 56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-67 -> result=-67
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=103 -> result=103
  PE[0][2]: input=0 * weight=0 = 0, partial_in=139 -> result=139
  PE[0][3]: input=0 * weight=1 = 0, partial_in=170 -> result=170
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=143 -> result=143
  PE[1][2]: input=0 * weight=1 = 0, partial_in=166 -> result=166
  PE[1][3]: input=0 * weight=2 = 0, partial_in=63 -> result=63
  PE[2][0]: input=79 * weight=0 = 0, partial_in=56 -> result=56
  PE[2][1]: input=79 * weight=1 = 79, partial_in=112 -> result=191
  PE[2][2]: input=79 * weight=2 = 158, partial_in=56 -> result=214
  PE[2][3]: input=79 * weight=1 = 79, partial_in=0 -> result=79
  PE[3][0]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][1]: input=53 * weight=2 = 106, partial_in=0 -> result=106
  PE[3][2]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][3]: input=53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -67      103      139      170 
  Row 1:       40      143      166       63 
  Row 2:       56      191      214       79 
  Row 3:       53      106       53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -67 │ 103 │ 139 │ 170 │
├─────┼─────┼─────┼─────┤
│  40 │ 143 │ 166 │  63 │
├─────┼─────┼─────┼─────┤
│  56 │ 191 │ 214 │  79 │
├─────┼─────┼─────┼─────┤
│  53 │ 106 │  53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 77

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = 143 (from PE[1][1])
  PE[0][2]: partial_in = 166 (from PE[1][2])
  PE[0][3]: partial_in = 63 (from PE[1][3])
  PE[1][0]: partial_in = 56 (from PE[2][0])
  PE[1][1]: partial_in = 191 (from PE[2][1])
  PE[1][2]: partial_in = 214 (from PE[2][2])
  PE[1][3]: partial_in = 79 (from PE[2][3])
  PE[2][0]: partial_in = 53 (from PE[3][0])
  PE[2][1]: partial_in = 106 (from PE[3][1])
  PE[2][2]: partial_in = 53 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=143 -> result=143
  PE[0][2]: input=0 * weight=0 = 0, partial_in=166 -> result=166
  PE[0][3]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=191 -> result=191
  PE[1][2]: input=0 * weight=1 = 0, partial_in=214 -> result=214
  PE[1][3]: input=0 * weight=2 = 0, partial_in=79 -> result=79
  PE[2][0]: input=0 * weight=0 = 0, partial_in=53 -> result=53
  PE[2][1]: input=0 * weight=1 = 0, partial_in=106 -> result=106
  PE[2][2]: input=0 * weight=2 = 0, partial_in=53 -> result=53
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=77 * weight=1 = 77, partial_in=0 -> result=77
  PE[3][1]: input=77 * weight=2 = 154, partial_in=0 -> result=154
  PE[3][2]: input=77 * weight=1 = 77, partial_in=0 -> result=77
  PE[3][3]: input=77 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       40      143      166       63 
  Row 1:       56      191      214       79 
  Row 2:       53      106       53        0 
  Row 3:       77      154       77        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ 143 │ 166 │  63 │
├─────┼─────┼─────┼─────┤
│  56 │ 191 │ 214 │  79 │
├─────┼─────┼─────┼─────┤
│  53 │ 106 │  53 │   0 │
├─────┼─────┼─────┼─────┤
│  77 │ 154 │  77 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       40      143      166       63 
Row 1:       56      191      214       79 
Row 2:       53      106       53        0 
Row 3:       77      154       77        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 40 -> clamp(40) -> final(168)
  PE[0][1]: 143 -> clamp(127) -> final(255)
  PE[0][2]: 166 -> clamp(127) -> final(255)
  PE[0][3]: 63 -> clamp(63) -> final(191)
  PE[1][0]: 56 -> clamp(56) -> final(184)
  PE[1][1]: 191 -> clamp(127) -> final(255)
  PE[1][2]: 214 -> clamp(127) -> final(255)
  PE[1][3]: 79 -> clamp(79) -> final(207)
  PE[2][0]: 53 -> clamp(53) -> final(181)
  PE[2][1]: 106 -> clamp(106) -> final(234)
  PE[2][2]: 53 -> clamp(53) -> final(181)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 77 -> clamp(77) -> final(205)
  PE[3][1]: 154 -> clamp(127) -> final(255)
  PE[3][2]: 77 -> clamp(77) -> final(205)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   168    255    255    191 
   184    255    255    207 
   181    234    181    128 
   205    255    205    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  49   30   -3    7 
  72   86   33  -12 
  63   83   57  -36 
  86   70   38  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 49
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=49 * weight=-2 = -98, partial_in=0 -> result=-98
  PE[0][1]: input=49 * weight=-1 = -49, partial_in=0 -> result=-49
  PE[0][2]: input=49 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=49 * weight=1 = 49, partial_in=0 -> result=49
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -98      -49        0       49 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -98 │ -49 │   0 │  49 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 30
  Row 1: input_block[1][0] = 72
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=30 * weight=-2 = -60, partial_in=0 -> result=-60
  PE[0][1]: input=30 * weight=-1 = -30, partial_in=0 -> result=-30
  PE[0][2]: input=30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][0]: input=72 * weight=-1 = -72, partial_in=0 -> result=-72
  PE[1][1]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][2]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][3]: input=72 * weight=2 = 144, partial_in=0 -> result=144
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -60      -30        0       30 
  Row 1:      -72       72       72      144 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -60 │ -30 │   0 │  30 │
├─────┼─────┼─────┼─────┤
│ -72 │  72 │  72 │ 144 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -3
  Row 1: input_block[1][1] = 86
  Row 2: input_block[2][0] = 63
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -72 (from PE[1][0])
  PE[0][1]: partial_in = 72 (from PE[1][1])
  PE[0][2]: partial_in = 72 (from PE[1][2])
  PE[0][3]: partial_in = 144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=-72 -> result=-66
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=72 -> result=75
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=72 -> result=72
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=144 -> result=141
  PE[1][0]: input=86 * weight=-1 = -86, partial_in=0 -> result=-86
  PE[1][1]: input=86 * weight=1 = 86, partial_in=0 -> result=86
  PE[1][2]: input=86 * weight=1 = 86, partial_in=0 -> result=86
  PE[1][3]: input=86 * weight=2 = 172, partial_in=0 -> result=172
  PE[2][0]: input=63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[2][2]: input=63 * weight=2 = 126, partial_in=0 -> result=126
  PE[2][3]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -66       75       72      141 
  Row 1:      -86       86       86      172 
  Row 2:        0       63      126       63 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │  75 │  72 │ 141 │
├─────┼─────┼─────┼─────┤
│ -86 │  86 │  86 │ 172 │
├─────┼─────┼─────┼─────┤
│   0 │  63 │ 126 │  63 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 7
  Row 1: input_block[1][2] = 33
  Row 2: input_block[2][1] = 83
  Row 3: input_block[3][0] = 86

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -86 (from PE[1][0])
  PE[0][1]: partial_in = 86 (from PE[1][1])
  PE[0][2]: partial_in = 86 (from PE[1][2])
  PE[0][3]: partial_in = 172 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 126 (from PE[2][2])
  PE[1][3]: partial_in = 63 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=7 * weight=-2 = -14, partial_in=-86 -> result=-100
  PE[0][1]: input=7 * weight=-1 = -7, partial_in=86 -> result=79
  PE[0][2]: input=7 * weight=0 = 0, partial_in=86 -> result=86
  PE[0][3]: input=7 * weight=1 = 7, partial_in=172 -> result=179
  PE[1][0]: input=33 * weight=-1 = -33, partial_in=0 -> result=-33
  PE[1][1]: input=33 * weight=1 = 33, partial_in=63 -> result=96
  PE[1][2]: input=33 * weight=1 = 33, partial_in=126 -> result=159
  PE[1][3]: input=33 * weight=2 = 66, partial_in=63 -> result=129
  PE[2][0]: input=83 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=83 * weight=1 = 83, partial_in=0 -> result=83
  PE[2][2]: input=83 * weight=2 = 166, partial_in=0 -> result=166
  PE[2][3]: input=83 * weight=1 = 83, partial_in=0 -> result=83
  PE[3][0]: input=86 * weight=1 = 86, partial_in=0 -> result=86
  PE[3][1]: input=86 * weight=2 = 172, partial_in=0 -> result=172
  PE[3][2]: input=86 * weight=1 = 86, partial_in=0 -> result=86
  PE[3][3]: input=86 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -100       79       86      179 
  Row 1:      -33       96      159      129 
  Row 2:        0       83      166       83 
  Row 3:       86      172       86        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-100 │  79 │  86 │ 179 │
├─────┼─────┼─────┼─────┤
│ -33 │  96 │ 159 │ 129 │
├─────┼─────┼─────┼─────┤
│   0 │  83 │ 166 │  83 │
├─────┼─────┼─────┼─────┤
│  86 │ 172 │  86 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -12
  Row 2: input_block[2][2] = 57
  Row 3: input_block[3][1] = 70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = 96 (from PE[1][1])
  PE[0][2]: partial_in = 159 (from PE[1][2])
  PE[0][3]: partial_in = 129 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 83 (from PE[2][1])
  PE[1][2]: partial_in = 166 (from PE[2][2])
  PE[1][3]: partial_in = 83 (from PE[2][3])
  PE[2][0]: partial_in = 86 (from PE[3][0])
  PE[2][1]: partial_in = 172 (from PE[3][1])
  PE[2][2]: partial_in = 86 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=96 -> result=96
  PE[0][2]: input=0 * weight=0 = 0, partial_in=159 -> result=159
  PE[0][3]: input=0 * weight=1 = 0, partial_in=129 -> result=129
  PE[1][0]: input=-12 * weight=-1 = 12, partial_in=0 -> result=12
  PE[1][1]: input=-12 * weight=1 = -12, partial_in=83 -> result=71
  PE[1][2]: input=-12 * weight=1 = -12, partial_in=166 -> result=154
  PE[1][3]: input=-12 * weight=2 = -24, partial_in=83 -> result=59
  PE[2][0]: input=57 * weight=0 = 0, partial_in=86 -> result=86
  PE[2][1]: input=57 * weight=1 = 57, partial_in=172 -> result=229
  PE[2][2]: input=57 * weight=2 = 114, partial_in=86 -> result=200
  PE[2][3]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[3][0]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[3][1]: input=70 * weight=2 = 140, partial_in=0 -> result=140
  PE[3][2]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[3][3]: input=70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -33       96      159      129 
  Row 1:       12       71      154       59 
  Row 2:       86      229      200       57 
  Row 3:       70      140       70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │  96 │ 159 │ 129 │
├─────┼─────┼─────┼─────┤
│  12 │  71 │ 154 │  59 │
├─────┼─────┼─────┼─────┤
│  86 │ 229 │ 200 │  57 │
├─────┼─────┼─────┼─────┤
│  70 │ 140 │  70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -36
  Row 3: input_block[3][2] = 38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 12 (from PE[1][0])
  PE[0][1]: partial_in = 71 (from PE[1][1])
  PE[0][2]: partial_in = 154 (from PE[1][2])
  PE[0][3]: partial_in = 59 (from PE[1][3])
  PE[1][0]: partial_in = 86 (from PE[2][0])
  PE[1][1]: partial_in = 229 (from PE[2][1])
  PE[1][2]: partial_in = 200 (from PE[2][2])
  PE[1][3]: partial_in = 57 (from PE[2][3])
  PE[2][0]: partial_in = 70 (from PE[3][0])
  PE[2][1]: partial_in = 140 (from PE[3][1])
  PE[2][2]: partial_in = 70 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=12 -> result=12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=71 -> result=71
  PE[0][2]: input=0 * weight=0 = 0, partial_in=154 -> result=154
  PE[0][3]: input=0 * weight=1 = 0, partial_in=59 -> result=59
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=86 -> result=86
  PE[1][1]: input=0 * weight=1 = 0, partial_in=229 -> result=229
  PE[1][2]: input=0 * weight=1 = 0, partial_in=200 -> result=200
  PE[1][3]: input=0 * weight=2 = 0, partial_in=57 -> result=57
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=70 -> result=70
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=140 -> result=104
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=70 -> result=-2
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][1]: input=38 * weight=2 = 76, partial_in=0 -> result=76
  PE[3][2]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[3][3]: input=38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       12       71      154       59 
  Row 1:       86      229      200       57 
  Row 2:       70      104       -2      -36 
  Row 3:       38       76       38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │  71 │ 154 │  59 │
├─────┼─────┼─────┼─────┤
│  86 │ 229 │ 200 │  57 │
├─────┼─────┼─────┼─────┤
│  70 │ 104 │  -2 │ -36 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 86 (from PE[1][0])
  PE[0][1]: partial_in = 229 (from PE[1][1])
  PE[0][2]: partial_in = 200 (from PE[1][2])
  PE[0][3]: partial_in = 57 (from PE[1][3])
  PE[1][0]: partial_in = 70 (from PE[2][0])
  PE[1][1]: partial_in = 104 (from PE[2][1])
  PE[1][2]: partial_in = -2 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = 38 (from PE[3][0])
  PE[2][1]: partial_in = 76 (from PE[3][1])
  PE[2][2]: partial_in = 38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=86 -> result=86
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=229 -> result=229
  PE[0][2]: input=0 * weight=0 = 0, partial_in=200 -> result=200
  PE[0][3]: input=0 * weight=1 = 0, partial_in=57 -> result=57
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=70 -> result=70
  PE[1][1]: input=0 * weight=1 = 0, partial_in=104 -> result=104
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-2 -> result=-2
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=38 -> result=38
  PE[2][1]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[2][2]: input=0 * weight=2 = 0, partial_in=38 -> result=38
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       86      229      200       57 
  Row 1:       70      104       -2      -36 
  Row 2:       38       76       38        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │ 229 │ 200 │  57 │
├─────┼─────┼─────┼─────┤
│  70 │ 104 │  -2 │ -36 │
├─────┼─────┼─────┼─────┤
│  38 │  76 │  38 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       86      229      200       57 
Row 1:       70      104       -2      -36 
Row 2:       38       76       38        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 86 -> clamp(86) -> final(214)
  PE[0][1]: 229 -> clamp(127) -> final(255)
  PE[0][2]: 200 -> clamp(127) -> final(255)
  PE[0][3]: 57 -> clamp(57) -> final(185)
  PE[1][0]: 70 -> clamp(70) -> final(198)
  PE[1][1]: 104 -> clamp(104) -> final(232)
  PE[1][2]: -2 -> clamp(-2) -> final(126)
  PE[1][3]: -36 -> clamp(-36) -> final(92)
  PE[2][0]: 38 -> clamp(38) -> final(166)
  PE[2][1]: 76 -> clamp(76) -> final(204)
  PE[2][2]: 38 -> clamp(38) -> final(166)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   214    255    255    185 
   198    232    126     92 
   166    204    166    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -14   -8  -24  -57 
 -16  -22  -43  -69 
 -17  -34  -59  -75 
 -25  -45  -65  -72 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -14
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       28       14        0      -14 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -8
  Row 1: input_block[1][0] = -16
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=0 -> result=16
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       16        8        0       -8 
  Row 1:       16      -16      -16      -32 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │   8 │   0 │  -8 │
├─────┼─────┼─────┼─────┤
│  16 │ -16 │ -16 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -24
  Row 1: input_block[1][1] = -22
  Row 2: input_block[2][0] = -17
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=16 -> result=64
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=-16 -> result=8
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=-32 -> result=-56
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       64        8      -16      -56 
  Row 1:       22      -22      -22      -44 
  Row 2:        0      -17      -34      -17 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  64 │   8 │ -16 │ -56 │
├─────┼─────┼─────┼─────┤
│  22 │ -22 │ -22 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │ -17 │ -34 │ -17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -57
  Row 1: input_block[1][2] = -43
  Row 2: input_block[2][1] = -34
  Row 3: input_block[3][0] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -34 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-57 * weight=-2 = 114, partial_in=22 -> result=136
  PE[0][1]: input=-57 * weight=-1 = 57, partial_in=-22 -> result=35
  PE[0][2]: input=-57 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=-57 * weight=1 = -57, partial_in=-44 -> result=-101
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=-17 -> result=-60
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=-34 -> result=-77
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=-17 -> result=-103
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      136       35      -22     -101 
  Row 1:       43      -60      -77     -103 
  Row 2:        0      -34      -68      -34 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 136 │  35 │ -22 │-101 │
├─────┼─────┼─────┼─────┤
│  43 │ -60 │ -77 │-103 │
├─────┼─────┼─────┼─────┤
│   0 │ -34 │ -68 │ -34 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -69
  Row 2: input_block[2][2] = -59
  Row 3: input_block[3][1] = -45

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -77 (from PE[1][2])
  PE[0][3]: partial_in = -103 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -34 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=43 -> result=43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-77 -> result=-77
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][0]: input=-69 * weight=-1 = 69, partial_in=0 -> result=69
  PE[1][1]: input=-69 * weight=1 = -69, partial_in=-34 -> result=-103
  PE[1][2]: input=-69 * weight=1 = -69, partial_in=-68 -> result=-137
  PE[1][3]: input=-69 * weight=2 = -138, partial_in=-34 -> result=-172
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=-50 -> result=-109
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=-25 -> result=-143
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][1]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[3][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][3]: input=-45 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       43      -60      -77     -103 
  Row 1:       69     -103     -137     -172 
  Row 2:      -25     -109     -143      -59 
  Row 3:      -45      -90      -45        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │ -60 │ -77 │-103 │
├─────┼─────┼─────┼─────┤
│  69 │-103 │-137 │-172 │
├─────┼─────┼─────┼─────┤
│ -25 │-109 │-143 │ -59 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -75
  Row 3: input_block[3][2] = -65

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 69 (from PE[1][0])
  PE[0][1]: partial_in = -103 (from PE[1][1])
  PE[0][2]: partial_in = -137 (from PE[1][2])
  PE[0][3]: partial_in = -172 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -109 (from PE[2][1])
  PE[1][2]: partial_in = -143 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = -45 (from PE[3][0])
  PE[2][1]: partial_in = -90 (from PE[3][1])
  PE[2][2]: partial_in = -45 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=69 -> result=69
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-103 -> result=-103
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-137 -> result=-137
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-172 -> result=-172
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-109 -> result=-109
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-59 -> result=-59
  PE[2][0]: input=-75 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[2][1]: input=-75 * weight=1 = -75, partial_in=-90 -> result=-165
  PE[2][2]: input=-75 * weight=2 = -150, partial_in=-45 -> result=-195
  PE[2][3]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][0]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][1]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[3][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][3]: input=-65 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       69     -103     -137     -172 
  Row 1:      -25     -109     -143      -59 
  Row 2:      -45     -165     -195      -75 
  Row 3:      -65     -130      -65        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  69 │-103 │-137 │-172 │
├─────┼─────┼─────┼─────┤
│ -25 │-109 │-143 │ -59 │
├─────┼─────┼─────┼─────┤
│ -45 │-165 │-195 │ -75 │
├─────┼─────┼─────┼─────┤
│ -65 │-130 │ -65 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -72

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = -109 (from PE[1][1])
  PE[0][2]: partial_in = -143 (from PE[1][2])
  PE[0][3]: partial_in = -59 (from PE[1][3])
  PE[1][0]: partial_in = -45 (from PE[2][0])
  PE[1][1]: partial_in = -165 (from PE[2][1])
  PE[1][2]: partial_in = -195 (from PE[2][2])
  PE[1][3]: partial_in = -75 (from PE[2][3])
  PE[2][0]: partial_in = -65 (from PE[3][0])
  PE[2][1]: partial_in = -130 (from PE[3][1])
  PE[2][2]: partial_in = -65 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-109 -> result=-109
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-143 -> result=-143
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-59 -> result=-59
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-165 -> result=-165
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-195 -> result=-195
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-75 -> result=-75
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-65 -> result=-65
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-130 -> result=-130
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-65 -> result=-65
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][1]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[3][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][3]: input=-72 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -25     -109     -143      -59 
  Row 1:      -45     -165     -195      -75 
  Row 2:      -65     -130      -65        0 
  Row 3:      -72     -144      -72        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │-109 │-143 │ -59 │
├─────┼─────┼─────┼─────┤
│ -45 │-165 │-195 │ -75 │
├─────┼─────┼─────┼─────┤
│ -65 │-130 │ -65 │   0 │
├─────┼─────┼─────┼─────┤
│ -72 │-144 │ -72 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -25     -109     -143      -59 
Row 1:      -45     -165     -195      -75 
Row 2:      -65     -130      -65        0 
Row 3:      -72     -144      -72        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -25 -> clamp(-25) -> final(103)
  PE[0][1]: -109 -> clamp(-109) -> final(19)
  PE[0][2]: -143 -> clamp(-128) -> final(0)
  PE[0][3]: -59 -> clamp(-59) -> final(69)
  PE[1][0]: -45 -> clamp(-45) -> final(83)
  PE[1][1]: -165 -> clamp(-128) -> final(0)
  PE[1][2]: -195 -> clamp(-128) -> final(0)
  PE[1][3]: -75 -> clamp(-75) -> final(53)
  PE[2][0]: -65 -> clamp(-65) -> final(63)
  PE[2][1]: -130 -> clamp(-128) -> final(0)
  PE[2][2]: -65 -> clamp(-65) -> final(63)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -72 -> clamp(-72) -> final(56)
  PE[3][1]: -144 -> clamp(-128) -> final(0)
  PE[3][2]: -72 -> clamp(-72) -> final(56)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   103     19      0     69 
    83      0      0     53 
    63      0     63    128 
    56      0     56    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -71  -63  -61  -72 
 -77  -68  -66  -75 
 -75  -67  -66  -71 
 -70  -67  -66  -64 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -71
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-71 * weight=-2 = 142, partial_in=0 -> result=142
  PE[0][1]: input=-71 * weight=-1 = 71, partial_in=0 -> result=71
  PE[0][2]: input=-71 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      142       71        0      -71 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 142 │  71 │   0 │ -71 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -63
  Row 1: input_block[1][0] = -77
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=0 -> result=126
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][0]: input=-77 * weight=-1 = 77, partial_in=0 -> result=77
  PE[1][1]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[1][2]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[1][3]: input=-77 * weight=2 = -154, partial_in=0 -> result=-154
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      126       63        0      -63 
  Row 1:       77      -77      -77     -154 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 126 │  63 │   0 │ -63 │
├─────┼─────┼─────┼─────┤
│  77 │ -77 │ -77 │-154 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -61
  Row 1: input_block[1][1] = -68
  Row 2: input_block[2][0] = -75
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 77 (from PE[1][0])
  PE[0][1]: partial_in = -77 (from PE[1][1])
  PE[0][2]: partial_in = -77 (from PE[1][2])
  PE[0][3]: partial_in = -154 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=77 -> result=199
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-77 -> result=-16
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-77 -> result=-77
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-154 -> result=-215
  PE[1][0]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[1][1]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][2]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][3]: input=-68 * weight=2 = -136, partial_in=0 -> result=-136
  PE[2][0]: input=-75 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[2][2]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[2][3]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      199      -16      -77     -215 
  Row 1:       68      -68      -68     -136 
  Row 2:        0      -75     -150      -75 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 199 │ -16 │ -77 │-215 │
├─────┼─────┼─────┼─────┤
│  68 │ -68 │ -68 │-136 │
├─────┼─────┼─────┼─────┤
│   0 │ -75 │-150 │ -75 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -72
  Row 1: input_block[1][2] = -66
  Row 2: input_block[2][1] = -67
  Row 3: input_block[3][0] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 68 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -136 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -75 (from PE[2][1])
  PE[1][2]: partial_in = -150 (from PE[2][2])
  PE[1][3]: partial_in = -75 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-72 * weight=-2 = 144, partial_in=68 -> result=212
  PE[0][1]: input=-72 * weight=-1 = 72, partial_in=-68 -> result=4
  PE[0][2]: input=-72 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=-72 * weight=1 = -72, partial_in=-136 -> result=-208
  PE[1][0]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[1][1]: input=-66 * weight=1 = -66, partial_in=-75 -> result=-141
  PE[1][2]: input=-66 * weight=1 = -66, partial_in=-150 -> result=-216
  PE[1][3]: input=-66 * weight=2 = -132, partial_in=-75 -> result=-207
  PE[2][0]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[2][2]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      212        4      -68     -208 
  Row 1:       66     -141     -216     -207 
  Row 2:        0      -67     -134      -67 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 212 │   4 │ -68 │-208 │
├─────┼─────┼─────┼─────┤
│  66 │-141 │-216 │-207 │
├─────┼─────┼─────┼─────┤
│   0 │ -67 │-134 │ -67 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -75
  Row 2: input_block[2][2] = -66
  Row 3: input_block[3][1] = -67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 66 (from PE[1][0])
  PE[0][1]: partial_in = -141 (from PE[1][1])
  PE[0][2]: partial_in = -216 (from PE[1][2])
  PE[0][3]: partial_in = -207 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -134 (from PE[2][2])
  PE[1][3]: partial_in = -67 (from PE[2][3])
  PE[2][0]: partial_in = -70 (from PE[3][0])
  PE[2][1]: partial_in = -140 (from PE[3][1])
  PE[2][2]: partial_in = -70 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=66 -> result=66
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-141 -> result=-141
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-216 -> result=-216
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-207 -> result=-207
  PE[1][0]: input=-75 * weight=-1 = 75, partial_in=0 -> result=75
  PE[1][1]: input=-75 * weight=1 = -75, partial_in=-67 -> result=-142
  PE[1][2]: input=-75 * weight=1 = -75, partial_in=-134 -> result=-209
  PE[1][3]: input=-75 * weight=2 = -150, partial_in=-67 -> result=-217
  PE[2][0]: input=-66 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[2][1]: input=-66 * weight=1 = -66, partial_in=-140 -> result=-206
  PE[2][2]: input=-66 * weight=2 = -132, partial_in=-70 -> result=-202
  PE[2][3]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[3][0]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][1]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[3][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][3]: input=-67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       66     -141     -216     -207 
  Row 1:       75     -142     -209     -217 
  Row 2:      -70     -206     -202      -66 
  Row 3:      -67     -134      -67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  66 │-141 │-216 │-207 │
├─────┼─────┼─────┼─────┤
│  75 │-142 │-209 │-217 │
├─────┼─────┼─────┼─────┤
│ -70 │-206 │-202 │ -66 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -71
  Row 3: input_block[3][2] = -66

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 75 (from PE[1][0])
  PE[0][1]: partial_in = -142 (from PE[1][1])
  PE[0][2]: partial_in = -209 (from PE[1][2])
  PE[0][3]: partial_in = -217 (from PE[1][3])
  PE[1][0]: partial_in = -70 (from PE[2][0])
  PE[1][1]: partial_in = -206 (from PE[2][1])
  PE[1][2]: partial_in = -202 (from PE[2][2])
  PE[1][3]: partial_in = -66 (from PE[2][3])
  PE[2][0]: partial_in = -67 (from PE[3][0])
  PE[2][1]: partial_in = -134 (from PE[3][1])
  PE[2][2]: partial_in = -67 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=75 -> result=75
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-142 -> result=-142
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-209 -> result=-209
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-217 -> result=-217
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-70 -> result=-70
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-206 -> result=-206
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-202 -> result=-202
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-66 -> result=-66
  PE[2][0]: input=-71 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[2][1]: input=-71 * weight=1 = -71, partial_in=-134 -> result=-205
  PE[2][2]: input=-71 * weight=2 = -142, partial_in=-67 -> result=-209
  PE[2][3]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][0]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[3][1]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[3][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[3][3]: input=-66 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       75     -142     -209     -217 
  Row 1:      -70     -206     -202      -66 
  Row 2:      -67     -205     -209      -71 
  Row 3:      -66     -132      -66        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │-142 │-209 │-217 │
├─────┼─────┼─────┼─────┤
│ -70 │-206 │-202 │ -66 │
├─────┼─────┼─────┼─────┤
│ -67 │-205 │-209 │ -71 │
├─────┼─────┼─────┼─────┤
│ -66 │-132 │ -66 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -64

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -70 (from PE[1][0])
  PE[0][1]: partial_in = -206 (from PE[1][1])
  PE[0][2]: partial_in = -202 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = -67 (from PE[2][0])
  PE[1][1]: partial_in = -205 (from PE[2][1])
  PE[1][2]: partial_in = -209 (from PE[2][2])
  PE[1][3]: partial_in = -71 (from PE[2][3])
  PE[2][0]: partial_in = -66 (from PE[3][0])
  PE[2][1]: partial_in = -132 (from PE[3][1])
  PE[2][2]: partial_in = -66 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-70 -> result=-70
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-206 -> result=-206
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-202 -> result=-202
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-67 -> result=-67
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-205 -> result=-205
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-209 -> result=-209
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-71 -> result=-71
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-66 -> result=-66
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][1]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[3][2]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][3]: input=-64 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -70     -206     -202      -66 
  Row 1:      -67     -205     -209      -71 
  Row 2:      -66     -132      -66        0 
  Row 3:      -64     -128      -64        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -70 │-206 │-202 │ -66 │
├─────┼─────┼─────┼─────┤
│ -67 │-205 │-209 │ -71 │
├─────┼─────┼─────┼─────┤
│ -66 │-132 │ -66 │   0 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -70     -206     -202      -66 
Row 1:      -67     -205     -209      -71 
Row 2:      -66     -132      -66        0 
Row 3:      -64     -128      -64        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -70 -> clamp(-70) -> final(58)
  PE[0][1]: -206 -> clamp(-128) -> final(0)
  PE[0][2]: -202 -> clamp(-128) -> final(0)
  PE[0][3]: -66 -> clamp(-66) -> final(62)
  PE[1][0]: -67 -> clamp(-67) -> final(61)
  PE[1][1]: -205 -> clamp(-128) -> final(0)
  PE[1][2]: -209 -> clamp(-128) -> final(0)
  PE[1][3]: -71 -> clamp(-71) -> final(57)
  PE[2][0]: -66 -> clamp(-66) -> final(62)
  PE[2][1]: -132 -> clamp(-128) -> final(0)
  PE[2][2]: -66 -> clamp(-66) -> final(62)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -64 -> clamp(-64) -> final(64)
  PE[3][1]: -128 -> clamp(-128) -> final(0)
  PE[3][2]: -64 -> clamp(-64) -> final(64)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    58      0      0     62 
    61      0      0     57 
    62      0     62    128 
    64      0     64    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -73  -76  -18   17 
 -74  -70  -10   20 
 -74  -61   -1   23 
 -73  -53    2   21 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -73
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-73 * weight=-2 = 146, partial_in=0 -> result=146
  PE[0][1]: input=-73 * weight=-1 = 73, partial_in=0 -> result=73
  PE[0][2]: input=-73 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      146       73        0      -73 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 146 │  73 │   0 │ -73 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -76
  Row 1: input_block[1][0] = -74
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-76 * weight=-2 = 152, partial_in=0 -> result=152
  PE[0][1]: input=-76 * weight=-1 = 76, partial_in=0 -> result=76
  PE[0][2]: input=-76 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[1][0]: input=-74 * weight=-1 = 74, partial_in=0 -> result=74
  PE[1][1]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][2]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][3]: input=-74 * weight=2 = -148, partial_in=0 -> result=-148
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      152       76        0      -76 
  Row 1:       74      -74      -74     -148 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 152 │  76 │   0 │ -76 │
├─────┼─────┼─────┼─────┤
│  74 │ -74 │ -74 │-148 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -18
  Row 1: input_block[1][1] = -70
  Row 2: input_block[2][0] = -74
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 74 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -148 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=74 -> result=110
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=-74 -> result=-56
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=-148 -> result=-166
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[2][0]: input=-74 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[2][2]: input=-74 * weight=2 = -148, partial_in=0 -> result=-148
  PE[2][3]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      110      -56      -74     -166 
  Row 1:       70      -70      -70     -140 
  Row 2:        0      -74     -148      -74 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 110 │ -56 │ -74 │-166 │
├─────┼─────┼─────┼─────┤
│  70 │ -70 │ -70 │-140 │
├─────┼─────┼─────┼─────┤
│   0 │ -74 │-148 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 17
  Row 1: input_block[1][2] = -10
  Row 2: input_block[2][1] = -61
  Row 3: input_block[3][0] = -73

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -70 (from PE[1][1])
  PE[0][2]: partial_in = -70 (from PE[1][2])
  PE[0][3]: partial_in = -140 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -74 (from PE[2][1])
  PE[1][2]: partial_in = -148 (from PE[2][2])
  PE[1][3]: partial_in = -74 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=70 -> result=36
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=-70 -> result=-87
  PE[0][2]: input=17 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[0][3]: input=17 * weight=1 = 17, partial_in=-140 -> result=-123
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=-74 -> result=-84
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=-148 -> result=-158
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=-74 -> result=-94
  PE[2][0]: input=-61 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[2][2]: input=-61 * weight=2 = -122, partial_in=0 -> result=-122
  PE[2][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][0]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][1]: input=-73 * weight=2 = -146, partial_in=0 -> result=-146
  PE[3][2]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][3]: input=-73 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       36      -87      -70     -123 
  Row 1:       10      -84     -158      -94 
  Row 2:        0      -61     -122      -61 
  Row 3:      -73     -146      -73        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -87 │ -70 │-123 │
├─────┼─────┼─────┼─────┤
│  10 │ -84 │-158 │ -94 │
├─────┼─────┼─────┼─────┤
│   0 │ -61 │-122 │ -61 │
├─────┼─────┼─────┼─────┤
│ -73 │-146 │ -73 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 20
  Row 2: input_block[2][2] = -1
  Row 3: input_block[3][1] = -53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -84 (from PE[1][1])
  PE[0][2]: partial_in = -158 (from PE[1][2])
  PE[0][3]: partial_in = -94 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -61 (from PE[2][1])
  PE[1][2]: partial_in = -122 (from PE[2][2])
  PE[1][3]: partial_in = -61 (from PE[2][3])
  PE[2][0]: partial_in = -73 (from PE[3][0])
  PE[2][1]: partial_in = -146 (from PE[3][1])
  PE[2][2]: partial_in = -73 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-158 -> result=-158
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=-61 -> result=-41
  PE[1][2]: input=20 * weight=1 = 20, partial_in=-122 -> result=-102
  PE[1][3]: input=20 * weight=2 = 40, partial_in=-61 -> result=-21
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=-73 -> result=-73
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=-146 -> result=-147
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=-73 -> result=-75
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][1]: input=-53 * weight=2 = -106, partial_in=0 -> result=-106
  PE[3][2]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][3]: input=-53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       10      -84     -158      -94 
  Row 1:      -20      -41     -102      -21 
  Row 2:      -73     -147      -75       -1 
  Row 3:      -53     -106      -53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │ -84 │-158 │ -94 │
├─────┼─────┼─────┼─────┤
│ -20 │ -41 │-102 │ -21 │
├─────┼─────┼─────┼─────┤
│ -73 │-147 │ -75 │  -1 │
├─────┼─────┼─────┼─────┤
│ -53 │-106 │ -53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 23
  Row 3: input_block[3][2] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = -41 (from PE[1][1])
  PE[0][2]: partial_in = -102 (from PE[1][2])
  PE[0][3]: partial_in = -21 (from PE[1][3])
  PE[1][0]: partial_in = -73 (from PE[2][0])
  PE[1][1]: partial_in = -147 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = -53 (from PE[3][0])
  PE[2][1]: partial_in = -106 (from PE[3][1])
  PE[2][2]: partial_in = -53 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-41 -> result=-41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-102 -> result=-102
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-147 -> result=-147
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][0]: input=23 * weight=0 = 0, partial_in=-53 -> result=-53
  PE[2][1]: input=23 * weight=1 = 23, partial_in=-106 -> result=-83
  PE[2][2]: input=23 * weight=2 = 46, partial_in=-53 -> result=-7
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -20      -41     -102      -21 
  Row 1:      -73     -147      -75       -1 
  Row 2:      -53      -83       -7       23 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -41 │-102 │ -21 │
├─────┼─────┼─────┼─────┤
│ -73 │-147 │ -75 │  -1 │
├─────┼─────┼─────┼─────┤
│ -53 │ -83 │  -7 │  23 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -73 (from PE[1][0])
  PE[0][1]: partial_in = -147 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -1 (from PE[1][3])
  PE[1][0]: partial_in = -53 (from PE[2][0])
  PE[1][1]: partial_in = -83 (from PE[2][1])
  PE[1][2]: partial_in = -7 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 2 (from PE[3][0])
  PE[2][1]: partial_in = 4 (from PE[3][1])
  PE[2][2]: partial_in = 2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-73 -> result=-73
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-147 -> result=-147
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-83 -> result=-83
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-7 -> result=-7
  PE[1][3]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[2][1]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[2][2]: input=0 * weight=2 = 0, partial_in=2 -> result=2
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][1]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[3][2]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][3]: input=21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -73     -147      -75       -1 
  Row 1:      -53      -83       -7       23 
  Row 2:        2        4        2        0 
  Row 3:       21       42       21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -73 │-147 │ -75 │  -1 │
├─────┼─────┼─────┼─────┤
│ -53 │ -83 │  -7 │  23 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
├─────┼─────┼─────┼─────┤
│  21 │  42 │  21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -73     -147      -75       -1 
Row 1:      -53      -83       -7       23 
Row 2:        2        4        2        0 
Row 3:       21       42       21        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -73 -> clamp(-73) -> final(55)
  PE[0][1]: -147 -> clamp(-128) -> final(0)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: -1 -> clamp(-1) -> final(127)
  PE[1][0]: -53 -> clamp(-53) -> final(75)
  PE[1][1]: -83 -> clamp(-83) -> final(45)
  PE[1][2]: -7 -> clamp(-7) -> final(121)
  PE[1][3]: 23 -> clamp(23) -> final(151)
  PE[2][0]: 2 -> clamp(2) -> final(130)
  PE[2][1]: 4 -> clamp(4) -> final(132)
  PE[2][2]: 2 -> clamp(2) -> final(130)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 21 -> clamp(21) -> final(149)
  PE[3][1]: 42 -> clamp(42) -> final(170)
  PE[3][2]: 21 -> clamp(21) -> final(149)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    55      0     53    127 
    75     45    121    151 
   130    132    130    128 
   149    170    149    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   6    8   11   11 
   6    7   12   17 
   7    7   13   23 
  10   12   14   24 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 6
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=0 -> result=-12
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[0][2]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -12       -6        0        6 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  -6 │   0 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 8
  Row 1: input_block[1][0] = 6
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=0 -> result=-16
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[0][2]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][3]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -16       -8        0        8 
  Row 1:       -6        6        6       12 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  -8 │   0 │   8 │
├─────┼─────┼─────┼─────┤
│  -6 │   6 │   6 │  12 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 11
  Row 1: input_block[1][1] = 7
  Row 2: input_block[2][0] = 7
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = 6 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=-6 -> result=-28
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=6 -> result=-5
  PE[0][2]: input=11 * weight=0 = 0, partial_in=6 -> result=6
  PE[0][3]: input=11 * weight=1 = 11, partial_in=12 -> result=23
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[1][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[1][3]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[2][0]: input=7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[2][2]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -28       -5        6       23 
  Row 1:       -7        7        7       14 
  Row 2:        0        7       14        7 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │  -5 │   6 │  23 │
├─────┼─────┼─────┼─────┤
│  -7 │   7 │   7 │  14 │
├─────┼─────┼─────┼─────┤
│   0 │   7 │  14 │   7 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 11
  Row 1: input_block[1][2] = 12
  Row 2: input_block[2][1] = 7
  Row 3: input_block[3][0] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = 7 (from PE[1][1])
  PE[0][2]: partial_in = 7 (from PE[1][2])
  PE[0][3]: partial_in = 14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 7 (from PE[2][1])
  PE[1][2]: partial_in = 14 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=-7 -> result=-29
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=7 -> result=-4
  PE[0][2]: input=11 * weight=0 = 0, partial_in=7 -> result=7
  PE[0][3]: input=11 * weight=1 = 11, partial_in=14 -> result=25
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=7 -> result=19
  PE[1][2]: input=12 * weight=1 = 12, partial_in=14 -> result=26
  PE[1][3]: input=12 * weight=2 = 24, partial_in=7 -> result=31
  PE[2][0]: input=7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[2][2]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -29       -4        7       25 
  Row 1:      -12       19       26       31 
  Row 2:        0        7       14        7 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │  -4 │   7 │  25 │
├─────┼─────┼─────┼─────┤
│ -12 │  19 │  26 │  31 │
├─────┼─────┼─────┼─────┤
│   0 │   7 │  14 │   7 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 17
  Row 2: input_block[2][2] = 13
  Row 3: input_block[3][1] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 19 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 31 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 7 (from PE[2][1])
  PE[1][2]: partial_in = 14 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=19 -> result=19
  PE[0][2]: input=0 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=7 -> result=24
  PE[1][2]: input=17 * weight=1 = 17, partial_in=14 -> result=31
  PE[1][3]: input=17 * weight=2 = 34, partial_in=7 -> result=41
  PE[2][0]: input=13 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=13 * weight=1 = 13, partial_in=20 -> result=33
  PE[2][2]: input=13 * weight=2 = 26, partial_in=10 -> result=36
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -12       19       26       31 
  Row 1:      -17       24       31       41 
  Row 2:       10       33       36       13 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  19 │  26 │  31 │
├─────┼─────┼─────┼─────┤
│ -17 │  24 │  31 │  41 │
├─────┼─────┼─────┼─────┤
│  10 │  33 │  36 │  13 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 23
  Row 3: input_block[3][2] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = 24 (from PE[1][1])
  PE[0][2]: partial_in = 31 (from PE[1][2])
  PE[0][3]: partial_in = 41 (from PE[1][3])
  PE[1][0]: partial_in = 10 (from PE[2][0])
  PE[1][1]: partial_in = 33 (from PE[2][1])
  PE[1][2]: partial_in = 36 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=24 -> result=24
  PE[0][2]: input=0 * weight=0 = 0, partial_in=31 -> result=31
  PE[0][3]: input=0 * weight=1 = 0, partial_in=41 -> result=41
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][2]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=23 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=23 * weight=1 = 23, partial_in=24 -> result=47
  PE[2][2]: input=23 * weight=2 = 46, partial_in=12 -> result=58
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -17       24       31       41 
  Row 1:       10       33       36       13 
  Row 2:       12       47       58       23 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  24 │  31 │  41 │
├─────┼─────┼─────┼─────┤
│  10 │  33 │  36 │  13 │
├─────┼─────┼─────┼─────┤
│  12 │  47 │  58 │  23 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = 33 (from PE[1][1])
  PE[0][2]: partial_in = 36 (from PE[1][2])
  PE[0][3]: partial_in = 13 (from PE[1][3])
  PE[1][0]: partial_in = 12 (from PE[2][0])
  PE[1][1]: partial_in = 47 (from PE[2][1])
  PE[1][2]: partial_in = 58 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 14 (from PE[3][0])
  PE[2][1]: partial_in = 28 (from PE[3][1])
  PE[2][2]: partial_in = 14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[0][2]: input=0 * weight=0 = 0, partial_in=36 -> result=36
  PE[0][3]: input=0 * weight=1 = 0, partial_in=13 -> result=13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[1][1]: input=0 * weight=1 = 0, partial_in=47 -> result=47
  PE[1][2]: input=0 * weight=1 = 0, partial_in=58 -> result=58
  PE[1][3]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=14 -> result=14
  PE[2][1]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[2][2]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][1]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[3][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][3]: input=24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       10       33       36       13 
  Row 1:       12       47       58       23 
  Row 2:       14       28       14        0 
  Row 3:       24       48       24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  33 │  36 │  13 │
├─────┼─────┼─────┼─────┤
│  12 │  47 │  58 │  23 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       10       33       36       13 
Row 1:       12       47       58       23 
Row 2:       14       28       14        0 
Row 3:       24       48       24        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 10 -> clamp(10) -> final(138)
  PE[0][1]: 33 -> clamp(33) -> final(161)
  PE[0][2]: 36 -> clamp(36) -> final(164)
  PE[0][3]: 13 -> clamp(13) -> final(141)
  PE[1][0]: 12 -> clamp(12) -> final(140)
  PE[1][1]: 47 -> clamp(47) -> final(175)
  PE[1][2]: 58 -> clamp(58) -> final(186)
  PE[1][3]: 23 -> clamp(23) -> final(151)
  PE[2][0]: 14 -> clamp(14) -> final(142)
  PE[2][1]: 28 -> clamp(28) -> final(156)
  PE[2][2]: 14 -> clamp(14) -> final(142)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 24 -> clamp(24) -> final(152)
  PE[3][1]: 48 -> clamp(48) -> final(176)
  PE[3][2]: 24 -> clamp(24) -> final(152)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   138    161    164    141 
   140    175    186    151 
   142    156    142    128 
   152    176    152    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  27   31   30   33 
  25   36   34   25 
  22   35   33   24 
  29   31   31   33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 27
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=27 * weight=-2 = -54, partial_in=0 -> result=-54
  PE[0][1]: input=27 * weight=-1 = -27, partial_in=0 -> result=-27
  PE[0][2]: input=27 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -54      -27        0       27 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -54 │ -27 │   0 │  27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 31
  Row 1: input_block[1][0] = 25
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=31 * weight=-2 = -62, partial_in=0 -> result=-62
  PE[0][1]: input=31 * weight=-1 = -31, partial_in=0 -> result=-31
  PE[0][2]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][3]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -62      -31        0       31 
  Row 1:      -25       25       25       50 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │ -31 │   0 │  31 │
├─────┼─────┼─────┼─────┤
│ -25 │  25 │  25 │  50 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 30
  Row 1: input_block[1][1] = 36
  Row 2: input_block[2][0] = 22
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 25 (from PE[1][1])
  PE[0][2]: partial_in = 25 (from PE[1][2])
  PE[0][3]: partial_in = 50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=30 * weight=-2 = -60, partial_in=-25 -> result=-85
  PE[0][1]: input=30 * weight=-1 = -30, partial_in=25 -> result=-5
  PE[0][2]: input=30 * weight=0 = 0, partial_in=25 -> result=25
  PE[0][3]: input=30 * weight=1 = 30, partial_in=50 -> result=80
  PE[1][0]: input=36 * weight=-1 = -36, partial_in=0 -> result=-36
  PE[1][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][3]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][0]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[2][2]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -85       -5       25       80 
  Row 1:      -36       36       36       72 
  Row 2:        0       22       44       22 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -85 │  -5 │  25 │  80 │
├─────┼─────┼─────┼─────┤
│ -36 │  36 │  36 │  72 │
├─────┼─────┼─────┼─────┤
│   0 │  22 │  44 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 33
  Row 1: input_block[1][2] = 34
  Row 2: input_block[2][1] = 35
  Row 3: input_block[3][0] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = 36 (from PE[1][2])
  PE[0][3]: partial_in = 72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = 44 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-36 -> result=-102
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=36 -> result=3
  PE[0][2]: input=33 * weight=0 = 0, partial_in=36 -> result=36
  PE[0][3]: input=33 * weight=1 = 33, partial_in=72 -> result=105
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=22 -> result=56
  PE[1][2]: input=34 * weight=1 = 34, partial_in=44 -> result=78
  PE[1][3]: input=34 * weight=2 = 68, partial_in=22 -> result=90
  PE[2][0]: input=35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[2][2]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[2][3]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -102        3       36      105 
  Row 1:      -34       56       78       90 
  Row 2:        0       35       70       35 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-102 │   3 │  36 │ 105 │
├─────┼─────┼─────┼─────┤
│ -34 │  56 │  78 │  90 │
├─────┼─────┼─────┼─────┤
│   0 │  35 │  70 │  35 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 25
  Row 2: input_block[2][2] = 33
  Row 3: input_block[3][1] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 56 (from PE[1][1])
  PE[0][2]: partial_in = 78 (from PE[1][2])
  PE[0][3]: partial_in = 90 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 35 (from PE[2][1])
  PE[1][2]: partial_in = 70 (from PE[2][2])
  PE[1][3]: partial_in = 35 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=78 -> result=78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=90 -> result=90
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=35 -> result=60
  PE[1][2]: input=25 * weight=1 = 25, partial_in=70 -> result=95
  PE[1][3]: input=25 * weight=2 = 50, partial_in=35 -> result=85
  PE[2][0]: input=33 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=33 * weight=1 = 33, partial_in=58 -> result=91
  PE[2][2]: input=33 * weight=2 = 66, partial_in=29 -> result=95
  PE[2][3]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -34       56       78       90 
  Row 1:      -25       60       95       85 
  Row 2:       29       91       95       33 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │  56 │  78 │  90 │
├─────┼─────┼─────┼─────┤
│ -25 │  60 │  95 │  85 │
├─────┼─────┼─────┼─────┤
│  29 │  91 │  95 │  33 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 24
  Row 3: input_block[3][2] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 95 (from PE[1][2])
  PE[0][3]: partial_in = 85 (from PE[1][3])
  PE[1][0]: partial_in = 29 (from PE[2][0])
  PE[1][1]: partial_in = 91 (from PE[2][1])
  PE[1][2]: partial_in = 95 (from PE[2][2])
  PE[1][3]: partial_in = 33 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=95 -> result=95
  PE[0][3]: input=0 * weight=1 = 0, partial_in=85 -> result=85
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=29 -> result=29
  PE[1][1]: input=0 * weight=1 = 0, partial_in=91 -> result=91
  PE[1][2]: input=0 * weight=1 = 0, partial_in=95 -> result=95
  PE[1][3]: input=0 * weight=2 = 0, partial_in=33 -> result=33
  PE[2][0]: input=24 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=24 * weight=1 = 24, partial_in=62 -> result=86
  PE[2][2]: input=24 * weight=2 = 48, partial_in=31 -> result=79
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -25       60       95       85 
  Row 1:       29       91       95       33 
  Row 2:       31       86       79       24 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  60 │  95 │  85 │
├─────┼─────┼─────┼─────┤
│  29 │  91 │  95 │  33 │
├─────┼─────┼─────┼─────┤
│  31 │  86 │  79 │  24 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = 91 (from PE[1][1])
  PE[0][2]: partial_in = 95 (from PE[1][2])
  PE[0][3]: partial_in = 33 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 86 (from PE[2][1])
  PE[1][2]: partial_in = 79 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=91 -> result=91
  PE[0][2]: input=0 * weight=0 = 0, partial_in=95 -> result=95
  PE[0][3]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=86 -> result=86
  PE[1][2]: input=0 * weight=1 = 0, partial_in=79 -> result=79
  PE[1][3]: input=0 * weight=2 = 0, partial_in=24 -> result=24
  PE[2][0]: input=0 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=62 -> result=62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       29       91       95       33 
  Row 1:       31       86       79       24 
  Row 2:       31       62       31        0 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │  91 │  95 │  33 │
├─────┼─────┼─────┼─────┤
│  31 │  86 │  79 │  24 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       29       91       95       33 
Row 1:       31       86       79       24 
Row 2:       31       62       31        0 
Row 3:       33       66       33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 29 -> clamp(29) -> final(157)
  PE[0][1]: 91 -> clamp(91) -> final(219)
  PE[0][2]: 95 -> clamp(95) -> final(223)
  PE[0][3]: 33 -> clamp(33) -> final(161)
  PE[1][0]: 31 -> clamp(31) -> final(159)
  PE[1][1]: 86 -> clamp(86) -> final(214)
  PE[1][2]: 79 -> clamp(79) -> final(207)
  PE[1][3]: 24 -> clamp(24) -> final(152)
  PE[2][0]: 31 -> clamp(31) -> final(159)
  PE[2][1]: 62 -> clamp(62) -> final(190)
  PE[2][2]: 31 -> clamp(31) -> final(159)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 33 -> clamp(33) -> final(161)
  PE[3][1]: 66 -> clamp(66) -> final(194)
  PE[3][2]: 33 -> clamp(33) -> final(161)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   157    219    223    161 
   159    214    207    152 
   159    190    159    128 
   161    194    161    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  25  -28  -66  -52 
  30  -56  -88  -73 
  31  -67  -70  -50 
   3  -62  -26   -5 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 25
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=25 * weight=-2 = -50, partial_in=0 -> result=-50
  PE[0][1]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[0][2]: input=25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -50      -25        0       25 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -50 │ -25 │   0 │  25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -28
  Row 1: input_block[1][0] = 30
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=0 -> result=56
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][0]: input=30 * weight=-1 = -30, partial_in=0 -> result=-30
  PE[1][1]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[1][3]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       56       28        0      -28 
  Row 1:      -30       30       30       60 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │  28 │   0 │ -28 │
├─────┼─────┼─────┼─────┤
│ -30 │  30 │  30 │  60 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -66
  Row 1: input_block[1][1] = -56
  Row 2: input_block[2][0] = 31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -30 (from PE[1][0])
  PE[0][1]: partial_in = 30 (from PE[1][1])
  PE[0][2]: partial_in = 30 (from PE[1][2])
  PE[0][3]: partial_in = 60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-66 * weight=-2 = 132, partial_in=-30 -> result=102
  PE[0][1]: input=-66 * weight=-1 = 66, partial_in=30 -> result=96
  PE[0][2]: input=-66 * weight=0 = 0, partial_in=30 -> result=30
  PE[0][3]: input=-66 * weight=1 = -66, partial_in=60 -> result=-6
  PE[1][0]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[1][1]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[1][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[1][3]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[2][0]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[2][2]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      102       96       30       -6 
  Row 1:       56      -56      -56     -112 
  Row 2:        0       31       62       31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 102 │  96 │  30 │  -6 │
├─────┼─────┼─────┼─────┤
│  56 │ -56 │ -56 │-112 │
├─────┼─────┼─────┼─────┤
│   0 │  31 │  62 │  31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -52
  Row 1: input_block[1][2] = -88
  Row 2: input_block[2][1] = -67
  Row 3: input_block[3][0] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 56 (from PE[1][0])
  PE[0][1]: partial_in = -56 (from PE[1][1])
  PE[0][2]: partial_in = -56 (from PE[1][2])
  PE[0][3]: partial_in = -112 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 31 (from PE[2][1])
  PE[1][2]: partial_in = 62 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-52 * weight=-2 = 104, partial_in=56 -> result=160
  PE[0][1]: input=-52 * weight=-1 = 52, partial_in=-56 -> result=-4
  PE[0][2]: input=-52 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[0][3]: input=-52 * weight=1 = -52, partial_in=-112 -> result=-164
  PE[1][0]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[1][1]: input=-88 * weight=1 = -88, partial_in=31 -> result=-57
  PE[1][2]: input=-88 * weight=1 = -88, partial_in=62 -> result=-26
  PE[1][3]: input=-88 * weight=2 = -176, partial_in=31 -> result=-145
  PE[2][0]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[2][2]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      160       -4      -56     -164 
  Row 1:       88      -57      -26     -145 
  Row 2:        0      -67     -134      -67 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 160 │  -4 │ -56 │-164 │
├─────┼─────┼─────┼─────┤
│  88 │ -57 │ -26 │-145 │
├─────┼─────┼─────┼─────┤
│   0 │ -67 │-134 │ -67 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -73
  Row 2: input_block[2][2] = -70
  Row 3: input_block[3][1] = -62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 88 (from PE[1][0])
  PE[0][1]: partial_in = -57 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -145 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -134 (from PE[2][2])
  PE[1][3]: partial_in = -67 (from PE[2][3])
  PE[2][0]: partial_in = 3 (from PE[3][0])
  PE[2][1]: partial_in = 6 (from PE[3][1])
  PE[2][2]: partial_in = 3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=88 -> result=88
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-145 -> result=-145
  PE[1][0]: input=-73 * weight=-1 = 73, partial_in=0 -> result=73
  PE[1][1]: input=-73 * weight=1 = -73, partial_in=-67 -> result=-140
  PE[1][2]: input=-73 * weight=1 = -73, partial_in=-134 -> result=-207
  PE[1][3]: input=-73 * weight=2 = -146, partial_in=-67 -> result=-213
  PE[2][0]: input=-70 * weight=0 = 0, partial_in=3 -> result=3
  PE[2][1]: input=-70 * weight=1 = -70, partial_in=6 -> result=-64
  PE[2][2]: input=-70 * weight=2 = -140, partial_in=3 -> result=-137
  PE[2][3]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][0]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][1]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[3][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][3]: input=-62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       88      -57      -26     -145 
  Row 1:       73     -140     -207     -213 
  Row 2:        3      -64     -137      -70 
  Row 3:      -62     -124      -62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  88 │ -57 │ -26 │-145 │
├─────┼─────┼─────┼─────┤
│  73 │-140 │-207 │-213 │
├─────┼─────┼─────┼─────┤
│   3 │ -64 │-137 │ -70 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -50
  Row 3: input_block[3][2] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 73 (from PE[1][0])
  PE[0][1]: partial_in = -140 (from PE[1][1])
  PE[0][2]: partial_in = -207 (from PE[1][2])
  PE[0][3]: partial_in = -213 (from PE[1][3])
  PE[1][0]: partial_in = 3 (from PE[2][0])
  PE[1][1]: partial_in = -64 (from PE[2][1])
  PE[1][2]: partial_in = -137 (from PE[2][2])
  PE[1][3]: partial_in = -70 (from PE[2][3])
  PE[2][0]: partial_in = -62 (from PE[3][0])
  PE[2][1]: partial_in = -124 (from PE[3][1])
  PE[2][2]: partial_in = -62 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=73 -> result=73
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-140 -> result=-140
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-207 -> result=-207
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-213 -> result=-213
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-137 -> result=-137
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-70 -> result=-70
  PE[2][0]: input=-50 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[2][1]: input=-50 * weight=1 = -50, partial_in=-124 -> result=-174
  PE[2][2]: input=-50 * weight=2 = -100, partial_in=-62 -> result=-162
  PE[2][3]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       73     -140     -207     -213 
  Row 1:        3      -64     -137      -70 
  Row 2:      -62     -174     -162      -50 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  73 │-140 │-207 │-213 │
├─────┼─────┼─────┼─────┤
│   3 │ -64 │-137 │ -70 │
├─────┼─────┼─────┼─────┤
│ -62 │-174 │-162 │ -50 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -5

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -64 (from PE[1][1])
  PE[0][2]: partial_in = -137 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = -62 (from PE[2][0])
  PE[1][1]: partial_in = -174 (from PE[2][1])
  PE[1][2]: partial_in = -162 (from PE[2][2])
  PE[1][3]: partial_in = -50 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-64 -> result=-64
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-137 -> result=-137
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-174 -> result=-174
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-50 -> result=-50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][1]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[3][2]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][3]: input=-5 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        3      -64     -137      -70 
  Row 1:      -62     -174     -162      -50 
  Row 2:      -26      -52      -26        0 
  Row 3:       -5      -10       -5        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │ -64 │-137 │ -70 │
├─────┼─────┼─────┼─────┤
│ -62 │-174 │-162 │ -50 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
├─────┼─────┼─────┼─────┤
│  -5 │ -10 │  -5 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        3      -64     -137      -70 
Row 1:      -62     -174     -162      -50 
Row 2:      -26      -52      -26        0 
Row 3:       -5      -10       -5        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 3 -> clamp(3) -> final(131)
  PE[0][1]: -64 -> clamp(-64) -> final(64)
  PE[0][2]: -137 -> clamp(-128) -> final(0)
  PE[0][3]: -70 -> clamp(-70) -> final(58)
  PE[1][0]: -62 -> clamp(-62) -> final(66)
  PE[1][1]: -174 -> clamp(-128) -> final(0)
  PE[1][2]: -162 -> clamp(-128) -> final(0)
  PE[1][3]: -50 -> clamp(-50) -> final(78)
  PE[2][0]: -26 -> clamp(-26) -> final(102)
  PE[2][1]: -52 -> clamp(-52) -> final(76)
  PE[2][2]: -26 -> clamp(-26) -> final(102)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -5 -> clamp(-5) -> final(123)
  PE[3][1]: -10 -> clamp(-10) -> final(118)
  PE[3][2]: -5 -> clamp(-5) -> final(123)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   131     64      0     58 
    66      0      0     78 
   102     76    102    128 
   123    118    123    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -41  -36  -45  -39 
 -68  -57  -58  -21 
 -28  -22  -36  -12 
  11   12   -3  -28 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -41
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=0 -> result=82
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       82       41        0      -41 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │  41 │   0 │ -41 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -36
  Row 1: input_block[1][0] = -68
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=0 -> result=72
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][0]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[1][1]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][2]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][3]: input=-68 * weight=2 = -136, partial_in=0 -> result=-136
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       72       36        0      -36 
  Row 1:       68      -68      -68     -136 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  72 │  36 │   0 │ -36 │
├─────┼─────┼─────┼─────┤
│  68 │ -68 │ -68 │-136 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -45
  Row 1: input_block[1][1] = -57
  Row 2: input_block[2][0] = -28
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 68 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -136 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=68 -> result=158
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=-68 -> result=-23
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=-136 -> result=-181
  PE[1][0]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[1][1]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][3]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      158      -23      -68     -181 
  Row 1:       57      -57      -57     -114 
  Row 2:        0      -28      -56      -28 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 158 │ -23 │ -68 │-181 │
├─────┼─────┼─────┼─────┤
│  57 │ -57 │ -57 │-114 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -39
  Row 1: input_block[1][2] = -58
  Row 2: input_block[2][1] = -22
  Row 3: input_block[3][0] = 11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 57 (from PE[1][0])
  PE[0][1]: partial_in = -57 (from PE[1][1])
  PE[0][2]: partial_in = -57 (from PE[1][2])
  PE[0][3]: partial_in = -114 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=57 -> result=135
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=-57 -> result=-18
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=-114 -> result=-153
  PE[1][0]: input=-58 * weight=-1 = 58, partial_in=0 -> result=58
  PE[1][1]: input=-58 * weight=1 = -58, partial_in=-28 -> result=-86
  PE[1][2]: input=-58 * weight=1 = -58, partial_in=-56 -> result=-114
  PE[1][3]: input=-58 * weight=2 = -116, partial_in=-28 -> result=-144
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][1]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[3][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][3]: input=11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      135      -18      -57     -153 
  Row 1:       58      -86     -114     -144 
  Row 2:        0      -22      -44      -22 
  Row 3:       11       22       11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 135 │ -18 │ -57 │-153 │
├─────┼─────┼─────┼─────┤
│  58 │ -86 │-114 │-144 │
├─────┼─────┼─────┼─────┤
│   0 │ -22 │ -44 │ -22 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -21
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 58 (from PE[1][0])
  PE[0][1]: partial_in = -86 (from PE[1][1])
  PE[0][2]: partial_in = -114 (from PE[1][2])
  PE[0][3]: partial_in = -144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -22 (from PE[2][1])
  PE[1][2]: partial_in = -44 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = 11 (from PE[3][0])
  PE[2][1]: partial_in = 22 (from PE[3][1])
  PE[2][2]: partial_in = 11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=58 -> result=58
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-86 -> result=-86
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-114 -> result=-114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-144 -> result=-144
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=-22 -> result=-43
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=-44 -> result=-65
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=-22 -> result=-64
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=11 -> result=11
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=22 -> result=-14
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=11 -> result=-61
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       58      -86     -114     -144 
  Row 1:       21      -43      -65      -64 
  Row 2:       11      -14      -61      -36 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │ -86 │-114 │-144 │
├─────┼─────┼─────┼─────┤
│  21 │ -43 │ -65 │ -64 │
├─────┼─────┼─────┼─────┤
│  11 │ -14 │ -61 │ -36 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -12
  Row 3: input_block[3][2] = -3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -65 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 11 (from PE[2][0])
  PE[1][1]: partial_in = -14 (from PE[2][1])
  PE[1][2]: partial_in = -61 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-65 -> result=-65
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=11 -> result=11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-14 -> result=-14
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-61 -> result=-61
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=24 -> result=12
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=12 -> result=-12
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][1]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[3][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][3]: input=-3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       21      -43      -65      -64 
  Row 1:       11      -14      -61      -36 
  Row 2:       12       12      -12      -12 
  Row 3:       -3       -6       -3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │ -43 │ -65 │ -64 │
├─────┼─────┼─────┼─────┤
│  11 │ -14 │ -61 │ -36 │
├─────┼─────┼─────┼─────┤
│  12 │  12 │ -12 │ -12 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -14 (from PE[1][1])
  PE[0][2]: partial_in = -61 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = 12 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = -3 (from PE[3][0])
  PE[2][1]: partial_in = -6 (from PE[3][1])
  PE[2][2]: partial_in = -3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=11 -> result=11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-61 -> result=-61
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[1][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-12 -> result=-12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-6 -> result=-6
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       11      -14      -61      -36 
  Row 1:       12       12      -12      -12 
  Row 2:       -3       -6       -3        0 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  11 │ -14 │ -61 │ -36 │
├─────┼─────┼─────┼─────┤
│  12 │  12 │ -12 │ -12 │
├─────┼─────┼─────┼─────┤
│  -3 │  -6 │  -3 │   0 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       11      -14      -61      -36 
Row 1:       12       12      -12      -12 
Row 2:       -3       -6       -3        0 
Row 3:      -28      -56      -28        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 11 -> clamp(11) -> final(139)
  PE[0][1]: -14 -> clamp(-14) -> final(114)
  PE[0][2]: -61 -> clamp(-61) -> final(67)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: 12 -> clamp(12) -> final(140)
  PE[1][1]: 12 -> clamp(12) -> final(140)
  PE[1][2]: -12 -> clamp(-12) -> final(116)
  PE[1][3]: -12 -> clamp(-12) -> final(116)
  PE[2][0]: -3 -> clamp(-3) -> final(125)
  PE[2][1]: -6 -> clamp(-6) -> final(122)
  PE[2][2]: -3 -> clamp(-3) -> final(125)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -28 -> clamp(-28) -> final(100)
  PE[3][1]: -56 -> clamp(-56) -> final(72)
  PE[3][2]: -28 -> clamp(-28) -> final(100)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   139    114     67     92 
   140    140    116    116 
   125    122    125    128 
   100     72    100    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -15   -5    1   23 
  -2   21    0   -4 
 -26   12    0   -4 
 -75  -48  -17   -2 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -15
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=0 -> result=30
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       30       15        0      -15 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │  15 │   0 │ -15 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -5
  Row 1: input_block[1][0] = -2
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=0 -> result=10
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][0]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[1][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][3]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       10        5        0       -5 
  Row 1:        2       -2       -2       -4 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   5 │   0 │  -5 │
├─────┼─────┼─────┼─────┤
│   2 │  -2 │  -2 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 1
  Row 1: input_block[1][1] = 21
  Row 2: input_block[2][0] = -26
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 2 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = -2 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=2 -> result=0
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=-2 -> result=-3
  PE[0][2]: input=1 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[0][3]: input=1 * weight=1 = 1, partial_in=-4 -> result=-3
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[1][2]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[1][3]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        0       -3       -2       -3 
  Row 1:      -21       21       21       42 
  Row 2:        0      -26      -52      -26 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │  -3 │  -2 │  -3 │
├─────┼─────┼─────┼─────┤
│ -21 │  21 │  21 │  42 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 23
  Row 1: input_block[1][2] = 0
  Row 2: input_block[2][1] = 12
  Row 3: input_block[3][0] = -75

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 21 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = 42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=-21 -> result=-67
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=21 -> result=-2
  PE[0][2]: input=23 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=23 * weight=1 = 23, partial_in=42 -> result=65
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-26 -> result=-26
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[2][2]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][0]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][1]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[3][2]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][3]: input=-75 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -67       -2       21       65 
  Row 1:        0      -26      -52      -26 
  Row 2:        0       12       24       12 
  Row 3:      -75     -150      -75        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -67 │  -2 │  21 │  65 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │  12 │  24 │  12 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -4
  Row 2: input_block[2][2] = 0
  Row 3: input_block[3][1] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -52 (from PE[1][2])
  PE[0][3]: partial_in = -26 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 24 (from PE[2][2])
  PE[1][3]: partial_in = 12 (from PE[2][3])
  PE[2][0]: partial_in = -75 (from PE[3][0])
  PE[2][1]: partial_in = -150 (from PE[3][1])
  PE[2][2]: partial_in = -75 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-26 -> result=-26
  PE[1][0]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[1][1]: input=-4 * weight=1 = -4, partial_in=12 -> result=8
  PE[1][2]: input=-4 * weight=1 = -4, partial_in=24 -> result=20
  PE[1][3]: input=-4 * weight=2 = -8, partial_in=12 -> result=4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-150 -> result=-150
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-75 -> result=-75
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        0      -26      -52      -26 
  Row 1:        4        8       20        4 
  Row 2:      -75     -150      -75        0 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│   4 │   8 │  20 │   4 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -4
  Row 3: input_block[3][2] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 4 (from PE[1][0])
  PE[0][1]: partial_in = 8 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 4 (from PE[1][3])
  PE[1][0]: partial_in = -75 (from PE[2][0])
  PE[1][1]: partial_in = -150 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=4 -> result=4
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-75 -> result=-75
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-150 -> result=-150
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=-96 -> result=-100
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=-48 -> result=-56
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        4        8       20        4 
  Row 1:      -75     -150      -75        0 
  Row 2:      -48     -100      -56       -4 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   4 │   8 │  20 │   4 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
├─────┼─────┼─────┼─────┤
│ -48 │-100 │ -56 │  -4 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -75 (from PE[1][0])
  PE[0][1]: partial_in = -150 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = -48 (from PE[2][0])
  PE[1][1]: partial_in = -100 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-75 -> result=-75
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-150 -> result=-150
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-17 -> result=-17
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][1]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[3][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][3]: input=-2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -75     -150      -75        0 
  Row 1:      -48     -100      -56       -4 
  Row 2:      -17      -34      -17        0 
  Row 3:       -2       -4       -2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -75 │-150 │ -75 │   0 │
├─────┼─────┼─────┼─────┤
│ -48 │-100 │ -56 │  -4 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -75     -150      -75        0 
Row 1:      -48     -100      -56       -4 
Row 2:      -17      -34      -17        0 
Row 3:       -2       -4       -2        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -75 -> clamp(-75) -> final(53)
  PE[0][1]: -150 -> clamp(-128) -> final(0)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: 0 -> clamp(0) -> final(128)
  PE[1][0]: -48 -> clamp(-48) -> final(80)
  PE[1][1]: -100 -> clamp(-100) -> final(28)
  PE[1][2]: -56 -> clamp(-56) -> final(72)
  PE[1][3]: -4 -> clamp(-4) -> final(124)
  PE[2][0]: -17 -> clamp(-17) -> final(111)
  PE[2][1]: -34 -> clamp(-34) -> final(94)
  PE[2][2]: -17 -> clamp(-17) -> final(111)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -2 -> clamp(-2) -> final(126)
  PE[3][1]: -4 -> clamp(-4) -> final(124)
  PE[3][2]: -2 -> clamp(-2) -> final(126)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    53      0     53    128 
    80     28     72    124 
   111     94    111    128 
   126    124    126    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  40  -26  -63  -22 
  48   10  -39  -32 
  30   33  -20  -39 
  28   60   10  -26 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 40
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=40 * weight=-2 = -80, partial_in=0 -> result=-80
  PE[0][1]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[0][2]: input=40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -80      -40        0       40 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │ -40 │   0 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -26
  Row 1: input_block[1][0] = 48
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=48 * weight=-1 = -48, partial_in=0 -> result=-48
  PE[1][1]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][2]: input=48 * weight=1 = 48, partial_in=0 -> result=48
  PE[1][3]: input=48 * weight=2 = 96, partial_in=0 -> result=96
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       52       26        0      -26 
  Row 1:      -48       48       48       96 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│ -48 │  48 │  48 │  96 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -63
  Row 1: input_block[1][1] = 10
  Row 2: input_block[2][0] = 30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -48 (from PE[1][0])
  PE[0][1]: partial_in = 48 (from PE[1][1])
  PE[0][2]: partial_in = 48 (from PE[1][2])
  PE[0][3]: partial_in = 96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=-48 -> result=78
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=48 -> result=111
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=48 -> result=48
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=96 -> result=33
  PE[1][0]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[1][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][3]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][0]: input=30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[2][2]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       78      111       48       33 
  Row 1:      -10       10       10       20 
  Row 2:        0       30       60       30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │ 111 │  48 │  33 │
├─────┼─────┼─────┼─────┤
│ -10 │  10 │  10 │  20 │
├─────┼─────┼─────┼─────┤
│   0 │  30 │  60 │  30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -22
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = 33
  Row 3: input_block[3][0] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -10 (from PE[1][0])
  PE[0][1]: partial_in = 10 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = 20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 30 (from PE[2][1])
  PE[1][2]: partial_in = 60 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=-10 -> result=34
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=10 -> result=32
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=20 -> result=-2
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=30 -> result=-9
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=60 -> result=21
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=30 -> result=-48
  PE[2][0]: input=33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[2][2]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[2][3]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       34       32       10       -2 
  Row 1:       39       -9       21      -48 
  Row 2:        0       33       66       33 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │  32 │  10 │  -2 │
├─────┼─────┼─────┼─────┤
│  39 │  -9 │  21 │ -48 │
├─────┼─────┼─────┼─────┤
│   0 │  33 │  66 │  33 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -32
  Row 2: input_block[2][2] = -20
  Row 3: input_block[3][1] = 60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = -48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 33 (from PE[2][1])
  PE[1][2]: partial_in = 66 (from PE[2][2])
  PE[1][3]: partial_in = 33 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=33 -> result=1
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=66 -> result=34
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=33 -> result=-31
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=56 -> result=36
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=28 -> result=-12
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=60 * weight=1 = 60, partial_in=0 -> result=60
  PE[3][1]: input=60 * weight=2 = 120, partial_in=0 -> result=120
  PE[3][2]: input=60 * weight=1 = 60, partial_in=0 -> result=60
  PE[3][3]: input=60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39       -9       21      -48 
  Row 1:       32        1       34      -31 
  Row 2:       28       36      -12      -20 
  Row 3:       60      120       60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │  -9 │  21 │ -48 │
├─────┼─────┼─────┼─────┤
│  32 │   1 │  34 │ -31 │
├─────┼─────┼─────┼─────┤
│  28 │  36 │ -12 │ -20 │
├─────┼─────┼─────┼─────┤
│  60 │ 120 │  60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -39
  Row 3: input_block[3][2] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = -31 (from PE[1][3])
  PE[1][0]: partial_in = 28 (from PE[2][0])
  PE[1][1]: partial_in = 36 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = 60 (from PE[3][0])
  PE[2][1]: partial_in = 120 (from PE[3][1])
  PE[2][2]: partial_in = 60 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=28 -> result=28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-20 -> result=-20
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=60 -> result=60
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=120 -> result=81
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=60 -> result=-18
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       32        1       34      -31 
  Row 1:       28       36      -12      -20 
  Row 2:       60       81      -18      -39 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │   1 │  34 │ -31 │
├─────┼─────┼─────┼─────┤
│  28 │  36 │ -12 │ -20 │
├─────┼─────┼─────┼─────┤
│  60 │  81 │ -18 │ -39 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = 60 (from PE[2][0])
  PE[1][1]: partial_in = 81 (from PE[2][1])
  PE[1][2]: partial_in = -18 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=28 -> result=28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-20 -> result=-20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[1][1]: input=0 * weight=1 = 0, partial_in=81 -> result=81
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=0 * weight=1 = 0, partial_in=20 -> result=20
  PE[2][2]: input=0 * weight=2 = 0, partial_in=10 -> result=10
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       28       36      -12      -20 
  Row 1:       60       81      -18      -39 
  Row 2:       10       20       10        0 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  36 │ -12 │ -20 │
├─────┼─────┼─────┼─────┤
│  60 │  81 │ -18 │ -39 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       28       36      -12      -20 
Row 1:       60       81      -18      -39 
Row 2:       10       20       10        0 
Row 3:      -26      -52      -26        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 28 -> clamp(28) -> final(156)
  PE[0][1]: 36 -> clamp(36) -> final(164)
  PE[0][2]: -12 -> clamp(-12) -> final(116)
  PE[0][3]: -20 -> clamp(-20) -> final(108)
  PE[1][0]: 60 -> clamp(60) -> final(188)
  PE[1][1]: 81 -> clamp(81) -> final(209)
  PE[1][2]: -18 -> clamp(-18) -> final(110)
  PE[1][3]: -39 -> clamp(-39) -> final(89)
  PE[2][0]: 10 -> clamp(10) -> final(138)
  PE[2][1]: 20 -> clamp(20) -> final(148)
  PE[2][2]: 10 -> clamp(10) -> final(138)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -26 -> clamp(-26) -> final(102)
  PE[3][1]: -52 -> clamp(-52) -> final(76)
  PE[3][2]: -26 -> clamp(-26) -> final(102)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   156    164    116    108 
   188    209    110     89 
   138    148    138    128 
   102     76    102    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -26    5    3  -50 
 -39   -4   17    1 
 -33   -1   23   33 
 -12  -11  -21  -19 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       52       26        0      -26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 5
  Row 1: input_block[1][0] = -39
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=5 * weight=-2 = -10, partial_in=0 -> result=-10
  PE[0][1]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[0][2]: input=5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -10       -5        0        5 
  Row 1:       39      -39      -39      -78 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -10 │  -5 │   0 │   5 │
├─────┼─────┼─────┼─────┤
│  39 │ -39 │ -39 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 3
  Row 1: input_block[1][1] = -4
  Row 2: input_block[2][0] = -33
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -39 (from PE[1][2])
  PE[0][3]: partial_in = -78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=39 -> result=33
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=-39 -> result=-42
  PE[0][2]: input=3 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[0][3]: input=3 * weight=1 = 3, partial_in=-78 -> result=-75
  PE[1][0]: input=-4 * weight=-1 = 4, partial_in=0 -> result=4
  PE[1][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[1][3]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       33      -42      -39      -75 
  Row 1:        4       -4       -4       -8 
  Row 2:        0      -33      -66      -33 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │ -42 │ -39 │ -75 │
├─────┼─────┼─────┼─────┤
│   4 │  -4 │  -4 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │ -33 │ -66 │ -33 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -50
  Row 1: input_block[1][2] = 17
  Row 2: input_block[2][1] = -1
  Row 3: input_block[3][0] = -12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 4 (from PE[1][0])
  PE[0][1]: partial_in = -4 (from PE[1][1])
  PE[0][2]: partial_in = -4 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-50 * weight=-2 = 100, partial_in=4 -> result=104
  PE[0][1]: input=-50 * weight=-1 = 50, partial_in=-4 -> result=46
  PE[0][2]: input=-50 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[0][3]: input=-50 * weight=1 = -50, partial_in=-8 -> result=-58
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=-33 -> result=-16
  PE[1][2]: input=17 * weight=1 = 17, partial_in=-66 -> result=-49
  PE[1][3]: input=17 * weight=2 = 34, partial_in=-33 -> result=1
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][1]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[3][2]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][3]: input=-12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      104       46       -4      -58 
  Row 1:      -17      -16      -49        1 
  Row 2:        0       -1       -2       -1 
  Row 3:      -12      -24      -12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 104 │  46 │  -4 │ -58 │
├─────┼─────┼─────┼─────┤
│ -17 │ -16 │ -49 │   1 │
├─────┼─────┼─────┼─────┤
│   0 │  -1 │  -2 │  -1 │
├─────┼─────┼─────┼─────┤
│ -12 │ -24 │ -12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 1
  Row 2: input_block[2][2] = 23
  Row 3: input_block[3][1] = -11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -49 (from PE[1][2])
  PE[0][3]: partial_in = 1 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -1 (from PE[2][1])
  PE[1][2]: partial_in = -2 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = -12 (from PE[3][0])
  PE[2][1]: partial_in = -24 (from PE[3][1])
  PE[2][2]: partial_in = -12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-49 -> result=-49
  PE[0][3]: input=0 * weight=1 = 0, partial_in=1 -> result=1
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=-1 -> result=0
  PE[1][2]: input=1 * weight=1 = 1, partial_in=-2 -> result=-1
  PE[1][3]: input=1 * weight=2 = 2, partial_in=-1 -> result=1
  PE[2][0]: input=23 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[2][1]: input=23 * weight=1 = 23, partial_in=-24 -> result=-1
  PE[2][2]: input=23 * weight=2 = 46, partial_in=-12 -> result=34
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][1]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[3][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][3]: input=-11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -17      -16      -49        1 
  Row 1:       -1        0       -1        1 
  Row 2:      -12       -1       34       23 
  Row 3:      -11      -22      -11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │ -16 │ -49 │   1 │
├─────┼─────┼─────┼─────┤
│  -1 │   0 │  -1 │   1 │
├─────┼─────┼─────┼─────┤
│ -12 │  -1 │  34 │  23 │
├─────┼─────┼─────┼─────┤
│ -11 │ -22 │ -11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 33
  Row 3: input_block[3][2] = -21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = -1 (from PE[1][2])
  PE[0][3]: partial_in = 1 (from PE[1][3])
  PE[1][0]: partial_in = -12 (from PE[2][0])
  PE[1][1]: partial_in = -1 (from PE[2][1])
  PE[1][2]: partial_in = 34 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = -11 (from PE[3][0])
  PE[2][1]: partial_in = -22 (from PE[3][1])
  PE[2][2]: partial_in = -11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[0][3]: input=0 * weight=1 = 0, partial_in=1 -> result=1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-12 -> result=-12
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][2]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][3]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][0]: input=33 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[2][1]: input=33 * weight=1 = 33, partial_in=-22 -> result=11
  PE[2][2]: input=33 * weight=2 = 66, partial_in=-11 -> result=55
  PE[2][3]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][0]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][1]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[3][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][3]: input=-21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -1        0       -1        1 
  Row 1:      -12       -1       34       23 
  Row 2:      -11       11       55       33 
  Row 3:      -21      -42      -21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │   0 │  -1 │   1 │
├─────┼─────┼─────┼─────┤
│ -12 │  -1 │  34 │  23 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  55 │  33 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = -1 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = 23 (from PE[1][3])
  PE[1][0]: partial_in = -11 (from PE[2][0])
  PE[1][1]: partial_in = 11 (from PE[2][1])
  PE[1][2]: partial_in = 55 (from PE[2][2])
  PE[1][3]: partial_in = 33 (from PE[2][3])
  PE[2][0]: partial_in = -21 (from PE[3][0])
  PE[2][1]: partial_in = -42 (from PE[3][1])
  PE[2][2]: partial_in = -21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=23 -> result=23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-11 -> result=-11
  PE[1][1]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][2]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][3]: input=0 * weight=2 = 0, partial_in=33 -> result=33
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-21 -> result=-21
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][1]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[3][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][3]: input=-19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -12       -1       34       23 
  Row 1:      -11       11       55       33 
  Row 2:      -21      -42      -21        0 
  Row 3:      -19      -38      -19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  -1 │  34 │  23 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  55 │  33 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
├─────┼─────┼─────┼─────┤
│ -19 │ -38 │ -19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -12       -1       34       23 
Row 1:      -11       11       55       33 
Row 2:      -21      -42      -21        0 
Row 3:      -19      -38      -19        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -12 -> clamp(-12) -> final(116)
  PE[0][1]: -1 -> clamp(-1) -> final(127)
  PE[0][2]: 34 -> clamp(34) -> final(162)
  PE[0][3]: 23 -> clamp(23) -> final(151)
  PE[1][0]: -11 -> clamp(-11) -> final(117)
  PE[1][1]: 11 -> clamp(11) -> final(139)
  PE[1][2]: 55 -> clamp(55) -> final(183)
  PE[1][3]: 33 -> clamp(33) -> final(161)
  PE[2][0]: -21 -> clamp(-21) -> final(107)
  PE[2][1]: -42 -> clamp(-42) -> final(86)
  PE[2][2]: -21 -> clamp(-21) -> final(107)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -19 -> clamp(-19) -> final(109)
  PE[3][1]: -38 -> clamp(-38) -> final(90)
  PE[3][2]: -19 -> clamp(-19) -> final(109)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   116    127    162    151 
   117    139    183    161 
   107     86    107    128 
   109     90    109    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -45   -1    6  -27 
 -10    9   13   12 
  11    9   18   53 
  -1    0   15   63 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -45
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=0 -> result=90
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       90       45        0      -45 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │  45 │   0 │ -45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -1
  Row 1: input_block[1][0] = -10
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=0 -> result=2
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        2        1        0       -1 
  Row 1:       10      -10      -10      -20 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   2 │   1 │   0 │  -1 │
├─────┼─────┼─────┼─────┤
│  10 │ -10 │ -10 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 6
  Row 1: input_block[1][1] = 9
  Row 2: input_block[2][0] = 11
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -10 (from PE[1][1])
  PE[0][2]: partial_in = -10 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=10 -> result=-2
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=-10 -> result=-16
  PE[0][2]: input=6 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[0][3]: input=6 * weight=1 = 6, partial_in=-20 -> result=-14
  PE[1][0]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[1][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][3]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][0]: input=11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[2][2]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -2      -16      -10      -14 
  Row 1:       -9        9        9       18 
  Row 2:        0       11       22       11 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │ -16 │ -10 │ -14 │
├─────┼─────┼─────┼─────┤
│  -9 │   9 │   9 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │  11 │  22 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = 13
  Row 2: input_block[2][1] = 9
  Row 3: input_block[3][0] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 9 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 11 (from PE[2][1])
  PE[1][2]: partial_in = 22 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=-9 -> result=45
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=9 -> result=36
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=9 -> result=9
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=18 -> result=-9
  PE[1][0]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[1][1]: input=13 * weight=1 = 13, partial_in=11 -> result=24
  PE[1][2]: input=13 * weight=1 = 13, partial_in=22 -> result=35
  PE[1][3]: input=13 * weight=2 = 26, partial_in=11 -> result=37
  PE[2][0]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[2][2]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       45       36        9       -9 
  Row 1:      -13       24       35       37 
  Row 2:        0        9       18        9 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  45 │  36 │   9 │  -9 │
├─────┼─────┼─────┼─────┤
│ -13 │  24 │  35 │  37 │
├─────┼─────┼─────┼─────┤
│   0 │   9 │  18 │   9 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 12
  Row 2: input_block[2][2] = 18
  Row 3: input_block[3][1] = 0

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -13 (from PE[1][0])
  PE[0][1]: partial_in = 24 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 37 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 18 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-13 -> result=-13
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=24 -> result=24
  PE[0][2]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=37 -> result=37
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=9 -> result=21
  PE[1][2]: input=12 * weight=1 = 12, partial_in=18 -> result=30
  PE[1][3]: input=12 * weight=2 = 24, partial_in=9 -> result=33
  PE[2][0]: input=18 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=18 * weight=1 = 18, partial_in=-2 -> result=16
  PE[2][2]: input=18 * weight=2 = 36, partial_in=-1 -> result=35
  PE[2][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -13       24       35       37 
  Row 1:      -12       21       30       33 
  Row 2:       -1       16       35       18 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -13 │  24 │  35 │  37 │
├─────┼─────┼─────┼─────┤
│ -12 │  21 │  30 │  33 │
├─────┼─────┼─────┼─────┤
│  -1 │  16 │  35 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 53
  Row 3: input_block[3][2] = 15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 21 (from PE[1][1])
  PE[0][2]: partial_in = 30 (from PE[1][2])
  PE[0][3]: partial_in = 33 (from PE[1][3])
  PE[1][0]: partial_in = -1 (from PE[2][0])
  PE[1][1]: partial_in = 16 (from PE[2][1])
  PE[1][2]: partial_in = 35 (from PE[2][2])
  PE[1][3]: partial_in = 18 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=21 -> result=21
  PE[0][2]: input=0 * weight=0 = 0, partial_in=30 -> result=30
  PE[0][3]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=16 -> result=16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=35 -> result=35
  PE[1][3]: input=0 * weight=2 = 0, partial_in=18 -> result=18
  PE[2][0]: input=53 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[2][2]: input=53 * weight=2 = 106, partial_in=0 -> result=106
  PE[2][3]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][0]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][1]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[3][2]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][3]: input=15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -12       21       30       33 
  Row 1:       -1       16       35       18 
  Row 2:        0       53      106       53 
  Row 3:       15       30       15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  21 │  30 │  33 │
├─────┼─────┼─────┼─────┤
│  -1 │  16 │  35 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │  53 │ 106 │  53 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 63

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 16 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 53 (from PE[2][1])
  PE[1][2]: partial_in = 106 (from PE[2][2])
  PE[1][3]: partial_in = 53 (from PE[2][3])
  PE[2][0]: partial_in = 15 (from PE[3][0])
  PE[2][1]: partial_in = 30 (from PE[3][1])
  PE[2][2]: partial_in = 15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-1 -> result=-1
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=53 -> result=53
  PE[1][2]: input=0 * weight=1 = 0, partial_in=106 -> result=106
  PE[1][3]: input=0 * weight=2 = 0, partial_in=53 -> result=53
  PE[2][0]: input=0 * weight=0 = 0, partial_in=15 -> result=15
  PE[2][1]: input=0 * weight=1 = 0, partial_in=30 -> result=30
  PE[2][2]: input=0 * weight=2 = 0, partial_in=15 -> result=15
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[3][1]: input=63 * weight=2 = 126, partial_in=0 -> result=126
  PE[3][2]: input=63 * weight=1 = 63, partial_in=0 -> result=63
  PE[3][3]: input=63 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -1       16       35       18 
  Row 1:        0       53      106       53 
  Row 2:       15       30       15        0 
  Row 3:       63      126       63        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -1 │  16 │  35 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │  53 │ 106 │  53 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
├─────┼─────┼─────┼─────┤
│  63 │ 126 │  63 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -1       16       35       18 
Row 1:        0       53      106       53 
Row 2:       15       30       15        0 
Row 3:       63      126       63        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -1 -> clamp(-1) -> final(127)
  PE[0][1]: 16 -> clamp(16) -> final(144)
  PE[0][2]: 35 -> clamp(35) -> final(163)
  PE[0][3]: 18 -> clamp(18) -> final(146)
  PE[1][0]: 0 -> clamp(0) -> final(128)
  PE[1][1]: 53 -> clamp(53) -> final(181)
  PE[1][2]: 106 -> clamp(106) -> final(234)
  PE[1][3]: 53 -> clamp(53) -> final(181)
  PE[2][0]: 15 -> clamp(15) -> final(143)
  PE[2][1]: 30 -> clamp(30) -> final(158)
  PE[2][2]: 15 -> clamp(15) -> final(143)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 63 -> clamp(63) -> final(191)
  PE[3][1]: 126 -> clamp(126) -> final(254)
  PE[3][2]: 63 -> clamp(63) -> final(191)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   127    144    163    146 
   128    181    234    181 
   143    158    143    128 
   191    254    191    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -78  -66    6   21 
 -32  -64  -20   19 
  27  -55  -56    3 
  56  -43  -83  -29 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -78
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-78 * weight=-2 = 156, partial_in=0 -> result=156
  PE[0][1]: input=-78 * weight=-1 = 78, partial_in=0 -> result=78
  PE[0][2]: input=-78 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      156       78        0      -78 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 156 │  78 │   0 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -66
  Row 1: input_block[1][0] = -32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-66 * weight=-2 = 132, partial_in=0 -> result=132
  PE[0][1]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[0][2]: input=-66 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      132       66        0      -66 
  Row 1:       32      -32      -32      -64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 132 │  66 │   0 │ -66 │
├─────┼─────┼─────┼─────┤
│  32 │ -32 │ -32 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 6
  Row 1: input_block[1][1] = -64
  Row 2: input_block[2][0] = 27
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=32 -> result=20
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=-32 -> result=-38
  PE[0][2]: input=6 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=6 * weight=1 = 6, partial_in=-64 -> result=-58
  PE[1][0]: input=-64 * weight=-1 = 64, partial_in=0 -> result=64
  PE[1][1]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[1][2]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[1][3]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[2][0]: input=27 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[2][2]: input=27 * weight=2 = 54, partial_in=0 -> result=54
  PE[2][3]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       20      -38      -32      -58 
  Row 1:       64      -64      -64     -128 
  Row 2:        0       27       54       27 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -38 │ -32 │ -58 │
├─────┼─────┼─────┼─────┤
│  64 │ -64 │ -64 │-128 │
├─────┼─────┼─────┼─────┤
│   0 │  27 │  54 │  27 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 21
  Row 1: input_block[1][2] = -20
  Row 2: input_block[2][1] = -55
  Row 3: input_block[3][0] = 56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 64 (from PE[1][0])
  PE[0][1]: partial_in = -64 (from PE[1][1])
  PE[0][2]: partial_in = -64 (from PE[1][2])
  PE[0][3]: partial_in = -128 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 27 (from PE[2][1])
  PE[1][2]: partial_in = 54 (from PE[2][2])
  PE[1][3]: partial_in = 27 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=21 * weight=-2 = -42, partial_in=64 -> result=22
  PE[0][1]: input=21 * weight=-1 = -21, partial_in=-64 -> result=-85
  PE[0][2]: input=21 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[0][3]: input=21 * weight=1 = 21, partial_in=-128 -> result=-107
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=27 -> result=7
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=54 -> result=34
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=27 -> result=-13
  PE[2][0]: input=-55 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[2][2]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[2][3]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][0]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][1]: input=56 * weight=2 = 112, partial_in=0 -> result=112
  PE[3][2]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][3]: input=56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       22      -85      -64     -107 
  Row 1:       20        7       34      -13 
  Row 2:        0      -55     -110      -55 
  Row 3:       56      112       56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │ -85 │ -64 │-107 │
├─────┼─────┼─────┼─────┤
│  20 │   7 │  34 │ -13 │
├─────┼─────┼─────┼─────┤
│   0 │ -55 │-110 │ -55 │
├─────┼─────┼─────┼─────┤
│  56 │ 112 │  56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 19
  Row 2: input_block[2][2] = -56
  Row 3: input_block[3][1] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = 7 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = -13 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -55 (from PE[2][1])
  PE[1][2]: partial_in = -110 (from PE[2][2])
  PE[1][3]: partial_in = -55 (from PE[2][3])
  PE[2][0]: partial_in = 56 (from PE[3][0])
  PE[2][1]: partial_in = 112 (from PE[3][1])
  PE[2][2]: partial_in = 56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=7 -> result=7
  PE[0][2]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][0]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[1][1]: input=19 * weight=1 = 19, partial_in=-55 -> result=-36
  PE[1][2]: input=19 * weight=1 = 19, partial_in=-110 -> result=-91
  PE[1][3]: input=19 * weight=2 = 38, partial_in=-55 -> result=-17
  PE[2][0]: input=-56 * weight=0 = 0, partial_in=56 -> result=56
  PE[2][1]: input=-56 * weight=1 = -56, partial_in=112 -> result=56
  PE[2][2]: input=-56 * weight=2 = -112, partial_in=56 -> result=-56
  PE[2][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       20        7       34      -13 
  Row 1:      -19      -36      -91      -17 
  Row 2:       56       56      -56      -56 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │   7 │  34 │ -13 │
├─────┼─────┼─────┼─────┤
│ -19 │ -36 │ -91 │ -17 │
├─────┼─────┼─────┼─────┤
│  56 │  56 │ -56 │ -56 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 3
  Row 3: input_block[3][2] = -83

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -19 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -91 (from PE[1][2])
  PE[0][3]: partial_in = -17 (from PE[1][3])
  PE[1][0]: partial_in = 56 (from PE[2][0])
  PE[1][1]: partial_in = 56 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -56 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-19 -> result=-19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-17 -> result=-17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=56 -> result=56
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-56 -> result=-56
  PE[2][0]: input=3 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=3 * weight=1 = 3, partial_in=-86 -> result=-83
  PE[2][2]: input=3 * weight=2 = 6, partial_in=-43 -> result=-37
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[3][1]: input=-83 * weight=2 = -166, partial_in=0 -> result=-166
  PE[3][2]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[3][3]: input=-83 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -19      -36      -91      -17 
  Row 1:       56       56      -56      -56 
  Row 2:      -43      -83      -37        3 
  Row 3:      -83     -166      -83        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -19 │ -36 │ -91 │ -17 │
├─────┼─────┼─────┼─────┤
│  56 │  56 │ -56 │ -56 │
├─────┼─────┼─────┼─────┤
│ -43 │ -83 │ -37 │   3 │
├─────┼─────┼─────┼─────┤
│ -83 │-166 │ -83 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 56 (from PE[1][0])
  PE[0][1]: partial_in = 56 (from PE[1][1])
  PE[0][2]: partial_in = -56 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -83 (from PE[2][1])
  PE[1][2]: partial_in = -37 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = -83 (from PE[3][0])
  PE[2][1]: partial_in = -166 (from PE[3][1])
  PE[2][2]: partial_in = -83 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=56 -> result=56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-83 -> result=-83
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][3]: input=0 * weight=2 = 0, partial_in=3 -> result=3
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-83 -> result=-83
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-166 -> result=-166
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-83 -> result=-83
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       56       56      -56      -56 
  Row 1:      -43      -83      -37        3 
  Row 2:      -83     -166      -83        0 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │  56 │ -56 │ -56 │
├─────┼─────┼─────┼─────┤
│ -43 │ -83 │ -37 │   3 │
├─────┼─────┼─────┼─────┤
│ -83 │-166 │ -83 │   0 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       56       56      -56      -56 
Row 1:      -43      -83      -37        3 
Row 2:      -83     -166      -83        0 
Row 3:      -29      -58      -29        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 56 -> clamp(56) -> final(184)
  PE[0][1]: 56 -> clamp(56) -> final(184)
  PE[0][2]: -56 -> clamp(-56) -> final(72)
  PE[0][3]: -56 -> clamp(-56) -> final(72)
  PE[1][0]: -43 -> clamp(-43) -> final(85)
  PE[1][1]: -83 -> clamp(-83) -> final(45)
  PE[1][2]: -37 -> clamp(-37) -> final(91)
  PE[1][3]: 3 -> clamp(3) -> final(131)
  PE[2][0]: -83 -> clamp(-83) -> final(45)
  PE[2][1]: -166 -> clamp(-128) -> final(0)
  PE[2][2]: -83 -> clamp(-83) -> final(45)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -29 -> clamp(-29) -> final(99)
  PE[3][1]: -58 -> clamp(-58) -> final(70)
  PE[3][2]: -29 -> clamp(-29) -> final(99)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   184    184     72     72 
    85     45     91    131 
    45      0     45    128 
    99     70     99    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  29   43   48   59 
  11   26   32   44 
   6   13   14   22 
 -15  -19  -29  -27 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 29
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=29 * weight=-2 = -58, partial_in=0 -> result=-58
  PE[0][1]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[0][2]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -58      -29        0       29 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │ -29 │   0 │  29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 43
  Row 1: input_block[1][0] = 11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=43 * weight=-2 = -86, partial_in=0 -> result=-86
  PE[0][1]: input=43 * weight=-1 = -43, partial_in=0 -> result=-43
  PE[0][2]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][3]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -86      -43        0       43 
  Row 1:      -11       11       11       22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -86 │ -43 │   0 │  43 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  11 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 48
  Row 1: input_block[1][1] = 26
  Row 2: input_block[2][0] = 6
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=48 * weight=-2 = -96, partial_in=-11 -> result=-107
  PE[0][1]: input=48 * weight=-1 = -48, partial_in=11 -> result=-37
  PE[0][2]: input=48 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=48 * weight=1 = 48, partial_in=22 -> result=70
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][2]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][3]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][0]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[2][2]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[2][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -107      -37       11       70 
  Row 1:      -26       26       26       52 
  Row 2:        0        6       12        6 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-107 │ -37 │  11 │  70 │
├─────┼─────┼─────┼─────┤
│ -26 │  26 │  26 │  52 │
├─────┼─────┼─────┼─────┤
│   0 │   6 │  12 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 59
  Row 1: input_block[1][2] = 32
  Row 2: input_block[2][1] = 13
  Row 3: input_block[3][0] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 26 (from PE[1][1])
  PE[0][2]: partial_in = 26 (from PE[1][2])
  PE[0][3]: partial_in = 52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 6 (from PE[2][1])
  PE[1][2]: partial_in = 12 (from PE[2][2])
  PE[1][3]: partial_in = 6 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=59 * weight=-2 = -118, partial_in=-26 -> result=-144
  PE[0][1]: input=59 * weight=-1 = -59, partial_in=26 -> result=-33
  PE[0][2]: input=59 * weight=0 = 0, partial_in=26 -> result=26
  PE[0][3]: input=59 * weight=1 = 59, partial_in=52 -> result=111
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=6 -> result=38
  PE[1][2]: input=32 * weight=1 = 32, partial_in=12 -> result=44
  PE[1][3]: input=32 * weight=2 = 64, partial_in=6 -> result=70
  PE[2][0]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[2][2]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -144      -33       26      111 
  Row 1:      -32       38       44       70 
  Row 2:        0       13       26       13 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-144 │ -33 │  26 │ 111 │
├─────┼─────┼─────┼─────┤
│ -32 │  38 │  44 │  70 │
├─────┼─────┼─────┼─────┤
│   0 │  13 │  26 │  13 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 44
  Row 2: input_block[2][2] = 14
  Row 3: input_block[3][1] = -19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 44 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = 26 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = -15 (from PE[3][0])
  PE[2][1]: partial_in = -30 (from PE[3][1])
  PE[2][2]: partial_in = -15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=44 -> result=44
  PE[0][3]: input=0 * weight=1 = 0, partial_in=70 -> result=70
  PE[1][0]: input=44 * weight=-1 = -44, partial_in=0 -> result=-44
  PE[1][1]: input=44 * weight=1 = 44, partial_in=13 -> result=57
  PE[1][2]: input=44 * weight=1 = 44, partial_in=26 -> result=70
  PE[1][3]: input=44 * weight=2 = 88, partial_in=13 -> result=101
  PE[2][0]: input=14 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[2][1]: input=14 * weight=1 = 14, partial_in=-30 -> result=-16
  PE[2][2]: input=14 * weight=2 = 28, partial_in=-15 -> result=13
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][1]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[3][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][3]: input=-19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -32       38       44       70 
  Row 1:      -44       57       70      101 
  Row 2:      -15      -16       13       14 
  Row 3:      -19      -38      -19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │  38 │  44 │  70 │
├─────┼─────┼─────┼─────┤
│ -44 │  57 │  70 │ 101 │
├─────┼─────┼─────┼─────┤
│ -15 │ -16 │  13 │  14 │
├─────┼─────┼─────┼─────┤
│ -19 │ -38 │ -19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 22
  Row 3: input_block[3][2] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -44 (from PE[1][0])
  PE[0][1]: partial_in = 57 (from PE[1][1])
  PE[0][2]: partial_in = 70 (from PE[1][2])
  PE[0][3]: partial_in = 101 (from PE[1][3])
  PE[1][0]: partial_in = -15 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = 13 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = -19 (from PE[3][0])
  PE[2][1]: partial_in = -38 (from PE[3][1])
  PE[2][2]: partial_in = -19 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-44 -> result=-44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=57 -> result=57
  PE[0][2]: input=0 * weight=0 = 0, partial_in=70 -> result=70
  PE[0][3]: input=0 * weight=1 = 0, partial_in=101 -> result=101
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=13 -> result=13
  PE[1][3]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][0]: input=22 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[2][1]: input=22 * weight=1 = 22, partial_in=-38 -> result=-16
  PE[2][2]: input=22 * weight=2 = 44, partial_in=-19 -> result=25
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -44       57       70      101 
  Row 1:      -15      -16       13       14 
  Row 2:      -19      -16       25       22 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │  57 │  70 │ 101 │
├─────┼─────┼─────┼─────┤
│ -15 │ -16 │  13 │  14 │
├─────┼─────┼─────┼─────┤
│ -19 │ -16 │  25 │  22 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = 13 (from PE[1][2])
  PE[0][3]: partial_in = 14 (from PE[1][3])
  PE[1][0]: partial_in = -19 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = 25 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-15 -> result=-15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=13 -> result=13
  PE[0][3]: input=0 * weight=1 = 0, partial_in=14 -> result=14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-19 -> result=-19
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=25 -> result=25
  PE[1][3]: input=0 * weight=2 = 0, partial_in=22 -> result=22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-29 -> result=-29
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -15      -16       13       14 
  Row 1:      -19      -16       25       22 
  Row 2:      -29      -58      -29        0 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │ -16 │  13 │  14 │
├─────┼─────┼─────┼─────┤
│ -19 │ -16 │  25 │  22 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -15      -16       13       14 
Row 1:      -19      -16       25       22 
Row 2:      -29      -58      -29        0 
Row 3:      -27      -54      -27        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -15 -> clamp(-15) -> final(113)
  PE[0][1]: -16 -> clamp(-16) -> final(112)
  PE[0][2]: 13 -> clamp(13) -> final(141)
  PE[0][3]: 14 -> clamp(14) -> final(142)
  PE[1][0]: -19 -> clamp(-19) -> final(109)
  PE[1][1]: -16 -> clamp(-16) -> final(112)
  PE[1][2]: 25 -> clamp(25) -> final(153)
  PE[1][3]: 22 -> clamp(22) -> final(150)
  PE[2][0]: -29 -> clamp(-29) -> final(99)
  PE[2][1]: -58 -> clamp(-58) -> final(70)
  PE[2][2]: -29 -> clamp(-29) -> final(99)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -27 -> clamp(-27) -> final(101)
  PE[3][1]: -54 -> clamp(-54) -> final(74)
  PE[3][2]: -27 -> clamp(-27) -> final(101)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   113    112    141    142 
   109    112    153    150 
    99     70     99    128 
   101     74    101    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  83   70    1  -64 
  64   50   -6  -56 
  36   25   -9  -33 
 -15  -21  -34  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 83
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=83 * weight=-2 = -166, partial_in=0 -> result=-166
  PE[0][1]: input=83 * weight=-1 = -83, partial_in=0 -> result=-83
  PE[0][2]: input=83 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=83 * weight=1 = 83, partial_in=0 -> result=83
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:     -166      -83        0       83 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-166 │ -83 │   0 │  83 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 70
  Row 1: input_block[1][0] = 64
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=70 * weight=-2 = -140, partial_in=0 -> result=-140
  PE[0][1]: input=70 * weight=-1 = -70, partial_in=0 -> result=-70
  PE[0][2]: input=70 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[1][0]: input=64 * weight=-1 = -64, partial_in=0 -> result=-64
  PE[1][1]: input=64 * weight=1 = 64, partial_in=0 -> result=64
  PE[1][2]: input=64 * weight=1 = 64, partial_in=0 -> result=64
  PE[1][3]: input=64 * weight=2 = 128, partial_in=0 -> result=128
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -140      -70        0       70 
  Row 1:      -64       64       64      128 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-140 │ -70 │   0 │  70 │
├─────┼─────┼─────┼─────┤
│ -64 │  64 │  64 │ 128 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 1
  Row 1: input_block[1][1] = 50
  Row 2: input_block[2][0] = 36
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -64 (from PE[1][0])
  PE[0][1]: partial_in = 64 (from PE[1][1])
  PE[0][2]: partial_in = 64 (from PE[1][2])
  PE[0][3]: partial_in = 128 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=-64 -> result=-66
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=64 -> result=63
  PE[0][2]: input=1 * weight=0 = 0, partial_in=64 -> result=64
  PE[0][3]: input=1 * weight=1 = 1, partial_in=128 -> result=129
  PE[1][0]: input=50 * weight=-1 = -50, partial_in=0 -> result=-50
  PE[1][1]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[1][2]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[1][3]: input=50 * weight=2 = 100, partial_in=0 -> result=100
  PE[2][0]: input=36 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[2][2]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][3]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -66       63       64      129 
  Row 1:      -50       50       50      100 
  Row 2:        0       36       72       36 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │  63 │  64 │ 129 │
├─────┼─────┼─────┼─────┤
│ -50 │  50 │  50 │ 100 │
├─────┼─────┼─────┼─────┤
│   0 │  36 │  72 │  36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -64
  Row 1: input_block[1][2] = -6
  Row 2: input_block[2][1] = 25
  Row 3: input_block[3][0] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -50 (from PE[1][0])
  PE[0][1]: partial_in = 50 (from PE[1][1])
  PE[0][2]: partial_in = 50 (from PE[1][2])
  PE[0][3]: partial_in = 100 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 36 (from PE[2][1])
  PE[1][2]: partial_in = 72 (from PE[2][2])
  PE[1][3]: partial_in = 36 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-64 * weight=-2 = 128, partial_in=-50 -> result=78
  PE[0][1]: input=-64 * weight=-1 = 64, partial_in=50 -> result=114
  PE[0][2]: input=-64 * weight=0 = 0, partial_in=50 -> result=50
  PE[0][3]: input=-64 * weight=1 = -64, partial_in=100 -> result=36
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=36 -> result=30
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=72 -> result=66
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=36 -> result=24
  PE[2][0]: input=25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[2][2]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[2][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       78      114       50       36 
  Row 1:        6       30       66       24 
  Row 2:        0       25       50       25 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │ 114 │  50 │  36 │
├─────┼─────┼─────┼─────┤
│   6 │  30 │  66 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │  25 │  50 │  25 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -56
  Row 2: input_block[2][2] = -9
  Row 3: input_block[3][1] = -21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = 30 (from PE[1][1])
  PE[0][2]: partial_in = 66 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 25 (from PE[2][1])
  PE[1][2]: partial_in = 50 (from PE[2][2])
  PE[1][3]: partial_in = 25 (from PE[2][3])
  PE[2][0]: partial_in = -15 (from PE[3][0])
  PE[2][1]: partial_in = -30 (from PE[3][1])
  PE[2][2]: partial_in = -15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=6 -> result=6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=66 -> result=66
  PE[0][3]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[1][0]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[1][1]: input=-56 * weight=1 = -56, partial_in=25 -> result=-31
  PE[1][2]: input=-56 * weight=1 = -56, partial_in=50 -> result=-6
  PE[1][3]: input=-56 * weight=2 = -112, partial_in=25 -> result=-87
  PE[2][0]: input=-9 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[2][1]: input=-9 * weight=1 = -9, partial_in=-30 -> result=-39
  PE[2][2]: input=-9 * weight=2 = -18, partial_in=-15 -> result=-33
  PE[2][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][0]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][1]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[3][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][3]: input=-21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        6       30       66       24 
  Row 1:       56      -31       -6      -87 
  Row 2:      -15      -39      -33       -9 
  Row 3:      -21      -42      -21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │  30 │  66 │  24 │
├─────┼─────┼─────┼─────┤
│  56 │ -31 │  -6 │ -87 │
├─────┼─────┼─────┼─────┤
│ -15 │ -39 │ -33 │  -9 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -33
  Row 3: input_block[3][2] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 56 (from PE[1][0])
  PE[0][1]: partial_in = -31 (from PE[1][1])
  PE[0][2]: partial_in = -6 (from PE[1][2])
  PE[0][3]: partial_in = -87 (from PE[1][3])
  PE[1][0]: partial_in = -15 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -33 (from PE[2][2])
  PE[1][3]: partial_in = -9 (from PE[2][3])
  PE[2][0]: partial_in = -21 (from PE[3][0])
  PE[2][1]: partial_in = -42 (from PE[3][1])
  PE[2][2]: partial_in = -21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=56 -> result=56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-31 -> result=-31
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-87 -> result=-87
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-33 -> result=-33
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-9 -> result=-9
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=-42 -> result=-75
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=-21 -> result=-87
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       56      -31       -6      -87 
  Row 1:      -15      -39      -33       -9 
  Row 2:      -21      -75      -87      -33 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │ -31 │  -6 │ -87 │
├─────┼─────┼─────┼─────┤
│ -15 │ -39 │ -33 │  -9 │
├─────┼─────┼─────┼─────┤
│ -21 │ -75 │ -87 │ -33 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -33 (from PE[1][2])
  PE[0][3]: partial_in = -9 (from PE[1][3])
  PE[1][0]: partial_in = -21 (from PE[2][0])
  PE[1][1]: partial_in = -75 (from PE[2][1])
  PE[1][2]: partial_in = -87 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-15 -> result=-15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-9 -> result=-9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-21 -> result=-21
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-87 -> result=-87
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -15      -39      -33       -9 
  Row 1:      -21      -75      -87      -33 
  Row 2:      -34      -68      -34        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │ -39 │ -33 │  -9 │
├─────┼─────┼─────┼─────┤
│ -21 │ -75 │ -87 │ -33 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -15      -39      -33       -9 
Row 1:      -21      -75      -87      -33 
Row 2:      -34      -68      -34        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -15 -> clamp(-15) -> final(113)
  PE[0][1]: -39 -> clamp(-39) -> final(89)
  PE[0][2]: -33 -> clamp(-33) -> final(95)
  PE[0][3]: -9 -> clamp(-9) -> final(119)
  PE[1][0]: -21 -> clamp(-21) -> final(107)
  PE[1][1]: -75 -> clamp(-75) -> final(53)
  PE[1][2]: -87 -> clamp(-87) -> final(41)
  PE[1][3]: -33 -> clamp(-33) -> final(95)
  PE[2][0]: -34 -> clamp(-34) -> final(94)
  PE[2][1]: -68 -> clamp(-68) -> final(60)
  PE[2][2]: -34 -> clamp(-34) -> final(94)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   113     89     95    119 
   107     53     41     95 
    94     60     94    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -43  -54  -63  -65 
 -54  -54  -54  -55 
 -58  -52  -49  -52 
 -64  -56  -53  -58 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -43
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=0 -> result=86
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       86       43        0      -43 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  43 │   0 │ -43 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -54
  Row 1: input_block[1][0] = -54
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-54 * weight=-2 = 108, partial_in=0 -> result=108
  PE[0][1]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[0][2]: input=-54 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][0]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[1][1]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][2]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][3]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      108       54        0      -54 
  Row 1:       54      -54      -54     -108 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 108 │  54 │   0 │ -54 │
├─────┼─────┼─────┼─────┤
│  54 │ -54 │ -54 │-108 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -63
  Row 1: input_block[1][1] = -54
  Row 2: input_block[2][0] = -58
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 54 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = -108 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=54 -> result=180
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=-54 -> result=9
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=-108 -> result=-171
  PE[1][0]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[1][1]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][2]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][3]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[2][0]: input=-58 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[2][2]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[2][3]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      180        9      -54     -171 
  Row 1:       54      -54      -54     -108 
  Row 2:        0      -58     -116      -58 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 180 │   9 │ -54 │-171 │
├─────┼─────┼─────┼─────┤
│  54 │ -54 │ -54 │-108 │
├─────┼─────┼─────┼─────┤
│   0 │ -58 │-116 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -65
  Row 1: input_block[1][2] = -54
  Row 2: input_block[2][1] = -52
  Row 3: input_block[3][0] = -64

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 54 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = -108 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -116 (from PE[2][2])
  PE[1][3]: partial_in = -58 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-65 * weight=-2 = 130, partial_in=54 -> result=184
  PE[0][1]: input=-65 * weight=-1 = 65, partial_in=-54 -> result=11
  PE[0][2]: input=-65 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=-65 * weight=1 = -65, partial_in=-108 -> result=-173
  PE[1][0]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[1][1]: input=-54 * weight=1 = -54, partial_in=-58 -> result=-112
  PE[1][2]: input=-54 * weight=1 = -54, partial_in=-116 -> result=-170
  PE[1][3]: input=-54 * weight=2 = -108, partial_in=-58 -> result=-166
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=0 -> result=-104
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][1]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[3][2]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][3]: input=-64 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      184       11      -54     -173 
  Row 1:       54     -112     -170     -166 
  Row 2:        0      -52     -104      -52 
  Row 3:      -64     -128      -64        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 184 │  11 │ -54 │-173 │
├─────┼─────┼─────┼─────┤
│  54 │-112 │-170 │-166 │
├─────┼─────┼─────┼─────┤
│   0 │ -52 │-104 │ -52 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -55
  Row 2: input_block[2][2] = -49
  Row 3: input_block[3][1] = -56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 54 (from PE[1][0])
  PE[0][1]: partial_in = -112 (from PE[1][1])
  PE[0][2]: partial_in = -170 (from PE[1][2])
  PE[0][3]: partial_in = -166 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -52 (from PE[2][1])
  PE[1][2]: partial_in = -104 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -64 (from PE[3][0])
  PE[2][1]: partial_in = -128 (from PE[3][1])
  PE[2][2]: partial_in = -64 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=54 -> result=54
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-112 -> result=-112
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-170 -> result=-170
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-166 -> result=-166
  PE[1][0]: input=-55 * weight=-1 = 55, partial_in=0 -> result=55
  PE[1][1]: input=-55 * weight=1 = -55, partial_in=-52 -> result=-107
  PE[1][2]: input=-55 * weight=1 = -55, partial_in=-104 -> result=-159
  PE[1][3]: input=-55 * weight=2 = -110, partial_in=-52 -> result=-162
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=-128 -> result=-177
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=-64 -> result=-162
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][1]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[3][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][3]: input=-56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       54     -112     -170     -166 
  Row 1:       55     -107     -159     -162 
  Row 2:      -64     -177     -162      -49 
  Row 3:      -56     -112      -56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │-112 │-170 │-166 │
├─────┼─────┼─────┼─────┤
│  55 │-107 │-159 │-162 │
├─────┼─────┼─────┼─────┤
│ -64 │-177 │-162 │ -49 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -52
  Row 3: input_block[3][2] = -53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 55 (from PE[1][0])
  PE[0][1]: partial_in = -107 (from PE[1][1])
  PE[0][2]: partial_in = -159 (from PE[1][2])
  PE[0][3]: partial_in = -162 (from PE[1][3])
  PE[1][0]: partial_in = -64 (from PE[2][0])
  PE[1][1]: partial_in = -177 (from PE[2][1])
  PE[1][2]: partial_in = -162 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = -56 (from PE[3][0])
  PE[2][1]: partial_in = -112 (from PE[3][1])
  PE[2][2]: partial_in = -56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=55 -> result=55
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-107 -> result=-107
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-159 -> result=-159
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-64 -> result=-64
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-177 -> result=-177
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-112 -> result=-164
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-56 -> result=-160
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][1]: input=-53 * weight=2 = -106, partial_in=0 -> result=-106
  PE[3][2]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][3]: input=-53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       55     -107     -159     -162 
  Row 1:      -64     -177     -162      -49 
  Row 2:      -56     -164     -160      -52 
  Row 3:      -53     -106      -53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │-107 │-159 │-162 │
├─────┼─────┼─────┼─────┤
│ -64 │-177 │-162 │ -49 │
├─────┼─────┼─────┼─────┤
│ -56 │-164 │-160 │ -52 │
├─────┼─────┼─────┼─────┤
│ -53 │-106 │ -53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -64 (from PE[1][0])
  PE[0][1]: partial_in = -177 (from PE[1][1])
  PE[0][2]: partial_in = -162 (from PE[1][2])
  PE[0][3]: partial_in = -49 (from PE[1][3])
  PE[1][0]: partial_in = -56 (from PE[2][0])
  PE[1][1]: partial_in = -164 (from PE[2][1])
  PE[1][2]: partial_in = -160 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -53 (from PE[3][0])
  PE[2][1]: partial_in = -106 (from PE[3][1])
  PE[2][2]: partial_in = -53 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-64 -> result=-64
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-177 -> result=-177
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-162 -> result=-162
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-49 -> result=-49
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-56 -> result=-56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-164 -> result=-164
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-160 -> result=-160
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-53 -> result=-53
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-106 -> result=-106
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-53 -> result=-53
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][1]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[3][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][3]: input=-58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -64     -177     -162      -49 
  Row 1:      -56     -164     -160      -52 
  Row 2:      -53     -106      -53        0 
  Row 3:      -58     -116      -58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │-177 │-162 │ -49 │
├─────┼─────┼─────┼─────┤
│ -56 │-164 │-160 │ -52 │
├─────┼─────┼─────┼─────┤
│ -53 │-106 │ -53 │   0 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -64     -177     -162      -49 
Row 1:      -56     -164     -160      -52 
Row 2:      -53     -106      -53        0 
Row 3:      -58     -116      -58        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -64 -> clamp(-64) -> final(64)
  PE[0][1]: -177 -> clamp(-128) -> final(0)
  PE[0][2]: -162 -> clamp(-128) -> final(0)
  PE[0][3]: -49 -> clamp(-49) -> final(79)
  PE[1][0]: -56 -> clamp(-56) -> final(72)
  PE[1][1]: -164 -> clamp(-128) -> final(0)
  PE[1][2]: -160 -> clamp(-128) -> final(0)
  PE[1][3]: -52 -> clamp(-52) -> final(76)
  PE[2][0]: -53 -> clamp(-53) -> final(75)
  PE[2][1]: -106 -> clamp(-106) -> final(22)
  PE[2][2]: -53 -> clamp(-53) -> final(75)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -58 -> clamp(-58) -> final(70)
  PE[3][1]: -116 -> clamp(-116) -> final(12)
  PE[3][2]: -58 -> clamp(-58) -> final(70)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    64      0      0     79 
    72      0      0     76 
    75     22     75    128 
    70     12     70    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -67  -70  -68  -63 
 -60  -66  -65  -61 
 -56  -59  -62  -64 
 -61  -60  -64  -72 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -67
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-67 * weight=-2 = 134, partial_in=0 -> result=134
  PE[0][1]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[0][2]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      134       67        0      -67 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 134 │  67 │   0 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -70
  Row 1: input_block[1][0] = -60
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-70 * weight=-2 = 140, partial_in=0 -> result=140
  PE[0][1]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[0][2]: input=-70 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][0]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[1][1]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][3]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      140       70        0      -70 
  Row 1:       60      -60      -60     -120 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 140 │  70 │   0 │ -70 │
├─────┼─────┼─────┼─────┤
│  60 │ -60 │ -60 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -68
  Row 1: input_block[1][1] = -66
  Row 2: input_block[2][0] = -56
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 60 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -60 (from PE[1][2])
  PE[0][3]: partial_in = -120 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-68 * weight=-2 = 136, partial_in=60 -> result=196
  PE[0][1]: input=-68 * weight=-1 = 68, partial_in=-60 -> result=8
  PE[0][2]: input=-68 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[0][3]: input=-68 * weight=1 = -68, partial_in=-120 -> result=-188
  PE[1][0]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[1][1]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][3]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[2][0]: input=-56 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[2][2]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[2][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      196        8      -60     -188 
  Row 1:       66      -66      -66     -132 
  Row 2:        0      -56     -112      -56 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 196 │   8 │ -60 │-188 │
├─────┼─────┼─────┼─────┤
│  66 │ -66 │ -66 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -56 │-112 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -63
  Row 1: input_block[1][2] = -65
  Row 2: input_block[2][1] = -59
  Row 3: input_block[3][0] = -61

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 66 (from PE[1][0])
  PE[0][1]: partial_in = -66 (from PE[1][1])
  PE[0][2]: partial_in = -66 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -56 (from PE[2][1])
  PE[1][2]: partial_in = -112 (from PE[2][2])
  PE[1][3]: partial_in = -56 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=66 -> result=192
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=-66 -> result=-3
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=-132 -> result=-195
  PE[1][0]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[1][1]: input=-65 * weight=1 = -65, partial_in=-56 -> result=-121
  PE[1][2]: input=-65 * weight=1 = -65, partial_in=-112 -> result=-177
  PE[1][3]: input=-65 * weight=2 = -130, partial_in=-56 -> result=-186
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][1]: input=-61 * weight=2 = -122, partial_in=0 -> result=-122
  PE[3][2]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][3]: input=-61 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      192       -3      -66     -195 
  Row 1:       65     -121     -177     -186 
  Row 2:        0      -59     -118      -59 
  Row 3:      -61     -122      -61        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 192 │  -3 │ -66 │-195 │
├─────┼─────┼─────┼─────┤
│  65 │-121 │-177 │-186 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│ -61 │-122 │ -61 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -61
  Row 2: input_block[2][2] = -62
  Row 3: input_block[3][1] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 65 (from PE[1][0])
  PE[0][1]: partial_in = -121 (from PE[1][1])
  PE[0][2]: partial_in = -177 (from PE[1][2])
  PE[0][3]: partial_in = -186 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = -61 (from PE[3][0])
  PE[2][1]: partial_in = -122 (from PE[3][1])
  PE[2][2]: partial_in = -61 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=65 -> result=65
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-121 -> result=-121
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-177 -> result=-177
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-186 -> result=-186
  PE[1][0]: input=-61 * weight=-1 = 61, partial_in=0 -> result=61
  PE[1][1]: input=-61 * weight=1 = -61, partial_in=-59 -> result=-120
  PE[1][2]: input=-61 * weight=1 = -61, partial_in=-118 -> result=-179
  PE[1][3]: input=-61 * weight=2 = -122, partial_in=-59 -> result=-181
  PE[2][0]: input=-62 * weight=0 = 0, partial_in=-61 -> result=-61
  PE[2][1]: input=-62 * weight=1 = -62, partial_in=-122 -> result=-184
  PE[2][2]: input=-62 * weight=2 = -124, partial_in=-61 -> result=-185
  PE[2][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       65     -121     -177     -186 
  Row 1:       61     -120     -179     -181 
  Row 2:      -61     -184     -185      -62 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  65 │-121 │-177 │-186 │
├─────┼─────┼─────┼─────┤
│  61 │-120 │-179 │-181 │
├─────┼─────┼─────┼─────┤
│ -61 │-184 │-185 │ -62 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -64
  Row 3: input_block[3][2] = -64

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 61 (from PE[1][0])
  PE[0][1]: partial_in = -120 (from PE[1][1])
  PE[0][2]: partial_in = -179 (from PE[1][2])
  PE[0][3]: partial_in = -181 (from PE[1][3])
  PE[1][0]: partial_in = -61 (from PE[2][0])
  PE[1][1]: partial_in = -184 (from PE[2][1])
  PE[1][2]: partial_in = -185 (from PE[2][2])
  PE[1][3]: partial_in = -62 (from PE[2][3])
  PE[2][0]: partial_in = -60 (from PE[3][0])
  PE[2][1]: partial_in = -120 (from PE[3][1])
  PE[2][2]: partial_in = -60 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=61 -> result=61
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-120 -> result=-120
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-179 -> result=-179
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-61 -> result=-61
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-184 -> result=-184
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-185 -> result=-185
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-62 -> result=-62
  PE[2][0]: input=-64 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[2][1]: input=-64 * weight=1 = -64, partial_in=-120 -> result=-184
  PE[2][2]: input=-64 * weight=2 = -128, partial_in=-60 -> result=-188
  PE[2][3]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][0]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][1]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[3][2]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][3]: input=-64 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       61     -120     -179     -181 
  Row 1:      -61     -184     -185      -62 
  Row 2:      -60     -184     -188      -64 
  Row 3:      -64     -128      -64        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  61 │-120 │-179 │-181 │
├─────┼─────┼─────┼─────┤
│ -61 │-184 │-185 │ -62 │
├─────┼─────┼─────┼─────┤
│ -60 │-184 │-188 │ -64 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -72

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -61 (from PE[1][0])
  PE[0][1]: partial_in = -184 (from PE[1][1])
  PE[0][2]: partial_in = -185 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = -60 (from PE[2][0])
  PE[1][1]: partial_in = -184 (from PE[2][1])
  PE[1][2]: partial_in = -188 (from PE[2][2])
  PE[1][3]: partial_in = -64 (from PE[2][3])
  PE[2][0]: partial_in = -64 (from PE[3][0])
  PE[2][1]: partial_in = -128 (from PE[3][1])
  PE[2][2]: partial_in = -64 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-61 -> result=-61
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-184 -> result=-184
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-185 -> result=-185
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-184 -> result=-184
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-188 -> result=-188
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-64 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-128 -> result=-128
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-64 -> result=-64
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][1]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[3][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][3]: input=-72 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -61     -184     -185      -62 
  Row 1:      -60     -184     -188      -64 
  Row 2:      -64     -128      -64        0 
  Row 3:      -72     -144      -72        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -61 │-184 │-185 │ -62 │
├─────┼─────┼─────┼─────┤
│ -60 │-184 │-188 │ -64 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
├─────┼─────┼─────┼─────┤
│ -72 │-144 │ -72 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -61     -184     -185      -62 
Row 1:      -60     -184     -188      -64 
Row 2:      -64     -128      -64        0 
Row 3:      -72     -144      -72        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -61 -> clamp(-61) -> final(67)
  PE[0][1]: -184 -> clamp(-128) -> final(0)
  PE[0][2]: -185 -> clamp(-128) -> final(0)
  PE[0][3]: -62 -> clamp(-62) -> final(66)
  PE[1][0]: -60 -> clamp(-60) -> final(68)
  PE[1][1]: -184 -> clamp(-128) -> final(0)
  PE[1][2]: -188 -> clamp(-128) -> final(0)
  PE[1][3]: -64 -> clamp(-64) -> final(64)
  PE[2][0]: -64 -> clamp(-64) -> final(64)
  PE[2][1]: -128 -> clamp(-128) -> final(0)
  PE[2][2]: -64 -> clamp(-64) -> final(64)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -72 -> clamp(-72) -> final(56)
  PE[3][1]: -144 -> clamp(-128) -> final(0)
  PE[3][2]: -72 -> clamp(-72) -> final(56)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    67      0      0     66 
    68      0      0     64 
    64      0     64    128 
    56      0     56    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -72  -48    1   15 
 -73  -44    2   11 
 -78  -39    7   11 
 -82  -35   12   13 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -72
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-72 * weight=-2 = 144, partial_in=0 -> result=144
  PE[0][1]: input=-72 * weight=-1 = 72, partial_in=0 -> result=72
  PE[0][2]: input=-72 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      144       72        0      -72 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 144 │  72 │   0 │ -72 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -48
  Row 1: input_block[1][0] = -73
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=0 -> result=96
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][0]: input=-73 * weight=-1 = 73, partial_in=0 -> result=73
  PE[1][1]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[1][2]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[1][3]: input=-73 * weight=2 = -146, partial_in=0 -> result=-146
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       96       48        0      -48 
  Row 1:       73      -73      -73     -146 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │  48 │   0 │ -48 │
├─────┼─────┼─────┼─────┤
│  73 │ -73 │ -73 │-146 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 1
  Row 1: input_block[1][1] = -44
  Row 2: input_block[2][0] = -78
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 73 (from PE[1][0])
  PE[0][1]: partial_in = -73 (from PE[1][1])
  PE[0][2]: partial_in = -73 (from PE[1][2])
  PE[0][3]: partial_in = -146 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=73 -> result=71
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=-73 -> result=-74
  PE[0][2]: input=1 * weight=0 = 0, partial_in=-73 -> result=-73
  PE[0][3]: input=1 * weight=1 = 1, partial_in=-146 -> result=-145
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][0]: input=-78 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[2][2]: input=-78 * weight=2 = -156, partial_in=0 -> result=-156
  PE[2][3]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       71      -74      -73     -145 
  Row 1:       44      -44      -44      -88 
  Row 2:        0      -78     -156      -78 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  71 │ -74 │ -73 │-145 │
├─────┼─────┼─────┼─────┤
│  44 │ -44 │ -44 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │ -78 │-156 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 15
  Row 1: input_block[1][2] = 2
  Row 2: input_block[2][1] = -39
  Row 3: input_block[3][0] = -82

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -78 (from PE[2][1])
  PE[1][2]: partial_in = -156 (from PE[2][2])
  PE[1][3]: partial_in = -78 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=44 -> result=14
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=-44 -> result=-59
  PE[0][2]: input=15 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=15 * weight=1 = 15, partial_in=-88 -> result=-73
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=-78 -> result=-76
  PE[1][2]: input=2 * weight=1 = 2, partial_in=-156 -> result=-154
  PE[1][3]: input=2 * weight=2 = 4, partial_in=-78 -> result=-74
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[3][1]: input=-82 * weight=2 = -164, partial_in=0 -> result=-164
  PE[3][2]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[3][3]: input=-82 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       14      -59      -44      -73 
  Row 1:       -2      -76     -154      -74 
  Row 2:        0      -39      -78      -39 
  Row 3:      -82     -164      -82        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │ -59 │ -44 │ -73 │
├─────┼─────┼─────┼─────┤
│  -2 │ -76 │-154 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│ -82 │-164 │ -82 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 11
  Row 2: input_block[2][2] = 7
  Row 3: input_block[3][1] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = -76 (from PE[1][1])
  PE[0][2]: partial_in = -154 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -82 (from PE[3][0])
  PE[2][1]: partial_in = -164 (from PE[3][1])
  PE[2][2]: partial_in = -82 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-76 -> result=-76
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-154 -> result=-154
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=-39 -> result=-28
  PE[1][2]: input=11 * weight=1 = 11, partial_in=-78 -> result=-67
  PE[1][3]: input=11 * weight=2 = 22, partial_in=-39 -> result=-17
  PE[2][0]: input=7 * weight=0 = 0, partial_in=-82 -> result=-82
  PE[2][1]: input=7 * weight=1 = 7, partial_in=-164 -> result=-157
  PE[2][2]: input=7 * weight=2 = 14, partial_in=-82 -> result=-68
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -2      -76     -154      -74 
  Row 1:      -11      -28      -67      -17 
  Row 2:      -82     -157      -68        7 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │ -76 │-154 │ -74 │
├─────┼─────┼─────┼─────┤
│ -11 │ -28 │ -67 │ -17 │
├─────┼─────┼─────┼─────┤
│ -82 │-157 │ -68 │   7 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 11
  Row 3: input_block[3][2] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -17 (from PE[1][3])
  PE[1][0]: partial_in = -82 (from PE[2][0])
  PE[1][1]: partial_in = -157 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-17 -> result=-17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-82 -> result=-82
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-157 -> result=-157
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=11 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=11 * weight=1 = 11, partial_in=-70 -> result=-59
  PE[2][2]: input=11 * weight=2 = 22, partial_in=-35 -> result=-13
  PE[2][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -11      -28      -67      -17 
  Row 1:      -82     -157      -68        7 
  Row 2:      -35      -59      -13       11 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -28 │ -67 │ -17 │
├─────┼─────┼─────┼─────┤
│ -82 │-157 │ -68 │   7 │
├─────┼─────┼─────┼─────┤
│ -35 │ -59 │ -13 │  11 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -82 (from PE[1][0])
  PE[0][1]: partial_in = -157 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = 7 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -13 (from PE[2][2])
  PE[1][3]: partial_in = 11 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-82 -> result=-82
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-157 -> result=-157
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=0 * weight=1 = 0, partial_in=7 -> result=7
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-59 -> result=-59
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][3]: input=0 * weight=2 = 0, partial_in=11 -> result=11
  PE[2][0]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[2][2]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -82     -157      -68        7 
  Row 1:      -35      -59      -13       11 
  Row 2:       12       24       12        0 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -82 │-157 │ -68 │   7 │
├─────┼─────┼─────┼─────┤
│ -35 │ -59 │ -13 │  11 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -82     -157      -68        7 
Row 1:      -35      -59      -13       11 
Row 2:       12       24       12        0 
Row 3:       13       26       13        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -82 -> clamp(-82) -> final(46)
  PE[0][1]: -157 -> clamp(-128) -> final(0)
  PE[0][2]: -68 -> clamp(-68) -> final(60)
  PE[0][3]: 7 -> clamp(7) -> final(135)
  PE[1][0]: -35 -> clamp(-35) -> final(93)
  PE[1][1]: -59 -> clamp(-59) -> final(69)
  PE[1][2]: -13 -> clamp(-13) -> final(115)
  PE[1][3]: 11 -> clamp(11) -> final(139)
  PE[2][0]: 12 -> clamp(12) -> final(140)
  PE[2][1]: 24 -> clamp(24) -> final(152)
  PE[2][2]: 12 -> clamp(12) -> final(140)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 13 -> clamp(13) -> final(141)
  PE[3][1]: 26 -> clamp(26) -> final(154)
  PE[3][2]: 13 -> clamp(13) -> final(141)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    46      0     60    135 
    93     69    115    139 
   140    152    140    128 
   141    154    141    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  13   18   15   23 
  14   23   17   25 
  14   23   19   31 
  14   22   20   37 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 13
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=0 -> result=-26
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[0][2]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -26      -13        0       13 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │ -13 │   0 │  13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 18
  Row 1: input_block[1][0] = 14
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[1][1]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][3]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -36      -18        0       18 
  Row 1:      -14       14       14       28 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│ -14 │  14 │  14 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 15
  Row 1: input_block[1][1] = 23
  Row 2: input_block[2][0] = 14
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -14 (from PE[1][0])
  PE[0][1]: partial_in = 14 (from PE[1][1])
  PE[0][2]: partial_in = 14 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=-14 -> result=-44
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=14 -> result=-1
  PE[0][2]: input=15 * weight=0 = 0, partial_in=14 -> result=14
  PE[0][3]: input=15 * weight=1 = 15, partial_in=28 -> result=43
  PE[1][0]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[1][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][3]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][0]: input=14 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[2][2]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -44       -1       14       43 
  Row 1:      -23       23       23       46 
  Row 2:        0       14       28       14 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │  -1 │  14 │  43 │
├─────┼─────┼─────┼─────┤
│ -23 │  23 │  23 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │  14 │  28 │  14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 23
  Row 1: input_block[1][2] = 17
  Row 2: input_block[2][1] = 23
  Row 3: input_block[3][0] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = 23 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 46 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 14 (from PE[2][1])
  PE[1][2]: partial_in = 28 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=-23 -> result=-69
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=23 -> result=0
  PE[0][2]: input=23 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=23 * weight=1 = 23, partial_in=46 -> result=69
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=14 -> result=31
  PE[1][2]: input=17 * weight=1 = 17, partial_in=28 -> result=45
  PE[1][3]: input=17 * weight=2 = 34, partial_in=14 -> result=48
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -69        0       23       69 
  Row 1:      -17       31       45       48 
  Row 2:        0       23       46       23 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -69 │   0 │  23 │  69 │
├─────┼─────┼─────┼─────┤
│ -17 │  31 │  45 │  48 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 25
  Row 2: input_block[2][2] = 19
  Row 3: input_block[3][1] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = 31 (from PE[1][1])
  PE[0][2]: partial_in = 45 (from PE[1][2])
  PE[0][3]: partial_in = 48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 14 (from PE[3][0])
  PE[2][1]: partial_in = 28 (from PE[3][1])
  PE[2][2]: partial_in = 14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[0][2]: input=0 * weight=0 = 0, partial_in=45 -> result=45
  PE[0][3]: input=0 * weight=1 = 0, partial_in=48 -> result=48
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=23 -> result=48
  PE[1][2]: input=25 * weight=1 = 25, partial_in=46 -> result=71
  PE[1][3]: input=25 * weight=2 = 50, partial_in=23 -> result=73
  PE[2][0]: input=19 * weight=0 = 0, partial_in=14 -> result=14
  PE[2][1]: input=19 * weight=1 = 19, partial_in=28 -> result=47
  PE[2][2]: input=19 * weight=2 = 38, partial_in=14 -> result=52
  PE[2][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -17       31       45       48 
  Row 1:      -25       48       71       73 
  Row 2:       14       47       52       19 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  31 │  45 │  48 │
├─────┼─────┼─────┼─────┤
│ -25 │  48 │  71 │  73 │
├─────┼─────┼─────┼─────┤
│  14 │  47 │  52 │  19 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 31
  Row 3: input_block[3][2] = 20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 48 (from PE[1][1])
  PE[0][2]: partial_in = 71 (from PE[1][2])
  PE[0][3]: partial_in = 73 (from PE[1][3])
  PE[1][0]: partial_in = 14 (from PE[2][0])
  PE[1][1]: partial_in = 47 (from PE[2][1])
  PE[1][2]: partial_in = 52 (from PE[2][2])
  PE[1][3]: partial_in = 19 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=48 -> result=48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=71 -> result=71
  PE[0][3]: input=0 * weight=1 = 0, partial_in=73 -> result=73
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=14 -> result=14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=47 -> result=47
  PE[1][2]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][3]: input=0 * weight=2 = 0, partial_in=19 -> result=19
  PE[2][0]: input=31 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=31 * weight=1 = 31, partial_in=44 -> result=75
  PE[2][2]: input=31 * weight=2 = 62, partial_in=22 -> result=84
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][1]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[3][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][3]: input=20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -25       48       71       73 
  Row 1:       14       47       52       19 
  Row 2:       22       75       84       31 
  Row 3:       20       40       20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  48 │  71 │  73 │
├─────┼─────┼─────┼─────┤
│  14 │  47 │  52 │  19 │
├─────┼─────┼─────┼─────┤
│  22 │  75 │  84 │  31 │
├─────┼─────┼─────┼─────┤
│  20 │  40 │  20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 14 (from PE[1][0])
  PE[0][1]: partial_in = 47 (from PE[1][1])
  PE[0][2]: partial_in = 52 (from PE[1][2])
  PE[0][3]: partial_in = 19 (from PE[1][3])
  PE[1][0]: partial_in = 22 (from PE[2][0])
  PE[1][1]: partial_in = 75 (from PE[2][1])
  PE[1][2]: partial_in = 84 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 20 (from PE[3][0])
  PE[2][1]: partial_in = 40 (from PE[3][1])
  PE[2][2]: partial_in = 20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=14 -> result=14
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=47 -> result=47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=52 -> result=52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=75 -> result=75
  PE[1][2]: input=0 * weight=1 = 0, partial_in=84 -> result=84
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=0 * weight=0 = 0, partial_in=20 -> result=20
  PE[2][1]: input=0 * weight=1 = 0, partial_in=40 -> result=40
  PE[2][2]: input=0 * weight=2 = 0, partial_in=20 -> result=20
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][1]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[3][2]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[3][3]: input=37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       14       47       52       19 
  Row 1:       22       75       84       31 
  Row 2:       20       40       20        0 
  Row 3:       37       74       37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │  47 │  52 │  19 │
├─────┼─────┼─────┼─────┤
│  22 │  75 │  84 │  31 │
├─────┼─────┼─────┼─────┤
│  20 │  40 │  20 │   0 │
├─────┼─────┼─────┼─────┤
│  37 │  74 │  37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       14       47       52       19 
Row 1:       22       75       84       31 
Row 2:       20       40       20        0 
Row 3:       37       74       37        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 14 -> clamp(14) -> final(142)
  PE[0][1]: 47 -> clamp(47) -> final(175)
  PE[0][2]: 52 -> clamp(52) -> final(180)
  PE[0][3]: 19 -> clamp(19) -> final(147)
  PE[1][0]: 22 -> clamp(22) -> final(150)
  PE[1][1]: 75 -> clamp(75) -> final(203)
  PE[1][2]: 84 -> clamp(84) -> final(212)
  PE[1][3]: 31 -> clamp(31) -> final(159)
  PE[2][0]: 20 -> clamp(20) -> final(148)
  PE[2][1]: 40 -> clamp(40) -> final(168)
  PE[2][2]: 20 -> clamp(20) -> final(148)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 37 -> clamp(37) -> final(165)
  PE[3][1]: 74 -> clamp(74) -> final(202)
  PE[3][2]: 37 -> clamp(37) -> final(165)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   142    175    180    147 
   150    203    212    159 
   148    168    148    128 
   165    202    165    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  39   28   32   42 
  37   23   34   32 
  31   23   34   -6 
  33   30   33  -46 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=39 * weight=-2 = -78, partial_in=0 -> result=-78
  PE[0][1]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[0][2]: input=39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -78      -39        0       39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -78 │ -39 │   0 │  39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 28
  Row 1: input_block[1][0] = 37
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=0 -> result=-56
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[0][2]: input=28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][0]: input=37 * weight=-1 = -37, partial_in=0 -> result=-37
  PE[1][1]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[1][2]: input=37 * weight=1 = 37, partial_in=0 -> result=37
  PE[1][3]: input=37 * weight=2 = 74, partial_in=0 -> result=74
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -56      -28        0       28 
  Row 1:      -37       37       37       74 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │ -28 │   0 │  28 │
├─────┼─────┼─────┼─────┤
│ -37 │  37 │  37 │  74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 32
  Row 1: input_block[1][1] = 23
  Row 2: input_block[2][0] = 31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -37 (from PE[1][0])
  PE[0][1]: partial_in = 37 (from PE[1][1])
  PE[0][2]: partial_in = 37 (from PE[1][2])
  PE[0][3]: partial_in = 74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=-37 -> result=-101
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=37 -> result=5
  PE[0][2]: input=32 * weight=0 = 0, partial_in=37 -> result=37
  PE[0][3]: input=32 * weight=1 = 32, partial_in=74 -> result=106
  PE[1][0]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[1][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][3]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][0]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[2][2]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -101        5       37      106 
  Row 1:      -23       23       23       46 
  Row 2:        0       31       62       31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-101 │   5 │  37 │ 106 │
├─────┼─────┼─────┼─────┤
│ -23 │  23 │  23 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │  31 │  62 │  31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 42
  Row 1: input_block[1][2] = 34
  Row 2: input_block[2][1] = 23
  Row 3: input_block[3][0] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = 23 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 46 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 31 (from PE[2][1])
  PE[1][2]: partial_in = 62 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=42 * weight=-2 = -84, partial_in=-23 -> result=-107
  PE[0][1]: input=42 * weight=-1 = -42, partial_in=23 -> result=-19
  PE[0][2]: input=42 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=42 * weight=1 = 42, partial_in=46 -> result=88
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=31 -> result=65
  PE[1][2]: input=34 * weight=1 = 34, partial_in=62 -> result=96
  PE[1][3]: input=34 * weight=2 = 68, partial_in=31 -> result=99
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -107      -19       23       88 
  Row 1:      -34       65       96       99 
  Row 2:        0       23       46       23 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-107 │ -19 │  23 │  88 │
├─────┼─────┼─────┼─────┤
│ -34 │  65 │  96 │  99 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 32
  Row 2: input_block[2][2] = 34
  Row 3: input_block[3][1] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 65 (from PE[1][1])
  PE[0][2]: partial_in = 96 (from PE[1][2])
  PE[0][3]: partial_in = 99 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=65 -> result=65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=96 -> result=96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=99 -> result=99
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=23 -> result=55
  PE[1][2]: input=32 * weight=1 = 32, partial_in=46 -> result=78
  PE[1][3]: input=32 * weight=2 = 64, partial_in=23 -> result=87
  PE[2][0]: input=34 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=34 * weight=1 = 34, partial_in=66 -> result=100
  PE[2][2]: input=34 * weight=2 = 68, partial_in=33 -> result=101
  PE[2][3]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -34       65       96       99 
  Row 1:      -32       55       78       87 
  Row 2:       33      100      101       34 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │  65 │  96 │  99 │
├─────┼─────┼─────┼─────┤
│ -32 │  55 │  78 │  87 │
├─────┼─────┼─────┼─────┤
│  33 │ 100 │ 101 │  34 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -6
  Row 3: input_block[3][2] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 55 (from PE[1][1])
  PE[0][2]: partial_in = 78 (from PE[1][2])
  PE[0][3]: partial_in = 87 (from PE[1][3])
  PE[1][0]: partial_in = 33 (from PE[2][0])
  PE[1][1]: partial_in = 100 (from PE[2][1])
  PE[1][2]: partial_in = 101 (from PE[2][2])
  PE[1][3]: partial_in = 34 (from PE[2][3])
  PE[2][0]: partial_in = 30 (from PE[3][0])
  PE[2][1]: partial_in = 60 (from PE[3][1])
  PE[2][2]: partial_in = 30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=55 -> result=55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=78 -> result=78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=87 -> result=87
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=100 -> result=100
  PE[1][2]: input=0 * weight=1 = 0, partial_in=101 -> result=101
  PE[1][3]: input=0 * weight=2 = 0, partial_in=34 -> result=34
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=30 -> result=30
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=60 -> result=54
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=30 -> result=18
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -32       55       78       87 
  Row 1:       33      100      101       34 
  Row 2:       30       54       18       -6 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │  55 │  78 │  87 │
├─────┼─────┼─────┼─────┤
│  33 │ 100 │ 101 │  34 │
├─────┼─────┼─────┼─────┤
│  30 │  54 │  18 │  -6 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -46

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = 100 (from PE[1][1])
  PE[0][2]: partial_in = 101 (from PE[1][2])
  PE[0][3]: partial_in = 34 (from PE[1][3])
  PE[1][0]: partial_in = 30 (from PE[2][0])
  PE[1][1]: partial_in = 54 (from PE[2][1])
  PE[1][2]: partial_in = 18 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=33 -> result=33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=100 -> result=100
  PE[0][2]: input=0 * weight=0 = 0, partial_in=101 -> result=101
  PE[0][3]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=54 -> result=54
  PE[1][2]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=0 * weight=1 = 0, partial_in=66 -> result=66
  PE[2][2]: input=0 * weight=2 = 0, partial_in=33 -> result=33
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][1]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[3][2]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][3]: input=-46 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       33      100      101       34 
  Row 1:       30       54       18       -6 
  Row 2:       33       66       33        0 
  Row 3:      -46      -92      -46        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │ 100 │ 101 │  34 │
├─────┼─────┼─────┼─────┤
│  30 │  54 │  18 │  -6 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
├─────┼─────┼─────┼─────┤
│ -46 │ -92 │ -46 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       33      100      101       34 
Row 1:       30       54       18       -6 
Row 2:       33       66       33        0 
Row 3:      -46      -92      -46        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 33 -> clamp(33) -> final(161)
  PE[0][1]: 100 -> clamp(100) -> final(228)
  PE[0][2]: 101 -> clamp(101) -> final(229)
  PE[0][3]: 34 -> clamp(34) -> final(162)
  PE[1][0]: 30 -> clamp(30) -> final(158)
  PE[1][1]: 54 -> clamp(54) -> final(182)
  PE[1][2]: 18 -> clamp(18) -> final(146)
  PE[1][3]: -6 -> clamp(-6) -> final(122)
  PE[2][0]: 33 -> clamp(33) -> final(161)
  PE[2][1]: 66 -> clamp(66) -> final(194)
  PE[2][2]: 33 -> clamp(33) -> final(161)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -46 -> clamp(-46) -> final(82)
  PE[3][1]: -92 -> clamp(-92) -> final(36)
  PE[3][2]: -46 -> clamp(-46) -> final(82)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   161    228    229    162 
   158    182    146    122 
   161    194    161    128 
    82     36     82    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -45  -57   -5    4 
 -70  -35    2   -3 
 -67   -6    7   -1 
 -60    8    2   -1 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -45
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=0 -> result=90
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       90       45        0      -45 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │  45 │   0 │ -45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -57
  Row 1: input_block[1][0] = -70
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-57 * weight=-2 = 114, partial_in=0 -> result=114
  PE[0][1]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[0][2]: input=-57 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      114       57        0      -57 
  Row 1:       70      -70      -70     -140 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 114 │  57 │   0 │ -57 │
├─────┼─────┼─────┼─────┤
│  70 │ -70 │ -70 │-140 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -5
  Row 1: input_block[1][1] = -35
  Row 2: input_block[2][0] = -67
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -70 (from PE[1][1])
  PE[0][2]: partial_in = -70 (from PE[1][2])
  PE[0][3]: partial_in = -140 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=70 -> result=80
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=-70 -> result=-65
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=-140 -> result=-145
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[2][2]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       80      -65      -70     -145 
  Row 1:       35      -35      -35      -70 
  Row 2:        0      -67     -134      -67 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │ -65 │ -70 │-145 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │ -67 │-134 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 4
  Row 1: input_block[1][2] = 2
  Row 2: input_block[2][1] = -6
  Row 3: input_block[3][0] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -67 (from PE[2][1])
  PE[1][2]: partial_in = -134 (from PE[2][2])
  PE[1][3]: partial_in = -67 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=35 -> result=27
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=-35 -> result=-39
  PE[0][2]: input=4 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=4 * weight=1 = 4, partial_in=-70 -> result=-66
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=-67 -> result=-65
  PE[1][2]: input=2 * weight=1 = 2, partial_in=-134 -> result=-132
  PE[1][3]: input=2 * weight=2 = 4, partial_in=-67 -> result=-63
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       27      -39      -35      -66 
  Row 1:       -2      -65     -132      -63 
  Row 2:        0       -6      -12       -6 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -39 │ -35 │ -66 │
├─────┼─────┼─────┼─────┤
│  -2 │ -65 │-132 │ -63 │
├─────┼─────┼─────┼─────┤
│   0 │  -6 │ -12 │  -6 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -3
  Row 2: input_block[2][2] = 7
  Row 3: input_block[3][1] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -132 (from PE[1][2])
  PE[0][3]: partial_in = -63 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -6 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = -60 (from PE[3][0])
  PE[2][1]: partial_in = -120 (from PE[3][1])
  PE[2][2]: partial_in = -60 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-132 -> result=-132
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-63 -> result=-63
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=-6 -> result=-9
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=-12 -> result=-15
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=-6 -> result=-12
  PE[2][0]: input=7 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[2][1]: input=7 * weight=1 = 7, partial_in=-120 -> result=-113
  PE[2][2]: input=7 * weight=2 = 14, partial_in=-60 -> result=-46
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -2      -65     -132      -63 
  Row 1:        3       -9      -15      -12 
  Row 2:      -60     -113      -46        7 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │ -65 │-132 │ -63 │
├─────┼─────┼─────┼─────┤
│   3 │  -9 │ -15 │ -12 │
├─────┼─────┼─────┼─────┤
│ -60 │-113 │ -46 │   7 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -1
  Row 3: input_block[3][2] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -15 (from PE[1][2])
  PE[0][3]: partial_in = -12 (from PE[1][3])
  PE[1][0]: partial_in = -60 (from PE[2][0])
  PE[1][1]: partial_in = -113 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = 8 (from PE[3][0])
  PE[2][1]: partial_in = 16 (from PE[3][1])
  PE[2][2]: partial_in = 8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-113 -> result=-113
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=8 -> result=8
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=16 -> result=15
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=8 -> result=6
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        3       -9      -15      -12 
  Row 1:      -60     -113      -46        7 
  Row 2:        8       15        6       -1 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │  -9 │ -15 │ -12 │
├─────┼─────┼─────┼─────┤
│ -60 │-113 │ -46 │   7 │
├─────┼─────┼─────┼─────┤
│   8 │  15 │   6 │  -1 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -60 (from PE[1][0])
  PE[0][1]: partial_in = -113 (from PE[1][1])
  PE[0][2]: partial_in = -46 (from PE[1][2])
  PE[0][3]: partial_in = 7 (from PE[1][3])
  PE[1][0]: partial_in = 8 (from PE[2][0])
  PE[1][1]: partial_in = 15 (from PE[2][1])
  PE[1][2]: partial_in = 6 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = 2 (from PE[3][0])
  PE[2][1]: partial_in = 4 (from PE[3][1])
  PE[2][2]: partial_in = 2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-60 -> result=-60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-113 -> result=-113
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-46 -> result=-46
  PE[0][3]: input=0 * weight=1 = 0, partial_in=7 -> result=7
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=15 -> result=15
  PE[1][2]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][0]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[2][1]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[2][2]: input=0 * weight=2 = 0, partial_in=2 -> result=2
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -60     -113      -46        7 
  Row 1:        8       15        6       -1 
  Row 2:        2        4        2        0 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -60 │-113 │ -46 │   7 │
├─────┼─────┼─────┼─────┤
│   8 │  15 │   6 │  -1 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -60     -113      -46        7 
Row 1:        8       15        6       -1 
Row 2:        2        4        2        0 
Row 3:       -1       -2       -1        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -60 -> clamp(-60) -> final(68)
  PE[0][1]: -113 -> clamp(-113) -> final(15)
  PE[0][2]: -46 -> clamp(-46) -> final(82)
  PE[0][3]: 7 -> clamp(7) -> final(135)
  PE[1][0]: 8 -> clamp(8) -> final(136)
  PE[1][1]: 15 -> clamp(15) -> final(143)
  PE[1][2]: 6 -> clamp(6) -> final(134)
  PE[1][3]: -1 -> clamp(-1) -> final(127)
  PE[2][0]: 2 -> clamp(2) -> final(130)
  PE[2][1]: 4 -> clamp(4) -> final(132)
  PE[2][2]: 2 -> clamp(2) -> final(130)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -1 -> clamp(-1) -> final(127)
  PE[3][1]: -2 -> clamp(-2) -> final(126)
  PE[3][2]: -1 -> clamp(-1) -> final(127)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    68     15     82    135 
   136    143    134    127 
   130    132    130    128 
   127    126    127    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  11   16   27  -23 
  11   11   29  -15 
   3   -1    0  -23 
  -8   -1   -8   -9 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 11
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=11 * weight=-2 = -22, partial_in=0 -> result=-22
  PE[0][1]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[0][2]: input=11 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -22      -11        0       11 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │ -11 │   0 │  11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 16
  Row 1: input_block[1][0] = 11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=16 * weight=-2 = -32, partial_in=0 -> result=-32
  PE[0][1]: input=16 * weight=-1 = -16, partial_in=0 -> result=-16
  PE[0][2]: input=16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][3]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -32      -16        0       16 
  Row 1:      -11       11       11       22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │ -16 │   0 │  16 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  11 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 27
  Row 1: input_block[1][1] = 11
  Row 2: input_block[2][0] = 3
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=27 * weight=-2 = -54, partial_in=-11 -> result=-65
  PE[0][1]: input=27 * weight=-1 = -27, partial_in=11 -> result=-16
  PE[0][2]: input=27 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=27 * weight=1 = 27, partial_in=22 -> result=49
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[1][3]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[2][0]: input=3 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[2][2]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -65      -16       11       49 
  Row 1:      -11       11       11       22 
  Row 2:        0        3        6        3 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -65 │ -16 │  11 │  49 │
├─────┼─────┼─────┼─────┤
│ -11 │  11 │  11 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   3 │   6 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -23
  Row 1: input_block[1][2] = 29
  Row 2: input_block[2][1] = -1
  Row 3: input_block[3][0] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = 11 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 3 (from PE[2][1])
  PE[1][2]: partial_in = 6 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=-11 -> result=35
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=11 -> result=34
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=22 -> result=-1
  PE[1][0]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[1][1]: input=29 * weight=1 = 29, partial_in=3 -> result=32
  PE[1][2]: input=29 * weight=1 = 29, partial_in=6 -> result=35
  PE[1][3]: input=29 * weight=2 = 58, partial_in=3 -> result=61
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       35       34       11       -1 
  Row 1:      -29       32       35       61 
  Row 2:        0       -1       -2       -1 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │  34 │  11 │  -1 │
├─────┼─────┼─────┼─────┤
│ -29 │  32 │  35 │  61 │
├─────┼─────┼─────┼─────┤
│   0 │  -1 │  -2 │  -1 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -15
  Row 2: input_block[2][2] = 0
  Row 3: input_block[3][1] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 61 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -1 (from PE[2][1])
  PE[1][2]: partial_in = -2 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-29 -> result=-29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=61 -> result=61
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=-1 -> result=-16
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=-2 -> result=-17
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=-1 -> result=-31
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -29       32       35       61 
  Row 1:       15      -16      -17      -31 
  Row 2:       -8      -16       -8        0 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │  32 │  35 │  61 │
├─────┼─────┼─────┼─────┤
│  15 │ -16 │ -17 │ -31 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -23
  Row 3: input_block[3][2] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -17 (from PE[1][2])
  PE[0][3]: partial_in = -31 (from PE[1][3])
  PE[1][0]: partial_in = -8 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -8 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=-2 -> result=-25
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=-1 -> result=-47
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       15      -16      -17      -31 
  Row 1:       -8      -16       -8        0 
  Row 2:       -1      -25      -47      -23 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │ -16 │ -17 │ -31 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
├─────┼─────┼─────┼─────┤
│  -1 │ -25 │ -47 │ -23 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = -1 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -47 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-25 -> result=-25
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-47 -> result=-47
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -8      -16       -8        0 
  Row 1:       -1      -25      -47      -23 
  Row 2:       -8      -16       -8        0 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │ -16 │  -8 │   0 │
├─────┼─────┼─────┼─────┤
│  -1 │ -25 │ -47 │ -23 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -8      -16       -8        0 
Row 1:       -1      -25      -47      -23 
Row 2:       -8      -16       -8        0 
Row 3:       -9      -18       -9        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -8 -> clamp(-8) -> final(120)
  PE[0][1]: -16 -> clamp(-16) -> final(112)
  PE[0][2]: -8 -> clamp(-8) -> final(120)
  PE[0][3]: 0 -> clamp(0) -> final(128)
  PE[1][0]: -1 -> clamp(-1) -> final(127)
  PE[1][1]: -25 -> clamp(-25) -> final(103)
  PE[1][2]: -47 -> clamp(-47) -> final(81)
  PE[1][3]: -23 -> clamp(-23) -> final(105)
  PE[2][0]: -8 -> clamp(-8) -> final(120)
  PE[2][1]: -16 -> clamp(-16) -> final(112)
  PE[2][2]: -8 -> clamp(-8) -> final(120)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -9 -> clamp(-9) -> final(119)
  PE[3][1]: -18 -> clamp(-18) -> final(110)
  PE[3][2]: -9 -> clamp(-9) -> final(119)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   120    112    120    128 
   127    103     81    105 
   120    112    120    128 
   119    110    119    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -62  -64  -12    3 
 -20  -36    6   11 
  -9  -20   -1    7 
   5    1   -2   15 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -62
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-62 * weight=-2 = 124, partial_in=0 -> result=124
  PE[0][1]: input=-62 * weight=-1 = 62, partial_in=0 -> result=62
  PE[0][2]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      124       62        0      -62 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 124 │  62 │   0 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -64
  Row 1: input_block[1][0] = -20
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-64 * weight=-2 = 128, partial_in=0 -> result=128
  PE[0][1]: input=-64 * weight=-1 = 64, partial_in=0 -> result=64
  PE[0][2]: input=-64 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      128       64        0      -64 
  Row 1:       20      -20      -20      -40 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 128 │  64 │   0 │ -64 │
├─────┼─────┼─────┼─────┤
│  20 │ -20 │ -20 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -12
  Row 1: input_block[1][1] = -36
  Row 2: input_block[2][0] = -9
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-12 * weight=-2 = 24, partial_in=20 -> result=44
  PE[0][1]: input=-12 * weight=-1 = 12, partial_in=-20 -> result=-8
  PE[0][2]: input=-12 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=-12 * weight=1 = -12, partial_in=-40 -> result=-52
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[2][0]: input=-9 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[2][2]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[2][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       44       -8      -20      -52 
  Row 1:       36      -36      -36      -72 
  Row 2:        0       -9      -18       -9 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  -8 │ -20 │ -52 │
├─────┼─────┼─────┼─────┤
│  36 │ -36 │ -36 │ -72 │
├─────┼─────┼─────┼─────┤
│   0 │  -9 │ -18 │  -9 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 3
  Row 1: input_block[1][2] = 6
  Row 2: input_block[2][1] = -20
  Row 3: input_block[3][0] = 5

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -36 (from PE[1][2])
  PE[0][3]: partial_in = -72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -9 (from PE[2][1])
  PE[1][2]: partial_in = -18 (from PE[2][2])
  PE[1][3]: partial_in = -9 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=36 -> result=30
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=-36 -> result=-39
  PE[0][2]: input=3 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[0][3]: input=3 * weight=1 = 3, partial_in=-72 -> result=-69
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=-9 -> result=-3
  PE[1][2]: input=6 * weight=1 = 6, partial_in=-18 -> result=-12
  PE[1][3]: input=6 * weight=2 = 12, partial_in=-9 -> result=3
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][1]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[3][2]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][3]: input=5 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       30      -39      -36      -69 
  Row 1:       -6       -3      -12        3 
  Row 2:        0      -20      -40      -20 
  Row 3:        5       10        5        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │ -39 │ -36 │ -69 │
├─────┼─────┼─────┼─────┤
│  -6 │  -3 │ -12 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │ -20 │ -40 │ -20 │
├─────┼─────┼─────┼─────┤
│   5 │  10 │   5 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 11
  Row 2: input_block[2][2] = -1
  Row 3: input_block[3][1] = 1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = 3 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -20 (from PE[2][1])
  PE[1][2]: partial_in = -40 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = 5 (from PE[3][0])
  PE[2][1]: partial_in = 10 (from PE[3][1])
  PE[2][2]: partial_in = 5 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-3 -> result=-3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=-20 -> result=-9
  PE[1][2]: input=11 * weight=1 = 11, partial_in=-40 -> result=-29
  PE[1][3]: input=11 * weight=2 = 22, partial_in=-20 -> result=2
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=5 -> result=5
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=10 -> result=9
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=5 -> result=3
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][1]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[3][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][3]: input=1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -6       -3      -12        3 
  Row 1:      -11       -9      -29        2 
  Row 2:        5        9        3       -1 
  Row 3:        1        2        1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -3 │ -12 │   3 │
├─────┼─────┼─────┼─────┤
│ -11 │  -9 │ -29 │   2 │
├─────┼─────┼─────┼─────┤
│   5 │   9 │   3 │  -1 │
├─────┼─────┼─────┼─────┤
│   1 │   2 │   1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 7
  Row 3: input_block[3][2] = -2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 5 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 3 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = 1 (from PE[3][0])
  PE[2][1]: partial_in = 2 (from PE[3][1])
  PE[2][2]: partial_in = 1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=5 -> result=5
  PE[1][1]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][0]: input=7 * weight=0 = 0, partial_in=1 -> result=1
  PE[2][1]: input=7 * weight=1 = 7, partial_in=2 -> result=9
  PE[2][2]: input=7 * weight=2 = 14, partial_in=1 -> result=15
  PE[2][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][0]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][1]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[3][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][3]: input=-2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -11       -9      -29        2 
  Row 1:        5        9        3       -1 
  Row 2:        1        9       15        7 
  Row 3:       -2       -4       -2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │  -9 │ -29 │   2 │
├─────┼─────┼─────┼─────┤
│   5 │   9 │   3 │  -1 │
├─────┼─────┼─────┼─────┤
│   1 │   9 │  15 │   7 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = -1 (from PE[1][3])
  PE[1][0]: partial_in = 1 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 15 (from PE[2][2])
  PE[1][3]: partial_in = 7 (from PE[2][3])
  PE[2][0]: partial_in = -2 (from PE[3][0])
  PE[2][1]: partial_in = -4 (from PE[3][1])
  PE[2][2]: partial_in = -2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=5 -> result=5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=15 -> result=15
  PE[1][3]: input=0 * weight=2 = 0, partial_in=7 -> result=7
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-4 -> result=-4
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-2 -> result=-2
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][1]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[3][2]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][3]: input=15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        5        9        3       -1 
  Row 1:        1        9       15        7 
  Row 2:       -2       -4       -2        0 
  Row 3:       15       30       15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   5 │   9 │   3 │  -1 │
├─────┼─────┼─────┼─────┤
│   1 │   9 │  15 │   7 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        5        9        3       -1 
Row 1:        1        9       15        7 
Row 2:       -2       -4       -2        0 
Row 3:       15       30       15        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 5 -> clamp(5) -> final(133)
  PE[0][1]: 9 -> clamp(9) -> final(137)
  PE[0][2]: 3 -> clamp(3) -> final(131)
  PE[0][3]: -1 -> clamp(-1) -> final(127)
  PE[1][0]: 1 -> clamp(1) -> final(129)
  PE[1][1]: 9 -> clamp(9) -> final(137)
  PE[1][2]: 15 -> clamp(15) -> final(143)
  PE[1][3]: 7 -> clamp(7) -> final(135)
  PE[2][0]: -2 -> clamp(-2) -> final(126)
  PE[2][1]: -4 -> clamp(-4) -> final(124)
  PE[2][2]: -2 -> clamp(-2) -> final(126)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 15 -> clamp(15) -> final(143)
  PE[3][1]: 30 -> clamp(30) -> final(158)
  PE[3][2]: 15 -> clamp(15) -> final(143)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   133    137    131    127 
   129    137    143    135 
   126    124    126    128 
   143    158    143    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  22   69   33   -8 
  24   59   38    2 
  29   30   18    0 
 -17  -39  -35  -15 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=0 -> result=-44
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[0][2]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -44      -22        0       22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │ -22 │   0 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 69
  Row 1: input_block[1][0] = 24
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=69 * weight=-2 = -138, partial_in=0 -> result=-138
  PE[0][1]: input=69 * weight=-1 = -69, partial_in=0 -> result=-69
  PE[0][2]: input=69 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=69 * weight=1 = 69, partial_in=0 -> result=69
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][3]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -138      -69        0       69 
  Row 1:      -24       24       24       48 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-138 │ -69 │   0 │  69 │
├─────┼─────┼─────┼─────┤
│ -24 │  24 │  24 │  48 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 33
  Row 1: input_block[1][1] = 59
  Row 2: input_block[2][0] = 29
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 24 (from PE[1][1])
  PE[0][2]: partial_in = 24 (from PE[1][2])
  PE[0][3]: partial_in = 48 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-24 -> result=-90
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=24 -> result=-9
  PE[0][2]: input=33 * weight=0 = 0, partial_in=24 -> result=24
  PE[0][3]: input=33 * weight=1 = 33, partial_in=48 -> result=81
  PE[1][0]: input=59 * weight=-1 = -59, partial_in=0 -> result=-59
  PE[1][1]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[1][2]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[1][3]: input=59 * weight=2 = 118, partial_in=0 -> result=118
  PE[2][0]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[2][2]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -90       -9       24       81 
  Row 1:      -59       59       59      118 
  Row 2:        0       29       58       29 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │  -9 │  24 │  81 │
├─────┼─────┼─────┼─────┤
│ -59 │  59 │  59 │ 118 │
├─────┼─────┼─────┼─────┤
│   0 │  29 │  58 │  29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -8
  Row 1: input_block[1][2] = 38
  Row 2: input_block[2][1] = 30
  Row 3: input_block[3][0] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -59 (from PE[1][0])
  PE[0][1]: partial_in = 59 (from PE[1][1])
  PE[0][2]: partial_in = 59 (from PE[1][2])
  PE[0][3]: partial_in = 118 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 29 (from PE[2][1])
  PE[1][2]: partial_in = 58 (from PE[2][2])
  PE[1][3]: partial_in = 29 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=-59 -> result=-43
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=59 -> result=67
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=59 -> result=59
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=118 -> result=110
  PE[1][0]: input=38 * weight=-1 = -38, partial_in=0 -> result=-38
  PE[1][1]: input=38 * weight=1 = 38, partial_in=29 -> result=67
  PE[1][2]: input=38 * weight=1 = 38, partial_in=58 -> result=96
  PE[1][3]: input=38 * weight=2 = 76, partial_in=29 -> result=105
  PE[2][0]: input=30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[2][2]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -43       67       59      110 
  Row 1:      -38       67       96      105 
  Row 2:        0       30       60       30 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │  67 │  59 │ 110 │
├─────┼─────┼─────┼─────┤
│ -38 │  67 │  96 │ 105 │
├─────┼─────┼─────┼─────┤
│   0 │  30 │  60 │  30 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 2
  Row 2: input_block[2][2] = 18
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -38 (from PE[1][0])
  PE[0][1]: partial_in = 67 (from PE[1][1])
  PE[0][2]: partial_in = 96 (from PE[1][2])
  PE[0][3]: partial_in = 105 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 30 (from PE[2][1])
  PE[1][2]: partial_in = 60 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-38 -> result=-38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=67 -> result=67
  PE[0][2]: input=0 * weight=0 = 0, partial_in=96 -> result=96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=105 -> result=105
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=30 -> result=32
  PE[1][2]: input=2 * weight=1 = 2, partial_in=60 -> result=62
  PE[1][3]: input=2 * weight=2 = 4, partial_in=30 -> result=34
  PE[2][0]: input=18 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=18 * weight=1 = 18, partial_in=-34 -> result=-16
  PE[2][2]: input=18 * weight=2 = 36, partial_in=-17 -> result=19
  PE[2][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -38       67       96      105 
  Row 1:       -2       32       62       34 
  Row 2:      -17      -16       19       18 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │  67 │  96 │ 105 │
├─────┼─────┼─────┼─────┤
│  -2 │  32 │  62 │  34 │
├─────┼─────┼─────┼─────┤
│ -17 │ -16 │  19 │  18 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 0
  Row 3: input_block[3][2] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 62 (from PE[1][2])
  PE[0][3]: partial_in = 34 (from PE[1][3])
  PE[1][0]: partial_in = -17 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = 19 (from PE[2][2])
  PE[1][3]: partial_in = 18 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=62 -> result=62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][3]: input=0 * weight=2 = 0, partial_in=18 -> result=18
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -2       32       62       34 
  Row 1:      -17      -16       19       18 
  Row 2:      -39      -78      -39        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  32 │  62 │  34 │
├─────┼─────┼─────┼─────┤
│ -17 │ -16 │  19 │  18 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -78 (from PE[2][1])
  PE[1][2]: partial_in = -39 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=18 -> result=18
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -17      -16       19       18 
  Row 1:      -39      -78      -39        0 
  Row 2:      -35      -70      -35        0 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │ -16 │  19 │  18 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -17      -16       19       18 
Row 1:      -39      -78      -39        0 
Row 2:      -35      -70      -35        0 
Row 3:      -15      -30      -15        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -17 -> clamp(-17) -> final(111)
  PE[0][1]: -16 -> clamp(-16) -> final(112)
  PE[0][2]: 19 -> clamp(19) -> final(147)
  PE[0][3]: 18 -> clamp(18) -> final(146)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -78 -> clamp(-78) -> final(50)
  PE[1][2]: -39 -> clamp(-39) -> final(89)
  PE[1][3]: 0 -> clamp(0) -> final(128)
  PE[2][0]: -35 -> clamp(-35) -> final(93)
  PE[2][1]: -70 -> clamp(-70) -> final(58)
  PE[2][2]: -35 -> clamp(-35) -> final(93)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -15 -> clamp(-15) -> final(113)
  PE[3][1]: -30 -> clamp(-30) -> final(98)
  PE[3][2]: -15 -> clamp(-15) -> final(113)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   111    112    147    146 
    89     50     89    128 
    93     58     93    128 
   113     98    113    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   3  -23  -48  -47 
   1  -37  -41  -30 
  -4  -43  -32  -26 
   8  -14    6    0 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=0 -> result=-6
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[0][2]: input=3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -6       -3        0        3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -3 │   0 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -23
  Row 1: input_block[1][0] = 1
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=0 -> result=46
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][3]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       46       23        0      -23 
  Row 1:       -1        1        1        2 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │  23 │   0 │ -23 │
├─────┼─────┼─────┼─────┤
│  -1 │   1 │   1 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -48
  Row 1: input_block[1][1] = -37
  Row 2: input_block[2][0] = -4
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = 1 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=-1 -> result=95
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=1 -> result=49
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=1 -> result=1
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=2 -> result=-46
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       95       49        1      -46 
  Row 1:       37      -37      -37      -74 
  Row 2:        0       -4       -8       -4 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │  49 │   1 │ -46 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │  -4 │  -8 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -47
  Row 1: input_block[1][2] = -41
  Row 2: input_block[2][1] = -43
  Row 3: input_block[3][0] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -4 (from PE[2][1])
  PE[1][2]: partial_in = -8 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-47 * weight=-2 = 94, partial_in=37 -> result=131
  PE[0][1]: input=-47 * weight=-1 = 47, partial_in=-37 -> result=10
  PE[0][2]: input=-47 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-47 * weight=1 = -47, partial_in=-74 -> result=-121
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-4 -> result=-45
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-8 -> result=-49
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-4 -> result=-86
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      131       10      -37     -121 
  Row 1:       41      -45      -49      -86 
  Row 2:        0      -43      -86      -43 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 131 │  10 │ -37 │-121 │
├─────┼─────┼─────┼─────┤
│  41 │ -45 │ -49 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │ -43 │ -86 │ -43 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -30
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = -14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -45 (from PE[1][1])
  PE[0][2]: partial_in = -49 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -86 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = 8 (from PE[3][0])
  PE[2][1]: partial_in = 16 (from PE[3][1])
  PE[2][2]: partial_in = 8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-49 -> result=-49
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-86 -> result=-86
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=-43 -> result=-73
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=-86 -> result=-116
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=-43 -> result=-103
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=8 -> result=8
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=16 -> result=-16
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=8 -> result=-56
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][1]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[3][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][3]: input=-14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       41      -45      -49      -86 
  Row 1:       30      -73     -116     -103 
  Row 2:        8      -16      -56      -32 
  Row 3:      -14      -28      -14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │ -45 │ -49 │ -86 │
├─────┼─────┼─────┼─────┤
│  30 │ -73 │-116 │-103 │
├─────┼─────┼─────┼─────┤
│   8 │ -16 │ -56 │ -32 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -26
  Row 3: input_block[3][2] = 6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -73 (from PE[1][1])
  PE[0][2]: partial_in = -116 (from PE[1][2])
  PE[0][3]: partial_in = -103 (from PE[1][3])
  PE[1][0]: partial_in = 8 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = -14 (from PE[3][0])
  PE[2][1]: partial_in = -28 (from PE[3][1])
  PE[2][2]: partial_in = -14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=30 -> result=30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-116 -> result=-116
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=-14 -> result=-14
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=-28 -> result=-54
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=-14 -> result=-66
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][1]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[3][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][3]: input=6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       30      -73     -116     -103 
  Row 1:        8      -16      -56      -32 
  Row 2:      -14      -54      -66      -26 
  Row 3:        6       12        6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │ -73 │-116 │-103 │
├─────┼─────┼─────┼─────┤
│   8 │ -16 │ -56 │ -32 │
├─────┼─────┼─────┼─────┤
│ -14 │ -54 │ -66 │ -26 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 0

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -16 (from PE[1][1])
  PE[0][2]: partial_in = -56 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -14 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = 6 (from PE[3][0])
  PE[2][1]: partial_in = 12 (from PE[3][1])
  PE[2][2]: partial_in = 6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=8 -> result=8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-16 -> result=-16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][0]: input=0 * weight=0 = 0, partial_in=6 -> result=6
  PE[2][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[2][2]: input=0 * weight=2 = 0, partial_in=6 -> result=6
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        8      -16      -56      -32 
  Row 1:      -14      -54      -66      -26 
  Row 2:        6       12        6        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │ -16 │ -56 │ -32 │
├─────┼─────┼─────┼─────┤
│ -14 │ -54 │ -66 │ -26 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        8      -16      -56      -32 
Row 1:      -14      -54      -66      -26 
Row 2:        6       12        6        0 
Row 3:        0        0        0        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 8 -> clamp(8) -> final(136)
  PE[0][1]: -16 -> clamp(-16) -> final(112)
  PE[0][2]: -56 -> clamp(-56) -> final(72)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: -14 -> clamp(-14) -> final(114)
  PE[1][1]: -54 -> clamp(-54) -> final(74)
  PE[1][2]: -66 -> clamp(-66) -> final(62)
  PE[1][3]: -26 -> clamp(-26) -> final(102)
  PE[2][0]: 6 -> clamp(6) -> final(134)
  PE[2][1]: 12 -> clamp(12) -> final(140)
  PE[2][2]: 6 -> clamp(6) -> final(134)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 0 -> clamp(0) -> final(128)
  PE[3][1]: 0 -> clamp(0) -> final(128)
  PE[3][2]: 0 -> clamp(0) -> final(128)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   136    112     72     96 
   114     74     62    102 
   134    140    134    128 
   128    128    128    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -16   -1   13   40 
 -11    9   19   21 
   0   13   32   31 
   3    9   41   53 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -16
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=0 -> result=32
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       32       16        0      -16 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  16 │   0 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -1
  Row 1: input_block[1][0] = -11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=0 -> result=2
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=0 -> result=1
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        2        1        0       -1 
  Row 1:       11      -11      -11      -22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   2 │   1 │   0 │  -1 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 13
  Row 1: input_block[1][1] = 9
  Row 2: input_block[2][0] = 0
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=11 -> result=-15
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=-11 -> result=-24
  PE[0][2]: input=13 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=13 * weight=1 = 13, partial_in=-22 -> result=-9
  PE[1][0]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[1][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][3]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -15      -24      -11       -9 
  Row 1:       -9        9        9       18 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │ -24 │ -11 │  -9 │
├─────┼─────┼─────┼─────┤
│  -9 │   9 │   9 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 40
  Row 1: input_block[1][2] = 19
  Row 2: input_block[2][1] = 13
  Row 3: input_block[3][0] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 9 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=40 * weight=-2 = -80, partial_in=-9 -> result=-89
  PE[0][1]: input=40 * weight=-1 = -40, partial_in=9 -> result=-31
  PE[0][2]: input=40 * weight=0 = 0, partial_in=9 -> result=9
  PE[0][3]: input=40 * weight=1 = 40, partial_in=18 -> result=58
  PE[1][0]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[1][1]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[1][2]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[1][3]: input=19 * weight=2 = 38, partial_in=0 -> result=38
  PE[2][0]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[2][2]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -89      -31        9       58 
  Row 1:      -19       19       19       38 
  Row 2:        0       13       26       13 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -89 │ -31 │   9 │  58 │
├─────┼─────┼─────┼─────┤
│ -19 │  19 │  19 │  38 │
├─────┼─────┼─────┼─────┤
│   0 │  13 │  26 │  13 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 21
  Row 2: input_block[2][2] = 32
  Row 3: input_block[3][1] = 9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -19 (from PE[1][0])
  PE[0][1]: partial_in = 19 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = 38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = 26 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 3 (from PE[3][0])
  PE[2][1]: partial_in = 6 (from PE[3][1])
  PE[2][2]: partial_in = 3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-19 -> result=-19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=19 -> result=19
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=13 -> result=34
  PE[1][2]: input=21 * weight=1 = 21, partial_in=26 -> result=47
  PE[1][3]: input=21 * weight=2 = 42, partial_in=13 -> result=55
  PE[2][0]: input=32 * weight=0 = 0, partial_in=3 -> result=3
  PE[2][1]: input=32 * weight=1 = 32, partial_in=6 -> result=38
  PE[2][2]: input=32 * weight=2 = 64, partial_in=3 -> result=67
  PE[2][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][0]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][1]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[3][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][3]: input=9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -19       19       19       38 
  Row 1:      -21       34       47       55 
  Row 2:        3       38       67       32 
  Row 3:        9       18        9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -19 │  19 │  19 │  38 │
├─────┼─────┼─────┼─────┤
│ -21 │  34 │  47 │  55 │
├─────┼─────┼─────┼─────┤
│   3 │  38 │  67 │  32 │
├─────┼─────┼─────┼─────┤
│   9 │  18 │   9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 31
  Row 3: input_block[3][2] = 41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 34 (from PE[1][1])
  PE[0][2]: partial_in = 47 (from PE[1][2])
  PE[0][3]: partial_in = 55 (from PE[1][3])
  PE[1][0]: partial_in = 3 (from PE[2][0])
  PE[1][1]: partial_in = 38 (from PE[2][1])
  PE[1][2]: partial_in = 67 (from PE[2][2])
  PE[1][3]: partial_in = 32 (from PE[2][3])
  PE[2][0]: partial_in = 9 (from PE[3][0])
  PE[2][1]: partial_in = 18 (from PE[3][1])
  PE[2][2]: partial_in = 9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-21 -> result=-21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=34 -> result=34
  PE[0][2]: input=0 * weight=0 = 0, partial_in=47 -> result=47
  PE[0][3]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[1][1]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[1][2]: input=0 * weight=1 = 0, partial_in=67 -> result=67
  PE[1][3]: input=0 * weight=2 = 0, partial_in=32 -> result=32
  PE[2][0]: input=31 * weight=0 = 0, partial_in=9 -> result=9
  PE[2][1]: input=31 * weight=1 = 31, partial_in=18 -> result=49
  PE[2][2]: input=31 * weight=2 = 62, partial_in=9 -> result=71
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][1]: input=41 * weight=2 = 82, partial_in=0 -> result=82
  PE[3][2]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][3]: input=41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -21       34       47       55 
  Row 1:        3       38       67       32 
  Row 2:        9       49       71       31 
  Row 3:       41       82       41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  34 │  47 │  55 │
├─────┼─────┼─────┼─────┤
│   3 │  38 │  67 │  32 │
├─────┼─────┼─────┼─────┤
│   9 │  49 │  71 │  31 │
├─────┼─────┼─────┼─────┤
│  41 │  82 │  41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 67 (from PE[1][2])
  PE[0][3]: partial_in = 32 (from PE[1][3])
  PE[1][0]: partial_in = 9 (from PE[2][0])
  PE[1][1]: partial_in = 49 (from PE[2][1])
  PE[1][2]: partial_in = 71 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 41 (from PE[3][0])
  PE[2][1]: partial_in = 82 (from PE[3][1])
  PE[2][2]: partial_in = 41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=67 -> result=67
  PE[0][3]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=49 -> result=49
  PE[1][2]: input=0 * weight=1 = 0, partial_in=71 -> result=71
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=0 * weight=0 = 0, partial_in=41 -> result=41
  PE[2][1]: input=0 * weight=1 = 0, partial_in=82 -> result=82
  PE[2][2]: input=0 * weight=2 = 0, partial_in=41 -> result=41
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][1]: input=53 * weight=2 = 106, partial_in=0 -> result=106
  PE[3][2]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][3]: input=53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        3       38       67       32 
  Row 1:        9       49       71       31 
  Row 2:       41       82       41        0 
  Row 3:       53      106       53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │  38 │  67 │  32 │
├─────┼─────┼─────┼─────┤
│   9 │  49 │  71 │  31 │
├─────┼─────┼─────┼─────┤
│  41 │  82 │  41 │   0 │
├─────┼─────┼─────┼─────┤
│  53 │ 106 │  53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        3       38       67       32 
Row 1:        9       49       71       31 
Row 2:       41       82       41        0 
Row 3:       53      106       53        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 3 -> clamp(3) -> final(131)
  PE[0][1]: 38 -> clamp(38) -> final(166)
  PE[0][2]: 67 -> clamp(67) -> final(195)
  PE[0][3]: 32 -> clamp(32) -> final(160)
  PE[1][0]: 9 -> clamp(9) -> final(137)
  PE[1][1]: 49 -> clamp(49) -> final(177)
  PE[1][2]: 71 -> clamp(71) -> final(199)
  PE[1][3]: 31 -> clamp(31) -> final(159)
  PE[2][0]: 41 -> clamp(41) -> final(169)
  PE[2][1]: 82 -> clamp(82) -> final(210)
  PE[2][2]: 41 -> clamp(41) -> final(169)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 53 -> clamp(53) -> final(181)
  PE[3][1]: 106 -> clamp(106) -> final(234)
  PE[3][2]: 53 -> clamp(53) -> final(181)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   131    166    195    160 
   137    177    199    159 
   169    210    169    128 
   181    234    181    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  44  -36  -95  -61 
  21  -36 -101  -85 
  21  -38 -110 -103 
  35  -39 -121 -116 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 44
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=44 * weight=-2 = -88, partial_in=0 -> result=-88
  PE[0][1]: input=44 * weight=-1 = -44, partial_in=0 -> result=-44
  PE[0][2]: input=44 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -88      -44        0       44 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -88 │ -44 │   0 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -36
  Row 1: input_block[1][0] = 21
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=0 -> result=72
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[1][2]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[1][3]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       72       36        0      -36 
  Row 1:      -21       21       21       42 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  72 │  36 │   0 │ -36 │
├─────┼─────┼─────┼─────┤
│ -21 │  21 │  21 │  42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -95
  Row 1: input_block[1][1] = -36
  Row 2: input_block[2][0] = 21
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 21 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = 42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-95 * weight=-2 = 190, partial_in=-21 -> result=169
  PE[0][1]: input=-95 * weight=-1 = 95, partial_in=21 -> result=116
  PE[0][2]: input=-95 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=-95 * weight=1 = -95, partial_in=42 -> result=-53
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[2][0]: input=21 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[2][2]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      169      116       21      -53 
  Row 1:       36      -36      -36      -72 
  Row 2:        0       21       42       21 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 169 │ 116 │  21 │ -53 │
├─────┼─────┼─────┼─────┤
│  36 │ -36 │ -36 │ -72 │
├─────┼─────┼─────┼─────┤
│   0 │  21 │  42 │  21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -61
  Row 1: input_block[1][2] = -101
  Row 2: input_block[2][1] = -38
  Row 3: input_block[3][0] = 35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -36 (from PE[1][2])
  PE[0][3]: partial_in = -72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 21 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=36 -> result=158
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-36 -> result=25
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-72 -> result=-133
  PE[1][0]: input=-101 * weight=-1 = 101, partial_in=0 -> result=101
  PE[1][1]: input=-101 * weight=1 = -101, partial_in=21 -> result=-80
  PE[1][2]: input=-101 * weight=1 = -101, partial_in=42 -> result=-59
  PE[1][3]: input=-101 * weight=2 = -202, partial_in=21 -> result=-181
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][1]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[3][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][3]: input=35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      158       25      -36     -133 
  Row 1:      101      -80      -59     -181 
  Row 2:        0      -38      -76      -38 
  Row 3:       35       70       35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 158 │  25 │ -36 │-133 │
├─────┼─────┼─────┼─────┤
│ 101 │ -80 │ -59 │-181 │
├─────┼─────┼─────┼─────┤
│   0 │ -38 │ -76 │ -38 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -85
  Row 2: input_block[2][2] = -110
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 101 (from PE[1][0])
  PE[0][1]: partial_in = -80 (from PE[1][1])
  PE[0][2]: partial_in = -59 (from PE[1][2])
  PE[0][3]: partial_in = -181 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -38 (from PE[2][1])
  PE[1][2]: partial_in = -76 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = 35 (from PE[3][0])
  PE[2][1]: partial_in = 70 (from PE[3][1])
  PE[2][2]: partial_in = 35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=101 -> result=101
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-80 -> result=-80
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][0]: input=-85 * weight=-1 = 85, partial_in=0 -> result=85
  PE[1][1]: input=-85 * weight=1 = -85, partial_in=-38 -> result=-123
  PE[1][2]: input=-85 * weight=1 = -85, partial_in=-76 -> result=-161
  PE[1][3]: input=-85 * weight=2 = -170, partial_in=-38 -> result=-208
  PE[2][0]: input=-110 * weight=0 = 0, partial_in=35 -> result=35
  PE[2][1]: input=-110 * weight=1 = -110, partial_in=70 -> result=-40
  PE[2][2]: input=-110 * weight=2 = -220, partial_in=35 -> result=-185
  PE[2][3]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      101      -80      -59     -181 
  Row 1:       85     -123     -161     -208 
  Row 2:       35      -40     -185     -110 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 101 │ -80 │ -59 │-181 │
├─────┼─────┼─────┼─────┤
│  85 │-123 │-161 │-208 │
├─────┼─────┼─────┼─────┤
│  35 │ -40 │-185 │-110 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -103
  Row 3: input_block[3][2] = -121

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 85 (from PE[1][0])
  PE[0][1]: partial_in = -123 (from PE[1][1])
  PE[0][2]: partial_in = -161 (from PE[1][2])
  PE[0][3]: partial_in = -208 (from PE[1][3])
  PE[1][0]: partial_in = 35 (from PE[2][0])
  PE[1][1]: partial_in = -40 (from PE[2][1])
  PE[1][2]: partial_in = -185 (from PE[2][2])
  PE[1][3]: partial_in = -110 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=85 -> result=85
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-123 -> result=-123
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-161 -> result=-161
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-208 -> result=-208
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=35 -> result=35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-40 -> result=-40
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-185 -> result=-185
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-110 -> result=-110
  PE[2][0]: input=-103 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-103 * weight=1 = -103, partial_in=-78 -> result=-181
  PE[2][2]: input=-103 * weight=2 = -206, partial_in=-39 -> result=-245
  PE[2][3]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][0]: input=-121 * weight=1 = -121, partial_in=0 -> result=-121
  PE[3][1]: input=-121 * weight=2 = -242, partial_in=0 -> result=-242
  PE[3][2]: input=-121 * weight=1 = -121, partial_in=0 -> result=-121
  PE[3][3]: input=-121 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       85     -123     -161     -208 
  Row 1:       35      -40     -185     -110 
  Row 2:      -39     -181     -245     -103 
  Row 3:     -121     -242     -121        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  85 │-123 │-161 │-208 │
├─────┼─────┼─────┼─────┤
│  35 │ -40 │-185 │-110 │
├─────┼─────┼─────┼─────┤
│ -39 │-181 │-245 │-103 │
├─────┼─────┼─────┼─────┤
│-121 │-242 │-121 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -116

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -40 (from PE[1][1])
  PE[0][2]: partial_in = -185 (from PE[1][2])
  PE[0][3]: partial_in = -110 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -181 (from PE[2][1])
  PE[1][2]: partial_in = -245 (from PE[2][2])
  PE[1][3]: partial_in = -103 (from PE[2][3])
  PE[2][0]: partial_in = -121 (from PE[3][0])
  PE[2][1]: partial_in = -242 (from PE[3][1])
  PE[2][2]: partial_in = -121 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-40 -> result=-40
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-185 -> result=-185
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-110 -> result=-110
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-245 -> result=-245
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-103 -> result=-103
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-121 -> result=-121
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-242 -> result=-242
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-121 -> result=-121
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-116 * weight=1 = -116, partial_in=0 -> result=-116
  PE[3][1]: input=-116 * weight=2 = -232, partial_in=0 -> result=-232
  PE[3][2]: input=-116 * weight=1 = -116, partial_in=0 -> result=-116
  PE[3][3]: input=-116 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       35      -40     -185     -110 
  Row 1:      -39     -181     -245     -103 
  Row 2:     -121     -242     -121        0 
  Row 3:     -116     -232     -116        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -40 │-185 │-110 │
├─────┼─────┼─────┼─────┤
│ -39 │-181 │-245 │-103 │
├─────┼─────┼─────┼─────┤
│-121 │-242 │-121 │   0 │
├─────┼─────┼─────┼─────┤
│-116 │-232 │-116 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       35      -40     -185     -110 
Row 1:      -39     -181     -245     -103 
Row 2:     -121     -242     -121        0 
Row 3:     -116     -232     -116        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 35 -> clamp(35) -> final(163)
  PE[0][1]: -40 -> clamp(-40) -> final(88)
  PE[0][2]: -185 -> clamp(-128) -> final(0)
  PE[0][3]: -110 -> clamp(-110) -> final(18)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -181 -> clamp(-128) -> final(0)
  PE[1][2]: -245 -> clamp(-128) -> final(0)
  PE[1][3]: -103 -> clamp(-103) -> final(25)
  PE[2][0]: -121 -> clamp(-121) -> final(7)
  PE[2][1]: -242 -> clamp(-128) -> final(0)
  PE[2][2]: -121 -> clamp(-121) -> final(7)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -116 -> clamp(-116) -> final(12)
  PE[3][1]: -232 -> clamp(-128) -> final(0)
  PE[3][2]: -116 -> clamp(-116) -> final(12)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   163     88      0     18 
    89      0      0     25 
     7      0      7    128 
    12      0     12    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -44  -49  -58  -53 
 -72  -63  -58  -49 
 -95  -72  -56  -51 
 -87  -57  -40  -43 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -44
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=0 -> result=88
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       88       44        0      -44 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  88 │  44 │   0 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -49
  Row 1: input_block[1][0] = -72
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-49 * weight=-2 = 98, partial_in=0 -> result=98
  PE[0][1]: input=-49 * weight=-1 = 49, partial_in=0 -> result=49
  PE[0][2]: input=-49 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[1][0]: input=-72 * weight=-1 = 72, partial_in=0 -> result=72
  PE[1][1]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][3]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       98       49        0      -49 
  Row 1:       72      -72      -72     -144 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  98 │  49 │   0 │ -49 │
├─────┼─────┼─────┼─────┤
│  72 │ -72 │ -72 │-144 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -58
  Row 1: input_block[1][1] = -63
  Row 2: input_block[2][0] = -95
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 72 (from PE[1][0])
  PE[0][1]: partial_in = -72 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-58 * weight=-2 = 116, partial_in=72 -> result=188
  PE[0][1]: input=-58 * weight=-1 = 58, partial_in=-72 -> result=-14
  PE[0][2]: input=-58 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=-58 * weight=1 = -58, partial_in=-144 -> result=-202
  PE[1][0]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[1][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][3]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][0]: input=-95 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[2][2]: input=-95 * weight=2 = -190, partial_in=0 -> result=-190
  PE[2][3]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      188      -14      -72     -202 
  Row 1:       63      -63      -63     -126 
  Row 2:        0      -95     -190      -95 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 188 │ -14 │ -72 │-202 │
├─────┼─────┼─────┼─────┤
│  63 │ -63 │ -63 │-126 │
├─────┼─────┼─────┼─────┤
│   0 │ -95 │-190 │ -95 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -53
  Row 1: input_block[1][2] = -58
  Row 2: input_block[2][1] = -72
  Row 3: input_block[3][0] = -87

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 63 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -95 (from PE[2][1])
  PE[1][2]: partial_in = -190 (from PE[2][2])
  PE[1][3]: partial_in = -95 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=63 -> result=169
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=-63 -> result=-10
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=-126 -> result=-179
  PE[1][0]: input=-58 * weight=-1 = 58, partial_in=0 -> result=58
  PE[1][1]: input=-58 * weight=1 = -58, partial_in=-95 -> result=-153
  PE[1][2]: input=-58 * weight=1 = -58, partial_in=-190 -> result=-248
  PE[1][3]: input=-58 * weight=2 = -116, partial_in=-95 -> result=-211
  PE[2][0]: input=-72 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[2][2]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[2][3]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][0]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][1]: input=-87 * weight=2 = -174, partial_in=0 -> result=-174
  PE[3][2]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][3]: input=-87 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      169      -10      -63     -179 
  Row 1:       58     -153     -248     -211 
  Row 2:        0      -72     -144      -72 
  Row 3:      -87     -174      -87        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 169 │ -10 │ -63 │-179 │
├─────┼─────┼─────┼─────┤
│  58 │-153 │-248 │-211 │
├─────┼─────┼─────┼─────┤
│   0 │ -72 │-144 │ -72 │
├─────┼─────┼─────┼─────┤
│ -87 │-174 │ -87 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -49
  Row 2: input_block[2][2] = -56
  Row 3: input_block[3][1] = -57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 58 (from PE[1][0])
  PE[0][1]: partial_in = -153 (from PE[1][1])
  PE[0][2]: partial_in = -248 (from PE[1][2])
  PE[0][3]: partial_in = -211 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -72 (from PE[2][1])
  PE[1][2]: partial_in = -144 (from PE[2][2])
  PE[1][3]: partial_in = -72 (from PE[2][3])
  PE[2][0]: partial_in = -87 (from PE[3][0])
  PE[2][1]: partial_in = -174 (from PE[3][1])
  PE[2][2]: partial_in = -87 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=58 -> result=58
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-153 -> result=-153
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-248 -> result=-248
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-211 -> result=-211
  PE[1][0]: input=-49 * weight=-1 = 49, partial_in=0 -> result=49
  PE[1][1]: input=-49 * weight=1 = -49, partial_in=-72 -> result=-121
  PE[1][2]: input=-49 * weight=1 = -49, partial_in=-144 -> result=-193
  PE[1][3]: input=-49 * weight=2 = -98, partial_in=-72 -> result=-170
  PE[2][0]: input=-56 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[2][1]: input=-56 * weight=1 = -56, partial_in=-174 -> result=-230
  PE[2][2]: input=-56 * weight=2 = -112, partial_in=-87 -> result=-199
  PE[2][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][0]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][1]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[3][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][3]: input=-57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       58     -153     -248     -211 
  Row 1:       49     -121     -193     -170 
  Row 2:      -87     -230     -199      -56 
  Row 3:      -57     -114      -57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │-153 │-248 │-211 │
├─────┼─────┼─────┼─────┤
│  49 │-121 │-193 │-170 │
├─────┼─────┼─────┼─────┤
│ -87 │-230 │-199 │ -56 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -51
  Row 3: input_block[3][2] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 49 (from PE[1][0])
  PE[0][1]: partial_in = -121 (from PE[1][1])
  PE[0][2]: partial_in = -193 (from PE[1][2])
  PE[0][3]: partial_in = -170 (from PE[1][3])
  PE[1][0]: partial_in = -87 (from PE[2][0])
  PE[1][1]: partial_in = -230 (from PE[2][1])
  PE[1][2]: partial_in = -199 (from PE[2][2])
  PE[1][3]: partial_in = -56 (from PE[2][3])
  PE[2][0]: partial_in = -57 (from PE[3][0])
  PE[2][1]: partial_in = -114 (from PE[3][1])
  PE[2][2]: partial_in = -57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=49 -> result=49
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-121 -> result=-121
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-193 -> result=-193
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-170 -> result=-170
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-87 -> result=-87
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-230 -> result=-230
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-199 -> result=-199
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-56 -> result=-56
  PE[2][0]: input=-51 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[2][1]: input=-51 * weight=1 = -51, partial_in=-114 -> result=-165
  PE[2][2]: input=-51 * weight=2 = -102, partial_in=-57 -> result=-159
  PE[2][3]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       49     -121     -193     -170 
  Row 1:      -87     -230     -199      -56 
  Row 2:      -57     -165     -159      -51 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  49 │-121 │-193 │-170 │
├─────┼─────┼─────┼─────┤
│ -87 │-230 │-199 │ -56 │
├─────┼─────┼─────┼─────┤
│ -57 │-165 │-159 │ -51 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -87 (from PE[1][0])
  PE[0][1]: partial_in = -230 (from PE[1][1])
  PE[0][2]: partial_in = -199 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = -57 (from PE[2][0])
  PE[1][1]: partial_in = -165 (from PE[2][1])
  PE[1][2]: partial_in = -159 (from PE[2][2])
  PE[1][3]: partial_in = -51 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-87 -> result=-87
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-230 -> result=-230
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-199 -> result=-199
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-165 -> result=-165
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-159 -> result=-159
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-51 -> result=-51
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -87     -230     -199      -56 
  Row 1:      -57     -165     -159      -51 
  Row 2:      -40      -80      -40        0 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -87 │-230 │-199 │ -56 │
├─────┼─────┼─────┼─────┤
│ -57 │-165 │-159 │ -51 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -87     -230     -199      -56 
Row 1:      -57     -165     -159      -51 
Row 2:      -40      -80      -40        0 
Row 3:      -43      -86      -43        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -87 -> clamp(-87) -> final(41)
  PE[0][1]: -230 -> clamp(-128) -> final(0)
  PE[0][2]: -199 -> clamp(-128) -> final(0)
  PE[0][3]: -56 -> clamp(-56) -> final(72)
  PE[1][0]: -57 -> clamp(-57) -> final(71)
  PE[1][1]: -165 -> clamp(-128) -> final(0)
  PE[1][2]: -159 -> clamp(-128) -> final(0)
  PE[1][3]: -51 -> clamp(-51) -> final(77)
  PE[2][0]: -40 -> clamp(-40) -> final(88)
  PE[2][1]: -80 -> clamp(-80) -> final(48)
  PE[2][2]: -40 -> clamp(-40) -> final(88)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -43 -> clamp(-43) -> final(85)
  PE[3][1]: -86 -> clamp(-86) -> final(42)
  PE[3][2]: -43 -> clamp(-43) -> final(85)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    41      0      0     72 
    71      0      0     77 
    88     48     88    128 
    85     42     85    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -41  -43  -47  -39 
 -37  -37  -40  -32 
 -44  -43  -39  -28 
 -44  -39  -27   -9 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -41
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=0 -> result=82
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       82       41        0      -41 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │  41 │   0 │ -41 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -43
  Row 1: input_block[1][0] = -37
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=0 -> result=86
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       86       43        0      -43 
  Row 1:       37      -37      -37      -74 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  43 │   0 │ -43 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -47
  Row 1: input_block[1][1] = -37
  Row 2: input_block[2][0] = -44
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-47 * weight=-2 = 94, partial_in=37 -> result=131
  PE[0][1]: input=-47 * weight=-1 = 47, partial_in=-37 -> result=10
  PE[0][2]: input=-47 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-47 * weight=1 = -47, partial_in=-74 -> result=-121
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[2][2]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      131       10      -37     -121 
  Row 1:       37      -37      -37      -74 
  Row 2:        0      -44      -88      -44 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 131 │  10 │ -37 │-121 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │ -44 │ -88 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -39
  Row 1: input_block[1][2] = -40
  Row 2: input_block[2][1] = -43
  Row 3: input_block[3][0] = -44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -44 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=37 -> result=115
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=-37 -> result=2
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=-74 -> result=-113
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=-44 -> result=-84
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=-88 -> result=-128
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=-44 -> result=-124
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][1]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[3][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][3]: input=-44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      115        2      -37     -113 
  Row 1:       40      -84     -128     -124 
  Row 2:        0      -43      -86      -43 
  Row 3:      -44      -88      -44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 115 │   2 │ -37 │-113 │
├─────┼─────┼─────┼─────┤
│  40 │ -84 │-128 │-124 │
├─────┼─────┼─────┼─────┤
│   0 │ -43 │ -86 │ -43 │
├─────┼─────┼─────┼─────┤
│ -44 │ -88 │ -44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -32
  Row 2: input_block[2][2] = -39
  Row 3: input_block[3][1] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = -84 (from PE[1][1])
  PE[0][2]: partial_in = -128 (from PE[1][2])
  PE[0][3]: partial_in = -124 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -86 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -44 (from PE[3][0])
  PE[2][1]: partial_in = -88 (from PE[3][1])
  PE[2][2]: partial_in = -44 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-128 -> result=-128
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-124 -> result=-124
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-43 -> result=-75
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-86 -> result=-118
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-43 -> result=-107
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-88 -> result=-127
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-44 -> result=-122
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       40      -84     -128     -124 
  Row 1:       32      -75     -118     -107 
  Row 2:      -44     -127     -122      -39 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ -84 │-128 │-124 │
├─────┼─────┼─────┼─────┤
│  32 │ -75 │-118 │-107 │
├─────┼─────┼─────┼─────┤
│ -44 │-127 │-122 │ -39 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -28
  Row 3: input_block[3][2] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -75 (from PE[1][1])
  PE[0][2]: partial_in = -118 (from PE[1][2])
  PE[0][3]: partial_in = -107 (from PE[1][3])
  PE[1][0]: partial_in = -44 (from PE[2][0])
  PE[1][1]: partial_in = -127 (from PE[2][1])
  PE[1][2]: partial_in = -122 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -39 (from PE[3][0])
  PE[2][1]: partial_in = -78 (from PE[3][1])
  PE[2][2]: partial_in = -39 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-75 -> result=-75
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-118 -> result=-118
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-107 -> result=-107
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-44 -> result=-44
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-127 -> result=-127
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-122 -> result=-122
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=-78 -> result=-106
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=-39 -> result=-95
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       32      -75     -118     -107 
  Row 1:      -44     -127     -122      -39 
  Row 2:      -39     -106      -95      -28 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -75 │-118 │-107 │
├─────┼─────┼─────┼─────┤
│ -44 │-127 │-122 │ -39 │
├─────┼─────┼─────┼─────┤
│ -39 │-106 │ -95 │ -28 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -44 (from PE[1][0])
  PE[0][1]: partial_in = -127 (from PE[1][1])
  PE[0][2]: partial_in = -122 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = -39 (from PE[2][0])
  PE[1][1]: partial_in = -106 (from PE[2][1])
  PE[1][2]: partial_in = -95 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-44 -> result=-44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-127 -> result=-127
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-122 -> result=-122
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-106 -> result=-106
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -44     -127     -122      -39 
  Row 1:      -39     -106      -95      -28 
  Row 2:      -27      -54      -27        0 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │-127 │-122 │ -39 │
├─────┼─────┼─────┼─────┤
│ -39 │-106 │ -95 │ -28 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -44     -127     -122      -39 
Row 1:      -39     -106      -95      -28 
Row 2:      -27      -54      -27        0 
Row 3:       -9      -18       -9        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -44 -> clamp(-44) -> final(84)
  PE[0][1]: -127 -> clamp(-127) -> final(1)
  PE[0][2]: -122 -> clamp(-122) -> final(6)
  PE[0][3]: -39 -> clamp(-39) -> final(89)
  PE[1][0]: -39 -> clamp(-39) -> final(89)
  PE[1][1]: -106 -> clamp(-106) -> final(22)
  PE[1][2]: -95 -> clamp(-95) -> final(33)
  PE[1][3]: -28 -> clamp(-28) -> final(100)
  PE[2][0]: -27 -> clamp(-27) -> final(101)
  PE[2][1]: -54 -> clamp(-54) -> final(74)
  PE[2][2]: -27 -> clamp(-27) -> final(101)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -9 -> clamp(-9) -> final(119)
  PE[3][1]: -18 -> clamp(-18) -> final(110)
  PE[3][2]: -9 -> clamp(-9) -> final(119)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    84      1      6     89 
    89     22     33    100 
   101     74    101    128 
   119    110    119    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -62  -61  -61  -62 
 -71  -66  -65  -70 
 -59  -57  -65  -79 
 -58  -57  -66  -79 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -62
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-62 * weight=-2 = 124, partial_in=0 -> result=124
  PE[0][1]: input=-62 * weight=-1 = 62, partial_in=0 -> result=62
  PE[0][2]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      124       62        0      -62 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 124 │  62 │   0 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -61
  Row 1: input_block[1][0] = -71
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=0 -> result=122
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=0 -> result=61
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[1][0]: input=-71 * weight=-1 = 71, partial_in=0 -> result=71
  PE[1][1]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[1][2]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[1][3]: input=-71 * weight=2 = -142, partial_in=0 -> result=-142
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      122       61        0      -61 
  Row 1:       71      -71      -71     -142 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 122 │  61 │   0 │ -61 │
├─────┼─────┼─────┼─────┤
│  71 │ -71 │ -71 │-142 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -61
  Row 1: input_block[1][1] = -66
  Row 2: input_block[2][0] = -59
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 71 (from PE[1][0])
  PE[0][1]: partial_in = -71 (from PE[1][1])
  PE[0][2]: partial_in = -71 (from PE[1][2])
  PE[0][3]: partial_in = -142 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=71 -> result=193
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-71 -> result=-10
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-71 -> result=-71
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-142 -> result=-203
  PE[1][0]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[1][1]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][3]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      193      -10      -71     -203 
  Row 1:       66      -66      -66     -132 
  Row 2:        0      -59     -118      -59 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 193 │ -10 │ -71 │-203 │
├─────┼─────┼─────┼─────┤
│  66 │ -66 │ -66 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -62
  Row 1: input_block[1][2] = -65
  Row 2: input_block[2][1] = -57
  Row 3: input_block[3][0] = -58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 66 (from PE[1][0])
  PE[0][1]: partial_in = -66 (from PE[1][1])
  PE[0][2]: partial_in = -66 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-62 * weight=-2 = 124, partial_in=66 -> result=190
  PE[0][1]: input=-62 * weight=-1 = 62, partial_in=-66 -> result=-4
  PE[0][2]: input=-62 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[0][3]: input=-62 * weight=1 = -62, partial_in=-132 -> result=-194
  PE[1][0]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[1][1]: input=-65 * weight=1 = -65, partial_in=-59 -> result=-124
  PE[1][2]: input=-65 * weight=1 = -65, partial_in=-118 -> result=-183
  PE[1][3]: input=-65 * weight=2 = -130, partial_in=-59 -> result=-189
  PE[2][0]: input=-57 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[2][2]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[2][3]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][0]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][1]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[3][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][3]: input=-58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      190       -4      -66     -194 
  Row 1:       65     -124     -183     -189 
  Row 2:        0      -57     -114      -57 
  Row 3:      -58     -116      -58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 190 │  -4 │ -66 │-194 │
├─────┼─────┼─────┼─────┤
│  65 │-124 │-183 │-189 │
├─────┼─────┼─────┼─────┤
│   0 │ -57 │-114 │ -57 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -70
  Row 2: input_block[2][2] = -65
  Row 3: input_block[3][1] = -57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 65 (from PE[1][0])
  PE[0][1]: partial_in = -124 (from PE[1][1])
  PE[0][2]: partial_in = -183 (from PE[1][2])
  PE[0][3]: partial_in = -189 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -57 (from PE[2][1])
  PE[1][2]: partial_in = -114 (from PE[2][2])
  PE[1][3]: partial_in = -57 (from PE[2][3])
  PE[2][0]: partial_in = -58 (from PE[3][0])
  PE[2][1]: partial_in = -116 (from PE[3][1])
  PE[2][2]: partial_in = -58 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=65 -> result=65
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-124 -> result=-124
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-183 -> result=-183
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-189 -> result=-189
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=-57 -> result=-127
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=-114 -> result=-184
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=-57 -> result=-197
  PE[2][0]: input=-65 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[2][1]: input=-65 * weight=1 = -65, partial_in=-116 -> result=-181
  PE[2][2]: input=-65 * weight=2 = -130, partial_in=-58 -> result=-188
  PE[2][3]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][0]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][1]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[3][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][3]: input=-57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       65     -124     -183     -189 
  Row 1:       70     -127     -184     -197 
  Row 2:      -58     -181     -188      -65 
  Row 3:      -57     -114      -57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  65 │-124 │-183 │-189 │
├─────┼─────┼─────┼─────┤
│  70 │-127 │-184 │-197 │
├─────┼─────┼─────┼─────┤
│ -58 │-181 │-188 │ -65 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -79
  Row 3: input_block[3][2] = -66

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -127 (from PE[1][1])
  PE[0][2]: partial_in = -184 (from PE[1][2])
  PE[0][3]: partial_in = -197 (from PE[1][3])
  PE[1][0]: partial_in = -58 (from PE[2][0])
  PE[1][1]: partial_in = -181 (from PE[2][1])
  PE[1][2]: partial_in = -188 (from PE[2][2])
  PE[1][3]: partial_in = -65 (from PE[2][3])
  PE[2][0]: partial_in = -57 (from PE[3][0])
  PE[2][1]: partial_in = -114 (from PE[3][1])
  PE[2][2]: partial_in = -57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=70 -> result=70
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-127 -> result=-127
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-184 -> result=-184
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-197 -> result=-197
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-188 -> result=-188
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-65 -> result=-65
  PE[2][0]: input=-79 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[2][1]: input=-79 * weight=1 = -79, partial_in=-114 -> result=-193
  PE[2][2]: input=-79 * weight=2 = -158, partial_in=-57 -> result=-215
  PE[2][3]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][0]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[3][1]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[3][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[3][3]: input=-66 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       70     -127     -184     -197 
  Row 1:      -58     -181     -188      -65 
  Row 2:      -57     -193     -215      -79 
  Row 3:      -66     -132      -66        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │-127 │-184 │-197 │
├─────┼─────┼─────┼─────┤
│ -58 │-181 │-188 │ -65 │
├─────┼─────┼─────┼─────┤
│ -57 │-193 │-215 │ -79 │
├─────┼─────┼─────┼─────┤
│ -66 │-132 │ -66 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -79

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -58 (from PE[1][0])
  PE[0][1]: partial_in = -181 (from PE[1][1])
  PE[0][2]: partial_in = -188 (from PE[1][2])
  PE[0][3]: partial_in = -65 (from PE[1][3])
  PE[1][0]: partial_in = -57 (from PE[2][0])
  PE[1][1]: partial_in = -193 (from PE[2][1])
  PE[1][2]: partial_in = -215 (from PE[2][2])
  PE[1][3]: partial_in = -79 (from PE[2][3])
  PE[2][0]: partial_in = -66 (from PE[3][0])
  PE[2][1]: partial_in = -132 (from PE[3][1])
  PE[2][2]: partial_in = -66 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-58 -> result=-58
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-181 -> result=-181
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-188 -> result=-188
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-65 -> result=-65
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-193 -> result=-193
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-215 -> result=-215
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-79 -> result=-79
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-66 -> result=-66
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][1]: input=-79 * weight=2 = -158, partial_in=0 -> result=-158
  PE[3][2]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][3]: input=-79 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -58     -181     -188      -65 
  Row 1:      -57     -193     -215      -79 
  Row 2:      -66     -132      -66        0 
  Row 3:      -79     -158      -79        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │-181 │-188 │ -65 │
├─────┼─────┼─────┼─────┤
│ -57 │-193 │-215 │ -79 │
├─────┼─────┼─────┼─────┤
│ -66 │-132 │ -66 │   0 │
├─────┼─────┼─────┼─────┤
│ -79 │-158 │ -79 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -58     -181     -188      -65 
Row 1:      -57     -193     -215      -79 
Row 2:      -66     -132      -66        0 
Row 3:      -79     -158      -79        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -58 -> clamp(-58) -> final(70)
  PE[0][1]: -181 -> clamp(-128) -> final(0)
  PE[0][2]: -188 -> clamp(-128) -> final(0)
  PE[0][3]: -65 -> clamp(-65) -> final(63)
  PE[1][0]: -57 -> clamp(-57) -> final(71)
  PE[1][1]: -193 -> clamp(-128) -> final(0)
  PE[1][2]: -215 -> clamp(-128) -> final(0)
  PE[1][3]: -79 -> clamp(-79) -> final(49)
  PE[2][0]: -66 -> clamp(-66) -> final(62)
  PE[2][1]: -132 -> clamp(-128) -> final(0)
  PE[2][2]: -66 -> clamp(-66) -> final(62)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -79 -> clamp(-79) -> final(49)
  PE[3][1]: -158 -> clamp(-128) -> final(0)
  PE[3][2]: -79 -> clamp(-79) -> final(49)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    70      0      0     63 
    71      0      0     49 
    62      0     62    128 
    49      0     49    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -58  -56  -64  -77 
 -70  -69  -75  -85 
 -83  -75  -69  -71 
 -79  -67  -62  -68 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -58
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-58 * weight=-2 = 116, partial_in=0 -> result=116
  PE[0][1]: input=-58 * weight=-1 = 58, partial_in=0 -> result=58
  PE[0][2]: input=-58 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      116       58        0      -58 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 116 │  58 │   0 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -56
  Row 1: input_block[1][0] = -70
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-56 * weight=-2 = 112, partial_in=0 -> result=112
  PE[0][1]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[0][2]: input=-56 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      112       56        0      -56 
  Row 1:       70      -70      -70     -140 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 112 │  56 │   0 │ -56 │
├─────┼─────┼─────┼─────┤
│  70 │ -70 │ -70 │-140 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -64
  Row 1: input_block[1][1] = -69
  Row 2: input_block[2][0] = -83
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -70 (from PE[1][1])
  PE[0][2]: partial_in = -70 (from PE[1][2])
  PE[0][3]: partial_in = -140 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-64 * weight=-2 = 128, partial_in=70 -> result=198
  PE[0][1]: input=-64 * weight=-1 = 64, partial_in=-70 -> result=-6
  PE[0][2]: input=-64 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[0][3]: input=-64 * weight=1 = -64, partial_in=-140 -> result=-204
  PE[1][0]: input=-69 * weight=-1 = 69, partial_in=0 -> result=69
  PE[1][1]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[1][2]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[1][3]: input=-69 * weight=2 = -138, partial_in=0 -> result=-138
  PE[2][0]: input=-83 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[2][2]: input=-83 * weight=2 = -166, partial_in=0 -> result=-166
  PE[2][3]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      198       -6      -70     -204 
  Row 1:       69      -69      -69     -138 
  Row 2:        0      -83     -166      -83 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 198 │  -6 │ -70 │-204 │
├─────┼─────┼─────┼─────┤
│  69 │ -69 │ -69 │-138 │
├─────┼─────┼─────┼─────┤
│   0 │ -83 │-166 │ -83 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -77
  Row 1: input_block[1][2] = -75
  Row 2: input_block[2][1] = -75
  Row 3: input_block[3][0] = -79

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 69 (from PE[1][0])
  PE[0][1]: partial_in = -69 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -138 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -83 (from PE[2][1])
  PE[1][2]: partial_in = -166 (from PE[2][2])
  PE[1][3]: partial_in = -83 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-77 * weight=-2 = 154, partial_in=69 -> result=223
  PE[0][1]: input=-77 * weight=-1 = 77, partial_in=-69 -> result=8
  PE[0][2]: input=-77 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=-77 * weight=1 = -77, partial_in=-138 -> result=-215
  PE[1][0]: input=-75 * weight=-1 = 75, partial_in=0 -> result=75
  PE[1][1]: input=-75 * weight=1 = -75, partial_in=-83 -> result=-158
  PE[1][2]: input=-75 * weight=1 = -75, partial_in=-166 -> result=-241
  PE[1][3]: input=-75 * weight=2 = -150, partial_in=-83 -> result=-233
  PE[2][0]: input=-75 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[2][2]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[2][3]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][0]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][1]: input=-79 * weight=2 = -158, partial_in=0 -> result=-158
  PE[3][2]: input=-79 * weight=1 = -79, partial_in=0 -> result=-79
  PE[3][3]: input=-79 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      223        8      -69     -215 
  Row 1:       75     -158     -241     -233 
  Row 2:        0      -75     -150      -75 
  Row 3:      -79     -158      -79        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 223 │   8 │ -69 │-215 │
├─────┼─────┼─────┼─────┤
│  75 │-158 │-241 │-233 │
├─────┼─────┼─────┼─────┤
│   0 │ -75 │-150 │ -75 │
├─────┼─────┼─────┼─────┤
│ -79 │-158 │ -79 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -85
  Row 2: input_block[2][2] = -69
  Row 3: input_block[3][1] = -67

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 75 (from PE[1][0])
  PE[0][1]: partial_in = -158 (from PE[1][1])
  PE[0][2]: partial_in = -241 (from PE[1][2])
  PE[0][3]: partial_in = -233 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -75 (from PE[2][1])
  PE[1][2]: partial_in = -150 (from PE[2][2])
  PE[1][3]: partial_in = -75 (from PE[2][3])
  PE[2][0]: partial_in = -79 (from PE[3][0])
  PE[2][1]: partial_in = -158 (from PE[3][1])
  PE[2][2]: partial_in = -79 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=75 -> result=75
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-158 -> result=-158
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-241 -> result=-241
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-233 -> result=-233
  PE[1][0]: input=-85 * weight=-1 = 85, partial_in=0 -> result=85
  PE[1][1]: input=-85 * weight=1 = -85, partial_in=-75 -> result=-160
  PE[1][2]: input=-85 * weight=1 = -85, partial_in=-150 -> result=-235
  PE[1][3]: input=-85 * weight=2 = -170, partial_in=-75 -> result=-245
  PE[2][0]: input=-69 * weight=0 = 0, partial_in=-79 -> result=-79
  PE[2][1]: input=-69 * weight=1 = -69, partial_in=-158 -> result=-227
  PE[2][2]: input=-69 * weight=2 = -138, partial_in=-79 -> result=-217
  PE[2][3]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[3][0]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][1]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[3][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[3][3]: input=-67 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       75     -158     -241     -233 
  Row 1:       85     -160     -235     -245 
  Row 2:      -79     -227     -217      -69 
  Row 3:      -67     -134      -67        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │-158 │-241 │-233 │
├─────┼─────┼─────┼─────┤
│  85 │-160 │-235 │-245 │
├─────┼─────┼─────┼─────┤
│ -79 │-227 │-217 │ -69 │
├─────┼─────┼─────┼─────┤
│ -67 │-134 │ -67 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -71
  Row 3: input_block[3][2] = -62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 85 (from PE[1][0])
  PE[0][1]: partial_in = -160 (from PE[1][1])
  PE[0][2]: partial_in = -235 (from PE[1][2])
  PE[0][3]: partial_in = -245 (from PE[1][3])
  PE[1][0]: partial_in = -79 (from PE[2][0])
  PE[1][1]: partial_in = -227 (from PE[2][1])
  PE[1][2]: partial_in = -217 (from PE[2][2])
  PE[1][3]: partial_in = -69 (from PE[2][3])
  PE[2][0]: partial_in = -67 (from PE[3][0])
  PE[2][1]: partial_in = -134 (from PE[3][1])
  PE[2][2]: partial_in = -67 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=85 -> result=85
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-160 -> result=-160
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-235 -> result=-235
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-245 -> result=-245
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-79 -> result=-79
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-227 -> result=-227
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-217 -> result=-217
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-69 -> result=-69
  PE[2][0]: input=-71 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[2][1]: input=-71 * weight=1 = -71, partial_in=-134 -> result=-205
  PE[2][2]: input=-71 * weight=2 = -142, partial_in=-67 -> result=-209
  PE[2][3]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[3][0]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][1]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[3][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][3]: input=-62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       85     -160     -235     -245 
  Row 1:      -79     -227     -217      -69 
  Row 2:      -67     -205     -209      -71 
  Row 3:      -62     -124      -62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  85 │-160 │-235 │-245 │
├─────┼─────┼─────┼─────┤
│ -79 │-227 │-217 │ -69 │
├─────┼─────┼─────┼─────┤
│ -67 │-205 │-209 │ -71 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -68

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -79 (from PE[1][0])
  PE[0][1]: partial_in = -227 (from PE[1][1])
  PE[0][2]: partial_in = -217 (from PE[1][2])
  PE[0][3]: partial_in = -69 (from PE[1][3])
  PE[1][0]: partial_in = -67 (from PE[2][0])
  PE[1][1]: partial_in = -205 (from PE[2][1])
  PE[1][2]: partial_in = -209 (from PE[2][2])
  PE[1][3]: partial_in = -71 (from PE[2][3])
  PE[2][0]: partial_in = -62 (from PE[3][0])
  PE[2][1]: partial_in = -124 (from PE[3][1])
  PE[2][2]: partial_in = -62 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-79 -> result=-79
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-227 -> result=-227
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-217 -> result=-217
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-67 -> result=-67
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-205 -> result=-205
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-209 -> result=-209
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-71 -> result=-71
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-124 -> result=-124
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-62 -> result=-62
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[3][1]: input=-68 * weight=2 = -136, partial_in=0 -> result=-136
  PE[3][2]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[3][3]: input=-68 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -79     -227     -217      -69 
  Row 1:      -67     -205     -209      -71 
  Row 2:      -62     -124      -62        0 
  Row 3:      -68     -136      -68        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -79 │-227 │-217 │ -69 │
├─────┼─────┼─────┼─────┤
│ -67 │-205 │-209 │ -71 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
├─────┼─────┼─────┼─────┤
│ -68 │-136 │ -68 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -79     -227     -217      -69 
Row 1:      -67     -205     -209      -71 
Row 2:      -62     -124      -62        0 
Row 3:      -68     -136      -68        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -79 -> clamp(-79) -> final(49)
  PE[0][1]: -227 -> clamp(-128) -> final(0)
  PE[0][2]: -217 -> clamp(-128) -> final(0)
  PE[0][3]: -69 -> clamp(-69) -> final(59)
  PE[1][0]: -67 -> clamp(-67) -> final(61)
  PE[1][1]: -205 -> clamp(-128) -> final(0)
  PE[1][2]: -209 -> clamp(-128) -> final(0)
  PE[1][3]: -71 -> clamp(-71) -> final(57)
  PE[2][0]: -62 -> clamp(-62) -> final(66)
  PE[2][1]: -124 -> clamp(-124) -> final(4)
  PE[2][2]: -62 -> clamp(-62) -> final(66)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -68 -> clamp(-68) -> final(60)
  PE[3][1]: -136 -> clamp(-128) -> final(0)
  PE[3][2]: -68 -> clamp(-68) -> final(60)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    49      0      0     59 
    61      0      0     57 
    66      4     66    128 
    60      0     60    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -88  -29    8   14 
 -89  -26   11   13 
 -89  -20   17   13 
 -84  -13   22   13 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -88
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-88 * weight=-2 = 176, partial_in=0 -> result=176
  PE[0][1]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[0][2]: input=-88 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      176       88        0      -88 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 176 │  88 │   0 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -29
  Row 1: input_block[1][0] = -89
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-29 * weight=-2 = 58, partial_in=0 -> result=58
  PE[0][1]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[0][2]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][0]: input=-89 * weight=-1 = 89, partial_in=0 -> result=89
  PE[1][1]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[1][2]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[1][3]: input=-89 * weight=2 = -178, partial_in=0 -> result=-178
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       58       29        0      -29 
  Row 1:       89      -89      -89     -178 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  29 │   0 │ -29 │
├─────┼─────┼─────┼─────┤
│  89 │ -89 │ -89 │-178 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 8
  Row 1: input_block[1][1] = -26
  Row 2: input_block[2][0] = -89
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 89 (from PE[1][0])
  PE[0][1]: partial_in = -89 (from PE[1][1])
  PE[0][2]: partial_in = -89 (from PE[1][2])
  PE[0][3]: partial_in = -178 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=89 -> result=73
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=-89 -> result=-97
  PE[0][2]: input=8 * weight=0 = 0, partial_in=-89 -> result=-89
  PE[0][3]: input=8 * weight=1 = 8, partial_in=-178 -> result=-170
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][0]: input=-89 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[2][2]: input=-89 * weight=2 = -178, partial_in=0 -> result=-178
  PE[2][3]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       73      -97      -89     -170 
  Row 1:       26      -26      -26      -52 
  Row 2:        0      -89     -178      -89 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  73 │ -97 │ -89 │-170 │
├─────┼─────┼─────┼─────┤
│  26 │ -26 │ -26 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │ -89 │-178 │ -89 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 14
  Row 1: input_block[1][2] = 11
  Row 2: input_block[2][1] = -20
  Row 3: input_block[3][0] = -84

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -26 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -89 (from PE[2][1])
  PE[1][2]: partial_in = -178 (from PE[2][2])
  PE[1][3]: partial_in = -89 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=26 -> result=-2
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=-26 -> result=-40
  PE[0][2]: input=14 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[0][3]: input=14 * weight=1 = 14, partial_in=-52 -> result=-38
  PE[1][0]: input=11 * weight=-1 = -11, partial_in=0 -> result=-11
  PE[1][1]: input=11 * weight=1 = 11, partial_in=-89 -> result=-78
  PE[1][2]: input=11 * weight=1 = 11, partial_in=-178 -> result=-167
  PE[1][3]: input=11 * weight=2 = 22, partial_in=-89 -> result=-67
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][1]: input=-84 * weight=2 = -168, partial_in=0 -> result=-168
  PE[3][2]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][3]: input=-84 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       -2      -40      -26      -38 
  Row 1:      -11      -78     -167      -67 
  Row 2:        0      -20      -40      -20 
  Row 3:      -84     -168      -84        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │ -40 │ -26 │ -38 │
├─────┼─────┼─────┼─────┤
│ -11 │ -78 │-167 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │ -20 │ -40 │ -20 │
├─────┼─────┼─────┼─────┤
│ -84 │-168 │ -84 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 13
  Row 2: input_block[2][2] = 17
  Row 3: input_block[3][1] = -13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -11 (from PE[1][0])
  PE[0][1]: partial_in = -78 (from PE[1][1])
  PE[0][2]: partial_in = -167 (from PE[1][2])
  PE[0][3]: partial_in = -67 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -20 (from PE[2][1])
  PE[1][2]: partial_in = -40 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = -84 (from PE[3][0])
  PE[2][1]: partial_in = -168 (from PE[3][1])
  PE[2][2]: partial_in = -84 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-11 -> result=-11
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-78 -> result=-78
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-167 -> result=-167
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-67 -> result=-67
  PE[1][0]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[1][1]: input=13 * weight=1 = 13, partial_in=-20 -> result=-7
  PE[1][2]: input=13 * weight=1 = 13, partial_in=-40 -> result=-27
  PE[1][3]: input=13 * weight=2 = 26, partial_in=-20 -> result=6
  PE[2][0]: input=17 * weight=0 = 0, partial_in=-84 -> result=-84
  PE[2][1]: input=17 * weight=1 = 17, partial_in=-168 -> result=-151
  PE[2][2]: input=17 * weight=2 = 34, partial_in=-84 -> result=-50
  PE[2][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][0]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][1]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[3][2]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][3]: input=-13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -11      -78     -167      -67 
  Row 1:      -13       -7      -27        6 
  Row 2:      -84     -151      -50       17 
  Row 3:      -13      -26      -13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -78 │-167 │ -67 │
├─────┼─────┼─────┼─────┤
│ -13 │  -7 │ -27 │   6 │
├─────┼─────┼─────┼─────┤
│ -84 │-151 │ -50 │  17 │
├─────┼─────┼─────┼─────┤
│ -13 │ -26 │ -13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 13
  Row 3: input_block[3][2] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -13 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -84 (from PE[2][0])
  PE[1][1]: partial_in = -151 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = 17 (from PE[2][3])
  PE[2][0]: partial_in = -13 (from PE[3][0])
  PE[2][1]: partial_in = -26 (from PE[3][1])
  PE[2][2]: partial_in = -13 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-13 -> result=-13
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-151 -> result=-151
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][3]: input=0 * weight=2 = 0, partial_in=17 -> result=17
  PE[2][0]: input=13 * weight=0 = 0, partial_in=-13 -> result=-13
  PE[2][1]: input=13 * weight=1 = 13, partial_in=-26 -> result=-13
  PE[2][2]: input=13 * weight=2 = 26, partial_in=-13 -> result=13
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -13       -7      -27        6 
  Row 1:      -84     -151      -50       17 
  Row 2:      -13      -13       13       13 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -13 │  -7 │ -27 │   6 │
├─────┼─────┼─────┼─────┤
│ -84 │-151 │ -50 │  17 │
├─────┼─────┼─────┼─────┤
│ -13 │ -13 │  13 │  13 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -84 (from PE[1][0])
  PE[0][1]: partial_in = -151 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = 17 (from PE[1][3])
  PE[1][0]: partial_in = -13 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = 13 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-84 -> result=-84
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-151 -> result=-151
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=0 * weight=1 = 0, partial_in=17 -> result=17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-13 -> result=-13
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][2]: input=0 * weight=1 = 0, partial_in=13 -> result=13
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=0 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=0 * weight=1 = 0, partial_in=44 -> result=44
  PE[2][2]: input=0 * weight=2 = 0, partial_in=22 -> result=22
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -84     -151      -50       17 
  Row 1:      -13      -13       13       13 
  Row 2:       22       44       22        0 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -84 │-151 │ -50 │  17 │
├─────┼─────┼─────┼─────┤
│ -13 │ -13 │  13 │  13 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -84     -151      -50       17 
Row 1:      -13      -13       13       13 
Row 2:       22       44       22        0 
Row 3:       13       26       13        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -84 -> clamp(-84) -> final(44)
  PE[0][1]: -151 -> clamp(-128) -> final(0)
  PE[0][2]: -50 -> clamp(-50) -> final(78)
  PE[0][3]: 17 -> clamp(17) -> final(145)
  PE[1][0]: -13 -> clamp(-13) -> final(115)
  PE[1][1]: -13 -> clamp(-13) -> final(115)
  PE[1][2]: 13 -> clamp(13) -> final(141)
  PE[1][3]: 13 -> clamp(13) -> final(141)
  PE[2][0]: 22 -> clamp(22) -> final(150)
  PE[2][1]: 44 -> clamp(44) -> final(172)
  PE[2][2]: 22 -> clamp(22) -> final(150)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 13 -> clamp(13) -> final(141)
  PE[3][1]: 26 -> clamp(26) -> final(154)
  PE[3][2]: 13 -> clamp(13) -> final(141)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    44      0     78    145 
   115    115    141    141 
   150    172    150    128 
   141    154    141    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  20   18   20   37 
  18   20   21   34 
  17   22   23   30 
  16   24   23   25 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 20
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=20 * weight=-2 = -40, partial_in=0 -> result=-40
  PE[0][1]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[0][2]: input=20 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -40      -20        0       20 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -40 │ -20 │   0 │  20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 18
  Row 1: input_block[1][0] = 18
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=0 -> result=-36
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[0][2]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][0]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[1][1]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[1][3]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -36      -18        0       18 
  Row 1:      -18       18       18       36 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -18 │   0 │  18 │
├─────┼─────┼─────┼─────┤
│ -18 │  18 │  18 │  36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 20
  Row 1: input_block[1][1] = 20
  Row 2: input_block[2][0] = 17
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -18 (from PE[1][0])
  PE[0][1]: partial_in = 18 (from PE[1][1])
  PE[0][2]: partial_in = 18 (from PE[1][2])
  PE[0][3]: partial_in = 36 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=20 * weight=-2 = -40, partial_in=-18 -> result=-58
  PE[0][1]: input=20 * weight=-1 = -20, partial_in=18 -> result=-2
  PE[0][2]: input=20 * weight=0 = 0, partial_in=18 -> result=18
  PE[0][3]: input=20 * weight=1 = 20, partial_in=36 -> result=56
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][3]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[2][0]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[2][2]: input=17 * weight=2 = 34, partial_in=0 -> result=34
  PE[2][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -58       -2       18       56 
  Row 1:      -20       20       20       40 
  Row 2:        0       17       34       17 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │  -2 │  18 │  56 │
├─────┼─────┼─────┼─────┤
│ -20 │  20 │  20 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │  17 │  34 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 37
  Row 1: input_block[1][2] = 21
  Row 2: input_block[2][1] = 22
  Row 3: input_block[3][0] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 17 (from PE[2][1])
  PE[1][2]: partial_in = 34 (from PE[2][2])
  PE[1][3]: partial_in = 17 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=37 * weight=-2 = -74, partial_in=-20 -> result=-94
  PE[0][1]: input=37 * weight=-1 = -37, partial_in=20 -> result=-17
  PE[0][2]: input=37 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=37 * weight=1 = 37, partial_in=40 -> result=77
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=17 -> result=38
  PE[1][2]: input=21 * weight=1 = 21, partial_in=34 -> result=55
  PE[1][3]: input=21 * weight=2 = 42, partial_in=17 -> result=59
  PE[2][0]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[2][2]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -94      -17       20       77 
  Row 1:      -21       38       55       59 
  Row 2:        0       22       44       22 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -94 │ -17 │  20 │  77 │
├─────┼─────┼─────┼─────┤
│ -21 │  38 │  55 │  59 │
├─────┼─────┼─────┼─────┤
│   0 │  22 │  44 │  22 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 34
  Row 2: input_block[2][2] = 23
  Row 3: input_block[3][1] = 24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = 55 (from PE[1][2])
  PE[0][3]: partial_in = 59 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = 44 (from PE[2][2])
  PE[1][3]: partial_in = 22 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-21 -> result=-21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=55 -> result=55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=59 -> result=59
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=22 -> result=56
  PE[1][2]: input=34 * weight=1 = 34, partial_in=44 -> result=78
  PE[1][3]: input=34 * weight=2 = 68, partial_in=22 -> result=90
  PE[2][0]: input=23 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=23 * weight=1 = 23, partial_in=32 -> result=55
  PE[2][2]: input=23 * weight=2 = 46, partial_in=16 -> result=62
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][1]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[3][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][3]: input=24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -21       38       55       59 
  Row 1:      -34       56       78       90 
  Row 2:       16       55       62       23 
  Row 3:       24       48       24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  38 │  55 │  59 │
├─────┼─────┼─────┼─────┤
│ -34 │  56 │  78 │  90 │
├─────┼─────┼─────┼─────┤
│  16 │  55 │  62 │  23 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 30
  Row 3: input_block[3][2] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 56 (from PE[1][1])
  PE[0][2]: partial_in = 78 (from PE[1][2])
  PE[0][3]: partial_in = 90 (from PE[1][3])
  PE[1][0]: partial_in = 16 (from PE[2][0])
  PE[1][1]: partial_in = 55 (from PE[2][1])
  PE[1][2]: partial_in = 62 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 24 (from PE[3][0])
  PE[2][1]: partial_in = 48 (from PE[3][1])
  PE[2][2]: partial_in = 24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[0][2]: input=0 * weight=0 = 0, partial_in=78 -> result=78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=90 -> result=90
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][2]: input=0 * weight=1 = 0, partial_in=62 -> result=62
  PE[1][3]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][0]: input=30 * weight=0 = 0, partial_in=24 -> result=24
  PE[2][1]: input=30 * weight=1 = 30, partial_in=48 -> result=78
  PE[2][2]: input=30 * weight=2 = 60, partial_in=24 -> result=84
  PE[2][3]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -34       56       78       90 
  Row 1:       16       55       62       23 
  Row 2:       24       78       84       30 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │  56 │  78 │  90 │
├─────┼─────┼─────┼─────┤
│  16 │  55 │  62 │  23 │
├─────┼─────┼─────┼─────┤
│  24 │  78 │  84 │  30 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = 55 (from PE[1][1])
  PE[0][2]: partial_in = 62 (from PE[1][2])
  PE[0][3]: partial_in = 23 (from PE[1][3])
  PE[1][0]: partial_in = 24 (from PE[2][0])
  PE[1][1]: partial_in = 78 (from PE[2][1])
  PE[1][2]: partial_in = 84 (from PE[2][2])
  PE[1][3]: partial_in = 30 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=16 -> result=16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=55 -> result=55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=62 -> result=62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=23 -> result=23
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=24 -> result=24
  PE[1][1]: input=0 * weight=1 = 0, partial_in=78 -> result=78
  PE[1][2]: input=0 * weight=1 = 0, partial_in=84 -> result=84
  PE[1][3]: input=0 * weight=2 = 0, partial_in=30 -> result=30
  PE[2][0]: input=0 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=0 * weight=1 = 0, partial_in=46 -> result=46
  PE[2][2]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       16       55       62       23 
  Row 1:       24       78       84       30 
  Row 2:       23       46       23        0 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │  55 │  62 │  23 │
├─────┼─────┼─────┼─────┤
│  24 │  78 │  84 │  30 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       16       55       62       23 
Row 1:       24       78       84       30 
Row 2:       23       46       23        0 
Row 3:       25       50       25        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 16 -> clamp(16) -> final(144)
  PE[0][1]: 55 -> clamp(55) -> final(183)
  PE[0][2]: 62 -> clamp(62) -> final(190)
  PE[0][3]: 23 -> clamp(23) -> final(151)
  PE[1][0]: 24 -> clamp(24) -> final(152)
  PE[1][1]: 78 -> clamp(78) -> final(206)
  PE[1][2]: 84 -> clamp(84) -> final(212)
  PE[1][3]: 30 -> clamp(30) -> final(158)
  PE[2][0]: 23 -> clamp(23) -> final(151)
  PE[2][1]: 46 -> clamp(46) -> final(174)
  PE[2][2]: 23 -> clamp(23) -> final(151)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 25 -> clamp(25) -> final(153)
  PE[3][1]: 50 -> clamp(50) -> final(178)
  PE[3][2]: 25 -> clamp(25) -> final(153)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   144    183    190    151 
   152    206    212    158 
   151    174    151    128 
   153    178    153    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  31   32   -3  -70 
  29   20  -19  -82 
  28    9  -33  -87 
  23   -2  -42  -86 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 31
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=31 * weight=-2 = -62, partial_in=0 -> result=-62
  PE[0][1]: input=31 * weight=-1 = -31, partial_in=0 -> result=-31
  PE[0][2]: input=31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -62      -31        0       31 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │ -31 │   0 │  31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 32
  Row 1: input_block[1][0] = 29
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=32 * weight=-2 = -64, partial_in=0 -> result=-64
  PE[0][1]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[0][2]: input=32 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][0]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[1][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][3]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -64      -32        0       32 
  Row 1:      -29       29       29       58 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │ -32 │   0 │  32 │
├─────┼─────┼─────┼─────┤
│ -29 │  29 │  29 │  58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -3
  Row 1: input_block[1][1] = 20
  Row 2: input_block[2][0] = 28
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = 29 (from PE[1][1])
  PE[0][2]: partial_in = 29 (from PE[1][2])
  PE[0][3]: partial_in = 58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=-29 -> result=-23
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=29 -> result=32
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=29 -> result=29
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=58 -> result=55
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][3]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[2][0]: input=28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[2][2]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -23       32       29       55 
  Row 1:      -20       20       20       40 
  Row 2:        0       28       56       28 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -23 │  32 │  29 │  55 │
├─────┼─────┼─────┼─────┤
│ -20 │  20 │  20 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │  28 │  56 │  28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -70
  Row 1: input_block[1][2] = -19
  Row 2: input_block[2][1] = 9
  Row 3: input_block[3][0] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 28 (from PE[2][1])
  PE[1][2]: partial_in = 56 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-70 * weight=-2 = 140, partial_in=-20 -> result=120
  PE[0][1]: input=-70 * weight=-1 = 70, partial_in=20 -> result=90
  PE[0][2]: input=-70 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=-70 * weight=1 = -70, partial_in=40 -> result=-30
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=28 -> result=9
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=56 -> result=37
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=28 -> result=-10
  PE[2][0]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[2][2]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      120       90       20      -30 
  Row 1:       19        9       37      -10 
  Row 2:        0        9       18        9 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 120 │  90 │  20 │ -30 │
├─────┼─────┼─────┼─────┤
│  19 │   9 │  37 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │   9 │  18 │   9 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -82
  Row 2: input_block[2][2] = -33
  Row 3: input_block[3][1] = -2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 37 (from PE[1][2])
  PE[0][3]: partial_in = -10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = 18 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=19 -> result=19
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=9 -> result=9
  PE[0][2]: input=0 * weight=0 = 0, partial_in=37 -> result=37
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][0]: input=-82 * weight=-1 = 82, partial_in=0 -> result=82
  PE[1][1]: input=-82 * weight=1 = -82, partial_in=9 -> result=-73
  PE[1][2]: input=-82 * weight=1 = -82, partial_in=18 -> result=-64
  PE[1][3]: input=-82 * weight=2 = -164, partial_in=9 -> result=-155
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=46 -> result=13
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=23 -> result=-43
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][1]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[3][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][3]: input=-2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       19        9       37      -10 
  Row 1:       82      -73      -64     -155 
  Row 2:       23       13      -43      -33 
  Row 3:       -2       -4       -2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  19 │   9 │  37 │ -10 │
├─────┼─────┼─────┼─────┤
│  82 │ -73 │ -64 │-155 │
├─────┼─────┼─────┼─────┤
│  23 │  13 │ -43 │ -33 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -87
  Row 3: input_block[3][2] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 82 (from PE[1][0])
  PE[0][1]: partial_in = -73 (from PE[1][1])
  PE[0][2]: partial_in = -64 (from PE[1][2])
  PE[0][3]: partial_in = -155 (from PE[1][3])
  PE[1][0]: partial_in = 23 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = -43 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -2 (from PE[3][0])
  PE[2][1]: partial_in = -4 (from PE[3][1])
  PE[2][2]: partial_in = -2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=82 -> result=82
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-155 -> result=-155
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=23 -> result=23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=13 -> result=13
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-43 -> result=-43
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=-87 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[2][1]: input=-87 * weight=1 = -87, partial_in=-4 -> result=-91
  PE[2][2]: input=-87 * weight=2 = -174, partial_in=-2 -> result=-176
  PE[2][3]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       82      -73      -64     -155 
  Row 1:       23       13      -43      -33 
  Row 2:       -2      -91     -176      -87 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │ -73 │ -64 │-155 │
├─────┼─────┼─────┼─────┤
│  23 │  13 │ -43 │ -33 │
├─────┼─────┼─────┼─────┤
│  -2 │ -91 │-176 │ -87 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -86

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = 13 (from PE[1][1])
  PE[0][2]: partial_in = -43 (from PE[1][2])
  PE[0][3]: partial_in = -33 (from PE[1][3])
  PE[1][0]: partial_in = -2 (from PE[2][0])
  PE[1][1]: partial_in = -91 (from PE[2][1])
  PE[1][2]: partial_in = -176 (from PE[2][2])
  PE[1][3]: partial_in = -87 (from PE[2][3])
  PE[2][0]: partial_in = -42 (from PE[3][0])
  PE[2][1]: partial_in = -84 (from PE[3][1])
  PE[2][2]: partial_in = -42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=13 -> result=13
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-33 -> result=-33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-2 -> result=-2
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-176 -> result=-176
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-87 -> result=-87
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-86 * weight=1 = -86, partial_in=0 -> result=-86
  PE[3][1]: input=-86 * weight=2 = -172, partial_in=0 -> result=-172
  PE[3][2]: input=-86 * weight=1 = -86, partial_in=0 -> result=-86
  PE[3][3]: input=-86 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       23       13      -43      -33 
  Row 1:       -2      -91     -176      -87 
  Row 2:      -42      -84      -42        0 
  Row 3:      -86     -172      -86        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │  13 │ -43 │ -33 │
├─────┼─────┼─────┼─────┤
│  -2 │ -91 │-176 │ -87 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
├─────┼─────┼─────┼─────┤
│ -86 │-172 │ -86 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       23       13      -43      -33 
Row 1:       -2      -91     -176      -87 
Row 2:      -42      -84      -42        0 
Row 3:      -86     -172      -86        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 23 -> clamp(23) -> final(151)
  PE[0][1]: 13 -> clamp(13) -> final(141)
  PE[0][2]: -43 -> clamp(-43) -> final(85)
  PE[0][3]: -33 -> clamp(-33) -> final(95)
  PE[1][0]: -2 -> clamp(-2) -> final(126)
  PE[1][1]: -91 -> clamp(-91) -> final(37)
  PE[1][2]: -176 -> clamp(-128) -> final(0)
  PE[1][3]: -87 -> clamp(-87) -> final(41)
  PE[2][0]: -42 -> clamp(-42) -> final(86)
  PE[2][1]: -84 -> clamp(-84) -> final(44)
  PE[2][2]: -42 -> clamp(-42) -> final(86)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -86 -> clamp(-86) -> final(42)
  PE[3][1]: -172 -> clamp(-128) -> final(0)
  PE[3][2]: -86 -> clamp(-86) -> final(42)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   151    141     85     95 
   126     37      0     41 
    86     44     86    128 
    42      0     42    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -34   -2   -3   -8 
 -44  -11  -10   -9 
 -42  -11   -8   -1 
 -36   -8   -7    3 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -34
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       68       34        0      -34 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -2
  Row 1: input_block[1][0] = -44
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-2 * weight=-2 = 4, partial_in=0 -> result=4
  PE[0][1]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[0][2]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        4        2        0       -2 
  Row 1:       44      -44      -44      -88 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   4 │   2 │   0 │  -2 │
├─────┼─────┼─────┼─────┤
│  44 │ -44 │ -44 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -3
  Row 1: input_block[1][1] = -11
  Row 2: input_block[2][0] = -42
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=44 -> result=50
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=-44 -> result=-41
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=-88 -> result=-91
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       50      -41      -44      -91 
  Row 1:       11      -11      -11      -22 
  Row 2:        0      -42      -84      -42 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │ -41 │ -44 │ -91 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │ -42 │ -84 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -8
  Row 1: input_block[1][2] = -10
  Row 2: input_block[2][1] = -11
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -42 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=11 -> result=27
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=-11 -> result=-3
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=-22 -> result=-30
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=-42 -> result=-52
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=-84 -> result=-94
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=-42 -> result=-62
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       27       -3      -11      -30 
  Row 1:       10      -52      -94      -62 
  Row 2:        0      -11      -22      -11 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │  -3 │ -11 │ -30 │
├─────┼─────┼─────┼─────┤
│  10 │ -52 │ -94 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │ -11 │ -22 │ -11 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -9
  Row 2: input_block[2][2] = -8
  Row 3: input_block[3][1] = -8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -94 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -22 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-94 -> result=-94
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[1][0]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[1][1]: input=-9 * weight=1 = -9, partial_in=-11 -> result=-20
  PE[1][2]: input=-9 * weight=1 = -9, partial_in=-22 -> result=-31
  PE[1][3]: input=-9 * weight=2 = -18, partial_in=-11 -> result=-29
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=-72 -> result=-80
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=-36 -> result=-52
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][1]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[3][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][3]: input=-8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       10      -52      -94      -62 
  Row 1:        9      -20      -31      -29 
  Row 2:      -36      -80      -52       -8 
  Row 3:       -8      -16       -8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │ -52 │ -94 │ -62 │
├─────┼─────┼─────┼─────┤
│   9 │ -20 │ -31 │ -29 │
├─────┼─────┼─────┼─────┤
│ -36 │ -80 │ -52 │  -8 │
├─────┼─────┼─────┼─────┤
│  -8 │ -16 │  -8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -1
  Row 3: input_block[3][2] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 9 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = -31 (from PE[1][2])
  PE[0][3]: partial_in = -29 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -80 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -8 (from PE[3][0])
  PE[2][1]: partial_in = -16 (from PE[3][1])
  PE[2][2]: partial_in = -8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=9 -> result=9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-29 -> result=-29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=-16 -> result=-17
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=-8 -> result=-10
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        9      -20      -31      -29 
  Row 1:      -36      -80      -52       -8 
  Row 2:       -8      -17      -10       -1 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   9 │ -20 │ -31 │ -29 │
├─────┼─────┼─────┼─────┤
│ -36 │ -80 │ -52 │  -8 │
├─────┼─────┼─────┼─────┤
│  -8 │ -17 │ -10 │  -1 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -80 (from PE[1][1])
  PE[0][2]: partial_in = -52 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = -8 (from PE[2][0])
  PE[1][1]: partial_in = -17 (from PE[2][1])
  PE[1][2]: partial_in = -10 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-80 -> result=-80
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-17 -> result=-17
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-14 -> result=-14
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-7 -> result=-7
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36      -80      -52       -8 
  Row 1:       -8      -17      -10       -1 
  Row 2:       -7      -14       -7        0 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -80 │ -52 │  -8 │
├─────┼─────┼─────┼─────┤
│  -8 │ -17 │ -10 │  -1 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36      -80      -52       -8 
Row 1:       -8      -17      -10       -1 
Row 2:       -7      -14       -7        0 
Row 3:        3        6        3        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -80 -> clamp(-80) -> final(48)
  PE[0][2]: -52 -> clamp(-52) -> final(76)
  PE[0][3]: -8 -> clamp(-8) -> final(120)
  PE[1][0]: -8 -> clamp(-8) -> final(120)
  PE[1][1]: -17 -> clamp(-17) -> final(111)
  PE[1][2]: -10 -> clamp(-10) -> final(118)
  PE[1][3]: -1 -> clamp(-1) -> final(127)
  PE[2][0]: -7 -> clamp(-7) -> final(121)
  PE[2][1]: -14 -> clamp(-14) -> final(114)
  PE[2][2]: -7 -> clamp(-7) -> final(121)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 3 -> clamp(3) -> final(131)
  PE[3][1]: 6 -> clamp(6) -> final(134)
  PE[3][2]: 3 -> clamp(3) -> final(131)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92     48     76    120 
   120    111    118    127 
   121    114    121    128 
   131    134    131    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -3  -10   -9   -1 
  -7  -10   -7    0 
  -7   -8   -4   -1 
  -4   -6   -6   -5 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        6        3        0       -3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -10
  Row 1: input_block[1][0] = -7
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-10 * weight=-2 = 20, partial_in=0 -> result=20
  PE[0][1]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[0][2]: input=-10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       20       10        0      -10 
  Row 1:        7       -7       -7      -14 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  10 │   0 │ -10 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -9
  Row 1: input_block[1][1] = -10
  Row 2: input_block[2][0] = -7
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-9 * weight=-2 = 18, partial_in=7 -> result=25
  PE[0][1]: input=-9 * weight=-1 = 9, partial_in=-7 -> result=2
  PE[0][2]: input=-9 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=-9 * weight=1 = -9, partial_in=-14 -> result=-23
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       25        2       -7      -23 
  Row 1:       10      -10      -10      -20 
  Row 2:        0       -7      -14       -7 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │   2 │  -7 │ -23 │
├─────┼─────┼─────┼─────┤
│  10 │ -10 │ -10 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -1
  Row 1: input_block[1][2] = -7
  Row 2: input_block[2][1] = -8
  Row 3: input_block[3][0] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -10 (from PE[1][1])
  PE[0][2]: partial_in = -10 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=10 -> result=12
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=-10 -> result=-9
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=-20 -> result=-21
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=-7 -> result=-14
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=-14 -> result=-21
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=-7 -> result=-21
  PE[2][0]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[2][2]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       12       -9      -10      -21 
  Row 1:        7      -14      -21      -21 
  Row 2:        0       -8      -16       -8 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │  -9 │ -10 │ -21 │
├─────┼─────┼─────┼─────┤
│   7 │ -14 │ -21 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 0
  Row 2: input_block[2][2] = -4
  Row 3: input_block[3][1] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -14 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -21 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = -16 (from PE[2][2])
  PE[1][3]: partial_in = -8 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=7 -> result=7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-8 -> result=-8
  PE[2][0]: input=-4 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-4 * weight=1 = -4, partial_in=-8 -> result=-12
  PE[2][2]: input=-4 * weight=2 = -8, partial_in=-4 -> result=-12
  PE[2][3]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        7      -14      -21      -21 
  Row 1:        0       -8      -16       -8 
  Row 2:       -4      -12      -12       -4 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │ -14 │ -21 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│  -4 │ -12 │ -12 │  -4 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -1
  Row 3: input_block[3][2] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = -8 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -12 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -4 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=-12 -> result=-13
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=-6 -> result=-8
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        0       -8      -16       -8 
  Row 1:       -4      -12      -12       -4 
  Row 2:       -6      -13       -8       -1 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │  -8 │ -16 │  -8 │
├─────┼─────┼─────┼─────┤
│  -4 │ -12 │ -12 │  -4 │
├─────┼─────┼─────┼─────┤
│  -6 │ -13 │  -8 │  -1 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -5

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = -12 (from PE[1][1])
  PE[0][2]: partial_in = -12 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = -6 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -8 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-4 -> result=-4
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-12 -> result=-12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-12 -> result=-12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-4 -> result=-4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-13 -> result=-13
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][1]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[3][2]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][3]: input=-5 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -4      -12      -12       -4 
  Row 1:       -6      -13       -8       -1 
  Row 2:       -6      -12       -6        0 
  Row 3:       -5      -10       -5        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -4 │ -12 │ -12 │  -4 │
├─────┼─────┼─────┼─────┤
│  -6 │ -13 │  -8 │  -1 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
├─────┼─────┼─────┼─────┤
│  -5 │ -10 │  -5 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -4      -12      -12       -4 
Row 1:       -6      -13       -8       -1 
Row 2:       -6      -12       -6        0 
Row 3:       -5      -10       -5        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -4 -> clamp(-4) -> final(124)
  PE[0][1]: -12 -> clamp(-12) -> final(116)
  PE[0][2]: -12 -> clamp(-12) -> final(116)
  PE[0][3]: -4 -> clamp(-4) -> final(124)
  PE[1][0]: -6 -> clamp(-6) -> final(122)
  PE[1][1]: -13 -> clamp(-13) -> final(115)
  PE[1][2]: -8 -> clamp(-8) -> final(120)
  PE[1][3]: -1 -> clamp(-1) -> final(127)
  PE[2][0]: -6 -> clamp(-6) -> final(122)
  PE[2][1]: -12 -> clamp(-12) -> final(116)
  PE[2][2]: -6 -> clamp(-6) -> final(122)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -5 -> clamp(-5) -> final(123)
  PE[3][1]: -10 -> clamp(-10) -> final(118)
  PE[3][2]: -5 -> clamp(-5) -> final(123)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   124    116    116    124 
   122    115    120    127 
   122    116    122    128 
   123    118    123    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   0   -2    5   19 
   0    2   18   37 
  -1    4   24   47 
  -6   -1   16   33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 0
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        0        0        0        0 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -2
  Row 1: input_block[1][0] = 0
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-2 * weight=-2 = 4, partial_in=0 -> result=4
  PE[0][1]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[0][2]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        4        2        0       -2 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   4 │   2 │   0 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 5
  Row 1: input_block[1][1] = 2
  Row 2: input_block[2][0] = -1
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=5 * weight=-2 = -10, partial_in=0 -> result=-10
  PE[0][1]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[0][2]: input=5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[1][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[1][3]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][0]: input=-1 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[2][2]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[2][3]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -10       -5        0        5 
  Row 1:       -2        2        2        4 
  Row 2:        0       -1       -2       -1 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -10 │  -5 │   0 │   5 │
├─────┼─────┼─────┼─────┤
│  -2 │   2 │   2 │   4 │
├─────┼─────┼─────┼─────┤
│   0 │  -1 │  -2 │  -1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 19
  Row 1: input_block[1][2] = 18
  Row 2: input_block[2][1] = 4
  Row 3: input_block[3][0] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 2 (from PE[1][1])
  PE[0][2]: partial_in = 2 (from PE[1][2])
  PE[0][3]: partial_in = 4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -1 (from PE[2][1])
  PE[1][2]: partial_in = -2 (from PE[2][2])
  PE[1][3]: partial_in = -1 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=19 * weight=-2 = -38, partial_in=-2 -> result=-40
  PE[0][1]: input=19 * weight=-1 = -19, partial_in=2 -> result=-17
  PE[0][2]: input=19 * weight=0 = 0, partial_in=2 -> result=2
  PE[0][3]: input=19 * weight=1 = 19, partial_in=4 -> result=23
  PE[1][0]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[1][1]: input=18 * weight=1 = 18, partial_in=-1 -> result=17
  PE[1][2]: input=18 * weight=1 = 18, partial_in=-2 -> result=16
  PE[1][3]: input=18 * weight=2 = 36, partial_in=-1 -> result=35
  PE[2][0]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[2][2]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -40      -17        2       23 
  Row 1:      -18       17       16       35 
  Row 2:        0        4        8        4 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -40 │ -17 │   2 │  23 │
├─────┼─────┼─────┼─────┤
│ -18 │  17 │  16 │  35 │
├─────┼─────┼─────┼─────┤
│   0 │   4 │   8 │   4 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 37
  Row 2: input_block[2][2] = 24
  Row 3: input_block[3][1] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -18 (from PE[1][0])
  PE[0][1]: partial_in = 17 (from PE[1][1])
  PE[0][2]: partial_in = 16 (from PE[1][2])
  PE[0][3]: partial_in = 35 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 4 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 4 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-18 -> result=-18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=17 -> result=17
  PE[0][2]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=35 -> result=35
  PE[1][0]: input=37 * weight=-1 = -37, partial_in=0 -> result=-37
  PE[1][1]: input=37 * weight=1 = 37, partial_in=4 -> result=41
  PE[1][2]: input=37 * weight=1 = 37, partial_in=8 -> result=45
  PE[1][3]: input=37 * weight=2 = 74, partial_in=4 -> result=78
  PE[2][0]: input=24 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=24 * weight=1 = 24, partial_in=-12 -> result=12
  PE[2][2]: input=24 * weight=2 = 48, partial_in=-6 -> result=42
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -18       17       16       35 
  Row 1:      -37       41       45       78 
  Row 2:       -6       12       42       24 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  17 │  16 │  35 │
├─────┼─────┼─────┼─────┤
│ -37 │  41 │  45 │  78 │
├─────┼─────┼─────┼─────┤
│  -6 │  12 │  42 │  24 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 47
  Row 3: input_block[3][2] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -37 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 45 (from PE[1][2])
  PE[0][3]: partial_in = 78 (from PE[1][3])
  PE[1][0]: partial_in = -6 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-37 -> result=-37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=41 -> result=41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=45 -> result=45
  PE[0][3]: input=0 * weight=1 = 0, partial_in=78 -> result=78
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[1][1]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][2]: input=0 * weight=1 = 0, partial_in=42 -> result=42
  PE[1][3]: input=0 * weight=2 = 0, partial_in=24 -> result=24
  PE[2][0]: input=47 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=47 * weight=1 = 47, partial_in=-2 -> result=45
  PE[2][2]: input=47 * weight=2 = 94, partial_in=-1 -> result=93
  PE[2][3]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -37       41       45       78 
  Row 1:       -6       12       42       24 
  Row 2:       -1       45       93       47 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -37 │  41 │  45 │  78 │
├─────┼─────┼─────┼─────┤
│  -6 │  12 │  42 │  24 │
├─────┼─────┼─────┼─────┤
│  -1 │  45 │  93 │  47 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 42 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = -1 (from PE[2][0])
  PE[1][1]: partial_in = 45 (from PE[2][1])
  PE[1][2]: partial_in = 93 (from PE[2][2])
  PE[1][3]: partial_in = 47 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=42 -> result=42
  PE[0][3]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=45 -> result=45
  PE[1][2]: input=0 * weight=1 = 0, partial_in=93 -> result=93
  PE[1][3]: input=0 * weight=2 = 0, partial_in=47 -> result=47
  PE[2][0]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=16 -> result=16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -6       12       42       24 
  Row 1:       -1       45       93       47 
  Row 2:       16       32       16        0 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  12 │  42 │  24 │
├─────┼─────┼─────┼─────┤
│  -1 │  45 │  93 │  47 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -6       12       42       24 
Row 1:       -1       45       93       47 
Row 2:       16       32       16        0 
Row 3:       33       66       33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -6 -> clamp(-6) -> final(122)
  PE[0][1]: 12 -> clamp(12) -> final(140)
  PE[0][2]: 42 -> clamp(42) -> final(170)
  PE[0][3]: 24 -> clamp(24) -> final(152)
  PE[1][0]: -1 -> clamp(-1) -> final(127)
  PE[1][1]: 45 -> clamp(45) -> final(173)
  PE[1][2]: 93 -> clamp(93) -> final(221)
  PE[1][3]: 47 -> clamp(47) -> final(175)
  PE[2][0]: 16 -> clamp(16) -> final(144)
  PE[2][1]: 32 -> clamp(32) -> final(160)
  PE[2][2]: 16 -> clamp(16) -> final(144)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 33 -> clamp(33) -> final(161)
  PE[3][1]: 66 -> clamp(66) -> final(194)
  PE[3][2]: 33 -> clamp(33) -> final(161)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   122    140    170    152 
   127    173    221    175 
   144    160    144    128 
   161    194    161    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  26  -18  -36  -16 
  72   23  -21  -26 
  81   43  -16  -41 
  40   25  -23  -47 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 26
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=26 * weight=-2 = -52, partial_in=0 -> result=-52
  PE[0][1]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[0][2]: input=26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -52      -26        0       26 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -52 │ -26 │   0 │  26 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -18
  Row 1: input_block[1][0] = 72
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=0 -> result=36
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][0]: input=72 * weight=-1 = -72, partial_in=0 -> result=-72
  PE[1][1]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][2]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][3]: input=72 * weight=2 = 144, partial_in=0 -> result=144
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       36       18        0      -18 
  Row 1:      -72       72       72      144 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │  18 │   0 │ -18 │
├─────┼─────┼─────┼─────┤
│ -72 │  72 │  72 │ 144 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -36
  Row 1: input_block[1][1] = 23
  Row 2: input_block[2][0] = 81
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -72 (from PE[1][0])
  PE[0][1]: partial_in = 72 (from PE[1][1])
  PE[0][2]: partial_in = 72 (from PE[1][2])
  PE[0][3]: partial_in = 144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=-72 -> result=0
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=72 -> result=108
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=72 -> result=72
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=144 -> result=108
  PE[1][0]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[1][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][3]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][0]: input=81 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=81 * weight=1 = 81, partial_in=0 -> result=81
  PE[2][2]: input=81 * weight=2 = 162, partial_in=0 -> result=162
  PE[2][3]: input=81 * weight=1 = 81, partial_in=0 -> result=81
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        0      108       72      108 
  Row 1:      -23       23       23       46 
  Row 2:        0       81      162       81 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │ 108 │  72 │ 108 │
├─────┼─────┼─────┼─────┤
│ -23 │  23 │  23 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │  81 │ 162 │  81 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -16
  Row 1: input_block[1][2] = -21
  Row 2: input_block[2][1] = 43
  Row 3: input_block[3][0] = 40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = 23 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 46 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 81 (from PE[2][1])
  PE[1][2]: partial_in = 162 (from PE[2][2])
  PE[1][3]: partial_in = 81 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=-23 -> result=9
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=23 -> result=39
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=46 -> result=30
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=81 -> result=60
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=162 -> result=141
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=81 -> result=39
  PE[2][0]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[2][2]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[2][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][0]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][1]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[3][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][3]: input=40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:        9       39       23       30 
  Row 1:       21       60      141       39 
  Row 2:        0       43       86       43 
  Row 3:       40       80       40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   9 │  39 │  23 │  30 │
├─────┼─────┼─────┼─────┤
│  21 │  60 │ 141 │  39 │
├─────┼─────┼─────┼─────┤
│   0 │  43 │  86 │  43 │
├─────┼─────┼─────┼─────┤
│  40 │  80 │  40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -26
  Row 2: input_block[2][2] = -16
  Row 3: input_block[3][1] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 141 (from PE[1][2])
  PE[0][3]: partial_in = 39 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 43 (from PE[2][1])
  PE[1][2]: partial_in = 86 (from PE[2][2])
  PE[1][3]: partial_in = 43 (from PE[2][3])
  PE[2][0]: partial_in = 40 (from PE[3][0])
  PE[2][1]: partial_in = 80 (from PE[3][1])
  PE[2][2]: partial_in = 40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=60 -> result=60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=141 -> result=141
  PE[0][3]: input=0 * weight=1 = 0, partial_in=39 -> result=39
  PE[1][0]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[1][1]: input=-26 * weight=1 = -26, partial_in=43 -> result=17
  PE[1][2]: input=-26 * weight=1 = -26, partial_in=86 -> result=60
  PE[1][3]: input=-26 * weight=2 = -52, partial_in=43 -> result=-9
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=40 -> result=40
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=80 -> result=64
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=40 -> result=8
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       21       60      141       39 
  Row 1:       26       17       60       -9 
  Row 2:       40       64        8      -16 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │  60 │ 141 │  39 │
├─────┼─────┼─────┼─────┤
│  26 │  17 │  60 │  -9 │
├─────┼─────┼─────┼─────┤
│  40 │  64 │   8 │ -16 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -41
  Row 3: input_block[3][2] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 26 (from PE[1][0])
  PE[0][1]: partial_in = 17 (from PE[1][1])
  PE[0][2]: partial_in = 60 (from PE[1][2])
  PE[0][3]: partial_in = -9 (from PE[1][3])
  PE[1][0]: partial_in = 40 (from PE[2][0])
  PE[1][1]: partial_in = 64 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = 25 (from PE[3][0])
  PE[2][1]: partial_in = 50 (from PE[3][1])
  PE[2][2]: partial_in = 25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=26 -> result=26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=17 -> result=17
  PE[0][2]: input=0 * weight=0 = 0, partial_in=60 -> result=60
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-9 -> result=-9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=64 -> result=64
  PE[1][2]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][0]: input=-41 * weight=0 = 0, partial_in=25 -> result=25
  PE[2][1]: input=-41 * weight=1 = -41, partial_in=50 -> result=9
  PE[2][2]: input=-41 * weight=2 = -82, partial_in=25 -> result=-57
  PE[2][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       26       17       60       -9 
  Row 1:       40       64        8      -16 
  Row 2:       25        9      -57      -41 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │  17 │  60 │  -9 │
├─────┼─────┼─────┼─────┤
│  40 │  64 │   8 │ -16 │
├─────┼─────┼─────┼─────┤
│  25 │   9 │ -57 │ -41 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = 64 (from PE[1][1])
  PE[0][2]: partial_in = 8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 25 (from PE[2][0])
  PE[1][1]: partial_in = 9 (from PE[2][1])
  PE[1][2]: partial_in = -57 (from PE[2][2])
  PE[1][3]: partial_in = -41 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=64 -> result=64
  PE[0][2]: input=0 * weight=0 = 0, partial_in=8 -> result=8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=25 -> result=25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-41 -> result=-41
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       40       64        8      -16 
  Row 1:       25        9      -57      -41 
  Row 2:      -23      -46      -23        0 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  64 │   8 │ -16 │
├─────┼─────┼─────┼─────┤
│  25 │   9 │ -57 │ -41 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       40       64        8      -16 
Row 1:       25        9      -57      -41 
Row 2:      -23      -46      -23        0 
Row 3:      -47      -94      -47        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 40 -> clamp(40) -> final(168)
  PE[0][1]: 64 -> clamp(64) -> final(192)
  PE[0][2]: 8 -> clamp(8) -> final(136)
  PE[0][3]: -16 -> clamp(-16) -> final(112)
  PE[1][0]: 25 -> clamp(25) -> final(153)
  PE[1][1]: 9 -> clamp(9) -> final(137)
  PE[1][2]: -57 -> clamp(-57) -> final(71)
  PE[1][3]: -41 -> clamp(-41) -> final(87)
  PE[2][0]: -23 -> clamp(-23) -> final(105)
  PE[2][1]: -46 -> clamp(-46) -> final(82)
  PE[2][2]: -23 -> clamp(-23) -> final(105)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -47 -> clamp(-47) -> final(81)
  PE[3][1]: -94 -> clamp(-94) -> final(34)
  PE[3][2]: -47 -> clamp(-47) -> final(81)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   168    192    136    112 
   153    137     71     87 
   105     82    105    128 
    81     34     81    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   1    9   22   34 
  -8   12   39   66 
 -20    4   28   61 
 -23  -10   -6   18 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 1
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=0 -> result=-2
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[0][2]: input=1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -2       -1        0        1 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  -1 │   0 │   1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 9
  Row 1: input_block[1][0] = -8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=0 -> result=-18
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[0][2]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -18       -9        0        9 
  Row 1:        8       -8       -8      -16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  -9 │   0 │   9 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 22
  Row 1: input_block[1][1] = 12
  Row 2: input_block[2][0] = -20
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=8 -> result=-36
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=-8 -> result=-30
  PE[0][2]: input=22 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=22 * weight=1 = 22, partial_in=-16 -> result=6
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][3]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -36      -30       -8        6 
  Row 1:      -12       12       12       24 
  Row 2:        0      -20      -40      -20 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │ -30 │  -8 │   6 │
├─────┼─────┼─────┼─────┤
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │ -20 │ -40 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 34
  Row 1: input_block[1][2] = 39
  Row 2: input_block[2][1] = 4
  Row 3: input_block[3][0] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -20 (from PE[2][1])
  PE[1][2]: partial_in = -40 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=34 * weight=-2 = -68, partial_in=-12 -> result=-80
  PE[0][1]: input=34 * weight=-1 = -34, partial_in=12 -> result=-22
  PE[0][2]: input=34 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=34 * weight=1 = 34, partial_in=24 -> result=58
  PE[1][0]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[1][1]: input=39 * weight=1 = 39, partial_in=-20 -> result=19
  PE[1][2]: input=39 * weight=1 = 39, partial_in=-40 -> result=-1
  PE[1][3]: input=39 * weight=2 = 78, partial_in=-20 -> result=58
  PE[2][0]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[2][2]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -80      -22       12       58 
  Row 1:      -39       19       -1       58 
  Row 2:        0        4        8        4 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │ -22 │  12 │  58 │
├─────┼─────┼─────┼─────┤
│ -39 │  19 │  -1 │  58 │
├─────┼─────┼─────┼─────┤
│   0 │   4 │   8 │   4 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 66
  Row 2: input_block[2][2] = 28
  Row 3: input_block[3][1] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = 19 (from PE[1][1])
  PE[0][2]: partial_in = -1 (from PE[1][2])
  PE[0][3]: partial_in = 58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 4 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 4 (from PE[2][3])
  PE[2][0]: partial_in = -23 (from PE[3][0])
  PE[2][1]: partial_in = -46 (from PE[3][1])
  PE[2][2]: partial_in = -23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-39 -> result=-39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=19 -> result=19
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[0][3]: input=0 * weight=1 = 0, partial_in=58 -> result=58
  PE[1][0]: input=66 * weight=-1 = -66, partial_in=0 -> result=-66
  PE[1][1]: input=66 * weight=1 = 66, partial_in=4 -> result=70
  PE[1][2]: input=66 * weight=1 = 66, partial_in=8 -> result=74
  PE[1][3]: input=66 * weight=2 = 132, partial_in=4 -> result=136
  PE[2][0]: input=28 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[2][1]: input=28 * weight=1 = 28, partial_in=-46 -> result=-18
  PE[2][2]: input=28 * weight=2 = 56, partial_in=-23 -> result=33
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -39       19       -1       58 
  Row 1:      -66       70       74      136 
  Row 2:      -23      -18       33       28 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │  19 │  -1 │  58 │
├─────┼─────┼─────┼─────┤
│ -66 │  70 │  74 │ 136 │
├─────┼─────┼─────┼─────┤
│ -23 │ -18 │  33 │  28 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 61
  Row 3: input_block[3][2] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -66 (from PE[1][0])
  PE[0][1]: partial_in = 70 (from PE[1][1])
  PE[0][2]: partial_in = 74 (from PE[1][2])
  PE[0][3]: partial_in = 136 (from PE[1][3])
  PE[1][0]: partial_in = -23 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = 33 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = -10 (from PE[3][0])
  PE[2][1]: partial_in = -20 (from PE[3][1])
  PE[2][2]: partial_in = -10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-66 -> result=-66
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=70 -> result=70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=74 -> result=74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=136 -> result=136
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-23 -> result=-23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][2]: input=0 * weight=1 = 0, partial_in=33 -> result=33
  PE[1][3]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][0]: input=61 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[2][1]: input=61 * weight=1 = 61, partial_in=-20 -> result=41
  PE[2][2]: input=61 * weight=2 = 122, partial_in=-10 -> result=112
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -66       70       74      136 
  Row 1:      -23      -18       33       28 
  Row 2:      -10       41      112       61 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -66 │  70 │  74 │ 136 │
├─────┼─────┼─────┼─────┤
│ -23 │ -18 │  33 │  28 │
├─────┼─────┼─────┼─────┤
│ -10 │  41 │ 112 │  61 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = -18 (from PE[1][1])
  PE[0][2]: partial_in = 33 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = -10 (from PE[2][0])
  PE[1][1]: partial_in = 41 (from PE[2][1])
  PE[1][2]: partial_in = 112 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-23 -> result=-23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-18 -> result=-18
  PE[0][2]: input=0 * weight=0 = 0, partial_in=33 -> result=33
  PE[0][3]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-10 -> result=-10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=41 -> result=41
  PE[1][2]: input=0 * weight=1 = 0, partial_in=112 -> result=112
  PE[1][3]: input=0 * weight=2 = 0, partial_in=61 -> result=61
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][1]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[3][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][3]: input=18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -23      -18       33       28 
  Row 1:      -10       41      112       61 
  Row 2:       -6      -12       -6        0 
  Row 3:       18       36       18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -23 │ -18 │  33 │  28 │
├─────┼─────┼─────┼─────┤
│ -10 │  41 │ 112 │  61 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -23      -18       33       28 
Row 1:      -10       41      112       61 
Row 2:       -6      -12       -6        0 
Row 3:       18       36       18        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -23 -> clamp(-23) -> final(105)
  PE[0][1]: -18 -> clamp(-18) -> final(110)
  PE[0][2]: 33 -> clamp(33) -> final(161)
  PE[0][3]: 28 -> clamp(28) -> final(156)
  PE[1][0]: -10 -> clamp(-10) -> final(118)
  PE[1][1]: 41 -> clamp(41) -> final(169)
  PE[1][2]: 112 -> clamp(112) -> final(240)
  PE[1][3]: 61 -> clamp(61) -> final(189)
  PE[2][0]: -6 -> clamp(-6) -> final(122)
  PE[2][1]: -12 -> clamp(-12) -> final(116)
  PE[2][2]: -6 -> clamp(-6) -> final(122)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 18 -> clamp(18) -> final(146)
  PE[3][1]: 36 -> clamp(36) -> final(164)
  PE[3][2]: 18 -> clamp(18) -> final(146)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   105    110    161    156 
   118    169    240    189 
   122    116    122    128 
   146    164    146    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  45   29   30   49 
  72   51   38   42 
  59   43   26   23 
  23   20   12   10 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 45
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=45 * weight=-2 = -90, partial_in=0 -> result=-90
  PE[0][1]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[0][2]: input=45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -90      -45        0       45 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │ -45 │   0 │  45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 29
  Row 1: input_block[1][0] = 72
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=29 * weight=-2 = -58, partial_in=0 -> result=-58
  PE[0][1]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[0][2]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[1][0]: input=72 * weight=-1 = -72, partial_in=0 -> result=-72
  PE[1][1]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][2]: input=72 * weight=1 = 72, partial_in=0 -> result=72
  PE[1][3]: input=72 * weight=2 = 144, partial_in=0 -> result=144
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -58      -29        0       29 
  Row 1:      -72       72       72      144 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │ -29 │   0 │  29 │
├─────┼─────┼─────┼─────┤
│ -72 │  72 │  72 │ 144 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 30
  Row 1: input_block[1][1] = 51
  Row 2: input_block[2][0] = 59
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -72 (from PE[1][0])
  PE[0][1]: partial_in = 72 (from PE[1][1])
  PE[0][2]: partial_in = 72 (from PE[1][2])
  PE[0][3]: partial_in = 144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=30 * weight=-2 = -60, partial_in=-72 -> result=-132
  PE[0][1]: input=30 * weight=-1 = -30, partial_in=72 -> result=42
  PE[0][2]: input=30 * weight=0 = 0, partial_in=72 -> result=72
  PE[0][3]: input=30 * weight=1 = 30, partial_in=144 -> result=174
  PE[1][0]: input=51 * weight=-1 = -51, partial_in=0 -> result=-51
  PE[1][1]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[1][2]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[1][3]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[2][0]: input=59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[2][2]: input=59 * weight=2 = 118, partial_in=0 -> result=118
  PE[2][3]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -132       42       72      174 
  Row 1:      -51       51       51      102 
  Row 2:        0       59      118       59 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-132 │  42 │  72 │ 174 │
├─────┼─────┼─────┼─────┤
│ -51 │  51 │  51 │ 102 │
├─────┼─────┼─────┼─────┤
│   0 │  59 │ 118 │  59 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 49
  Row 1: input_block[1][2] = 38
  Row 2: input_block[2][1] = 43
  Row 3: input_block[3][0] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -51 (from PE[1][0])
  PE[0][1]: partial_in = 51 (from PE[1][1])
  PE[0][2]: partial_in = 51 (from PE[1][2])
  PE[0][3]: partial_in = 102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 59 (from PE[2][1])
  PE[1][2]: partial_in = 118 (from PE[2][2])
  PE[1][3]: partial_in = 59 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=49 * weight=-2 = -98, partial_in=-51 -> result=-149
  PE[0][1]: input=49 * weight=-1 = -49, partial_in=51 -> result=2
  PE[0][2]: input=49 * weight=0 = 0, partial_in=51 -> result=51
  PE[0][3]: input=49 * weight=1 = 49, partial_in=102 -> result=151
  PE[1][0]: input=38 * weight=-1 = -38, partial_in=0 -> result=-38
  PE[1][1]: input=38 * weight=1 = 38, partial_in=59 -> result=97
  PE[1][2]: input=38 * weight=1 = 38, partial_in=118 -> result=156
  PE[1][3]: input=38 * weight=2 = 76, partial_in=59 -> result=135
  PE[2][0]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[2][2]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[2][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -149        2       51      151 
  Row 1:      -38       97      156      135 
  Row 2:        0       43       86       43 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-149 │   2 │  51 │ 151 │
├─────┼─────┼─────┼─────┤
│ -38 │  97 │ 156 │ 135 │
├─────┼─────┼─────┼─────┤
│   0 │  43 │  86 │  43 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 42
  Row 2: input_block[2][2] = 26
  Row 3: input_block[3][1] = 20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -38 (from PE[1][0])
  PE[0][1]: partial_in = 97 (from PE[1][1])
  PE[0][2]: partial_in = 156 (from PE[1][2])
  PE[0][3]: partial_in = 135 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 43 (from PE[2][1])
  PE[1][2]: partial_in = 86 (from PE[2][2])
  PE[1][3]: partial_in = 43 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-38 -> result=-38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=97 -> result=97
  PE[0][2]: input=0 * weight=0 = 0, partial_in=156 -> result=156
  PE[0][3]: input=0 * weight=1 = 0, partial_in=135 -> result=135
  PE[1][0]: input=42 * weight=-1 = -42, partial_in=0 -> result=-42
  PE[1][1]: input=42 * weight=1 = 42, partial_in=43 -> result=85
  PE[1][2]: input=42 * weight=1 = 42, partial_in=86 -> result=128
  PE[1][3]: input=42 * weight=2 = 84, partial_in=43 -> result=127
  PE[2][0]: input=26 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=26 * weight=1 = 26, partial_in=46 -> result=72
  PE[2][2]: input=26 * weight=2 = 52, partial_in=23 -> result=75
  PE[2][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][0]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][1]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[3][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][3]: input=20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -38       97      156      135 
  Row 1:      -42       85      128      127 
  Row 2:       23       72       75       26 
  Row 3:       20       40       20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │  97 │ 156 │ 135 │
├─────┼─────┼─────┼─────┤
│ -42 │  85 │ 128 │ 127 │
├─────┼─────┼─────┼─────┤
│  23 │  72 │  75 │  26 │
├─────┼─────┼─────┼─────┤
│  20 │  40 │  20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 23
  Row 3: input_block[3][2] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -42 (from PE[1][0])
  PE[0][1]: partial_in = 85 (from PE[1][1])
  PE[0][2]: partial_in = 128 (from PE[1][2])
  PE[0][3]: partial_in = 127 (from PE[1][3])
  PE[1][0]: partial_in = 23 (from PE[2][0])
  PE[1][1]: partial_in = 72 (from PE[2][1])
  PE[1][2]: partial_in = 75 (from PE[2][2])
  PE[1][3]: partial_in = 26 (from PE[2][3])
  PE[2][0]: partial_in = 20 (from PE[3][0])
  PE[2][1]: partial_in = 40 (from PE[3][1])
  PE[2][2]: partial_in = 20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-42 -> result=-42
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=85 -> result=85
  PE[0][2]: input=0 * weight=0 = 0, partial_in=128 -> result=128
  PE[0][3]: input=0 * weight=1 = 0, partial_in=127 -> result=127
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=23 -> result=23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=75 -> result=75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=26 -> result=26
  PE[2][0]: input=23 * weight=0 = 0, partial_in=20 -> result=20
  PE[2][1]: input=23 * weight=1 = 23, partial_in=40 -> result=63
  PE[2][2]: input=23 * weight=2 = 46, partial_in=20 -> result=66
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -42       85      128      127 
  Row 1:       23       72       75       26 
  Row 2:       20       63       66       23 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -42 │  85 │ 128 │ 127 │
├─────┼─────┼─────┼─────┤
│  23 │  72 │  75 │  26 │
├─────┼─────┼─────┼─────┤
│  20 │  63 │  66 │  23 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = 72 (from PE[1][1])
  PE[0][2]: partial_in = 75 (from PE[1][2])
  PE[0][3]: partial_in = 26 (from PE[1][3])
  PE[1][0]: partial_in = 20 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 66 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=72 -> result=72
  PE[0][2]: input=0 * weight=0 = 0, partial_in=75 -> result=75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=26 -> result=26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=20 -> result=20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][2]: input=0 * weight=1 = 0, partial_in=66 -> result=66
  PE[1][3]: input=0 * weight=2 = 0, partial_in=23 -> result=23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[2][2]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       23       72       75       26 
  Row 1:       20       63       66       23 
  Row 2:       12       24       12        0 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │  72 │  75 │  26 │
├─────┼─────┼─────┼─────┤
│  20 │  63 │  66 │  23 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       23       72       75       26 
Row 1:       20       63       66       23 
Row 2:       12       24       12        0 
Row 3:       10       20       10        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 23 -> clamp(23) -> final(151)
  PE[0][1]: 72 -> clamp(72) -> final(200)
  PE[0][2]: 75 -> clamp(75) -> final(203)
  PE[0][3]: 26 -> clamp(26) -> final(154)
  PE[1][0]: 20 -> clamp(20) -> final(148)
  PE[1][1]: 63 -> clamp(63) -> final(191)
  PE[1][2]: 66 -> clamp(66) -> final(194)
  PE[1][3]: 23 -> clamp(23) -> final(151)
  PE[2][0]: 12 -> clamp(12) -> final(140)
  PE[2][1]: 24 -> clamp(24) -> final(152)
  PE[2][2]: 12 -> clamp(12) -> final(140)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 10 -> clamp(10) -> final(138)
  PE[3][1]: 20 -> clamp(20) -> final(148)
  PE[3][2]: 10 -> clamp(10) -> final(138)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   151    200    203    154 
   148    191    194    151 
   140    152    140    128 
   138    148    138    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  40  -19 -128 -101 
  32  -20 -116  -87 
  21  -23 -101  -73 
  16  -30  -97  -75 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 40
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=40 * weight=-2 = -80, partial_in=0 -> result=-80
  PE[0][1]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[0][2]: input=40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -80      -40        0       40 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │ -40 │   0 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -19
  Row 1: input_block[1][0] = 32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-19 * weight=-2 = 38, partial_in=0 -> result=38
  PE[0][1]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[0][2]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][3]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       38       19        0      -19 
  Row 1:      -32       32       32       64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │  19 │   0 │ -19 │
├─────┼─────┼─────┼─────┤
│ -32 │  32 │  32 │  64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -128
  Row 1: input_block[1][1] = -20
  Row 2: input_block[2][0] = 21
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 32 (from PE[1][2])
  PE[0][3]: partial_in = 64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-128 * weight=-2 = 256, partial_in=-32 -> result=224
  PE[0][1]: input=-128 * weight=-1 = 128, partial_in=32 -> result=160
  PE[0][2]: input=-128 * weight=0 = 0, partial_in=32 -> result=32
  PE[0][3]: input=-128 * weight=1 = -128, partial_in=64 -> result=-64
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][0]: input=21 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[2][2]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      224      160       32      -64 
  Row 1:       20      -20      -20      -40 
  Row 2:        0       21       42       21 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 224 │ 160 │  32 │ -64 │
├─────┼─────┼─────┼─────┤
│  20 │ -20 │ -20 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │  21 │  42 │  21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -101
  Row 1: input_block[1][2] = -116
  Row 2: input_block[2][1] = -23
  Row 3: input_block[3][0] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -20 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 21 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-101 * weight=-2 = 202, partial_in=20 -> result=222
  PE[0][1]: input=-101 * weight=-1 = 101, partial_in=-20 -> result=81
  PE[0][2]: input=-101 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=-101 * weight=1 = -101, partial_in=-40 -> result=-141
  PE[1][0]: input=-116 * weight=-1 = 116, partial_in=0 -> result=116
  PE[1][1]: input=-116 * weight=1 = -116, partial_in=21 -> result=-95
  PE[1][2]: input=-116 * weight=1 = -116, partial_in=42 -> result=-74
  PE[1][3]: input=-116 * weight=2 = -232, partial_in=21 -> result=-211
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      222       81      -20     -141 
  Row 1:      116      -95      -74     -211 
  Row 2:        0      -23      -46      -23 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 222 │  81 │ -20 │-141 │
├─────┼─────┼─────┼─────┤
│ 116 │ -95 │ -74 │-211 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -87
  Row 2: input_block[2][2] = -101
  Row 3: input_block[3][1] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 116 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -74 (from PE[1][2])
  PE[0][3]: partial_in = -211 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=116 -> result=116
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-95 -> result=-95
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-74 -> result=-74
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-211 -> result=-211
  PE[1][0]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[1][1]: input=-87 * weight=1 = -87, partial_in=-23 -> result=-110
  PE[1][2]: input=-87 * weight=1 = -87, partial_in=-46 -> result=-133
  PE[1][3]: input=-87 * weight=2 = -174, partial_in=-23 -> result=-197
  PE[2][0]: input=-101 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=-101 * weight=1 = -101, partial_in=32 -> result=-69
  PE[2][2]: input=-101 * weight=2 = -202, partial_in=16 -> result=-186
  PE[2][3]: input=-101 * weight=1 = -101, partial_in=0 -> result=-101
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      116      -95      -74     -211 
  Row 1:       87     -110     -133     -197 
  Row 2:       16      -69     -186     -101 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 116 │ -95 │ -74 │-211 │
├─────┼─────┼─────┼─────┤
│  87 │-110 │-133 │-197 │
├─────┼─────┼─────┼─────┤
│  16 │ -69 │-186 │-101 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -73
  Row 3: input_block[3][2] = -97

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 87 (from PE[1][0])
  PE[0][1]: partial_in = -110 (from PE[1][1])
  PE[0][2]: partial_in = -133 (from PE[1][2])
  PE[0][3]: partial_in = -197 (from PE[1][3])
  PE[1][0]: partial_in = 16 (from PE[2][0])
  PE[1][1]: partial_in = -69 (from PE[2][1])
  PE[1][2]: partial_in = -186 (from PE[2][2])
  PE[1][3]: partial_in = -101 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=87 -> result=87
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-110 -> result=-110
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-133 -> result=-133
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-197 -> result=-197
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-186 -> result=-186
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-101 -> result=-101
  PE[2][0]: input=-73 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=-73 * weight=1 = -73, partial_in=-60 -> result=-133
  PE[2][2]: input=-73 * weight=2 = -146, partial_in=-30 -> result=-176
  PE[2][3]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][0]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[3][1]: input=-97 * weight=2 = -194, partial_in=0 -> result=-194
  PE[3][2]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[3][3]: input=-97 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       87     -110     -133     -197 
  Row 1:       16      -69     -186     -101 
  Row 2:      -30     -133     -176      -73 
  Row 3:      -97     -194      -97        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  87 │-110 │-133 │-197 │
├─────┼─────┼─────┼─────┤
│  16 │ -69 │-186 │-101 │
├─────┼─────┼─────┼─────┤
│ -30 │-133 │-176 │ -73 │
├─────┼─────┼─────┼─────┤
│ -97 │-194 │ -97 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -75

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -69 (from PE[1][1])
  PE[0][2]: partial_in = -186 (from PE[1][2])
  PE[0][3]: partial_in = -101 (from PE[1][3])
  PE[1][0]: partial_in = -30 (from PE[2][0])
  PE[1][1]: partial_in = -133 (from PE[2][1])
  PE[1][2]: partial_in = -176 (from PE[2][2])
  PE[1][3]: partial_in = -73 (from PE[2][3])
  PE[2][0]: partial_in = -97 (from PE[3][0])
  PE[2][1]: partial_in = -194 (from PE[3][1])
  PE[2][2]: partial_in = -97 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=16 -> result=16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-69 -> result=-69
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-186 -> result=-186
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-133 -> result=-133
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-176 -> result=-176
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-73 -> result=-73
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-194 -> result=-194
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-97 -> result=-97
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][1]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[3][2]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[3][3]: input=-75 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       16      -69     -186     -101 
  Row 1:      -30     -133     -176      -73 
  Row 2:      -97     -194      -97        0 
  Row 3:      -75     -150      -75        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │ -69 │-186 │-101 │
├─────┼─────┼─────┼─────┤
│ -30 │-133 │-176 │ -73 │
├─────┼─────┼─────┼─────┤
│ -97 │-194 │ -97 │   0 │
├─────┼─────┼─────┼─────┤
│ -75 │-150 │ -75 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       16      -69     -186     -101 
Row 1:      -30     -133     -176      -73 
Row 2:      -97     -194      -97        0 
Row 3:      -75     -150      -75        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 16 -> clamp(16) -> final(144)
  PE[0][1]: -69 -> clamp(-69) -> final(59)
  PE[0][2]: -186 -> clamp(-128) -> final(0)
  PE[0][3]: -101 -> clamp(-101) -> final(27)
  PE[1][0]: -30 -> clamp(-30) -> final(98)
  PE[1][1]: -133 -> clamp(-128) -> final(0)
  PE[1][2]: -176 -> clamp(-128) -> final(0)
  PE[1][3]: -73 -> clamp(-73) -> final(55)
  PE[2][0]: -97 -> clamp(-97) -> final(31)
  PE[2][1]: -194 -> clamp(-128) -> final(0)
  PE[2][2]: -97 -> clamp(-97) -> final(31)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -75 -> clamp(-75) -> final(53)
  PE[3][1]: -150 -> clamp(-128) -> final(0)
  PE[3][2]: -75 -> clamp(-75) -> final(53)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   144     59      0     27 
    98      0      0     55 
    31      0     31    128 
    53      0     53    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -67  -57  -46  -38 
 -63  -55  -43  -41 
 -61  -52  -37  -39 
 -62  -52  -31  -34 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -67
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-67 * weight=-2 = 134, partial_in=0 -> result=134
  PE[0][1]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[0][2]: input=-67 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      134       67        0      -67 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 134 │  67 │   0 │ -67 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -57
  Row 1: input_block[1][0] = -63
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-57 * weight=-2 = 114, partial_in=0 -> result=114
  PE[0][1]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[0][2]: input=-57 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][0]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[1][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][3]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      114       57        0      -57 
  Row 1:       63      -63      -63     -126 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 114 │  57 │   0 │ -57 │
├─────┼─────┼─────┼─────┤
│  63 │ -63 │ -63 │-126 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -46
  Row 1: input_block[1][1] = -55
  Row 2: input_block[2][0] = -61
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 63 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=63 -> result=155
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=-63 -> result=-17
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=-126 -> result=-172
  PE[1][0]: input=-55 * weight=-1 = 55, partial_in=0 -> result=55
  PE[1][1]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[1][2]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[1][3]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[2][0]: input=-61 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[2][2]: input=-61 * weight=2 = -122, partial_in=0 -> result=-122
  PE[2][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      155      -17      -63     -172 
  Row 1:       55      -55      -55     -110 
  Row 2:        0      -61     -122      -61 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 155 │ -17 │ -63 │-172 │
├─────┼─────┼─────┼─────┤
│  55 │ -55 │ -55 │-110 │
├─────┼─────┼─────┼─────┤
│   0 │ -61 │-122 │ -61 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -38
  Row 1: input_block[1][2] = -43
  Row 2: input_block[2][1] = -52
  Row 3: input_block[3][0] = -62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 55 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -110 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -61 (from PE[2][1])
  PE[1][2]: partial_in = -122 (from PE[2][2])
  PE[1][3]: partial_in = -61 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-38 * weight=-2 = 76, partial_in=55 -> result=131
  PE[0][1]: input=-38 * weight=-1 = 38, partial_in=-55 -> result=-17
  PE[0][2]: input=-38 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=-38 * weight=1 = -38, partial_in=-110 -> result=-148
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=-61 -> result=-104
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=-122 -> result=-165
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=-61 -> result=-147
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=0 -> result=-104
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][1]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[3][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][3]: input=-62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      131      -17      -55     -148 
  Row 1:       43     -104     -165     -147 
  Row 2:        0      -52     -104      -52 
  Row 3:      -62     -124      -62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 131 │ -17 │ -55 │-148 │
├─────┼─────┼─────┼─────┤
│  43 │-104 │-165 │-147 │
├─────┼─────┼─────┼─────┤
│   0 │ -52 │-104 │ -52 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -41
  Row 2: input_block[2][2] = -37
  Row 3: input_block[3][1] = -52

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -104 (from PE[1][1])
  PE[0][2]: partial_in = -165 (from PE[1][2])
  PE[0][3]: partial_in = -147 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -52 (from PE[2][1])
  PE[1][2]: partial_in = -104 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -62 (from PE[3][0])
  PE[2][1]: partial_in = -124 (from PE[3][1])
  PE[2][2]: partial_in = -62 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=43 -> result=43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-104 -> result=-104
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-165 -> result=-165
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-147 -> result=-147
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-52 -> result=-93
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-104 -> result=-145
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-52 -> result=-134
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-124 -> result=-161
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-62 -> result=-136
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][1]: input=-52 * weight=2 = -104, partial_in=0 -> result=-104
  PE[3][2]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][3]: input=-52 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       43     -104     -165     -147 
  Row 1:       41      -93     -145     -134 
  Row 2:      -62     -161     -136      -37 
  Row 3:      -52     -104      -52        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │-104 │-165 │-147 │
├─────┼─────┼─────┼─────┤
│  41 │ -93 │-145 │-134 │
├─────┼─────┼─────┼─────┤
│ -62 │-161 │-136 │ -37 │
├─────┼─────┼─────┼─────┤
│ -52 │-104 │ -52 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -39
  Row 3: input_block[3][2] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -93 (from PE[1][1])
  PE[0][2]: partial_in = -145 (from PE[1][2])
  PE[0][3]: partial_in = -134 (from PE[1][3])
  PE[1][0]: partial_in = -62 (from PE[2][0])
  PE[1][1]: partial_in = -161 (from PE[2][1])
  PE[1][2]: partial_in = -136 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -52 (from PE[3][0])
  PE[2][1]: partial_in = -104 (from PE[3][1])
  PE[2][2]: partial_in = -52 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-93 -> result=-93
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-145 -> result=-145
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-134 -> result=-134
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-161 -> result=-161
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-136 -> result=-136
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-104 -> result=-143
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-52 -> result=-130
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       41      -93     -145     -134 
  Row 1:      -62     -161     -136      -37 
  Row 2:      -52     -143     -130      -39 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │ -93 │-145 │-134 │
├─────┼─────┼─────┼─────┤
│ -62 │-161 │-136 │ -37 │
├─────┼─────┼─────┼─────┤
│ -52 │-143 │-130 │ -39 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -62 (from PE[1][0])
  PE[0][1]: partial_in = -161 (from PE[1][1])
  PE[0][2]: partial_in = -136 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = -52 (from PE[2][0])
  PE[1][1]: partial_in = -143 (from PE[2][1])
  PE[1][2]: partial_in = -130 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-62 -> result=-62
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-161 -> result=-161
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-136 -> result=-136
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-130 -> result=-130
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -62     -161     -136      -37 
  Row 1:      -52     -143     -130      -39 
  Row 2:      -31      -62      -31        0 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -62 │-161 │-136 │ -37 │
├─────┼─────┼─────┼─────┤
│ -52 │-143 │-130 │ -39 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -62     -161     -136      -37 
Row 1:      -52     -143     -130      -39 
Row 2:      -31      -62      -31        0 
Row 3:      -34      -68      -34        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -62 -> clamp(-62) -> final(66)
  PE[0][1]: -161 -> clamp(-128) -> final(0)
  PE[0][2]: -136 -> clamp(-128) -> final(0)
  PE[0][3]: -37 -> clamp(-37) -> final(91)
  PE[1][0]: -52 -> clamp(-52) -> final(76)
  PE[1][1]: -143 -> clamp(-128) -> final(0)
  PE[1][2]: -130 -> clamp(-128) -> final(0)
  PE[1][3]: -39 -> clamp(-39) -> final(89)
  PE[2][0]: -31 -> clamp(-31) -> final(97)
  PE[2][1]: -62 -> clamp(-62) -> final(66)
  PE[2][2]: -31 -> clamp(-31) -> final(97)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -34 -> clamp(-34) -> final(94)
  PE[3][1]: -68 -> clamp(-68) -> final(60)
  PE[3][2]: -34 -> clamp(-34) -> final(94)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    66      0      0     91 
    76      0      0     89 
    97     66     97    128 
    94     60     94    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -39  -40   -5   47 
 -42  -21   27   70 
 -42   -2   47   61 
 -38    6   36   11 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=0 -> result=78
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       78       39        0      -39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  39 │   0 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -40
  Row 1: input_block[1][0] = -42
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=0 -> result=80
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[1][0]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[1][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][3]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       80       40        0      -40 
  Row 1:       42      -42      -42      -84 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │  40 │   0 │ -40 │
├─────┼─────┼─────┼─────┤
│  42 │ -42 │ -42 │ -84 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -5
  Row 1: input_block[1][1] = -21
  Row 2: input_block[2][0] = -42
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 42 (from PE[1][0])
  PE[0][1]: partial_in = -42 (from PE[1][1])
  PE[0][2]: partial_in = -42 (from PE[1][2])
  PE[0][3]: partial_in = -84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=42 -> result=52
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=-42 -> result=-37
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=-84 -> result=-89
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       52      -37      -42      -89 
  Row 1:       21      -21      -21      -42 
  Row 2:        0      -42      -84      -42 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │ -37 │ -42 │ -89 │
├─────┼─────┼─────┼─────┤
│  21 │ -21 │ -21 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │ -42 │ -84 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 47
  Row 1: input_block[1][2] = 27
  Row 2: input_block[2][1] = -2
  Row 3: input_block[3][0] = -38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -42 (from PE[2][1])
  PE[1][2]: partial_in = -84 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=47 * weight=-2 = -94, partial_in=21 -> result=-73
  PE[0][1]: input=47 * weight=-1 = -47, partial_in=-21 -> result=-68
  PE[0][2]: input=47 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=47 * weight=1 = 47, partial_in=-42 -> result=5
  PE[1][0]: input=27 * weight=-1 = -27, partial_in=0 -> result=-27
  PE[1][1]: input=27 * weight=1 = 27, partial_in=-42 -> result=-15
  PE[1][2]: input=27 * weight=1 = 27, partial_in=-84 -> result=-57
  PE[1][3]: input=27 * weight=2 = 54, partial_in=-42 -> result=12
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][1]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[3][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][3]: input=-38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -73      -68      -21        5 
  Row 1:      -27      -15      -57       12 
  Row 2:        0       -2       -4       -2 
  Row 3:      -38      -76      -38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -73 │ -68 │ -21 │   5 │
├─────┼─────┼─────┼─────┤
│ -27 │ -15 │ -57 │  12 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│ -38 │ -76 │ -38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 70
  Row 2: input_block[2][2] = 47
  Row 3: input_block[3][1] = 6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -27 (from PE[1][0])
  PE[0][1]: partial_in = -15 (from PE[1][1])
  PE[0][2]: partial_in = -57 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -38 (from PE[3][0])
  PE[2][1]: partial_in = -76 (from PE[3][1])
  PE[2][2]: partial_in = -38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-27 -> result=-27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[0][3]: input=0 * weight=1 = 0, partial_in=12 -> result=12
  PE[1][0]: input=70 * weight=-1 = -70, partial_in=0 -> result=-70
  PE[1][1]: input=70 * weight=1 = 70, partial_in=-2 -> result=68
  PE[1][2]: input=70 * weight=1 = 70, partial_in=-4 -> result=66
  PE[1][3]: input=70 * weight=2 = 140, partial_in=-2 -> result=138
  PE[2][0]: input=47 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[2][1]: input=47 * weight=1 = 47, partial_in=-76 -> result=-29
  PE[2][2]: input=47 * weight=2 = 94, partial_in=-38 -> result=56
  PE[2][3]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][0]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][1]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[3][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][3]: input=6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -27      -15      -57       12 
  Row 1:      -70       68       66      138 
  Row 2:      -38      -29       56       47 
  Row 3:        6       12        6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -27 │ -15 │ -57 │  12 │
├─────┼─────┼─────┼─────┤
│ -70 │  68 │  66 │ 138 │
├─────┼─────┼─────┼─────┤
│ -38 │ -29 │  56 │  47 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 61
  Row 3: input_block[3][2] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -70 (from PE[1][0])
  PE[0][1]: partial_in = 68 (from PE[1][1])
  PE[0][2]: partial_in = 66 (from PE[1][2])
  PE[0][3]: partial_in = 138 (from PE[1][3])
  PE[1][0]: partial_in = -38 (from PE[2][0])
  PE[1][1]: partial_in = -29 (from PE[2][1])
  PE[1][2]: partial_in = 56 (from PE[2][2])
  PE[1][3]: partial_in = 47 (from PE[2][3])
  PE[2][0]: partial_in = 6 (from PE[3][0])
  PE[2][1]: partial_in = 12 (from PE[3][1])
  PE[2][2]: partial_in = 6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-70 -> result=-70
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=68 -> result=68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=66 -> result=66
  PE[0][3]: input=0 * weight=1 = 0, partial_in=138 -> result=138
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-38 -> result=-38
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-29 -> result=-29
  PE[1][2]: input=0 * weight=1 = 0, partial_in=56 -> result=56
  PE[1][3]: input=0 * weight=2 = 0, partial_in=47 -> result=47
  PE[2][0]: input=61 * weight=0 = 0, partial_in=6 -> result=6
  PE[2][1]: input=61 * weight=1 = 61, partial_in=12 -> result=73
  PE[2][2]: input=61 * weight=2 = 122, partial_in=6 -> result=128
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -70       68       66      138 
  Row 1:      -38      -29       56       47 
  Row 2:        6       73      128       61 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -70 │  68 │  66 │ 138 │
├─────┼─────┼─────┼─────┤
│ -38 │ -29 │  56 │  47 │
├─────┼─────┼─────┼─────┤
│   6 │  73 │ 128 │  61 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -38 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = 56 (from PE[1][2])
  PE[0][3]: partial_in = 47 (from PE[1][3])
  PE[1][0]: partial_in = 6 (from PE[2][0])
  PE[1][1]: partial_in = 73 (from PE[2][1])
  PE[1][2]: partial_in = 128 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-38 -> result=-38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=56 -> result=56
  PE[0][3]: input=0 * weight=1 = 0, partial_in=47 -> result=47
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=6 -> result=6
  PE[1][1]: input=0 * weight=1 = 0, partial_in=73 -> result=73
  PE[1][2]: input=0 * weight=1 = 0, partial_in=128 -> result=128
  PE[1][3]: input=0 * weight=2 = 0, partial_in=61 -> result=61
  PE[2][0]: input=0 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[2][2]: input=0 * weight=2 = 0, partial_in=36 -> result=36
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][1]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[3][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][3]: input=11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -38      -29       56       47 
  Row 1:        6       73      128       61 
  Row 2:       36       72       36        0 
  Row 3:       11       22       11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │ -29 │  56 │  47 │
├─────┼─────┼─────┼─────┤
│   6 │  73 │ 128 │  61 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -38      -29       56       47 
Row 1:        6       73      128       61 
Row 2:       36       72       36        0 
Row 3:       11       22       11        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -38 -> clamp(-38) -> final(90)
  PE[0][1]: -29 -> clamp(-29) -> final(99)
  PE[0][2]: 56 -> clamp(56) -> final(184)
  PE[0][3]: 47 -> clamp(47) -> final(175)
  PE[1][0]: 6 -> clamp(6) -> final(134)
  PE[1][1]: 73 -> clamp(73) -> final(201)
  PE[1][2]: 128 -> clamp(127) -> final(255)
  PE[1][3]: 61 -> clamp(61) -> final(189)
  PE[2][0]: 36 -> clamp(36) -> final(164)
  PE[2][1]: 72 -> clamp(72) -> final(200)
  PE[2][2]: 36 -> clamp(36) -> final(164)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 11 -> clamp(11) -> final(139)
  PE[3][1]: 22 -> clamp(22) -> final(150)
  PE[3][2]: 11 -> clamp(11) -> final(139)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    90     99    184    175 
   134    201    255    189 
   164    200    164    128 
   139    150    139    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -76  -70  -71  -74 
 -65  -65  -75  -82 
 -63  -64  -78  -92 
 -96  -85  -84  -91 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -76
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-76 * weight=-2 = 152, partial_in=0 -> result=152
  PE[0][1]: input=-76 * weight=-1 = 76, partial_in=0 -> result=76
  PE[0][2]: input=-76 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      152       76        0      -76 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 152 │  76 │   0 │ -76 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -70
  Row 1: input_block[1][0] = -65
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-70 * weight=-2 = 140, partial_in=0 -> result=140
  PE[0][1]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[0][2]: input=-70 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[1][0]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[1][1]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][3]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      140       70        0      -70 
  Row 1:       65      -65      -65     -130 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 140 │  70 │   0 │ -70 │
├─────┼─────┼─────┼─────┤
│  65 │ -65 │ -65 │-130 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -71
  Row 1: input_block[1][1] = -65
  Row 2: input_block[2][0] = -63
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 65 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -65 (from PE[1][2])
  PE[0][3]: partial_in = -130 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-71 * weight=-2 = 142, partial_in=65 -> result=207
  PE[0][1]: input=-71 * weight=-1 = 71, partial_in=-65 -> result=6
  PE[0][2]: input=-71 * weight=0 = 0, partial_in=-65 -> result=-65
  PE[0][3]: input=-71 * weight=1 = -71, partial_in=-130 -> result=-201
  PE[1][0]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[1][1]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][3]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[2][0]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[2][2]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      207        6      -65     -201 
  Row 1:       65      -65      -65     -130 
  Row 2:        0      -63     -126      -63 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 207 │   6 │ -65 │-201 │
├─────┼─────┼─────┼─────┤
│  65 │ -65 │ -65 │-130 │
├─────┼─────┼─────┼─────┤
│   0 │ -63 │-126 │ -63 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -74
  Row 1: input_block[1][2] = -75
  Row 2: input_block[2][1] = -64
  Row 3: input_block[3][0] = -96

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 65 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -65 (from PE[1][2])
  PE[0][3]: partial_in = -130 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -63 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -63 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-74 * weight=-2 = 148, partial_in=65 -> result=213
  PE[0][1]: input=-74 * weight=-1 = 74, partial_in=-65 -> result=9
  PE[0][2]: input=-74 * weight=0 = 0, partial_in=-65 -> result=-65
  PE[0][3]: input=-74 * weight=1 = -74, partial_in=-130 -> result=-204
  PE[1][0]: input=-75 * weight=-1 = 75, partial_in=0 -> result=75
  PE[1][1]: input=-75 * weight=1 = -75, partial_in=-63 -> result=-138
  PE[1][2]: input=-75 * weight=1 = -75, partial_in=-126 -> result=-201
  PE[1][3]: input=-75 * weight=2 = -150, partial_in=-63 -> result=-213
  PE[2][0]: input=-64 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[2][2]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[2][3]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][0]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][1]: input=-96 * weight=2 = -192, partial_in=0 -> result=-192
  PE[3][2]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][3]: input=-96 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      213        9      -65     -204 
  Row 1:       75     -138     -201     -213 
  Row 2:        0      -64     -128      -64 
  Row 3:      -96     -192      -96        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 213 │   9 │ -65 │-204 │
├─────┼─────┼─────┼─────┤
│  75 │-138 │-201 │-213 │
├─────┼─────┼─────┼─────┤
│   0 │ -64 │-128 │ -64 │
├─────┼─────┼─────┼─────┤
│ -96 │-192 │ -96 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -82
  Row 2: input_block[2][2] = -78
  Row 3: input_block[3][1] = -85

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 75 (from PE[1][0])
  PE[0][1]: partial_in = -138 (from PE[1][1])
  PE[0][2]: partial_in = -201 (from PE[1][2])
  PE[0][3]: partial_in = -213 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -64 (from PE[2][1])
  PE[1][2]: partial_in = -128 (from PE[2][2])
  PE[1][3]: partial_in = -64 (from PE[2][3])
  PE[2][0]: partial_in = -96 (from PE[3][0])
  PE[2][1]: partial_in = -192 (from PE[3][1])
  PE[2][2]: partial_in = -96 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=75 -> result=75
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-138 -> result=-138
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-201 -> result=-201
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-213 -> result=-213
  PE[1][0]: input=-82 * weight=-1 = 82, partial_in=0 -> result=82
  PE[1][1]: input=-82 * weight=1 = -82, partial_in=-64 -> result=-146
  PE[1][2]: input=-82 * weight=1 = -82, partial_in=-128 -> result=-210
  PE[1][3]: input=-82 * weight=2 = -164, partial_in=-64 -> result=-228
  PE[2][0]: input=-78 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[2][1]: input=-78 * weight=1 = -78, partial_in=-192 -> result=-270
  PE[2][2]: input=-78 * weight=2 = -156, partial_in=-96 -> result=-252
  PE[2][3]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][0]: input=-85 * weight=1 = -85, partial_in=0 -> result=-85
  PE[3][1]: input=-85 * weight=2 = -170, partial_in=0 -> result=-170
  PE[3][2]: input=-85 * weight=1 = -85, partial_in=0 -> result=-85
  PE[3][3]: input=-85 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       75     -138     -201     -213 
  Row 1:       82     -146     -210     -228 
  Row 2:      -96     -270     -252      -78 
  Row 3:      -85     -170      -85        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │-138 │-201 │-213 │
├─────┼─────┼─────┼─────┤
│  82 │-146 │-210 │-228 │
├─────┼─────┼─────┼─────┤
│ -96 │-270 │-252 │ -78 │
├─────┼─────┼─────┼─────┤
│ -85 │-170 │ -85 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -92
  Row 3: input_block[3][2] = -84

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 82 (from PE[1][0])
  PE[0][1]: partial_in = -146 (from PE[1][1])
  PE[0][2]: partial_in = -210 (from PE[1][2])
  PE[0][3]: partial_in = -228 (from PE[1][3])
  PE[1][0]: partial_in = -96 (from PE[2][0])
  PE[1][1]: partial_in = -270 (from PE[2][1])
  PE[1][2]: partial_in = -252 (from PE[2][2])
  PE[1][3]: partial_in = -78 (from PE[2][3])
  PE[2][0]: partial_in = -85 (from PE[3][0])
  PE[2][1]: partial_in = -170 (from PE[3][1])
  PE[2][2]: partial_in = -85 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=82 -> result=82
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-146 -> result=-146
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-210 -> result=-210
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-228 -> result=-228
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-96 -> result=-96
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-252 -> result=-252
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-78 -> result=-78
  PE[2][0]: input=-92 * weight=0 = 0, partial_in=-85 -> result=-85
  PE[2][1]: input=-92 * weight=1 = -92, partial_in=-170 -> result=-262
  PE[2][2]: input=-92 * weight=2 = -184, partial_in=-85 -> result=-269
  PE[2][3]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][0]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][1]: input=-84 * weight=2 = -168, partial_in=0 -> result=-168
  PE[3][2]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][3]: input=-84 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       82     -146     -210     -228 
  Row 1:      -96     -270     -252      -78 
  Row 2:      -85     -262     -269      -92 
  Row 3:      -84     -168      -84        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  82 │-146 │-210 │-228 │
├─────┼─────┼─────┼─────┤
│ -96 │-270 │-252 │ -78 │
├─────┼─────┼─────┼─────┤
│ -85 │-262 │-269 │ -92 │
├─────┼─────┼─────┼─────┤
│ -84 │-168 │ -84 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -91

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -96 (from PE[1][0])
  PE[0][1]: partial_in = -270 (from PE[1][1])
  PE[0][2]: partial_in = -252 (from PE[1][2])
  PE[0][3]: partial_in = -78 (from PE[1][3])
  PE[1][0]: partial_in = -85 (from PE[2][0])
  PE[1][1]: partial_in = -262 (from PE[2][1])
  PE[1][2]: partial_in = -269 (from PE[2][2])
  PE[1][3]: partial_in = -92 (from PE[2][3])
  PE[2][0]: partial_in = -84 (from PE[3][0])
  PE[2][1]: partial_in = -168 (from PE[3][1])
  PE[2][2]: partial_in = -84 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-96 -> result=-96
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-270 -> result=-270
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-252 -> result=-252
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-85 -> result=-85
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-262 -> result=-262
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-269 -> result=-269
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-92 -> result=-92
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-84 -> result=-84
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-168 -> result=-168
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-84 -> result=-84
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][1]: input=-91 * weight=2 = -182, partial_in=0 -> result=-182
  PE[3][2]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][3]: input=-91 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -96     -270     -252      -78 
  Row 1:      -85     -262     -269      -92 
  Row 2:      -84     -168      -84        0 
  Row 3:      -91     -182      -91        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -96 │-270 │-252 │ -78 │
├─────┼─────┼─────┼─────┤
│ -85 │-262 │-269 │ -92 │
├─────┼─────┼─────┼─────┤
│ -84 │-168 │ -84 │   0 │
├─────┼─────┼─────┼─────┤
│ -91 │-182 │ -91 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -96     -270     -252      -78 
Row 1:      -85     -262     -269      -92 
Row 2:      -84     -168      -84        0 
Row 3:      -91     -182      -91        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -96 -> clamp(-96) -> final(32)
  PE[0][1]: -270 -> clamp(-128) -> final(0)
  PE[0][2]: -252 -> clamp(-128) -> final(0)
  PE[0][3]: -78 -> clamp(-78) -> final(50)
  PE[1][0]: -85 -> clamp(-85) -> final(43)
  PE[1][1]: -262 -> clamp(-128) -> final(0)
  PE[1][2]: -269 -> clamp(-128) -> final(0)
  PE[1][3]: -92 -> clamp(-92) -> final(36)
  PE[2][0]: -84 -> clamp(-84) -> final(44)
  PE[2][1]: -168 -> clamp(-128) -> final(0)
  PE[2][2]: -84 -> clamp(-84) -> final(44)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -91 -> clamp(-91) -> final(37)
  PE[3][1]: -182 -> clamp(-128) -> final(0)
  PE[3][2]: -91 -> clamp(-91) -> final(37)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    32      0      0     50 
    43      0      0     36 
    44      0     44    128 
    37      0     37    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -65  -54  -61  -80 
 -67  -45  -44  -60 
 -78  -48  -36  -45 
 -81  -59  -56  -70 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -65
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-65 * weight=-2 = 130, partial_in=0 -> result=130
  PE[0][1]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[0][2]: input=-65 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      130       65        0      -65 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 130 │  65 │   0 │ -65 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -54
  Row 1: input_block[1][0] = -67
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-54 * weight=-2 = 108, partial_in=0 -> result=108
  PE[0][1]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[0][2]: input=-54 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][0]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[1][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][3]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      108       54        0      -54 
  Row 1:       67      -67      -67     -134 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 108 │  54 │   0 │ -54 │
├─────┼─────┼─────┼─────┤
│  67 │ -67 │ -67 │-134 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -61
  Row 1: input_block[1][1] = -45
  Row 2: input_block[2][0] = -78
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 67 (from PE[1][0])
  PE[0][1]: partial_in = -67 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -134 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=67 -> result=189
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-67 -> result=-6
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-134 -> result=-195
  PE[1][0]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[1][1]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][3]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[2][0]: input=-78 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[2][2]: input=-78 * weight=2 = -156, partial_in=0 -> result=-156
  PE[2][3]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      189       -6      -67     -195 
  Row 1:       45      -45      -45      -90 
  Row 2:        0      -78     -156      -78 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 189 │  -6 │ -67 │-195 │
├─────┼─────┼─────┼─────┤
│  45 │ -45 │ -45 │ -90 │
├─────┼─────┼─────┼─────┤
│   0 │ -78 │-156 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -80
  Row 1: input_block[1][2] = -44
  Row 2: input_block[2][1] = -48
  Row 3: input_block[3][0] = -81

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 45 (from PE[1][0])
  PE[0][1]: partial_in = -45 (from PE[1][1])
  PE[0][2]: partial_in = -45 (from PE[1][2])
  PE[0][3]: partial_in = -90 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -78 (from PE[2][1])
  PE[1][2]: partial_in = -156 (from PE[2][2])
  PE[1][3]: partial_in = -78 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-80 * weight=-2 = 160, partial_in=45 -> result=205
  PE[0][1]: input=-80 * weight=-1 = 80, partial_in=-45 -> result=35
  PE[0][2]: input=-80 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[0][3]: input=-80 * weight=1 = -80, partial_in=-90 -> result=-170
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=-78 -> result=-122
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=-156 -> result=-200
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=-78 -> result=-166
  PE[2][0]: input=-48 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[2][2]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[2][3]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][0]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[3][1]: input=-81 * weight=2 = -162, partial_in=0 -> result=-162
  PE[3][2]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[3][3]: input=-81 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      205       35      -45     -170 
  Row 1:       44     -122     -200     -166 
  Row 2:        0      -48      -96      -48 
  Row 3:      -81     -162      -81        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 205 │  35 │ -45 │-170 │
├─────┼─────┼─────┼─────┤
│  44 │-122 │-200 │-166 │
├─────┼─────┼─────┼─────┤
│   0 │ -48 │ -96 │ -48 │
├─────┼─────┼─────┼─────┤
│ -81 │-162 │ -81 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -60
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = -59

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -122 (from PE[1][1])
  PE[0][2]: partial_in = -200 (from PE[1][2])
  PE[0][3]: partial_in = -166 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -48 (from PE[2][1])
  PE[1][2]: partial_in = -96 (from PE[2][2])
  PE[1][3]: partial_in = -48 (from PE[2][3])
  PE[2][0]: partial_in = -81 (from PE[3][0])
  PE[2][1]: partial_in = -162 (from PE[3][1])
  PE[2][2]: partial_in = -81 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=44 -> result=44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-122 -> result=-122
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-200 -> result=-200
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-166 -> result=-166
  PE[1][0]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[1][1]: input=-60 * weight=1 = -60, partial_in=-48 -> result=-108
  PE[1][2]: input=-60 * weight=1 = -60, partial_in=-96 -> result=-156
  PE[1][3]: input=-60 * weight=2 = -120, partial_in=-48 -> result=-168
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-81 -> result=-81
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-162 -> result=-198
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-81 -> result=-153
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][1]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[3][2]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][3]: input=-59 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       44     -122     -200     -166 
  Row 1:       60     -108     -156     -168 
  Row 2:      -81     -198     -153      -36 
  Row 3:      -59     -118      -59        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │-122 │-200 │-166 │
├─────┼─────┼─────┼─────┤
│  60 │-108 │-156 │-168 │
├─────┼─────┼─────┼─────┤
│ -81 │-198 │-153 │ -36 │
├─────┼─────┼─────┼─────┤
│ -59 │-118 │ -59 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -45
  Row 3: input_block[3][2] = -56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 60 (from PE[1][0])
  PE[0][1]: partial_in = -108 (from PE[1][1])
  PE[0][2]: partial_in = -156 (from PE[1][2])
  PE[0][3]: partial_in = -168 (from PE[1][3])
  PE[1][0]: partial_in = -81 (from PE[2][0])
  PE[1][1]: partial_in = -198 (from PE[2][1])
  PE[1][2]: partial_in = -153 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -59 (from PE[3][0])
  PE[2][1]: partial_in = -118 (from PE[3][1])
  PE[2][2]: partial_in = -59 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=60 -> result=60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-108 -> result=-108
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-156 -> result=-156
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-168 -> result=-168
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-81 -> result=-81
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-198 -> result=-198
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-153 -> result=-153
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=-118 -> result=-163
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=-59 -> result=-149
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][1]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[3][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][3]: input=-56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       60     -108     -156     -168 
  Row 1:      -81     -198     -153      -36 
  Row 2:      -59     -163     -149      -45 
  Row 3:      -56     -112      -56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │-108 │-156 │-168 │
├─────┼─────┼─────┼─────┤
│ -81 │-198 │-153 │ -36 │
├─────┼─────┼─────┼─────┤
│ -59 │-163 │-149 │ -45 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -81 (from PE[1][0])
  PE[0][1]: partial_in = -198 (from PE[1][1])
  PE[0][2]: partial_in = -153 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = -59 (from PE[2][0])
  PE[1][1]: partial_in = -163 (from PE[2][1])
  PE[1][2]: partial_in = -149 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = -56 (from PE[3][0])
  PE[2][1]: partial_in = -112 (from PE[3][1])
  PE[2][2]: partial_in = -56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-81 -> result=-81
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-198 -> result=-198
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-153 -> result=-153
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-59 -> result=-59
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-163 -> result=-163
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-149 -> result=-149
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-112 -> result=-112
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-56 -> result=-56
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -81     -198     -153      -36 
  Row 1:      -59     -163     -149      -45 
  Row 2:      -56     -112      -56        0 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -81 │-198 │-153 │ -36 │
├─────┼─────┼─────┼─────┤
│ -59 │-163 │-149 │ -45 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -81     -198     -153      -36 
Row 1:      -59     -163     -149      -45 
Row 2:      -56     -112      -56        0 
Row 3:      -70     -140      -70        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -81 -> clamp(-81) -> final(47)
  PE[0][1]: -198 -> clamp(-128) -> final(0)
  PE[0][2]: -153 -> clamp(-128) -> final(0)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: -59 -> clamp(-59) -> final(69)
  PE[1][1]: -163 -> clamp(-128) -> final(0)
  PE[1][2]: -149 -> clamp(-128) -> final(0)
  PE[1][3]: -45 -> clamp(-45) -> final(83)
  PE[2][0]: -56 -> clamp(-56) -> final(72)
  PE[2][1]: -112 -> clamp(-112) -> final(16)
  PE[2][2]: -56 -> clamp(-56) -> final(72)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -70 -> clamp(-70) -> final(58)
  PE[3][1]: -140 -> clamp(-128) -> final(0)
  PE[3][2]: -70 -> clamp(-70) -> final(58)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    47      0      0     92 
    69      0      0     83 
    72     16     72    128 
    58      0     58    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -74   -7   23   12 
 -59   -3   20   12 
 -44    0   17   13 
 -35    1   14   13 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -74
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-74 * weight=-2 = 148, partial_in=0 -> result=148
  PE[0][1]: input=-74 * weight=-1 = 74, partial_in=0 -> result=74
  PE[0][2]: input=-74 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      148       74        0      -74 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 148 │  74 │   0 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -7
  Row 1: input_block[1][0] = -59
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=0 -> result=14
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][0]: input=-59 * weight=-1 = 59, partial_in=0 -> result=59
  PE[1][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[1][2]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[1][3]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       14        7        0       -7 
  Row 1:       59      -59      -59     -118 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │   7 │   0 │  -7 │
├─────┼─────┼─────┼─────┤
│  59 │ -59 │ -59 │-118 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 23
  Row 1: input_block[1][1] = -3
  Row 2: input_block[2][0] = -44
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 59 (from PE[1][0])
  PE[0][1]: partial_in = -59 (from PE[1][1])
  PE[0][2]: partial_in = -59 (from PE[1][2])
  PE[0][3]: partial_in = -118 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=23 * weight=-2 = -46, partial_in=59 -> result=13
  PE[0][1]: input=23 * weight=-1 = -23, partial_in=-59 -> result=-82
  PE[0][2]: input=23 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[0][3]: input=23 * weight=1 = 23, partial_in=-118 -> result=-95
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[2][0]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[2][2]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       13      -82      -59      -95 
  Row 1:        3       -3       -3       -6 
  Row 2:        0      -44      -88      -44 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  13 │ -82 │ -59 │ -95 │
├─────┼─────┼─────┼─────┤
│   3 │  -3 │  -3 │  -6 │
├─────┼─────┼─────┼─────┤
│   0 │ -44 │ -88 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 12
  Row 1: input_block[1][2] = 20
  Row 2: input_block[2][1] = 0
  Row 3: input_block[3][0] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -3 (from PE[1][2])
  PE[0][3]: partial_in = -6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -44 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=3 -> result=-21
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=-3 -> result=-15
  PE[0][2]: input=12 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[0][3]: input=12 * weight=1 = 12, partial_in=-6 -> result=6
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=-44 -> result=-24
  PE[1][2]: input=20 * weight=1 = 20, partial_in=-88 -> result=-68
  PE[1][3]: input=20 * weight=2 = 40, partial_in=-44 -> result=-4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -21      -15       -3        6 
  Row 1:      -20      -24      -68       -4 
  Row 2:        0        0        0        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │ -15 │  -3 │   6 │
├─────┼─────┼─────┼─────┤
│ -20 │ -24 │ -68 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 12
  Row 2: input_block[2][2] = 17
  Row 3: input_block[3][1] = 1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = -24 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-24 -> result=-24
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-4 -> result=-4
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][3]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][0]: input=17 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=17 * weight=1 = 17, partial_in=-70 -> result=-53
  PE[2][2]: input=17 * weight=2 = 34, partial_in=-35 -> result=-1
  PE[2][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[3][0]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][1]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[3][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][3]: input=1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -20      -24      -68       -4 
  Row 1:      -12       12       12       24 
  Row 2:      -35      -53       -1       17 
  Row 3:        1        2        1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -24 │ -68 │  -4 │
├─────┼─────┼─────┼─────┤
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│ -35 │ -53 │  -1 │  17 │
├─────┼─────┼─────┼─────┤
│   1 │   2 │   1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 13
  Row 3: input_block[3][2] = 14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -53 (from PE[2][1])
  PE[1][2]: partial_in = -1 (from PE[2][2])
  PE[1][3]: partial_in = 17 (from PE[2][3])
  PE[2][0]: partial_in = 1 (from PE[3][0])
  PE[2][1]: partial_in = 2 (from PE[3][1])
  PE[2][2]: partial_in = 1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=12 -> result=12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-53 -> result=-53
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-1 -> result=-1
  PE[1][3]: input=0 * weight=2 = 0, partial_in=17 -> result=17
  PE[2][0]: input=13 * weight=0 = 0, partial_in=1 -> result=1
  PE[2][1]: input=13 * weight=1 = 13, partial_in=2 -> result=15
  PE[2][2]: input=13 * weight=2 = 26, partial_in=1 -> result=27
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][1]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[3][2]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][3]: input=14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -12       12       12       24 
  Row 1:      -35      -53       -1       17 
  Row 2:        1       15       27       13 
  Row 3:       14       28       14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│ -35 │ -53 │  -1 │  17 │
├─────┼─────┼─────┼─────┤
│   1 │  15 │  27 │  13 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = -53 (from PE[1][1])
  PE[0][2]: partial_in = -1 (from PE[1][2])
  PE[0][3]: partial_in = 17 (from PE[1][3])
  PE[1][0]: partial_in = 1 (from PE[2][0])
  PE[1][1]: partial_in = 15 (from PE[2][1])
  PE[1][2]: partial_in = 27 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 14 (from PE[3][0])
  PE[2][1]: partial_in = 28 (from PE[3][1])
  PE[2][2]: partial_in = 14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-35 -> result=-35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[0][3]: input=0 * weight=1 = 0, partial_in=17 -> result=17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[1][1]: input=0 * weight=1 = 0, partial_in=15 -> result=15
  PE[1][2]: input=0 * weight=1 = 0, partial_in=27 -> result=27
  PE[1][3]: input=0 * weight=2 = 0, partial_in=13 -> result=13
  PE[2][0]: input=0 * weight=0 = 0, partial_in=14 -> result=14
  PE[2][1]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[2][2]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -35      -53       -1       17 
  Row 1:        1       15       27       13 
  Row 2:       14       28       14        0 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -35 │ -53 │  -1 │  17 │
├─────┼─────┼─────┼─────┤
│   1 │  15 │  27 │  13 │
├─────┼─────┼─────┼─────┤
│  14 │  28 │  14 │   0 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -35      -53       -1       17 
Row 1:        1       15       27       13 
Row 2:       14       28       14        0 
Row 3:       13       26       13        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -35 -> clamp(-35) -> final(93)
  PE[0][1]: -53 -> clamp(-53) -> final(75)
  PE[0][2]: -1 -> clamp(-1) -> final(127)
  PE[0][3]: 17 -> clamp(17) -> final(145)
  PE[1][0]: 1 -> clamp(1) -> final(129)
  PE[1][1]: 15 -> clamp(15) -> final(143)
  PE[1][2]: 27 -> clamp(27) -> final(155)
  PE[1][3]: 13 -> clamp(13) -> final(141)
  PE[2][0]: 14 -> clamp(14) -> final(142)
  PE[2][1]: 28 -> clamp(28) -> final(156)
  PE[2][2]: 14 -> clamp(14) -> final(142)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 13 -> clamp(13) -> final(141)
  PE[3][1]: 26 -> clamp(26) -> final(154)
  PE[3][2]: 13 -> clamp(13) -> final(141)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    93     75    127    145 
   129    143    155    141 
   142    156    142    128 
   141    154    141    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  17   25   22   21 
  20   25   18   17 
  23   24   14   14 
  25   23   12   13 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 17
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -34      -17        0       17 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 25
  Row 1: input_block[1][0] = 20
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=25 * weight=-2 = -50, partial_in=0 -> result=-50
  PE[0][1]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[0][2]: input=25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[1][3]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -50      -25        0       25 
  Row 1:      -20       20       20       40 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -50 │ -25 │   0 │  25 │
├─────┼─────┼─────┼─────┤
│ -20 │  20 │  20 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 22
  Row 1: input_block[1][1] = 25
  Row 2: input_block[2][0] = 23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 20 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 40 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=-20 -> result=-64
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=20 -> result=-2
  PE[0][2]: input=22 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=22 * weight=1 = 22, partial_in=40 -> result=62
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][3]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -64       -2       20       62 
  Row 1:      -25       25       25       50 
  Row 2:        0       23       46       23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │  -2 │  20 │  62 │
├─────┼─────┼─────┼─────┤
│ -25 │  25 │  25 │  50 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 21
  Row 1: input_block[1][2] = 18
  Row 2: input_block[2][1] = 24
  Row 3: input_block[3][0] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 25 (from PE[1][1])
  PE[0][2]: partial_in = 25 (from PE[1][2])
  PE[0][3]: partial_in = 50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=21 * weight=-2 = -42, partial_in=-25 -> result=-67
  PE[0][1]: input=21 * weight=-1 = -21, partial_in=25 -> result=4
  PE[0][2]: input=21 * weight=0 = 0, partial_in=25 -> result=25
  PE[0][3]: input=21 * weight=1 = 21, partial_in=50 -> result=71
  PE[1][0]: input=18 * weight=-1 = -18, partial_in=0 -> result=-18
  PE[1][1]: input=18 * weight=1 = 18, partial_in=23 -> result=41
  PE[1][2]: input=18 * weight=1 = 18, partial_in=46 -> result=64
  PE[1][3]: input=18 * weight=2 = 36, partial_in=23 -> result=59
  PE[2][0]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[2][2]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -67        4       25       71 
  Row 1:      -18       41       64       59 
  Row 2:        0       24       48       24 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -67 │   4 │  25 │  71 │
├─────┼─────┼─────┼─────┤
│ -18 │  41 │  64 │  59 │
├─────┼─────┼─────┼─────┤
│   0 │  24 │  48 │  24 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 17
  Row 2: input_block[2][2] = 14
  Row 3: input_block[3][1] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -18 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 64 (from PE[1][2])
  PE[0][3]: partial_in = 59 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 24 (from PE[2][1])
  PE[1][2]: partial_in = 48 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = 25 (from PE[3][0])
  PE[2][1]: partial_in = 50 (from PE[3][1])
  PE[2][2]: partial_in = 25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-18 -> result=-18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=41 -> result=41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=64 -> result=64
  PE[0][3]: input=0 * weight=1 = 0, partial_in=59 -> result=59
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=24 -> result=41
  PE[1][2]: input=17 * weight=1 = 17, partial_in=48 -> result=65
  PE[1][3]: input=17 * weight=2 = 34, partial_in=24 -> result=58
  PE[2][0]: input=14 * weight=0 = 0, partial_in=25 -> result=25
  PE[2][1]: input=14 * weight=1 = 14, partial_in=50 -> result=64
  PE[2][2]: input=14 * weight=2 = 28, partial_in=25 -> result=53
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -18       41       64       59 
  Row 1:      -17       41       65       58 
  Row 2:       25       64       53       14 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  41 │  64 │  59 │
├─────┼─────┼─────┼─────┤
│ -17 │  41 │  65 │  58 │
├─────┼─────┼─────┼─────┤
│  25 │  64 │  53 │  14 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 14
  Row 3: input_block[3][2] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = 41 (from PE[1][1])
  PE[0][2]: partial_in = 65 (from PE[1][2])
  PE[0][3]: partial_in = 58 (from PE[1][3])
  PE[1][0]: partial_in = 25 (from PE[2][0])
  PE[1][1]: partial_in = 64 (from PE[2][1])
  PE[1][2]: partial_in = 53 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = 23 (from PE[3][0])
  PE[2][1]: partial_in = 46 (from PE[3][1])
  PE[2][2]: partial_in = 23 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=41 -> result=41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=65 -> result=65
  PE[0][3]: input=0 * weight=1 = 0, partial_in=58 -> result=58
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=25 -> result=25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=64 -> result=64
  PE[1][2]: input=0 * weight=1 = 0, partial_in=53 -> result=53
  PE[1][3]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][0]: input=14 * weight=0 = 0, partial_in=23 -> result=23
  PE[2][1]: input=14 * weight=1 = 14, partial_in=46 -> result=60
  PE[2][2]: input=14 * weight=2 = 28, partial_in=23 -> result=51
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -17       41       65       58 
  Row 1:       25       64       53       14 
  Row 2:       23       60       51       14 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  41 │  65 │  58 │
├─────┼─────┼─────┼─────┤
│  25 │  64 │  53 │  14 │
├─────┼─────┼─────┼─────┤
│  23 │  60 │  51 │  14 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = 64 (from PE[1][1])
  PE[0][2]: partial_in = 53 (from PE[1][2])
  PE[0][3]: partial_in = 14 (from PE[1][3])
  PE[1][0]: partial_in = 23 (from PE[2][0])
  PE[1][1]: partial_in = 60 (from PE[2][1])
  PE[1][2]: partial_in = 51 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=25 -> result=25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=64 -> result=64
  PE[0][2]: input=0 * weight=0 = 0, partial_in=53 -> result=53
  PE[0][3]: input=0 * weight=1 = 0, partial_in=14 -> result=14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=23 -> result=23
  PE[1][1]: input=0 * weight=1 = 0, partial_in=60 -> result=60
  PE[1][2]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][3]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][0]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[2][2]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][1]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[3][2]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][3]: input=13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       25       64       53       14 
  Row 1:       23       60       51       14 
  Row 2:       12       24       12        0 
  Row 3:       13       26       13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │  64 │  53 │  14 │
├─────┼─────┼─────┼─────┤
│  23 │  60 │  51 │  14 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
├─────┼─────┼─────┼─────┤
│  13 │  26 │  13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       25       64       53       14 
Row 1:       23       60       51       14 
Row 2:       12       24       12        0 
Row 3:       13       26       13        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 25 -> clamp(25) -> final(153)
  PE[0][1]: 64 -> clamp(64) -> final(192)
  PE[0][2]: 53 -> clamp(53) -> final(181)
  PE[0][3]: 14 -> clamp(14) -> final(142)
  PE[1][0]: 23 -> clamp(23) -> final(151)
  PE[1][1]: 60 -> clamp(60) -> final(188)
  PE[1][2]: 51 -> clamp(51) -> final(179)
  PE[1][3]: 14 -> clamp(14) -> final(142)
  PE[2][0]: 12 -> clamp(12) -> final(140)
  PE[2][1]: 24 -> clamp(24) -> final(152)
  PE[2][2]: 12 -> clamp(12) -> final(140)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 13 -> clamp(13) -> final(141)
  PE[3][1]: 26 -> clamp(26) -> final(154)
  PE[3][2]: 13 -> clamp(13) -> final(141)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   153    192    181    142 
   151    188    179    142 
   140    152    140    128 
   141    154    141    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  13  -12  -49  -89 
  12  -11  -49  -95 
  14   -7  -50 -105 
  10  -10  -57 -118 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 13
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=0 -> result=-26
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=0 -> result=-13
  PE[0][2]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -26      -13        0       13 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │ -13 │   0 │  13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -12
  Row 1: input_block[1][0] = 12
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-12 * weight=-2 = 24, partial_in=0 -> result=24
  PE[0][1]: input=-12 * weight=-1 = 12, partial_in=0 -> result=12
  PE[0][2]: input=-12 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][3]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       24       12        0      -12 
  Row 1:      -12       12       12       24 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │  12 │   0 │ -12 │
├─────┼─────┼─────┼─────┤
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -49
  Row 1: input_block[1][1] = -11
  Row 2: input_block[2][0] = 14
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-49 * weight=-2 = 98, partial_in=-12 -> result=86
  PE[0][1]: input=-49 * weight=-1 = 49, partial_in=12 -> result=61
  PE[0][2]: input=-49 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=-49 * weight=1 = -49, partial_in=24 -> result=-25
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=14 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[2][2]: input=14 * weight=2 = 28, partial_in=0 -> result=28
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       86       61       12      -25 
  Row 1:       11      -11      -11      -22 
  Row 2:        0       14       28       14 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  61 │  12 │ -25 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │  14 │  28 │  14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -89
  Row 1: input_block[1][2] = -49
  Row 2: input_block[2][1] = -7
  Row 3: input_block[3][0] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 14 (from PE[2][1])
  PE[1][2]: partial_in = 28 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-89 * weight=-2 = 178, partial_in=11 -> result=189
  PE[0][1]: input=-89 * weight=-1 = 89, partial_in=-11 -> result=78
  PE[0][2]: input=-89 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=-89 * weight=1 = -89, partial_in=-22 -> result=-111
  PE[1][0]: input=-49 * weight=-1 = 49, partial_in=0 -> result=49
  PE[1][1]: input=-49 * weight=1 = -49, partial_in=14 -> result=-35
  PE[1][2]: input=-49 * weight=1 = -49, partial_in=28 -> result=-21
  PE[1][3]: input=-49 * weight=2 = -98, partial_in=14 -> result=-84
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      189       78      -11     -111 
  Row 1:       49      -35      -21      -84 
  Row 2:        0       -7      -14       -7 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 189 │  78 │ -11 │-111 │
├─────┼─────┼─────┼─────┤
│  49 │ -35 │ -21 │ -84 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -95
  Row 2: input_block[2][2] = -50
  Row 3: input_block[3][1] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 49 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -84 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=49 -> result=49
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=-7 -> result=-102
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=-14 -> result=-109
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=-7 -> result=-197
  PE[2][0]: input=-50 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=-50 * weight=1 = -50, partial_in=20 -> result=-30
  PE[2][2]: input=-50 * weight=2 = -100, partial_in=10 -> result=-90
  PE[2][3]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       49      -35      -21      -84 
  Row 1:       95     -102     -109     -197 
  Row 2:       10      -30      -90      -50 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  49 │ -35 │ -21 │ -84 │
├─────┼─────┼─────┼─────┤
│  95 │-102 │-109 │-197 │
├─────┼─────┼─────┼─────┤
│  10 │ -30 │ -90 │ -50 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -105
  Row 3: input_block[3][2] = -57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -102 (from PE[1][1])
  PE[0][2]: partial_in = -109 (from PE[1][2])
  PE[0][3]: partial_in = -197 (from PE[1][3])
  PE[1][0]: partial_in = 10 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -90 (from PE[2][2])
  PE[1][3]: partial_in = -50 (from PE[2][3])
  PE[2][0]: partial_in = -10 (from PE[3][0])
  PE[2][1]: partial_in = -20 (from PE[3][1])
  PE[2][2]: partial_in = -10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=95 -> result=95
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-102 -> result=-102
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-109 -> result=-109
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-197 -> result=-197
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=10 -> result=10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-50 -> result=-50
  PE[2][0]: input=-105 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[2][1]: input=-105 * weight=1 = -105, partial_in=-20 -> result=-125
  PE[2][2]: input=-105 * weight=2 = -210, partial_in=-10 -> result=-220
  PE[2][3]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][0]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][1]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[3][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][3]: input=-57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       95     -102     -109     -197 
  Row 1:       10      -30      -90      -50 
  Row 2:      -10     -125     -220     -105 
  Row 3:      -57     -114      -57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  95 │-102 │-109 │-197 │
├─────┼─────┼─────┼─────┤
│  10 │ -30 │ -90 │ -50 │
├─────┼─────┼─────┼─────┤
│ -10 │-125 │-220 │-105 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -118

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -90 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = -10 (from PE[2][0])
  PE[1][1]: partial_in = -125 (from PE[2][1])
  PE[1][2]: partial_in = -220 (from PE[2][2])
  PE[1][3]: partial_in = -105 (from PE[2][3])
  PE[2][0]: partial_in = -57 (from PE[3][0])
  PE[2][1]: partial_in = -114 (from PE[3][1])
  PE[2][2]: partial_in = -57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-50 -> result=-50
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-10 -> result=-10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-125 -> result=-125
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-220 -> result=-220
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-105 -> result=-105
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-114 -> result=-114
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-57 -> result=-57
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-118 * weight=1 = -118, partial_in=0 -> result=-118
  PE[3][1]: input=-118 * weight=2 = -236, partial_in=0 -> result=-236
  PE[3][2]: input=-118 * weight=1 = -118, partial_in=0 -> result=-118
  PE[3][3]: input=-118 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       10      -30      -90      -50 
  Row 1:      -10     -125     -220     -105 
  Row 2:      -57     -114      -57        0 
  Row 3:     -118     -236     -118        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │ -30 │ -90 │ -50 │
├─────┼─────┼─────┼─────┤
│ -10 │-125 │-220 │-105 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
├─────┼─────┼─────┼─────┤
│-118 │-236 │-118 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       10      -30      -90      -50 
Row 1:      -10     -125     -220     -105 
Row 2:      -57     -114      -57        0 
Row 3:     -118     -236     -118        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 10 -> clamp(10) -> final(138)
  PE[0][1]: -30 -> clamp(-30) -> final(98)
  PE[0][2]: -90 -> clamp(-90) -> final(38)
  PE[0][3]: -50 -> clamp(-50) -> final(78)
  PE[1][0]: -10 -> clamp(-10) -> final(118)
  PE[1][1]: -125 -> clamp(-125) -> final(3)
  PE[1][2]: -220 -> clamp(-128) -> final(0)
  PE[1][3]: -105 -> clamp(-105) -> final(23)
  PE[2][0]: -57 -> clamp(-57) -> final(71)
  PE[2][1]: -114 -> clamp(-114) -> final(14)
  PE[2][2]: -57 -> clamp(-57) -> final(71)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -118 -> clamp(-118) -> final(10)
  PE[3][1]: -236 -> clamp(-128) -> final(0)
  PE[3][2]: -118 -> clamp(-118) -> final(10)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   138     98     38     78 
   118      3      0     23 
    71     14     71    128 
    10      0     10    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -39  -16  -21  -13 
 -48  -27  -34  -30 
 -62  -35  -37  -33 
 -76  -42  -37  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=0 -> result=78
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       78       39        0      -39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  39 │   0 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -16
  Row 1: input_block[1][0] = -48
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=0 -> result=32
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][0]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[1][1]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][3]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       32       16        0      -16 
  Row 1:       48      -48      -48      -96 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  16 │   0 │ -16 │
├─────┼─────┼─────┼─────┤
│  48 │ -48 │ -48 │ -96 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -21
  Row 1: input_block[1][1] = -27
  Row 2: input_block[2][0] = -62
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 48 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -48 (from PE[1][2])
  PE[0][3]: partial_in = -96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=48 -> result=90
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=-48 -> result=-27
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=-96 -> result=-117
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[2][2]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       90      -27      -48     -117 
  Row 1:       27      -27      -27      -54 
  Row 2:        0      -62     -124      -62 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │ -27 │ -48 │-117 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │ -62 │-124 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -13
  Row 1: input_block[1][2] = -34
  Row 2: input_block[2][1] = -35
  Row 3: input_block[3][0] = -76

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -62 (from PE[2][1])
  PE[1][2]: partial_in = -124 (from PE[2][2])
  PE[1][3]: partial_in = -62 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-13 * weight=-2 = 26, partial_in=27 -> result=53
  PE[0][1]: input=-13 * weight=-1 = 13, partial_in=-27 -> result=-14
  PE[0][2]: input=-13 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-13 * weight=1 = -13, partial_in=-54 -> result=-67
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=-62 -> result=-96
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=-124 -> result=-158
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=-62 -> result=-130
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[3][1]: input=-76 * weight=2 = -152, partial_in=0 -> result=-152
  PE[3][2]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[3][3]: input=-76 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       53      -14      -27      -67 
  Row 1:       34      -96     -158     -130 
  Row 2:        0      -35      -70      -35 
  Row 3:      -76     -152      -76        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  53 │ -14 │ -27 │ -67 │
├─────┼─────┼─────┼─────┤
│  34 │ -96 │-158 │-130 │
├─────┼─────┼─────┼─────┤
│   0 │ -35 │ -70 │ -35 │
├─────┼─────┼─────┼─────┤
│ -76 │-152 │ -76 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -30
  Row 2: input_block[2][2] = -37
  Row 3: input_block[3][1] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -96 (from PE[1][1])
  PE[0][2]: partial_in = -158 (from PE[1][2])
  PE[0][3]: partial_in = -130 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -35 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -76 (from PE[3][0])
  PE[2][1]: partial_in = -152 (from PE[3][1])
  PE[2][2]: partial_in = -76 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=34 -> result=34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-96 -> result=-96
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-158 -> result=-158
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-130 -> result=-130
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=-35 -> result=-65
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=-70 -> result=-100
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=-35 -> result=-95
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-76 -> result=-76
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-152 -> result=-189
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-76 -> result=-150
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       34      -96     -158     -130 
  Row 1:       30      -65     -100      -95 
  Row 2:      -76     -189     -150      -37 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  34 │ -96 │-158 │-130 │
├─────┼─────┼─────┼─────┤
│  30 │ -65 │-100 │ -95 │
├─────┼─────┼─────┼─────┤
│ -76 │-189 │-150 │ -37 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -33
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -100 (from PE[1][2])
  PE[0][3]: partial_in = -95 (from PE[1][3])
  PE[1][0]: partial_in = -76 (from PE[2][0])
  PE[1][1]: partial_in = -189 (from PE[2][1])
  PE[1][2]: partial_in = -150 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -42 (from PE[3][0])
  PE[2][1]: partial_in = -84 (from PE[3][1])
  PE[2][2]: partial_in = -42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=30 -> result=30
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-100 -> result=-100
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-95 -> result=-95
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-76 -> result=-76
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-189 -> result=-189
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-150 -> result=-150
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=-84 -> result=-117
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=-42 -> result=-108
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       30      -65     -100      -95 
  Row 1:      -76     -189     -150      -37 
  Row 2:      -42     -117     -108      -33 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │ -65 │-100 │ -95 │
├─────┼─────┼─────┼─────┤
│ -76 │-189 │-150 │ -37 │
├─────┼─────┼─────┼─────┤
│ -42 │-117 │-108 │ -33 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -76 (from PE[1][0])
  PE[0][1]: partial_in = -189 (from PE[1][1])
  PE[0][2]: partial_in = -150 (from PE[1][2])
  PE[0][3]: partial_in = -37 (from PE[1][3])
  PE[1][0]: partial_in = -42 (from PE[2][0])
  PE[1][1]: partial_in = -117 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-76 -> result=-76
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-189 -> result=-189
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-150 -> result=-150
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-42 -> result=-42
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-117 -> result=-117
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -76     -189     -150      -37 
  Row 1:      -42     -117     -108      -33 
  Row 2:      -37      -74      -37        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -76 │-189 │-150 │ -37 │
├─────┼─────┼─────┼─────┤
│ -42 │-117 │-108 │ -33 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -76     -189     -150      -37 
Row 1:      -42     -117     -108      -33 
Row 2:      -37      -74      -37        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -76 -> clamp(-76) -> final(52)
  PE[0][1]: -189 -> clamp(-128) -> final(0)
  PE[0][2]: -150 -> clamp(-128) -> final(0)
  PE[0][3]: -37 -> clamp(-37) -> final(91)
  PE[1][0]: -42 -> clamp(-42) -> final(86)
  PE[1][1]: -117 -> clamp(-117) -> final(11)
  PE[1][2]: -108 -> clamp(-108) -> final(20)
  PE[1][3]: -33 -> clamp(-33) -> final(95)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    52      0      0     91 
    86     11     20     95 
    91     54     91    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -9  -13  -16  -14 
 -21  -25  -27  -24 
 -32  -31  -31  -29 
 -35  -31  -29  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -9
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-9 * weight=-2 = 18, partial_in=0 -> result=18
  PE[0][1]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[0][2]: input=-9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       18        9        0       -9 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │   9 │   0 │  -9 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -13
  Row 1: input_block[1][0] = -21
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-13 * weight=-2 = 26, partial_in=0 -> result=26
  PE[0][1]: input=-13 * weight=-1 = 13, partial_in=0 -> result=13
  PE[0][2]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       26       13        0      -13 
  Row 1:       21      -21      -21      -42 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  26 │  13 │   0 │ -13 │
├─────┼─────┼─────┼─────┤
│  21 │ -21 │ -21 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -16
  Row 1: input_block[1][1] = -25
  Row 2: input_block[2][0] = -32
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=21 -> result=53
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=-21 -> result=-5
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=-42 -> result=-58
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       53       -5      -21      -58 
  Row 1:       25      -25      -25      -50 
  Row 2:        0      -32      -64      -32 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  53 │  -5 │ -21 │ -58 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │ -32 │ -64 │ -32 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -14
  Row 1: input_block[1][2] = -27
  Row 2: input_block[2][1] = -31
  Row 3: input_block[3][0] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -32 (from PE[2][1])
  PE[1][2]: partial_in = -64 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=25 -> result=53
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=-25 -> result=-11
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=-50 -> result=-64
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=-32 -> result=-59
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=-64 -> result=-91
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=-32 -> result=-86
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       53      -11      -25      -64 
  Row 1:       27      -59      -91      -86 
  Row 2:        0      -31      -62      -31 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  53 │ -11 │ -25 │ -64 │
├─────┼─────┼─────┼─────┤
│  27 │ -59 │ -91 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -24
  Row 2: input_block[2][2] = -31
  Row 3: input_block[3][1] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -59 (from PE[1][1])
  PE[0][2]: partial_in = -91 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-59 -> result=-59
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-86 -> result=-86
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=-31 -> result=-55
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=-62 -> result=-86
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=-31 -> result=-79
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=-70 -> result=-101
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=-35 -> result=-97
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       27      -59      -91      -86 
  Row 1:       24      -55      -86      -79 
  Row 2:      -35     -101      -97      -31 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │ -59 │ -91 │ -86 │
├─────┼─────┼─────┼─────┤
│  24 │ -55 │ -86 │ -79 │
├─────┼─────┼─────┼─────┤
│ -35 │-101 │ -97 │ -31 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -29
  Row 3: input_block[3][2] = -29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -86 (from PE[1][2])
  PE[0][3]: partial_in = -79 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -101 (from PE[2][1])
  PE[1][2]: partial_in = -97 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=24 -> result=24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-86 -> result=-86
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-79 -> result=-79
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-97 -> result=-97
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=-62 -> result=-91
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=-31 -> result=-89
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][1]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[3][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][3]: input=-29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       24      -55      -86      -79 
  Row 1:      -35     -101      -97      -31 
  Row 2:      -31      -91      -89      -29 
  Row 3:      -29      -58      -29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │ -55 │ -86 │ -79 │
├─────┼─────┼─────┼─────┤
│ -35 │-101 │ -97 │ -31 │
├─────┼─────┼─────┼─────┤
│ -31 │ -91 │ -89 │ -29 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = -101 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -31 (from PE[1][3])
  PE[1][0]: partial_in = -31 (from PE[2][0])
  PE[1][1]: partial_in = -91 (from PE[2][1])
  PE[1][2]: partial_in = -89 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = -29 (from PE[3][0])
  PE[2][1]: partial_in = -58 (from PE[3][1])
  PE[2][2]: partial_in = -29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-35 -> result=-35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-101 -> result=-101
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-31 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-31 -> result=-31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-29 -> result=-29
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-29 -> result=-29
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -35     -101      -97      -31 
  Row 1:      -31      -91      -89      -29 
  Row 2:      -29      -58      -29        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -35 │-101 │ -97 │ -31 │
├─────┼─────┼─────┼─────┤
│ -31 │ -91 │ -89 │ -29 │
├─────┼─────┼─────┼─────┤
│ -29 │ -58 │ -29 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -35     -101      -97      -31 
Row 1:      -31      -91      -89      -29 
Row 2:      -29      -58      -29        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -35 -> clamp(-35) -> final(93)
  PE[0][1]: -101 -> clamp(-101) -> final(27)
  PE[0][2]: -97 -> clamp(-97) -> final(31)
  PE[0][3]: -31 -> clamp(-31) -> final(97)
  PE[1][0]: -31 -> clamp(-31) -> final(97)
  PE[1][1]: -91 -> clamp(-91) -> final(37)
  PE[1][2]: -89 -> clamp(-89) -> final(39)
  PE[1][3]: -29 -> clamp(-29) -> final(99)
  PE[2][0]: -29 -> clamp(-29) -> final(99)
  PE[2][1]: -58 -> clamp(-58) -> final(70)
  PE[2][2]: -29 -> clamp(-29) -> final(99)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    93     27     31     97 
    97     37     39     99 
    99     70     99    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -11   -6    2    9 
 -17  -11   -6   -5 
 -24  -16   -9   -5 
 -28  -20   -9   -2 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -11
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=0 -> result=22
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       22       11        0      -11 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  11 │   0 │ -11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -6
  Row 1: input_block[1][0] = -17
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-6 * weight=-2 = 12, partial_in=0 -> result=12
  PE[0][1]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[0][2]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][0]: input=-17 * weight=-1 = 17, partial_in=0 -> result=17
  PE[1][1]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[1][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[1][3]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       12        6        0       -6 
  Row 1:       17      -17      -17      -34 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │   6 │   0 │  -6 │
├─────┼─────┼─────┼─────┤
│  17 │ -17 │ -17 │ -34 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 2
  Row 1: input_block[1][1] = -11
  Row 2: input_block[2][0] = -24
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 17 (from PE[1][0])
  PE[0][1]: partial_in = -17 (from PE[1][1])
  PE[0][2]: partial_in = -17 (from PE[1][2])
  PE[0][3]: partial_in = -34 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=2 * weight=-2 = -4, partial_in=17 -> result=13
  PE[0][1]: input=2 * weight=-1 = -2, partial_in=-17 -> result=-19
  PE[0][2]: input=2 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[0][3]: input=2 * weight=1 = 2, partial_in=-34 -> result=-32
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       13      -19      -17      -32 
  Row 1:       11      -11      -11      -22 
  Row 2:        0      -24      -48      -24 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  13 │ -19 │ -17 │ -32 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 9
  Row 1: input_block[1][2] = -6
  Row 2: input_block[2][1] = -16
  Row 3: input_block[3][0] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=11 -> result=-7
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=-11 -> result=-20
  PE[0][2]: input=9 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=9 * weight=1 = 9, partial_in=-22 -> result=-13
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=-24 -> result=-30
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=-48 -> result=-54
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=-24 -> result=-36
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       -7      -20      -11      -13 
  Row 1:        6      -30      -54      -36 
  Row 2:        0      -16      -32      -16 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -20 │ -11 │ -13 │
├─────┼─────┼─────┼─────┤
│   6 │ -30 │ -54 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │ -16 │ -32 │ -16 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -5
  Row 2: input_block[2][2] = -9
  Row 3: input_block[3][1] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -32 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=6 -> result=6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[1][1]: input=-5 * weight=1 = -5, partial_in=-16 -> result=-21
  PE[1][2]: input=-5 * weight=1 = -5, partial_in=-32 -> result=-37
  PE[1][3]: input=-5 * weight=2 = -10, partial_in=-16 -> result=-26
  PE[2][0]: input=-9 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-9 * weight=1 = -9, partial_in=-56 -> result=-65
  PE[2][2]: input=-9 * weight=2 = -18, partial_in=-28 -> result=-46
  PE[2][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:        6      -30      -54      -36 
  Row 1:        5      -21      -37      -26 
  Row 2:      -28      -65      -46       -9 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │ -30 │ -54 │ -36 │
├─────┼─────┼─────┼─────┤
│   5 │ -21 │ -37 │ -26 │
├─────┼─────┼─────┼─────┤
│ -28 │ -65 │ -46 │  -9 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -5
  Row 3: input_block[3][2] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -26 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -65 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -9 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=5 -> result=5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-21 -> result=-21
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-26 -> result=-26
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-65 -> result=-65
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-9 -> result=-9
  PE[2][0]: input=-5 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=-5 * weight=1 = -5, partial_in=-40 -> result=-45
  PE[2][2]: input=-5 * weight=2 = -10, partial_in=-20 -> result=-30
  PE[2][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        5      -21      -37      -26 
  Row 1:      -28      -65      -46       -9 
  Row 2:      -20      -45      -30       -5 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   5 │ -21 │ -37 │ -26 │
├─────┼─────┼─────┼─────┤
│ -28 │ -65 │ -46 │  -9 │
├─────┼─────┼─────┼─────┤
│ -20 │ -45 │ -30 │  -5 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -46 (from PE[1][2])
  PE[0][3]: partial_in = -9 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -45 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -5 (from PE[2][3])
  PE[2][0]: partial_in = -9 (from PE[3][0])
  PE[2][1]: partial_in = -18 (from PE[3][1])
  PE[2][2]: partial_in = -9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-28 -> result=-28
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-46 -> result=-46
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-9 -> result=-9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-45 -> result=-45
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-5 -> result=-5
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-9 -> result=-9
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][1]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[3][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][3]: input=-2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -28      -65      -46       -9 
  Row 1:      -20      -45      -30       -5 
  Row 2:       -9      -18       -9        0 
  Row 3:       -2       -4       -2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -65 │ -46 │  -9 │
├─────┼─────┼─────┼─────┤
│ -20 │ -45 │ -30 │  -5 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
├─────┼─────┼─────┼─────┤
│  -2 │  -4 │  -2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -28      -65      -46       -9 
Row 1:      -20      -45      -30       -5 
Row 2:       -9      -18       -9        0 
Row 3:       -2       -4       -2        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -28 -> clamp(-28) -> final(100)
  PE[0][1]: -65 -> clamp(-65) -> final(63)
  PE[0][2]: -46 -> clamp(-46) -> final(82)
  PE[0][3]: -9 -> clamp(-9) -> final(119)
  PE[1][0]: -20 -> clamp(-20) -> final(108)
  PE[1][1]: -45 -> clamp(-45) -> final(83)
  PE[1][2]: -30 -> clamp(-30) -> final(98)
  PE[1][3]: -5 -> clamp(-5) -> final(123)
  PE[2][0]: -9 -> clamp(-9) -> final(119)
  PE[2][1]: -18 -> clamp(-18) -> final(110)
  PE[2][2]: -9 -> clamp(-9) -> final(119)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -2 -> clamp(-2) -> final(126)
  PE[3][1]: -4 -> clamp(-4) -> final(124)
  PE[3][2]: -2 -> clamp(-2) -> final(126)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   100     63     82    119 
   108     83     98    123 
   119    110    119    128 
   126    124    126    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   4    4  -28  -43 
  -2   -7  -32  -41 
  -2  -19  -34  -36 
  -7  -27  -32  -25 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 4
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=0 -> result=-8
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[0][2]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -8       -4        0        4 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  -4 │   0 │   4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 4
  Row 1: input_block[1][0] = -2
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=4 * weight=-2 = -8, partial_in=0 -> result=-8
  PE[0][1]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[0][2]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[1][0]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[1][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][2]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][3]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       -8       -4        0        4 
  Row 1:        2       -2       -2       -4 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │  -4 │   0 │   4 │
├─────┼─────┼─────┼─────┤
│   2 │  -2 │  -2 │  -4 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -28
  Row 1: input_block[1][1] = -7
  Row 2: input_block[2][0] = -2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 2 (from PE[1][0])
  PE[0][1]: partial_in = -2 (from PE[1][1])
  PE[0][2]: partial_in = -2 (from PE[1][2])
  PE[0][3]: partial_in = -4 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=2 -> result=58
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=-2 -> result=26
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=-2 -> result=-2
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=-4 -> result=-32
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       58       26       -2      -32 
  Row 1:        7       -7       -7      -14 
  Row 2:        0       -2       -4       -2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │  26 │  -2 │ -32 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -43
  Row 1: input_block[1][2] = -32
  Row 2: input_block[2][1] = -19
  Row 3: input_block[3][0] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=7 -> result=93
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=-7 -> result=36
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=-14 -> result=-57
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-2 -> result=-34
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-4 -> result=-36
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-2 -> result=-66
  PE[2][0]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[2][2]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       93       36       -7      -57 
  Row 1:       32      -34      -36      -66 
  Row 2:        0      -19      -38      -19 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  93 │  36 │  -7 │ -57 │
├─────┼─────┼─────┼─────┤
│  32 │ -34 │ -36 │ -66 │
├─────┼─────┼─────┼─────┤
│   0 │ -19 │ -38 │ -19 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -41
  Row 2: input_block[2][2] = -34
  Row 3: input_block[3][1] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -34 (from PE[1][1])
  PE[0][2]: partial_in = -36 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -19 (from PE[2][1])
  PE[1][2]: partial_in = -38 (from PE[2][2])
  PE[1][3]: partial_in = -19 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-19 -> result=-60
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-38 -> result=-79
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-19 -> result=-101
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=-14 -> result=-48
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=-7 -> result=-75
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       32      -34      -36      -66 
  Row 1:       41      -60      -79     -101 
  Row 2:       -7      -48      -75      -34 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -34 │ -36 │ -66 │
├─────┼─────┼─────┼─────┤
│  41 │ -60 │ -79 │-101 │
├─────┼─────┼─────┼─────┤
│  -7 │ -48 │ -75 │ -34 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -36
  Row 3: input_block[3][2] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -79 (from PE[1][2])
  PE[0][3]: partial_in = -101 (from PE[1][3])
  PE[1][0]: partial_in = -7 (from PE[2][0])
  PE[1][1]: partial_in = -48 (from PE[2][1])
  PE[1][2]: partial_in = -75 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-79 -> result=-79
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-48 -> result=-48
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-34 -> result=-34
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-54 -> result=-90
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-27 -> result=-99
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       41      -60      -79     -101 
  Row 1:       -7      -48      -75      -34 
  Row 2:      -27      -90      -99      -36 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │ -60 │ -79 │-101 │
├─────┼─────┼─────┼─────┤
│  -7 │ -48 │ -75 │ -34 │
├─────┼─────┼─────┼─────┤
│ -27 │ -90 │ -99 │ -36 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -34 (from PE[1][3])
  PE[1][0]: partial_in = -27 (from PE[2][0])
  PE[1][1]: partial_in = -90 (from PE[2][1])
  PE[1][2]: partial_in = -99 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-27 -> result=-27
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-99 -> result=-99
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -7      -48      -75      -34 
  Row 1:      -27      -90      -99      -36 
  Row 2:      -32      -64      -32        0 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -48 │ -75 │ -34 │
├─────┼─────┼─────┼─────┤
│ -27 │ -90 │ -99 │ -36 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -7      -48      -75      -34 
Row 1:      -27      -90      -99      -36 
Row 2:      -32      -64      -32        0 
Row 3:      -25      -50      -25        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -7 -> clamp(-7) -> final(121)
  PE[0][1]: -48 -> clamp(-48) -> final(80)
  PE[0][2]: -75 -> clamp(-75) -> final(53)
  PE[0][3]: -34 -> clamp(-34) -> final(94)
  PE[1][0]: -27 -> clamp(-27) -> final(101)
  PE[1][1]: -90 -> clamp(-90) -> final(38)
  PE[1][2]: -99 -> clamp(-99) -> final(29)
  PE[1][3]: -36 -> clamp(-36) -> final(92)
  PE[2][0]: -32 -> clamp(-32) -> final(96)
  PE[2][1]: -64 -> clamp(-64) -> final(64)
  PE[2][2]: -32 -> clamp(-32) -> final(96)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -25 -> clamp(-25) -> final(103)
  PE[3][1]: -50 -> clamp(-50) -> final(78)
  PE[3][2]: -25 -> clamp(-25) -> final(103)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   121     80     53     94 
   101     38     29     92 
    96     64     96    128 
   103     78    103    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -20  -15  -22   -7 
 -25  -18  -18   -5 
 -30  -24  -16   -6 
 -26  -26  -18  -14 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -20
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=0 -> result=40
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       40       20        0      -20 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  20 │   0 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -15
  Row 1: input_block[1][0] = -25
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=0 -> result=30
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       30       15        0      -15 
  Row 1:       25      -25      -25      -50 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │  15 │   0 │ -15 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -22
  Row 1: input_block[1][1] = -18
  Row 2: input_block[2][0] = -30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=25 -> result=69
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=-25 -> result=-3
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=-50 -> result=-72
  PE[1][0]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[1][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][2]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][3]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       69       -3      -25      -72 
  Row 1:       18      -18      -18      -36 
  Row 2:        0      -30      -60      -30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  69 │  -3 │ -25 │ -72 │
├─────┼─────┼─────┼─────┤
│  18 │ -18 │ -18 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │ -30 │ -60 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -7
  Row 1: input_block[1][2] = -18
  Row 2: input_block[2][1] = -24
  Row 3: input_block[3][0] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -18 (from PE[1][1])
  PE[0][2]: partial_in = -18 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -60 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=18 -> result=32
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=-18 -> result=-11
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=-18 -> result=-18
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=-36 -> result=-43
  PE[1][0]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[1][1]: input=-18 * weight=1 = -18, partial_in=-30 -> result=-48
  PE[1][2]: input=-18 * weight=1 = -18, partial_in=-60 -> result=-78
  PE[1][3]: input=-18 * weight=2 = -36, partial_in=-30 -> result=-66
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       32      -11      -18      -43 
  Row 1:       18      -48      -78      -66 
  Row 2:        0      -24      -48      -24 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -11 │ -18 │ -43 │
├─────┼─────┼─────┼─────┤
│  18 │ -48 │ -78 │ -66 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -5
  Row 2: input_block[2][2] = -16
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -78 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=18 -> result=18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-78 -> result=-78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[1][1]: input=-5 * weight=1 = -5, partial_in=-24 -> result=-29
  PE[1][2]: input=-5 * weight=1 = -5, partial_in=-48 -> result=-53
  PE[1][3]: input=-5 * weight=2 = -10, partial_in=-24 -> result=-34
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=-52 -> result=-68
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=-26 -> result=-58
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       18      -48      -78      -66 
  Row 1:        5      -29      -53      -34 
  Row 2:      -26      -68      -58      -16 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │ -48 │ -78 │ -66 │
├─────┼─────┼─────┼─────┤
│   5 │ -29 │ -53 │ -34 │
├─────┼─────┼─────┼─────┤
│ -26 │ -68 │ -58 │ -16 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -6
  Row 3: input_block[3][2] = -18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -53 (from PE[1][2])
  PE[0][3]: partial_in = -34 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -68 (from PE[2][1])
  PE[1][2]: partial_in = -58 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=5 -> result=5
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-29 -> result=-29
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-53 -> result=-53
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-34 -> result=-34
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-68 -> result=-68
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=-52 -> result=-58
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=-26 -> result=-38
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][1]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[3][2]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][3]: input=-18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        5      -29      -53      -34 
  Row 1:      -26      -68      -58      -16 
  Row 2:      -26      -58      -38       -6 
  Row 3:      -18      -36      -18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   5 │ -29 │ -53 │ -34 │
├─────┼─────┼─────┼─────┤
│ -26 │ -68 │ -58 │ -16 │
├─────┼─────┼─────┼─────┤
│ -26 │ -58 │ -38 │  -6 │
├─────┼─────┼─────┼─────┤
│ -18 │ -36 │ -18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -58 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -38 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = -18 (from PE[3][0])
  PE[2][1]: partial_in = -36 (from PE[3][1])
  PE[2][2]: partial_in = -18 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-26 -> result=-26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-68 -> result=-68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-16 -> result=-16
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-38 -> result=-38
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-6 -> result=-6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-18 -> result=-18
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-18 -> result=-18
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][1]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[3][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][3]: input=-14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -26      -68      -58      -16 
  Row 1:      -26      -58      -38       -6 
  Row 2:      -18      -36      -18        0 
  Row 3:      -14      -28      -14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │ -68 │ -58 │ -16 │
├─────┼─────┼─────┼─────┤
│ -26 │ -58 │ -38 │  -6 │
├─────┼─────┼─────┼─────┤
│ -18 │ -36 │ -18 │   0 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -26      -68      -58      -16 
Row 1:      -26      -58      -38       -6 
Row 2:      -18      -36      -18        0 
Row 3:      -14      -28      -14        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -26 -> clamp(-26) -> final(102)
  PE[0][1]: -68 -> clamp(-68) -> final(60)
  PE[0][2]: -58 -> clamp(-58) -> final(70)
  PE[0][3]: -16 -> clamp(-16) -> final(112)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -58 -> clamp(-58) -> final(70)
  PE[1][2]: -38 -> clamp(-38) -> final(90)
  PE[1][3]: -6 -> clamp(-6) -> final(122)
  PE[2][0]: -18 -> clamp(-18) -> final(110)
  PE[2][1]: -36 -> clamp(-36) -> final(92)
  PE[2][2]: -18 -> clamp(-18) -> final(110)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -14 -> clamp(-14) -> final(114)
  PE[3][1]: -28 -> clamp(-28) -> final(100)
  PE[3][2]: -14 -> clamp(-14) -> final(114)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   102     60     70    112 
   102     70     90    122 
   110     92    110    128 
   114    100    114    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  10   15   12    9 
   3   10    7    3 
 -11   -2   -2   -3 
 -14   -4   -1    1 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 10
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=0 -> result=-20
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[0][2]: input=10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -20      -10        0       10 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │ -10 │   0 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 15
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=0 -> result=-30
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=0 -> result=-15
  PE[0][2]: input=15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -30      -15        0       15 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -30 │ -15 │   0 │  15 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 12
  Row 1: input_block[1][1] = 10
  Row 2: input_block[2][0] = -11
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=-3 -> result=-27
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=3 -> result=-9
  PE[0][2]: input=12 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=12 * weight=1 = 12, partial_in=6 -> result=18
  PE[1][0]: input=10 * weight=-1 = -10, partial_in=0 -> result=-10
  PE[1][1]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[1][3]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -27       -9        3       18 
  Row 1:      -10       10       10       20 
  Row 2:        0      -11      -22      -11 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -27 │  -9 │   3 │  18 │
├─────┼─────┼─────┼─────┤
│ -10 │  10 │  10 │  20 │
├─────┼─────┼─────┼─────┤
│   0 │ -11 │ -22 │ -11 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 9
  Row 1: input_block[1][2] = 7
  Row 2: input_block[2][1] = -2
  Row 3: input_block[3][0] = -14

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -10 (from PE[1][0])
  PE[0][1]: partial_in = 10 (from PE[1][1])
  PE[0][2]: partial_in = 10 (from PE[1][2])
  PE[0][3]: partial_in = 20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -22 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=-10 -> result=-28
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=10 -> result=1
  PE[0][2]: input=9 * weight=0 = 0, partial_in=10 -> result=10
  PE[0][3]: input=9 * weight=1 = 9, partial_in=20 -> result=29
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=-11 -> result=-4
  PE[1][2]: input=7 * weight=1 = 7, partial_in=-22 -> result=-15
  PE[1][3]: input=7 * weight=2 = 14, partial_in=-11 -> result=3
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][1]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[3][2]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][3]: input=-14 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -28        1       10       29 
  Row 1:       -7       -4      -15        3 
  Row 2:        0       -2       -4       -2 
  Row 3:      -14      -28      -14        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │   1 │  10 │  29 │
├─────┼─────┼─────┼─────┤
│  -7 │  -4 │ -15 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│ -14 │ -28 │ -14 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 3
  Row 2: input_block[2][2] = -2
  Row 3: input_block[3][1] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = -4 (from PE[1][1])
  PE[0][2]: partial_in = -15 (from PE[1][2])
  PE[0][3]: partial_in = 3 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -14 (from PE[3][0])
  PE[2][1]: partial_in = -28 (from PE[3][1])
  PE[2][2]: partial_in = -14 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[0][3]: input=0 * weight=1 = 0, partial_in=3 -> result=3
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-2 -> result=1
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-4 -> result=-1
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-2 -> result=4
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=-14 -> result=-14
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=-28 -> result=-30
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=-14 -> result=-18
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -7       -4      -15        3 
  Row 1:       -3        1       -1        4 
  Row 2:      -14      -30      -18       -2 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │  -4 │ -15 │   3 │
├─────┼─────┼─────┼─────┤
│  -3 │   1 │  -1 │   4 │
├─────┼─────┼─────┼─────┤
│ -14 │ -30 │ -18 │  -2 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -3
  Row 3: input_block[3][2] = -1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = -1 (from PE[1][2])
  PE[0][3]: partial_in = 4 (from PE[1][3])
  PE[1][0]: partial_in = -14 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -18 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[0][3]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-30 -> result=-30
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-18 -> result=-18
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-2 -> result=-2
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=-8 -> result=-11
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=-4 -> result=-10
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][1]: input=-1 * weight=2 = -2, partial_in=0 -> result=-2
  PE[3][2]: input=-1 * weight=1 = -1, partial_in=0 -> result=-1
  PE[3][3]: input=-1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -3        1       -1        4 
  Row 1:      -14      -30      -18       -2 
  Row 2:       -4      -11      -10       -3 
  Row 3:       -1       -2       -1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │   1 │  -1 │   4 │
├─────┼─────┼─────┼─────┤
│ -14 │ -30 │ -18 │  -2 │
├─────┼─────┼─────┼─────┤
│  -4 │ -11 │ -10 │  -3 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 1

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -14 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -18 (from PE[1][2])
  PE[0][3]: partial_in = -2 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -11 (from PE[2][1])
  PE[1][2]: partial_in = -10 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = -1 (from PE[3][0])
  PE[2][1]: partial_in = -2 (from PE[3][1])
  PE[2][2]: partial_in = -1 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-14 -> result=-14
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-18 -> result=-18
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-2 -> result=-2
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-10 -> result=-10
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-1 -> result=-1
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-2 -> result=-2
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-1 -> result=-1
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][1]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[3][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][3]: input=1 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -14      -30      -18       -2 
  Row 1:       -4      -11      -10       -3 
  Row 2:       -1       -2       -1        0 
  Row 3:        1        2        1        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -14 │ -30 │ -18 │  -2 │
├─────┼─────┼─────┼─────┤
│  -4 │ -11 │ -10 │  -3 │
├─────┼─────┼─────┼─────┤
│  -1 │  -2 │  -1 │   0 │
├─────┼─────┼─────┼─────┤
│   1 │   2 │   1 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -14      -30      -18       -2 
Row 1:       -4      -11      -10       -3 
Row 2:       -1       -2       -1        0 
Row 3:        1        2        1        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -14 -> clamp(-14) -> final(114)
  PE[0][1]: -30 -> clamp(-30) -> final(98)
  PE[0][2]: -18 -> clamp(-18) -> final(110)
  PE[0][3]: -2 -> clamp(-2) -> final(126)
  PE[1][0]: -4 -> clamp(-4) -> final(124)
  PE[1][1]: -11 -> clamp(-11) -> final(117)
  PE[1][2]: -10 -> clamp(-10) -> final(118)
  PE[1][3]: -3 -> clamp(-3) -> final(125)
  PE[2][0]: -1 -> clamp(-1) -> final(127)
  PE[2][1]: -2 -> clamp(-2) -> final(126)
  PE[2][2]: -1 -> clamp(-1) -> final(127)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 1 -> clamp(1) -> final(129)
  PE[3][1]: 2 -> clamp(2) -> final(130)
  PE[3][2]: 1 -> clamp(1) -> final(129)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   114     98    110    126 
   124    117    118    125 
   127    126    127    128 
   129    130    129    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  14  -45 -101  -82 
   8  -62 -100  -73 
   2  -77 -100  -63 
   3  -86 -106  -65 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 14
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=0 -> result=-28
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[0][2]: input=14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -28      -14        0       14 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -28 │ -14 │   0 │  14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -45
  Row 1: input_block[1][0] = 8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=0 -> result=90
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][3]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       90       45        0      -45 
  Row 1:       -8        8        8       16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │  45 │   0 │ -45 │
├─────┼─────┼─────┼─────┤
│  -8 │   8 │   8 │  16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -101
  Row 1: input_block[1][1] = -62
  Row 2: input_block[2][0] = 2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 8 (from PE[1][1])
  PE[0][2]: partial_in = 8 (from PE[1][2])
  PE[0][3]: partial_in = 16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-101 * weight=-2 = 202, partial_in=-8 -> result=194
  PE[0][1]: input=-101 * weight=-1 = 101, partial_in=8 -> result=109
  PE[0][2]: input=-101 * weight=0 = 0, partial_in=8 -> result=8
  PE[0][3]: input=-101 * weight=1 = -101, partial_in=16 -> result=-85
  PE[1][0]: input=-62 * weight=-1 = 62, partial_in=0 -> result=62
  PE[1][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[1][3]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][0]: input=2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[2][2]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][3]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      194      109        8      -85 
  Row 1:       62      -62      -62     -124 
  Row 2:        0        2        4        2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 194 │ 109 │   8 │ -85 │
├─────┼─────┼─────┼─────┤
│  62 │ -62 │ -62 │-124 │
├─────┼─────┼─────┼─────┤
│   0 │   2 │   4 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -82
  Row 1: input_block[1][2] = -100
  Row 2: input_block[2][1] = -77
  Row 3: input_block[3][0] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 62 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -62 (from PE[1][2])
  PE[0][3]: partial_in = -124 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 4 (from PE[2][2])
  PE[1][3]: partial_in = 2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-82 * weight=-2 = 164, partial_in=62 -> result=226
  PE[0][1]: input=-82 * weight=-1 = 82, partial_in=-62 -> result=20
  PE[0][2]: input=-82 * weight=0 = 0, partial_in=-62 -> result=-62
  PE[0][3]: input=-82 * weight=1 = -82, partial_in=-124 -> result=-206
  PE[1][0]: input=-100 * weight=-1 = 100, partial_in=0 -> result=100
  PE[1][1]: input=-100 * weight=1 = -100, partial_in=2 -> result=-98
  PE[1][2]: input=-100 * weight=1 = -100, partial_in=4 -> result=-96
  PE[1][3]: input=-100 * weight=2 = -200, partial_in=2 -> result=-198
  PE[2][0]: input=-77 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[2][2]: input=-77 * weight=2 = -154, partial_in=0 -> result=-154
  PE[2][3]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      226       20      -62     -206 
  Row 1:      100      -98      -96     -198 
  Row 2:        0      -77     -154      -77 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 226 │  20 │ -62 │-206 │
├─────┼─────┼─────┼─────┤
│ 100 │ -98 │ -96 │-198 │
├─────┼─────┼─────┼─────┤
│   0 │ -77 │-154 │ -77 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -73
  Row 2: input_block[2][2] = -100
  Row 3: input_block[3][1] = -86

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 100 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -198 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -77 (from PE[2][1])
  PE[1][2]: partial_in = -154 (from PE[2][2])
  PE[1][3]: partial_in = -77 (from PE[2][3])
  PE[2][0]: partial_in = 3 (from PE[3][0])
  PE[2][1]: partial_in = 6 (from PE[3][1])
  PE[2][2]: partial_in = 3 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=100 -> result=100
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-98 -> result=-98
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-198 -> result=-198
  PE[1][0]: input=-73 * weight=-1 = 73, partial_in=0 -> result=73
  PE[1][1]: input=-73 * weight=1 = -73, partial_in=-77 -> result=-150
  PE[1][2]: input=-73 * weight=1 = -73, partial_in=-154 -> result=-227
  PE[1][3]: input=-73 * weight=2 = -146, partial_in=-77 -> result=-223
  PE[2][0]: input=-100 * weight=0 = 0, partial_in=3 -> result=3
  PE[2][1]: input=-100 * weight=1 = -100, partial_in=6 -> result=-94
  PE[2][2]: input=-100 * weight=2 = -200, partial_in=3 -> result=-197
  PE[2][3]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][0]: input=-86 * weight=1 = -86, partial_in=0 -> result=-86
  PE[3][1]: input=-86 * weight=2 = -172, partial_in=0 -> result=-172
  PE[3][2]: input=-86 * weight=1 = -86, partial_in=0 -> result=-86
  PE[3][3]: input=-86 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      100      -98      -96     -198 
  Row 1:       73     -150     -227     -223 
  Row 2:        3      -94     -197     -100 
  Row 3:      -86     -172      -86        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 100 │ -98 │ -96 │-198 │
├─────┼─────┼─────┼─────┤
│  73 │-150 │-227 │-223 │
├─────┼─────┼─────┼─────┤
│   3 │ -94 │-197 │-100 │
├─────┼─────┼─────┼─────┤
│ -86 │-172 │ -86 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -63
  Row 3: input_block[3][2] = -106

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 73 (from PE[1][0])
  PE[0][1]: partial_in = -150 (from PE[1][1])
  PE[0][2]: partial_in = -227 (from PE[1][2])
  PE[0][3]: partial_in = -223 (from PE[1][3])
  PE[1][0]: partial_in = 3 (from PE[2][0])
  PE[1][1]: partial_in = -94 (from PE[2][1])
  PE[1][2]: partial_in = -197 (from PE[2][2])
  PE[1][3]: partial_in = -100 (from PE[2][3])
  PE[2][0]: partial_in = -86 (from PE[3][0])
  PE[2][1]: partial_in = -172 (from PE[3][1])
  PE[2][2]: partial_in = -86 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=73 -> result=73
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-150 -> result=-150
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-227 -> result=-227
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-223 -> result=-223
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-197 -> result=-197
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-100 -> result=-100
  PE[2][0]: input=-63 * weight=0 = 0, partial_in=-86 -> result=-86
  PE[2][1]: input=-63 * weight=1 = -63, partial_in=-172 -> result=-235
  PE[2][2]: input=-63 * weight=2 = -126, partial_in=-86 -> result=-212
  PE[2][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][0]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[3][1]: input=-106 * weight=2 = -212, partial_in=0 -> result=-212
  PE[3][2]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[3][3]: input=-106 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       73     -150     -227     -223 
  Row 1:        3      -94     -197     -100 
  Row 2:      -86     -235     -212      -63 
  Row 3:     -106     -212     -106        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  73 │-150 │-227 │-223 │
├─────┼─────┼─────┼─────┤
│   3 │ -94 │-197 │-100 │
├─────┼─────┼─────┼─────┤
│ -86 │-235 │-212 │ -63 │
├─────┼─────┼─────┼─────┤
│-106 │-212 │-106 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -65

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -94 (from PE[1][1])
  PE[0][2]: partial_in = -197 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = -86 (from PE[2][0])
  PE[1][1]: partial_in = -235 (from PE[2][1])
  PE[1][2]: partial_in = -212 (from PE[2][2])
  PE[1][3]: partial_in = -63 (from PE[2][3])
  PE[2][0]: partial_in = -106 (from PE[3][0])
  PE[2][1]: partial_in = -212 (from PE[3][1])
  PE[2][2]: partial_in = -106 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=3 -> result=3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-94 -> result=-94
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-197 -> result=-197
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-86 -> result=-86
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-235 -> result=-235
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-212 -> result=-212
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-63 -> result=-63
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-106 -> result=-106
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-212 -> result=-212
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-106 -> result=-106
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][1]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[3][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][3]: input=-65 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:        3      -94     -197     -100 
  Row 1:      -86     -235     -212      -63 
  Row 2:     -106     -212     -106        0 
  Row 3:      -65     -130      -65        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   3 │ -94 │-197 │-100 │
├─────┼─────┼─────┼─────┤
│ -86 │-235 │-212 │ -63 │
├─────┼─────┼─────┼─────┤
│-106 │-212 │-106 │   0 │
├─────┼─────┼─────┼─────┤
│ -65 │-130 │ -65 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:        3      -94     -197     -100 
Row 1:      -86     -235     -212      -63 
Row 2:     -106     -212     -106        0 
Row 3:      -65     -130      -65        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 3 -> clamp(3) -> final(131)
  PE[0][1]: -94 -> clamp(-94) -> final(34)
  PE[0][2]: -197 -> clamp(-128) -> final(0)
  PE[0][3]: -100 -> clamp(-100) -> final(28)
  PE[1][0]: -86 -> clamp(-86) -> final(42)
  PE[1][1]: -235 -> clamp(-128) -> final(0)
  PE[1][2]: -212 -> clamp(-128) -> final(0)
  PE[1][3]: -63 -> clamp(-63) -> final(65)
  PE[2][0]: -106 -> clamp(-106) -> final(22)
  PE[2][1]: -212 -> clamp(-128) -> final(0)
  PE[2][2]: -106 -> clamp(-106) -> final(22)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -65 -> clamp(-65) -> final(63)
  PE[3][1]: -130 -> clamp(-128) -> final(0)
  PE[3][2]: -65 -> clamp(-65) -> final(63)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   131     34      0     28 
    42      0      0     65 
    22      0     22    128 
    63      0     63    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -60  -52  -33  -33 
 -55  -50  -39  -38 
 -54  -47  -43  -42 
 -57  -45  -43  -42 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -60
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-60 * weight=-2 = 120, partial_in=0 -> result=120
  PE[0][1]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[0][2]: input=-60 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      120       60        0      -60 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 120 │  60 │   0 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -52
  Row 1: input_block[1][0] = -55
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-52 * weight=-2 = 104, partial_in=0 -> result=104
  PE[0][1]: input=-52 * weight=-1 = 52, partial_in=0 -> result=52
  PE[0][2]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[1][0]: input=-55 * weight=-1 = 55, partial_in=0 -> result=55
  PE[1][1]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[1][2]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[1][3]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      104       52        0      -52 
  Row 1:       55      -55      -55     -110 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 104 │  52 │   0 │ -52 │
├─────┼─────┼─────┼─────┤
│  55 │ -55 │ -55 │-110 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -33
  Row 1: input_block[1][1] = -50
  Row 2: input_block[2][0] = -54
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 55 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -110 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=55 -> result=121
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-55 -> result=-22
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-110 -> result=-143
  PE[1][0]: input=-50 * weight=-1 = 50, partial_in=0 -> result=50
  PE[1][1]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][3]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[2][0]: input=-54 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[2][2]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[2][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      121      -22      -55     -143 
  Row 1:       50      -50      -50     -100 
  Row 2:        0      -54     -108      -54 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 121 │ -22 │ -55 │-143 │
├─────┼─────┼─────┼─────┤
│  50 │ -50 │ -50 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │ -54 │-108 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -33
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = -47
  Row 3: input_block[3][0] = -57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 50 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -54 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=50 -> result=116
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=-50 -> result=-17
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=-100 -> result=-133
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=-54 -> result=-93
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=-108 -> result=-147
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=-54 -> result=-132
  PE[2][0]: input=-47 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[2][2]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[2][3]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][0]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][1]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[3][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][3]: input=-57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      116      -17      -50     -133 
  Row 1:       39      -93     -147     -132 
  Row 2:        0      -47      -94      -47 
  Row 3:      -57     -114      -57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 116 │ -17 │ -50 │-133 │
├─────┼─────┼─────┼─────┤
│  39 │ -93 │-147 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -47 │ -94 │ -47 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -38
  Row 2: input_block[2][2] = -43
  Row 3: input_block[3][1] = -45

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -93 (from PE[1][1])
  PE[0][2]: partial_in = -147 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -47 (from PE[2][1])
  PE[1][2]: partial_in = -94 (from PE[2][2])
  PE[1][3]: partial_in = -47 (from PE[2][3])
  PE[2][0]: partial_in = -57 (from PE[3][0])
  PE[2][1]: partial_in = -114 (from PE[3][1])
  PE[2][2]: partial_in = -57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-93 -> result=-93
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-147 -> result=-147
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[1][0]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[1][1]: input=-38 * weight=1 = -38, partial_in=-47 -> result=-85
  PE[1][2]: input=-38 * weight=1 = -38, partial_in=-94 -> result=-132
  PE[1][3]: input=-38 * weight=2 = -76, partial_in=-47 -> result=-123
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=-114 -> result=-157
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=-57 -> result=-143
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][1]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[3][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][3]: input=-45 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39      -93     -147     -132 
  Row 1:       38      -85     -132     -123 
  Row 2:      -57     -157     -143      -43 
  Row 3:      -45      -90      -45        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -93 │-147 │-132 │
├─────┼─────┼─────┼─────┤
│  38 │ -85 │-132 │-123 │
├─────┼─────┼─────┼─────┤
│ -57 │-157 │-143 │ -43 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -42
  Row 3: input_block[3][2] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 38 (from PE[1][0])
  PE[0][1]: partial_in = -85 (from PE[1][1])
  PE[0][2]: partial_in = -132 (from PE[1][2])
  PE[0][3]: partial_in = -123 (from PE[1][3])
  PE[1][0]: partial_in = -57 (from PE[2][0])
  PE[1][1]: partial_in = -157 (from PE[2][1])
  PE[1][2]: partial_in = -143 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -45 (from PE[3][0])
  PE[2][1]: partial_in = -90 (from PE[3][1])
  PE[2][2]: partial_in = -45 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=38 -> result=38
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-85 -> result=-85
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-132 -> result=-132
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-123 -> result=-123
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-157 -> result=-157
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-43 -> result=-43
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=-90 -> result=-132
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=-45 -> result=-129
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       38      -85     -132     -123 
  Row 1:      -57     -157     -143      -43 
  Row 2:      -45     -132     -129      -42 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │ -85 │-132 │-123 │
├─────┼─────┼─────┼─────┤
│ -57 │-157 │-143 │ -43 │
├─────┼─────┼─────┼─────┤
│ -45 │-132 │-129 │ -42 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -57 (from PE[1][0])
  PE[0][1]: partial_in = -157 (from PE[1][1])
  PE[0][2]: partial_in = -143 (from PE[1][2])
  PE[0][3]: partial_in = -43 (from PE[1][3])
  PE[1][0]: partial_in = -45 (from PE[2][0])
  PE[1][1]: partial_in = -132 (from PE[2][1])
  PE[1][2]: partial_in = -129 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-57 -> result=-57
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-157 -> result=-157
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-143 -> result=-143
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-43 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-132 -> result=-132
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-129 -> result=-129
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-86 -> result=-86
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-43 -> result=-43
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -57     -157     -143      -43 
  Row 1:      -45     -132     -129      -42 
  Row 2:      -43      -86      -43        0 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -57 │-157 │-143 │ -43 │
├─────┼─────┼─────┼─────┤
│ -45 │-132 │-129 │ -42 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -57     -157     -143      -43 
Row 1:      -45     -132     -129      -42 
Row 2:      -43      -86      -43        0 
Row 3:      -42      -84      -42        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -57 -> clamp(-57) -> final(71)
  PE[0][1]: -157 -> clamp(-128) -> final(0)
  PE[0][2]: -143 -> clamp(-128) -> final(0)
  PE[0][3]: -43 -> clamp(-43) -> final(85)
  PE[1][0]: -45 -> clamp(-45) -> final(83)
  PE[1][1]: -132 -> clamp(-128) -> final(0)
  PE[1][2]: -129 -> clamp(-128) -> final(0)
  PE[1][3]: -42 -> clamp(-42) -> final(86)
  PE[2][0]: -43 -> clamp(-43) -> final(85)
  PE[2][1]: -86 -> clamp(-86) -> final(42)
  PE[2][2]: -43 -> clamp(-43) -> final(85)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -42 -> clamp(-42) -> final(86)
  PE[3][1]: -84 -> clamp(-84) -> final(44)
  PE[3][2]: -42 -> clamp(-42) -> final(86)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    71      0      0     85 
    83      0      0     86 
    85     42     85    128 
    86     44     86    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -31    9   17  -30 
 -27    5    3  -39 
 -29  -13  -20  -42 
 -32  -32  -44  -53 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -31
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=0 -> result=62
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       62       31        0      -31 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  62 │  31 │   0 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 9
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=9 * weight=-2 = -18, partial_in=0 -> result=-18
  PE[0][1]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[0][2]: input=9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -18       -9        0        9 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -18 │  -9 │   0 │   9 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 17
  Row 1: input_block[1][1] = 5
  Row 2: input_block[2][0] = -29
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=27 -> result=-7
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=-27 -> result=-44
  PE[0][2]: input=17 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=17 * weight=1 = 17, partial_in=-54 -> result=-37
  PE[1][0]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[1][1]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][2]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][3]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -7      -44      -27      -37 
  Row 1:       -5        5        5       10 
  Row 2:        0      -29      -58      -29 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -44 │ -27 │ -37 │
├─────┼─────┼─────┼─────┤
│  -5 │   5 │   5 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │ -29 │ -58 │ -29 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -30
  Row 1: input_block[1][2] = 3
  Row 2: input_block[2][1] = -13
  Row 3: input_block[3][0] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -5 (from PE[1][0])
  PE[0][1]: partial_in = 5 (from PE[1][1])
  PE[0][2]: partial_in = 5 (from PE[1][2])
  PE[0][3]: partial_in = 10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -29 (from PE[2][1])
  PE[1][2]: partial_in = -58 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=-5 -> result=55
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=5 -> result=35
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=5 -> result=5
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=10 -> result=-20
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-29 -> result=-26
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-58 -> result=-55
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-29 -> result=-23
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       55       35        5      -20 
  Row 1:       -3      -26      -55      -23 
  Row 2:        0      -13      -26      -13 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │  35 │   5 │ -20 │
├─────┼─────┼─────┼─────┤
│  -3 │ -26 │ -55 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -39
  Row 2: input_block[2][2] = -20
  Row 3: input_block[3][1] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -26 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -23 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=-13 -> result=-52
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=-26 -> result=-65
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=-13 -> result=-91
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=-64 -> result=-84
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=-32 -> result=-72
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -3      -26      -55      -23 
  Row 1:       39      -52      -65      -91 
  Row 2:      -32      -84      -72      -20 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -26 │ -55 │ -23 │
├─────┼─────┼─────┼─────┤
│  39 │ -52 │ -65 │ -91 │
├─────┼─────┼─────┼─────┤
│ -32 │ -84 │ -72 │ -20 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -42
  Row 3: input_block[3][2] = -44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -52 (from PE[1][1])
  PE[0][2]: partial_in = -65 (from PE[1][2])
  PE[0][3]: partial_in = -91 (from PE[1][3])
  PE[1][0]: partial_in = -32 (from PE[2][0])
  PE[1][1]: partial_in = -84 (from PE[2][1])
  PE[1][2]: partial_in = -72 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = -32 (from PE[3][0])
  PE[2][1]: partial_in = -64 (from PE[3][1])
  PE[2][2]: partial_in = -32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-52 -> result=-52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-65 -> result=-65
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-84 -> result=-84
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-20 -> result=-20
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=-64 -> result=-106
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=-32 -> result=-116
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][1]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[3][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][3]: input=-44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       39      -52      -65      -91 
  Row 1:      -32      -84      -72      -20 
  Row 2:      -32     -106     -116      -42 
  Row 3:      -44      -88      -44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -52 │ -65 │ -91 │
├─────┼─────┼─────┼─────┤
│ -32 │ -84 │ -72 │ -20 │
├─────┼─────┼─────┼─────┤
│ -32 │-106 │-116 │ -42 │
├─────┼─────┼─────┼─────┤
│ -44 │ -88 │ -44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = -84 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = -32 (from PE[2][0])
  PE[1][1]: partial_in = -106 (from PE[2][1])
  PE[1][2]: partial_in = -116 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -44 (from PE[3][0])
  PE[2][1]: partial_in = -88 (from PE[3][1])
  PE[2][2]: partial_in = -44 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-32 -> result=-32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-20 -> result=-20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-32 -> result=-32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-106 -> result=-106
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-44 -> result=-44
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][1]: input=-53 * weight=2 = -106, partial_in=0 -> result=-106
  PE[3][2]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][3]: input=-53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -32      -84      -72      -20 
  Row 1:      -32     -106     -116      -42 
  Row 2:      -44      -88      -44        0 
  Row 3:      -53     -106      -53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -32 │ -84 │ -72 │ -20 │
├─────┼─────┼─────┼─────┤
│ -32 │-106 │-116 │ -42 │
├─────┼─────┼─────┼─────┤
│ -44 │ -88 │ -44 │   0 │
├─────┼─────┼─────┼─────┤
│ -53 │-106 │ -53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -32      -84      -72      -20 
Row 1:      -32     -106     -116      -42 
Row 2:      -44      -88      -44        0 
Row 3:      -53     -106      -53        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -32 -> clamp(-32) -> final(96)
  PE[0][1]: -84 -> clamp(-84) -> final(44)
  PE[0][2]: -72 -> clamp(-72) -> final(56)
  PE[0][3]: -20 -> clamp(-20) -> final(108)
  PE[1][0]: -32 -> clamp(-32) -> final(96)
  PE[1][1]: -106 -> clamp(-106) -> final(22)
  PE[1][2]: -116 -> clamp(-116) -> final(12)
  PE[1][3]: -42 -> clamp(-42) -> final(86)
  PE[2][0]: -44 -> clamp(-44) -> final(84)
  PE[2][1]: -88 -> clamp(-88) -> final(40)
  PE[2][2]: -44 -> clamp(-44) -> final(84)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -53 -> clamp(-53) -> final(75)
  PE[3][1]: -106 -> clamp(-106) -> final(22)
  PE[3][2]: -53 -> clamp(-53) -> final(75)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    96     44     56    108 
    96     22     12     86 
    84     40     84    128 
    75     22     75    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-104 -111 -104  -89 
 -80  -87  -88  -87 
 -59  -62  -69  -84 
 -56  -50  -55  -72 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -104
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-104 * weight=-2 = 208, partial_in=0 -> result=208
  PE[0][1]: input=-104 * weight=-1 = 104, partial_in=0 -> result=104
  PE[0][2]: input=-104 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      208      104        0     -104 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 208 │ 104 │   0 │-104 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -111
  Row 1: input_block[1][0] = -80
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-111 * weight=-2 = 222, partial_in=0 -> result=222
  PE[0][1]: input=-111 * weight=-1 = 111, partial_in=0 -> result=111
  PE[0][2]: input=-111 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-111 * weight=1 = -111, partial_in=0 -> result=-111
  PE[1][0]: input=-80 * weight=-1 = 80, partial_in=0 -> result=80
  PE[1][1]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[1][2]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[1][3]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      222      111        0     -111 
  Row 1:       80      -80      -80     -160 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 222 │ 111 │   0 │-111 │
├─────┼─────┼─────┼─────┤
│  80 │ -80 │ -80 │-160 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -104
  Row 1: input_block[1][1] = -87
  Row 2: input_block[2][0] = -59
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 80 (from PE[1][0])
  PE[0][1]: partial_in = -80 (from PE[1][1])
  PE[0][2]: partial_in = -80 (from PE[1][2])
  PE[0][3]: partial_in = -160 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-104 * weight=-2 = 208, partial_in=80 -> result=288
  PE[0][1]: input=-104 * weight=-1 = 104, partial_in=-80 -> result=24
  PE[0][2]: input=-104 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[0][3]: input=-104 * weight=1 = -104, partial_in=-160 -> result=-264
  PE[1][0]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[1][1]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][2]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][3]: input=-87 * weight=2 = -174, partial_in=0 -> result=-174
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      288       24      -80     -264 
  Row 1:       87      -87      -87     -174 
  Row 2:        0      -59     -118      -59 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 288 │  24 │ -80 │-264 │
├─────┼─────┼─────┼─────┤
│  87 │ -87 │ -87 │-174 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -89
  Row 1: input_block[1][2] = -88
  Row 2: input_block[2][1] = -62
  Row 3: input_block[3][0] = -56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 87 (from PE[1][0])
  PE[0][1]: partial_in = -87 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -174 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-89 * weight=-2 = 178, partial_in=87 -> result=265
  PE[0][1]: input=-89 * weight=-1 = 89, partial_in=-87 -> result=2
  PE[0][2]: input=-89 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=-89 * weight=1 = -89, partial_in=-174 -> result=-263
  PE[1][0]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[1][1]: input=-88 * weight=1 = -88, partial_in=-59 -> result=-147
  PE[1][2]: input=-88 * weight=1 = -88, partial_in=-118 -> result=-206
  PE[1][3]: input=-88 * weight=2 = -176, partial_in=-59 -> result=-235
  PE[2][0]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[2][2]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][0]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][1]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[3][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][3]: input=-56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      265        2      -87     -263 
  Row 1:       88     -147     -206     -235 
  Row 2:        0      -62     -124      -62 
  Row 3:      -56     -112      -56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 265 │   2 │ -87 │-263 │
├─────┼─────┼─────┼─────┤
│  88 │-147 │-206 │-235 │
├─────┼─────┼─────┼─────┤
│   0 │ -62 │-124 │ -62 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -87
  Row 2: input_block[2][2] = -69
  Row 3: input_block[3][1] = -50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 88 (from PE[1][0])
  PE[0][1]: partial_in = -147 (from PE[1][1])
  PE[0][2]: partial_in = -206 (from PE[1][2])
  PE[0][3]: partial_in = -235 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -62 (from PE[2][1])
  PE[1][2]: partial_in = -124 (from PE[2][2])
  PE[1][3]: partial_in = -62 (from PE[2][3])
  PE[2][0]: partial_in = -56 (from PE[3][0])
  PE[2][1]: partial_in = -112 (from PE[3][1])
  PE[2][2]: partial_in = -56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=88 -> result=88
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-147 -> result=-147
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-206 -> result=-206
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-235 -> result=-235
  PE[1][0]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[1][1]: input=-87 * weight=1 = -87, partial_in=-62 -> result=-149
  PE[1][2]: input=-87 * weight=1 = -87, partial_in=-124 -> result=-211
  PE[1][3]: input=-87 * weight=2 = -174, partial_in=-62 -> result=-236
  PE[2][0]: input=-69 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[2][1]: input=-69 * weight=1 = -69, partial_in=-112 -> result=-181
  PE[2][2]: input=-69 * weight=2 = -138, partial_in=-56 -> result=-194
  PE[2][3]: input=-69 * weight=1 = -69, partial_in=0 -> result=-69
  PE[3][0]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][1]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[3][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][3]: input=-50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       88     -147     -206     -235 
  Row 1:       87     -149     -211     -236 
  Row 2:      -56     -181     -194      -69 
  Row 3:      -50     -100      -50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  88 │-147 │-206 │-235 │
├─────┼─────┼─────┼─────┤
│  87 │-149 │-211 │-236 │
├─────┼─────┼─────┼─────┤
│ -56 │-181 │-194 │ -69 │
├─────┼─────┼─────┼─────┤
│ -50 │-100 │ -50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -84
  Row 3: input_block[3][2] = -55

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 87 (from PE[1][0])
  PE[0][1]: partial_in = -149 (from PE[1][1])
  PE[0][2]: partial_in = -211 (from PE[1][2])
  PE[0][3]: partial_in = -236 (from PE[1][3])
  PE[1][0]: partial_in = -56 (from PE[2][0])
  PE[1][1]: partial_in = -181 (from PE[2][1])
  PE[1][2]: partial_in = -194 (from PE[2][2])
  PE[1][3]: partial_in = -69 (from PE[2][3])
  PE[2][0]: partial_in = -50 (from PE[3][0])
  PE[2][1]: partial_in = -100 (from PE[3][1])
  PE[2][2]: partial_in = -50 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=87 -> result=87
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-149 -> result=-149
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-211 -> result=-211
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-236 -> result=-236
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-56 -> result=-56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-194 -> result=-194
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-69 -> result=-69
  PE[2][0]: input=-84 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[2][1]: input=-84 * weight=1 = -84, partial_in=-100 -> result=-184
  PE[2][2]: input=-84 * weight=2 = -168, partial_in=-50 -> result=-218
  PE[2][3]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][0]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][1]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[3][2]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][3]: input=-55 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       87     -149     -211     -236 
  Row 1:      -56     -181     -194      -69 
  Row 2:      -50     -184     -218      -84 
  Row 3:      -55     -110      -55        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  87 │-149 │-211 │-236 │
├─────┼─────┼─────┼─────┤
│ -56 │-181 │-194 │ -69 │
├─────┼─────┼─────┼─────┤
│ -50 │-184 │-218 │ -84 │
├─────┼─────┼─────┼─────┤
│ -55 │-110 │ -55 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -72

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -56 (from PE[1][0])
  PE[0][1]: partial_in = -181 (from PE[1][1])
  PE[0][2]: partial_in = -194 (from PE[1][2])
  PE[0][3]: partial_in = -69 (from PE[1][3])
  PE[1][0]: partial_in = -50 (from PE[2][0])
  PE[1][1]: partial_in = -184 (from PE[2][1])
  PE[1][2]: partial_in = -218 (from PE[2][2])
  PE[1][3]: partial_in = -84 (from PE[2][3])
  PE[2][0]: partial_in = -55 (from PE[3][0])
  PE[2][1]: partial_in = -110 (from PE[3][1])
  PE[2][2]: partial_in = -55 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-56 -> result=-56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-181 -> result=-181
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-194 -> result=-194
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-184 -> result=-184
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-218 -> result=-218
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-84 -> result=-84
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-110 -> result=-110
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-55 -> result=-55
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][1]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[3][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][3]: input=-72 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -56     -181     -194      -69 
  Row 1:      -50     -184     -218      -84 
  Row 2:      -55     -110      -55        0 
  Row 3:      -72     -144      -72        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │-181 │-194 │ -69 │
├─────┼─────┼─────┼─────┤
│ -50 │-184 │-218 │ -84 │
├─────┼─────┼─────┼─────┤
│ -55 │-110 │ -55 │   0 │
├─────┼─────┼─────┼─────┤
│ -72 │-144 │ -72 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -56     -181     -194      -69 
Row 1:      -50     -184     -218      -84 
Row 2:      -55     -110      -55        0 
Row 3:      -72     -144      -72        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -56 -> clamp(-56) -> final(72)
  PE[0][1]: -181 -> clamp(-128) -> final(0)
  PE[0][2]: -194 -> clamp(-128) -> final(0)
  PE[0][3]: -69 -> clamp(-69) -> final(59)
  PE[1][0]: -50 -> clamp(-50) -> final(78)
  PE[1][1]: -184 -> clamp(-128) -> final(0)
  PE[1][2]: -218 -> clamp(-128) -> final(0)
  PE[1][3]: -84 -> clamp(-84) -> final(44)
  PE[2][0]: -55 -> clamp(-55) -> final(73)
  PE[2][1]: -110 -> clamp(-110) -> final(18)
  PE[2][2]: -55 -> clamp(-55) -> final(73)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -72 -> clamp(-72) -> final(56)
  PE[3][1]: -144 -> clamp(-128) -> final(0)
  PE[3][2]: -72 -> clamp(-72) -> final(56)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    72      0      0     59 
    78      0      0     44 
    73     18     73    128 
    56      0     56    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -77  -68  -74  -94 
 -88  -80  -74  -78 
-100 -104  -93  -82 
 -90 -103  -96  -78 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -77
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-77 * weight=-2 = 154, partial_in=0 -> result=154
  PE[0][1]: input=-77 * weight=-1 = 77, partial_in=0 -> result=77
  PE[0][2]: input=-77 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-77 * weight=1 = -77, partial_in=0 -> result=-77
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      154       77        0      -77 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 154 │  77 │   0 │ -77 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -68
  Row 1: input_block[1][0] = -88
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-68 * weight=-2 = 136, partial_in=0 -> result=136
  PE[0][1]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[0][2]: input=-68 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][0]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[1][1]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][2]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][3]: input=-88 * weight=2 = -176, partial_in=0 -> result=-176
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      136       68        0      -68 
  Row 1:       88      -88      -88     -176 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 136 │  68 │   0 │ -68 │
├─────┼─────┼─────┼─────┤
│  88 │ -88 │ -88 │-176 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -74
  Row 1: input_block[1][1] = -80
  Row 2: input_block[2][0] = -100
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 88 (from PE[1][0])
  PE[0][1]: partial_in = -88 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -176 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-74 * weight=-2 = 148, partial_in=88 -> result=236
  PE[0][1]: input=-74 * weight=-1 = 74, partial_in=-88 -> result=-14
  PE[0][2]: input=-74 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=-74 * weight=1 = -74, partial_in=-176 -> result=-250
  PE[1][0]: input=-80 * weight=-1 = 80, partial_in=0 -> result=80
  PE[1][1]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[1][2]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[1][3]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[2][0]: input=-100 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[2][2]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[2][3]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      236      -14      -88     -250 
  Row 1:       80      -80      -80     -160 
  Row 2:        0     -100     -200     -100 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 236 │ -14 │ -88 │-250 │
├─────┼─────┼─────┼─────┤
│  80 │ -80 │ -80 │-160 │
├─────┼─────┼─────┼─────┤
│   0 │-100 │-200 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -94
  Row 1: input_block[1][2] = -74
  Row 2: input_block[2][1] = -104
  Row 3: input_block[3][0] = -90

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 80 (from PE[1][0])
  PE[0][1]: partial_in = -80 (from PE[1][1])
  PE[0][2]: partial_in = -80 (from PE[1][2])
  PE[0][3]: partial_in = -160 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -100 (from PE[2][1])
  PE[1][2]: partial_in = -200 (from PE[2][2])
  PE[1][3]: partial_in = -100 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-94 * weight=-2 = 188, partial_in=80 -> result=268
  PE[0][1]: input=-94 * weight=-1 = 94, partial_in=-80 -> result=14
  PE[0][2]: input=-94 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[0][3]: input=-94 * weight=1 = -94, partial_in=-160 -> result=-254
  PE[1][0]: input=-74 * weight=-1 = 74, partial_in=0 -> result=74
  PE[1][1]: input=-74 * weight=1 = -74, partial_in=-100 -> result=-174
  PE[1][2]: input=-74 * weight=1 = -74, partial_in=-200 -> result=-274
  PE[1][3]: input=-74 * weight=2 = -148, partial_in=-100 -> result=-248
  PE[2][0]: input=-104 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[2][2]: input=-104 * weight=2 = -208, partial_in=0 -> result=-208
  PE[2][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[3][0]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][1]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[3][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][3]: input=-90 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      268       14      -80     -254 
  Row 1:       74     -174     -274     -248 
  Row 2:        0     -104     -208     -104 
  Row 3:      -90     -180      -90        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 268 │  14 │ -80 │-254 │
├─────┼─────┼─────┼─────┤
│  74 │-174 │-274 │-248 │
├─────┼─────┼─────┼─────┤
│   0 │-104 │-208 │-104 │
├─────┼─────┼─────┼─────┤
│ -90 │-180 │ -90 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -78
  Row 2: input_block[2][2] = -93
  Row 3: input_block[3][1] = -103

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 74 (from PE[1][0])
  PE[0][1]: partial_in = -174 (from PE[1][1])
  PE[0][2]: partial_in = -274 (from PE[1][2])
  PE[0][3]: partial_in = -248 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -104 (from PE[2][1])
  PE[1][2]: partial_in = -208 (from PE[2][2])
  PE[1][3]: partial_in = -104 (from PE[2][3])
  PE[2][0]: partial_in = -90 (from PE[3][0])
  PE[2][1]: partial_in = -180 (from PE[3][1])
  PE[2][2]: partial_in = -90 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=74 -> result=74
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-174 -> result=-174
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-274 -> result=-274
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-248 -> result=-248
  PE[1][0]: input=-78 * weight=-1 = 78, partial_in=0 -> result=78
  PE[1][1]: input=-78 * weight=1 = -78, partial_in=-104 -> result=-182
  PE[1][2]: input=-78 * weight=1 = -78, partial_in=-208 -> result=-286
  PE[1][3]: input=-78 * weight=2 = -156, partial_in=-104 -> result=-260
  PE[2][0]: input=-93 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[2][1]: input=-93 * weight=1 = -93, partial_in=-180 -> result=-273
  PE[2][2]: input=-93 * weight=2 = -186, partial_in=-90 -> result=-276
  PE[2][3]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][0]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][1]: input=-103 * weight=2 = -206, partial_in=0 -> result=-206
  PE[3][2]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][3]: input=-103 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       74     -174     -274     -248 
  Row 1:       78     -182     -286     -260 
  Row 2:      -90     -273     -276      -93 
  Row 3:     -103     -206     -103        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  74 │-174 │-274 │-248 │
├─────┼─────┼─────┼─────┤
│  78 │-182 │-286 │-260 │
├─────┼─────┼─────┼─────┤
│ -90 │-273 │-276 │ -93 │
├─────┼─────┼─────┼─────┤
│-103 │-206 │-103 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -82
  Row 3: input_block[3][2] = -96

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 78 (from PE[1][0])
  PE[0][1]: partial_in = -182 (from PE[1][1])
  PE[0][2]: partial_in = -286 (from PE[1][2])
  PE[0][3]: partial_in = -260 (from PE[1][3])
  PE[1][0]: partial_in = -90 (from PE[2][0])
  PE[1][1]: partial_in = -273 (from PE[2][1])
  PE[1][2]: partial_in = -276 (from PE[2][2])
  PE[1][3]: partial_in = -93 (from PE[2][3])
  PE[2][0]: partial_in = -103 (from PE[3][0])
  PE[2][1]: partial_in = -206 (from PE[3][1])
  PE[2][2]: partial_in = -103 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=78 -> result=78
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-182 -> result=-182
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-286 -> result=-286
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-260 -> result=-260
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-90 -> result=-90
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-273 -> result=-273
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-276 -> result=-276
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-93 -> result=-93
  PE[2][0]: input=-82 * weight=0 = 0, partial_in=-103 -> result=-103
  PE[2][1]: input=-82 * weight=1 = -82, partial_in=-206 -> result=-288
  PE[2][2]: input=-82 * weight=2 = -164, partial_in=-103 -> result=-267
  PE[2][3]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[3][0]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][1]: input=-96 * weight=2 = -192, partial_in=0 -> result=-192
  PE[3][2]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][3]: input=-96 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       78     -182     -286     -260 
  Row 1:      -90     -273     -276      -93 
  Row 2:     -103     -288     -267      -82 
  Row 3:      -96     -192      -96        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │-182 │-286 │-260 │
├─────┼─────┼─────┼─────┤
│ -90 │-273 │-276 │ -93 │
├─────┼─────┼─────┼─────┤
│-103 │-288 │-267 │ -82 │
├─────┼─────┼─────┼─────┤
│ -96 │-192 │ -96 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -78

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -90 (from PE[1][0])
  PE[0][1]: partial_in = -273 (from PE[1][1])
  PE[0][2]: partial_in = -276 (from PE[1][2])
  PE[0][3]: partial_in = -93 (from PE[1][3])
  PE[1][0]: partial_in = -103 (from PE[2][0])
  PE[1][1]: partial_in = -288 (from PE[2][1])
  PE[1][2]: partial_in = -267 (from PE[2][2])
  PE[1][3]: partial_in = -82 (from PE[2][3])
  PE[2][0]: partial_in = -96 (from PE[3][0])
  PE[2][1]: partial_in = -192 (from PE[3][1])
  PE[2][2]: partial_in = -96 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-90 -> result=-90
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-273 -> result=-273
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-276 -> result=-276
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-103 -> result=-103
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-288 -> result=-288
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-267 -> result=-267
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-82 -> result=-82
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-192 -> result=-192
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-96 -> result=-96
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][1]: input=-78 * weight=2 = -156, partial_in=0 -> result=-156
  PE[3][2]: input=-78 * weight=1 = -78, partial_in=0 -> result=-78
  PE[3][3]: input=-78 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -90     -273     -276      -93 
  Row 1:     -103     -288     -267      -82 
  Row 2:      -96     -192      -96        0 
  Row 3:      -78     -156      -78        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │-273 │-276 │ -93 │
├─────┼─────┼─────┼─────┤
│-103 │-288 │-267 │ -82 │
├─────┼─────┼─────┼─────┤
│ -96 │-192 │ -96 │   0 │
├─────┼─────┼─────┼─────┤
│ -78 │-156 │ -78 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -90     -273     -276      -93 
Row 1:     -103     -288     -267      -82 
Row 2:      -96     -192      -96        0 
Row 3:      -78     -156      -78        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -90 -> clamp(-90) -> final(38)
  PE[0][1]: -273 -> clamp(-128) -> final(0)
  PE[0][2]: -276 -> clamp(-128) -> final(0)
  PE[0][3]: -93 -> clamp(-93) -> final(35)
  PE[1][0]: -103 -> clamp(-103) -> final(25)
  PE[1][1]: -288 -> clamp(-128) -> final(0)
  PE[1][2]: -267 -> clamp(-128) -> final(0)
  PE[1][3]: -82 -> clamp(-82) -> final(46)
  PE[2][0]: -96 -> clamp(-96) -> final(32)
  PE[2][1]: -192 -> clamp(-128) -> final(0)
  PE[2][2]: -96 -> clamp(-96) -> final(32)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -78 -> clamp(-78) -> final(50)
  PE[3][1]: -156 -> clamp(-128) -> final(0)
  PE[3][2]: -78 -> clamp(-78) -> final(50)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    38      0      0     35 
    25      0      0     46 
    32      0     32    128 
    50      0     50    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -35   -3   17   18 
 -27    1   16   17 
 -16    5   14   15 
  -7    8   11   12 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -35
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-35 * weight=-2 = 70, partial_in=0 -> result=70
  PE[0][1]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[0][2]: input=-35 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       70       35        0      -35 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │  35 │   0 │ -35 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -3
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        6        3        0       -3 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 17
  Row 1: input_block[1][1] = 1
  Row 2: input_block[2][0] = -16
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=27 -> result=-7
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=-27 -> result=-44
  PE[0][2]: input=17 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=17 * weight=1 = 17, partial_in=-54 -> result=-37
  PE[1][0]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[1][1]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][2]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][3]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -7      -44      -27      -37 
  Row 1:       -1        1        1        2 
  Row 2:        0      -16      -32      -16 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │ -44 │ -27 │ -37 │
├─────┼─────┼─────┼─────┤
│  -1 │   1 │   1 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │ -16 │ -32 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 18
  Row 1: input_block[1][2] = 16
  Row 2: input_block[2][1] = 5
  Row 3: input_block[3][0] = -7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -1 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = 1 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -16 (from PE[2][1])
  PE[1][2]: partial_in = -32 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=-1 -> result=-37
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=1 -> result=-17
  PE[0][2]: input=18 * weight=0 = 0, partial_in=1 -> result=1
  PE[0][3]: input=18 * weight=1 = 18, partial_in=2 -> result=20
  PE[1][0]: input=16 * weight=-1 = -16, partial_in=0 -> result=-16
  PE[1][1]: input=16 * weight=1 = 16, partial_in=-16 -> result=0
  PE[1][2]: input=16 * weight=1 = 16, partial_in=-32 -> result=-16
  PE[1][3]: input=16 * weight=2 = 32, partial_in=-16 -> result=16
  PE[2][0]: input=5 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[2][2]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][1]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[3][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][3]: input=-7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -37      -17        1       20 
  Row 1:      -16        0      -16       16 
  Row 2:        0        5       10        5 
  Row 3:       -7      -14       -7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -37 │ -17 │   1 │  20 │
├─────┼─────┼─────┼─────┤
│ -16 │   0 │ -16 │  16 │
├─────┼─────┼─────┼─────┤
│   0 │   5 │  10 │   5 │
├─────┼─────┼─────┼─────┤
│  -7 │ -14 │  -7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 17
  Row 2: input_block[2][2] = 14
  Row 3: input_block[3][1] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -16 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = -16 (from PE[1][2])
  PE[0][3]: partial_in = 16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 5 (from PE[2][1])
  PE[1][2]: partial_in = 10 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = -7 (from PE[3][0])
  PE[2][1]: partial_in = -14 (from PE[3][1])
  PE[2][2]: partial_in = -7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-16 -> result=-16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=16 -> result=16
  PE[1][0]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[1][1]: input=17 * weight=1 = 17, partial_in=5 -> result=22
  PE[1][2]: input=17 * weight=1 = 17, partial_in=10 -> result=27
  PE[1][3]: input=17 * weight=2 = 34, partial_in=5 -> result=39
  PE[2][0]: input=14 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[2][1]: input=14 * weight=1 = 14, partial_in=-14 -> result=0
  PE[2][2]: input=14 * weight=2 = 28, partial_in=-7 -> result=21
  PE[2][3]: input=14 * weight=1 = 14, partial_in=0 -> result=14
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -16        0      -16       16 
  Row 1:      -17       22       27       39 
  Row 2:       -7        0       21       14 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │   0 │ -16 │  16 │
├─────┼─────┼─────┼─────┤
│ -17 │  22 │  27 │  39 │
├─────┼─────┼─────┼─────┤
│  -7 │   0 │  21 │  14 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 15
  Row 3: input_block[3][2] = 11

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 27 (from PE[1][2])
  PE[0][3]: partial_in = 39 (from PE[1][3])
  PE[1][0]: partial_in = -7 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 21 (from PE[2][2])
  PE[1][3]: partial_in = 14 (from PE[2][3])
  PE[2][0]: partial_in = 8 (from PE[3][0])
  PE[2][1]: partial_in = 16 (from PE[3][1])
  PE[2][2]: partial_in = 8 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=27 -> result=27
  PE[0][3]: input=0 * weight=1 = 0, partial_in=39 -> result=39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-7 -> result=-7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=21 -> result=21
  PE[1][3]: input=0 * weight=2 = 0, partial_in=14 -> result=14
  PE[2][0]: input=15 * weight=0 = 0, partial_in=8 -> result=8
  PE[2][1]: input=15 * weight=1 = 15, partial_in=16 -> result=31
  PE[2][2]: input=15 * weight=2 = 30, partial_in=8 -> result=38
  PE[2][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][0]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][1]: input=11 * weight=2 = 22, partial_in=0 -> result=22
  PE[3][2]: input=11 * weight=1 = 11, partial_in=0 -> result=11
  PE[3][3]: input=11 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -17       22       27       39 
  Row 1:       -7        0       21       14 
  Row 2:        8       31       38       15 
  Row 3:       11       22       11        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │  22 │  27 │  39 │
├─────┼─────┼─────┼─────┤
│  -7 │   0 │  21 │  14 │
├─────┼─────┼─────┼─────┤
│   8 │  31 │  38 │  15 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = 14 (from PE[1][3])
  PE[1][0]: partial_in = 8 (from PE[2][0])
  PE[1][1]: partial_in = 31 (from PE[2][1])
  PE[1][2]: partial_in = 38 (from PE[2][2])
  PE[1][3]: partial_in = 15 (from PE[2][3])
  PE[2][0]: partial_in = 11 (from PE[3][0])
  PE[2][1]: partial_in = 22 (from PE[3][1])
  PE[2][2]: partial_in = 11 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=14 -> result=14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=8 -> result=8
  PE[1][1]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][2]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[1][3]: input=0 * weight=2 = 0, partial_in=15 -> result=15
  PE[2][0]: input=0 * weight=0 = 0, partial_in=11 -> result=11
  PE[2][1]: input=0 * weight=1 = 0, partial_in=22 -> result=22
  PE[2][2]: input=0 * weight=2 = 0, partial_in=11 -> result=11
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -7        0       21       14 
  Row 1:        8       31       38       15 
  Row 2:       11       22       11        0 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │   0 │  21 │  14 │
├─────┼─────┼─────┼─────┤
│   8 │  31 │  38 │  15 │
├─────┼─────┼─────┼─────┤
│  11 │  22 │  11 │   0 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -7        0       21       14 
Row 1:        8       31       38       15 
Row 2:       11       22       11        0 
Row 3:       12       24       12        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -7 -> clamp(-7) -> final(121)
  PE[0][1]: 0 -> clamp(0) -> final(128)
  PE[0][2]: 21 -> clamp(21) -> final(149)
  PE[0][3]: 14 -> clamp(14) -> final(142)
  PE[1][0]: 8 -> clamp(8) -> final(136)
  PE[1][1]: 31 -> clamp(31) -> final(159)
  PE[1][2]: 38 -> clamp(38) -> final(166)
  PE[1][3]: 15 -> clamp(15) -> final(143)
  PE[2][0]: 11 -> clamp(11) -> final(139)
  PE[2][1]: 22 -> clamp(22) -> final(150)
  PE[2][2]: 11 -> clamp(11) -> final(139)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 12 -> clamp(12) -> final(140)
  PE[3][1]: 24 -> clamp(24) -> final(152)
  PE[3][2]: 12 -> clamp(12) -> final(140)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   121    128    149    142 
   136    159    166    143 
   139    150    139    128 
   140    152    140    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  21   19   13   12 
  22   22   16   15 
  23   24   19   19 
  22   25   21   22 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 21
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=21 * weight=-2 = -42, partial_in=0 -> result=-42
  PE[0][1]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[0][2]: input=21 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -42      -21        0       21 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -42 │ -21 │   0 │  21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 19
  Row 1: input_block[1][0] = 22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=19 * weight=-2 = -38, partial_in=0 -> result=-38
  PE[0][1]: input=19 * weight=-1 = -19, partial_in=0 -> result=-19
  PE[0][2]: input=19 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][3]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -38      -19        0       19 
  Row 1:      -22       22       22       44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -38 │ -19 │   0 │  19 │
├─────┼─────┼─────┼─────┤
│ -22 │  22 │  22 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 13
  Row 1: input_block[1][1] = 22
  Row 2: input_block[2][0] = 23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 22 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=13 * weight=-2 = -26, partial_in=-22 -> result=-48
  PE[0][1]: input=13 * weight=-1 = -13, partial_in=22 -> result=9
  PE[0][2]: input=13 * weight=0 = 0, partial_in=22 -> result=22
  PE[0][3]: input=13 * weight=1 = 13, partial_in=44 -> result=57
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][3]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -48        9       22       57 
  Row 1:      -22       22       22       44 
  Row 2:        0       23       46       23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │   9 │  22 │  57 │
├─────┼─────┼─────┼─────┤
│ -22 │  22 │  22 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 12
  Row 1: input_block[1][2] = 16
  Row 2: input_block[2][1] = 24
  Row 3: input_block[3][0] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 22 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=12 * weight=-2 = -24, partial_in=-22 -> result=-46
  PE[0][1]: input=12 * weight=-1 = -12, partial_in=22 -> result=10
  PE[0][2]: input=12 * weight=0 = 0, partial_in=22 -> result=22
  PE[0][3]: input=12 * weight=1 = 12, partial_in=44 -> result=56
  PE[1][0]: input=16 * weight=-1 = -16, partial_in=0 -> result=-16
  PE[1][1]: input=16 * weight=1 = 16, partial_in=23 -> result=39
  PE[1][2]: input=16 * weight=1 = 16, partial_in=46 -> result=62
  PE[1][3]: input=16 * weight=2 = 32, partial_in=23 -> result=55
  PE[2][0]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[2][2]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[2][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -46       10       22       56 
  Row 1:      -16       39       62       55 
  Row 2:        0       24       48       24 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -46 │  10 │  22 │  56 │
├─────┼─────┼─────┼─────┤
│ -16 │  39 │  62 │  55 │
├─────┼─────┼─────┼─────┤
│   0 │  24 │  48 │  24 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 15
  Row 2: input_block[2][2] = 19
  Row 3: input_block[3][1] = 25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -16 (from PE[1][0])
  PE[0][1]: partial_in = 39 (from PE[1][1])
  PE[0][2]: partial_in = 62 (from PE[1][2])
  PE[0][3]: partial_in = 55 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 24 (from PE[2][1])
  PE[1][2]: partial_in = 48 (from PE[2][2])
  PE[1][3]: partial_in = 24 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-16 -> result=-16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=39 -> result=39
  PE[0][2]: input=0 * weight=0 = 0, partial_in=62 -> result=62
  PE[0][3]: input=0 * weight=1 = 0, partial_in=55 -> result=55
  PE[1][0]: input=15 * weight=-1 = -15, partial_in=0 -> result=-15
  PE[1][1]: input=15 * weight=1 = 15, partial_in=24 -> result=39
  PE[1][2]: input=15 * weight=1 = 15, partial_in=48 -> result=63
  PE[1][3]: input=15 * weight=2 = 30, partial_in=24 -> result=54
  PE[2][0]: input=19 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=19 * weight=1 = 19, partial_in=44 -> result=63
  PE[2][2]: input=19 * weight=2 = 38, partial_in=22 -> result=60
  PE[2][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][0]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][1]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[3][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][3]: input=25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -16       39       62       55 
  Row 1:      -15       39       63       54 
  Row 2:       22       63       60       19 
  Row 3:       25       50       25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  39 │  62 │  55 │
├─────┼─────┼─────┼─────┤
│ -15 │  39 │  63 │  54 │
├─────┼─────┼─────┼─────┤
│  22 │  63 │  60 │  19 │
├─────┼─────┼─────┼─────┤
│  25 │  50 │  25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 19
  Row 3: input_block[3][2] = 21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = 39 (from PE[1][1])
  PE[0][2]: partial_in = 63 (from PE[1][2])
  PE[0][3]: partial_in = 54 (from PE[1][3])
  PE[1][0]: partial_in = 22 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 60 (from PE[2][2])
  PE[1][3]: partial_in = 19 (from PE[2][3])
  PE[2][0]: partial_in = 25 (from PE[3][0])
  PE[2][1]: partial_in = 50 (from PE[3][1])
  PE[2][2]: partial_in = 25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-15 -> result=-15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=39 -> result=39
  PE[0][2]: input=0 * weight=0 = 0, partial_in=63 -> result=63
  PE[0][3]: input=0 * weight=1 = 0, partial_in=54 -> result=54
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][2]: input=0 * weight=1 = 0, partial_in=60 -> result=60
  PE[1][3]: input=0 * weight=2 = 0, partial_in=19 -> result=19
  PE[2][0]: input=19 * weight=0 = 0, partial_in=25 -> result=25
  PE[2][1]: input=19 * weight=1 = 19, partial_in=50 -> result=69
  PE[2][2]: input=19 * weight=2 = 38, partial_in=25 -> result=63
  PE[2][3]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][0]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][1]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[3][2]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][3]: input=21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -15       39       63       54 
  Row 1:       22       63       60       19 
  Row 2:       25       69       63       19 
  Row 3:       21       42       21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │  39 │  63 │  54 │
├─────┼─────┼─────┼─────┤
│  22 │  63 │  60 │  19 │
├─────┼─────┼─────┼─────┤
│  25 │  69 │  63 │  19 │
├─────┼─────┼─────┼─────┤
│  21 │  42 │  21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = 63 (from PE[1][1])
  PE[0][2]: partial_in = 60 (from PE[1][2])
  PE[0][3]: partial_in = 19 (from PE[1][3])
  PE[1][0]: partial_in = 25 (from PE[2][0])
  PE[1][1]: partial_in = 69 (from PE[2][1])
  PE[1][2]: partial_in = 63 (from PE[2][2])
  PE[1][3]: partial_in = 19 (from PE[2][3])
  PE[2][0]: partial_in = 21 (from PE[3][0])
  PE[2][1]: partial_in = 42 (from PE[3][1])
  PE[2][2]: partial_in = 21 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=22 -> result=22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=63 -> result=63
  PE[0][2]: input=0 * weight=0 = 0, partial_in=60 -> result=60
  PE[0][3]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=25 -> result=25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=69 -> result=69
  PE[1][2]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][3]: input=0 * weight=2 = 0, partial_in=19 -> result=19
  PE[2][0]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[2][1]: input=0 * weight=1 = 0, partial_in=42 -> result=42
  PE[2][2]: input=0 * weight=2 = 0, partial_in=21 -> result=21
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       22       63       60       19 
  Row 1:       25       69       63       19 
  Row 2:       21       42       21        0 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  63 │  60 │  19 │
├─────┼─────┼─────┼─────┤
│  25 │  69 │  63 │  19 │
├─────┼─────┼─────┼─────┤
│  21 │  42 │  21 │   0 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       22       63       60       19 
Row 1:       25       69       63       19 
Row 2:       21       42       21        0 
Row 3:       22       44       22        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 22 -> clamp(22) -> final(150)
  PE[0][1]: 63 -> clamp(63) -> final(191)
  PE[0][2]: 60 -> clamp(60) -> final(188)
  PE[0][3]: 19 -> clamp(19) -> final(147)
  PE[1][0]: 25 -> clamp(25) -> final(153)
  PE[1][1]: 69 -> clamp(69) -> final(197)
  PE[1][2]: 63 -> clamp(63) -> final(191)
  PE[1][3]: 19 -> clamp(19) -> final(147)
  PE[2][0]: 21 -> clamp(21) -> final(149)
  PE[2][1]: 42 -> clamp(42) -> final(170)
  PE[2][2]: 21 -> clamp(21) -> final(149)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 22 -> clamp(22) -> final(150)
  PE[3][1]: 44 -> clamp(44) -> final(172)
  PE[3][2]: 22 -> clamp(22) -> final(150)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   150    191    188    147 
   153    197    191    147 
   149    170    149    128 
   150    172    150    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   6   -6  -73 -108 
   8   -7  -78 -105 
  13  -13  -90 -105 
  18  -26 -105 -108 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 6
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=6 * weight=-2 = -12, partial_in=0 -> result=-12
  PE[0][1]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[0][2]: input=6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -12       -6        0        6 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  -6 │   0 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -6
  Row 1: input_block[1][0] = 8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-6 * weight=-2 = 12, partial_in=0 -> result=12
  PE[0][1]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[0][2]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][3]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       12        6        0       -6 
  Row 1:       -8        8        8       16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │   6 │   0 │  -6 │
├─────┼─────┼─────┼─────┤
│  -8 │   8 │   8 │  16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -73
  Row 1: input_block[1][1] = -7
  Row 2: input_block[2][0] = 13
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 8 (from PE[1][1])
  PE[0][2]: partial_in = 8 (from PE[1][2])
  PE[0][3]: partial_in = 16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-73 * weight=-2 = 146, partial_in=-8 -> result=138
  PE[0][1]: input=-73 * weight=-1 = 73, partial_in=8 -> result=81
  PE[0][2]: input=-73 * weight=0 = 0, partial_in=8 -> result=8
  PE[0][3]: input=-73 * weight=1 = -73, partial_in=16 -> result=-57
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][0]: input=13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[2][2]: input=13 * weight=2 = 26, partial_in=0 -> result=26
  PE[2][3]: input=13 * weight=1 = 13, partial_in=0 -> result=13
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      138       81        8      -57 
  Row 1:        7       -7       -7      -14 
  Row 2:        0       13       26       13 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 138 │  81 │   8 │ -57 │
├─────┼─────┼─────┼─────┤
│   7 │  -7 │  -7 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │  13 │  26 │  13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -108
  Row 1: input_block[1][2] = -78
  Row 2: input_block[2][1] = -13
  Row 3: input_block[3][0] = 18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = -7 (from PE[1][1])
  PE[0][2]: partial_in = -7 (from PE[1][2])
  PE[0][3]: partial_in = -14 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 13 (from PE[2][1])
  PE[1][2]: partial_in = 26 (from PE[2][2])
  PE[1][3]: partial_in = 13 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-108 * weight=-2 = 216, partial_in=7 -> result=223
  PE[0][1]: input=-108 * weight=-1 = 108, partial_in=-7 -> result=101
  PE[0][2]: input=-108 * weight=0 = 0, partial_in=-7 -> result=-7
  PE[0][3]: input=-108 * weight=1 = -108, partial_in=-14 -> result=-122
  PE[1][0]: input=-78 * weight=-1 = 78, partial_in=0 -> result=78
  PE[1][1]: input=-78 * weight=1 = -78, partial_in=13 -> result=-65
  PE[1][2]: input=-78 * weight=1 = -78, partial_in=26 -> result=-52
  PE[1][3]: input=-78 * weight=2 = -156, partial_in=13 -> result=-143
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][1]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[3][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][3]: input=18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      223      101       -7     -122 
  Row 1:       78      -65      -52     -143 
  Row 2:        0      -13      -26      -13 
  Row 3:       18       36       18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 223 │ 101 │  -7 │-122 │
├─────┼─────┼─────┼─────┤
│  78 │ -65 │ -52 │-143 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -105
  Row 2: input_block[2][2] = -90
  Row 3: input_block[3][1] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 78 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -52 (from PE[1][2])
  PE[0][3]: partial_in = -143 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = 18 (from PE[3][0])
  PE[2][1]: partial_in = 36 (from PE[3][1])
  PE[2][2]: partial_in = 18 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=78 -> result=78
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-52 -> result=-52
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][0]: input=-105 * weight=-1 = 105, partial_in=0 -> result=105
  PE[1][1]: input=-105 * weight=1 = -105, partial_in=-13 -> result=-118
  PE[1][2]: input=-105 * weight=1 = -105, partial_in=-26 -> result=-131
  PE[1][3]: input=-105 * weight=2 = -210, partial_in=-13 -> result=-223
  PE[2][0]: input=-90 * weight=0 = 0, partial_in=18 -> result=18
  PE[2][1]: input=-90 * weight=1 = -90, partial_in=36 -> result=-54
  PE[2][2]: input=-90 * weight=2 = -180, partial_in=18 -> result=-162
  PE[2][3]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       78      -65      -52     -143 
  Row 1:      105     -118     -131     -223 
  Row 2:       18      -54     -162      -90 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │ -65 │ -52 │-143 │
├─────┼─────┼─────┼─────┤
│ 105 │-118 │-131 │-223 │
├─────┼─────┼─────┼─────┤
│  18 │ -54 │-162 │ -90 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -105
  Row 3: input_block[3][2] = -105

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 105 (from PE[1][0])
  PE[0][1]: partial_in = -118 (from PE[1][1])
  PE[0][2]: partial_in = -131 (from PE[1][2])
  PE[0][3]: partial_in = -223 (from PE[1][3])
  PE[1][0]: partial_in = 18 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -162 (from PE[2][2])
  PE[1][3]: partial_in = -90 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=105 -> result=105
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-118 -> result=-118
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-131 -> result=-131
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-223 -> result=-223
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=18 -> result=18
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-90 -> result=-90
  PE[2][0]: input=-105 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-105 * weight=1 = -105, partial_in=-52 -> result=-157
  PE[2][2]: input=-105 * weight=2 = -210, partial_in=-26 -> result=-236
  PE[2][3]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][0]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][1]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[3][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][3]: input=-105 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      105     -118     -131     -223 
  Row 1:       18      -54     -162      -90 
  Row 2:      -26     -157     -236     -105 
  Row 3:     -105     -210     -105        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 105 │-118 │-131 │-223 │
├─────┼─────┼─────┼─────┤
│  18 │ -54 │-162 │ -90 │
├─────┼─────┼─────┼─────┤
│ -26 │-157 │-236 │-105 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -108

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 18 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -162 (from PE[1][2])
  PE[0][3]: partial_in = -90 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -157 (from PE[2][1])
  PE[1][2]: partial_in = -236 (from PE[2][2])
  PE[1][3]: partial_in = -105 (from PE[2][3])
  PE[2][0]: partial_in = -105 (from PE[3][0])
  PE[2][1]: partial_in = -210 (from PE[3][1])
  PE[2][2]: partial_in = -105 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=18 -> result=18
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-54 -> result=-54
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-162 -> result=-162
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-157 -> result=-157
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-236 -> result=-236
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-105 -> result=-105
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-210 -> result=-210
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-105 -> result=-105
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-108 * weight=1 = -108, partial_in=0 -> result=-108
  PE[3][1]: input=-108 * weight=2 = -216, partial_in=0 -> result=-216
  PE[3][2]: input=-108 * weight=1 = -108, partial_in=0 -> result=-108
  PE[3][3]: input=-108 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       18      -54     -162      -90 
  Row 1:      -26     -157     -236     -105 
  Row 2:     -105     -210     -105        0 
  Row 3:     -108     -216     -108        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │ -54 │-162 │ -90 │
├─────┼─────┼─────┼─────┤
│ -26 │-157 │-236 │-105 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
├─────┼─────┼─────┼─────┤
│-108 │-216 │-108 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       18      -54     -162      -90 
Row 1:      -26     -157     -236     -105 
Row 2:     -105     -210     -105        0 
Row 3:     -108     -216     -108        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 18 -> clamp(18) -> final(146)
  PE[0][1]: -54 -> clamp(-54) -> final(74)
  PE[0][2]: -162 -> clamp(-128) -> final(0)
  PE[0][3]: -90 -> clamp(-90) -> final(38)
  PE[1][0]: -26 -> clamp(-26) -> final(102)
  PE[1][1]: -157 -> clamp(-128) -> final(0)
  PE[1][2]: -236 -> clamp(-128) -> final(0)
  PE[1][3]: -105 -> clamp(-105) -> final(23)
  PE[2][0]: -105 -> clamp(-105) -> final(23)
  PE[2][1]: -210 -> clamp(-128) -> final(0)
  PE[2][2]: -105 -> clamp(-105) -> final(23)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -108 -> clamp(-108) -> final(20)
  PE[3][1]: -216 -> clamp(-128) -> final(0)
  PE[3][2]: -108 -> clamp(-108) -> final(20)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   146     74      0     38 
   102      0      0     23 
    23      0     23    128 
    20      0     20    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-104  -56  -46  -25 
-105  -71  -51  -29 
-106  -91  -57  -35 
-103 -102  -60  -39 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -104
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-104 * weight=-2 = 208, partial_in=0 -> result=208
  PE[0][1]: input=-104 * weight=-1 = 104, partial_in=0 -> result=104
  PE[0][2]: input=-104 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      208      104        0     -104 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 208 │ 104 │   0 │-104 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -56
  Row 1: input_block[1][0] = -105
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-56 * weight=-2 = 112, partial_in=0 -> result=112
  PE[0][1]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[0][2]: input=-56 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[1][0]: input=-105 * weight=-1 = 105, partial_in=0 -> result=105
  PE[1][1]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[1][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[1][3]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      112       56        0      -56 
  Row 1:      105     -105     -105     -210 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 112 │  56 │   0 │ -56 │
├─────┼─────┼─────┼─────┤
│ 105 │-105 │-105 │-210 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -46
  Row 1: input_block[1][1] = -71
  Row 2: input_block[2][0] = -106
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 105 (from PE[1][0])
  PE[0][1]: partial_in = -105 (from PE[1][1])
  PE[0][2]: partial_in = -105 (from PE[1][2])
  PE[0][3]: partial_in = -210 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=105 -> result=197
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=-105 -> result=-59
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=-210 -> result=-256
  PE[1][0]: input=-71 * weight=-1 = 71, partial_in=0 -> result=71
  PE[1][1]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[1][2]: input=-71 * weight=1 = -71, partial_in=0 -> result=-71
  PE[1][3]: input=-71 * weight=2 = -142, partial_in=0 -> result=-142
  PE[2][0]: input=-106 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[2][2]: input=-106 * weight=2 = -212, partial_in=0 -> result=-212
  PE[2][3]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      197      -59     -105     -256 
  Row 1:       71      -71      -71     -142 
  Row 2:        0     -106     -212     -106 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 197 │ -59 │-105 │-256 │
├─────┼─────┼─────┼─────┤
│  71 │ -71 │ -71 │-142 │
├─────┼─────┼─────┼─────┤
│   0 │-106 │-212 │-106 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -25
  Row 1: input_block[1][2] = -51
  Row 2: input_block[2][1] = -91
  Row 3: input_block[3][0] = -103

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 71 (from PE[1][0])
  PE[0][1]: partial_in = -71 (from PE[1][1])
  PE[0][2]: partial_in = -71 (from PE[1][2])
  PE[0][3]: partial_in = -142 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -106 (from PE[2][1])
  PE[1][2]: partial_in = -212 (from PE[2][2])
  PE[1][3]: partial_in = -106 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=71 -> result=121
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=-71 -> result=-46
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=-71 -> result=-71
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=-142 -> result=-167
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=-106 -> result=-157
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=-212 -> result=-263
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=-106 -> result=-208
  PE[2][0]: input=-91 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[2][2]: input=-91 * weight=2 = -182, partial_in=0 -> result=-182
  PE[2][3]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][0]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][1]: input=-103 * weight=2 = -206, partial_in=0 -> result=-206
  PE[3][2]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][3]: input=-103 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      121      -46      -71     -167 
  Row 1:       51     -157     -263     -208 
  Row 2:        0      -91     -182      -91 
  Row 3:     -103     -206     -103        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 121 │ -46 │ -71 │-167 │
├─────┼─────┼─────┼─────┤
│  51 │-157 │-263 │-208 │
├─────┼─────┼─────┼─────┤
│   0 │ -91 │-182 │ -91 │
├─────┼─────┼─────┼─────┤
│-103 │-206 │-103 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -29
  Row 2: input_block[2][2] = -57
  Row 3: input_block[3][1] = -102

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -157 (from PE[1][1])
  PE[0][2]: partial_in = -263 (from PE[1][2])
  PE[0][3]: partial_in = -208 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -91 (from PE[2][1])
  PE[1][2]: partial_in = -182 (from PE[2][2])
  PE[1][3]: partial_in = -91 (from PE[2][3])
  PE[2][0]: partial_in = -103 (from PE[3][0])
  PE[2][1]: partial_in = -206 (from PE[3][1])
  PE[2][2]: partial_in = -103 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=51 -> result=51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-157 -> result=-157
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-263 -> result=-263
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-208 -> result=-208
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=-91 -> result=-120
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=-182 -> result=-211
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=-91 -> result=-149
  PE[2][0]: input=-57 * weight=0 = 0, partial_in=-103 -> result=-103
  PE[2][1]: input=-57 * weight=1 = -57, partial_in=-206 -> result=-263
  PE[2][2]: input=-57 * weight=2 = -114, partial_in=-103 -> result=-217
  PE[2][3]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][0]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[3][1]: input=-102 * weight=2 = -204, partial_in=0 -> result=-204
  PE[3][2]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[3][3]: input=-102 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       51     -157     -263     -208 
  Row 1:       29     -120     -211     -149 
  Row 2:     -103     -263     -217      -57 
  Row 3:     -102     -204     -102        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  51 │-157 │-263 │-208 │
├─────┼─────┼─────┼─────┤
│  29 │-120 │-211 │-149 │
├─────┼─────┼─────┼─────┤
│-103 │-263 │-217 │ -57 │
├─────┼─────┼─────┼─────┤
│-102 │-204 │-102 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -35
  Row 3: input_block[3][2] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -120 (from PE[1][1])
  PE[0][2]: partial_in = -211 (from PE[1][2])
  PE[0][3]: partial_in = -149 (from PE[1][3])
  PE[1][0]: partial_in = -103 (from PE[2][0])
  PE[1][1]: partial_in = -263 (from PE[2][1])
  PE[1][2]: partial_in = -217 (from PE[2][2])
  PE[1][3]: partial_in = -57 (from PE[2][3])
  PE[2][0]: partial_in = -102 (from PE[3][0])
  PE[2][1]: partial_in = -204 (from PE[3][1])
  PE[2][2]: partial_in = -102 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-120 -> result=-120
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-211 -> result=-211
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-149 -> result=-149
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-103 -> result=-103
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-263 -> result=-263
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-217 -> result=-217
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-57 -> result=-57
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=-102 -> result=-102
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=-204 -> result=-239
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=-102 -> result=-172
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       29     -120     -211     -149 
  Row 1:     -103     -263     -217      -57 
  Row 2:     -102     -239     -172      -35 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │-120 │-211 │-149 │
├─────┼─────┼─────┼─────┤
│-103 │-263 │-217 │ -57 │
├─────┼─────┼─────┼─────┤
│-102 │-239 │-172 │ -35 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -103 (from PE[1][0])
  PE[0][1]: partial_in = -263 (from PE[1][1])
  PE[0][2]: partial_in = -217 (from PE[1][2])
  PE[0][3]: partial_in = -57 (from PE[1][3])
  PE[1][0]: partial_in = -102 (from PE[2][0])
  PE[1][1]: partial_in = -239 (from PE[2][1])
  PE[1][2]: partial_in = -172 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -60 (from PE[3][0])
  PE[2][1]: partial_in = -120 (from PE[3][1])
  PE[2][2]: partial_in = -60 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-103 -> result=-103
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-263 -> result=-263
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-217 -> result=-217
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-102 -> result=-102
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-239 -> result=-239
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-172 -> result=-172
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-120 -> result=-120
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-60 -> result=-60
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -103     -263     -217      -57 
  Row 1:     -102     -239     -172      -35 
  Row 2:      -60     -120      -60        0 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-103 │-263 │-217 │ -57 │
├─────┼─────┼─────┼─────┤
│-102 │-239 │-172 │ -35 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -103     -263     -217      -57 
Row 1:     -102     -239     -172      -35 
Row 2:      -60     -120      -60        0 
Row 3:      -39      -78      -39        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -103 -> clamp(-103) -> final(25)
  PE[0][1]: -263 -> clamp(-128) -> final(0)
  PE[0][2]: -217 -> clamp(-128) -> final(0)
  PE[0][3]: -57 -> clamp(-57) -> final(71)
  PE[1][0]: -102 -> clamp(-102) -> final(26)
  PE[1][1]: -239 -> clamp(-128) -> final(0)
  PE[1][2]: -172 -> clamp(-128) -> final(0)
  PE[1][3]: -35 -> clamp(-35) -> final(93)
  PE[2][0]: -60 -> clamp(-60) -> final(68)
  PE[2][1]: -120 -> clamp(-120) -> final(8)
  PE[2][2]: -60 -> clamp(-60) -> final(68)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -39 -> clamp(-39) -> final(89)
  PE[3][1]: -78 -> clamp(-78) -> final(50)
  PE[3][2]: -39 -> clamp(-39) -> final(89)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    25      0      0     71 
    26      0      0     93 
    68      8     68    128 
    89     50     89    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -25  -44  -28  -14 
 -27  -39  -31  -21 
 -31  -33  -36  -31 
 -35  -28  -40  -40 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -25
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=0 -> result=50
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       50       25        0      -25 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  25 │   0 │ -25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -44
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=0 -> result=88
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       88       44        0      -44 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  88 │  44 │   0 │ -44 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -28
  Row 1: input_block[1][1] = -39
  Row 2: input_block[2][0] = -31
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=27 -> result=83
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=-27 -> result=1
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=-54 -> result=-82
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       83        1      -27      -82 
  Row 1:       39      -39      -39      -78 
  Row 2:        0      -31      -62      -31 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  83 │   1 │ -27 │ -82 │
├─────┼─────┼─────┼─────┤
│  39 │ -39 │ -39 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │ -31 │ -62 │ -31 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -14
  Row 1: input_block[1][2] = -31
  Row 2: input_block[2][1] = -33
  Row 3: input_block[3][0] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -39 (from PE[1][2])
  PE[0][3]: partial_in = -78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -31 (from PE[2][1])
  PE[1][2]: partial_in = -62 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=39 -> result=67
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=-39 -> result=-25
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=-78 -> result=-92
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=-31 -> result=-62
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=-62 -> result=-93
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=-31 -> result=-93
  PE[2][0]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[2][2]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[2][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       67      -25      -39      -92 
  Row 1:       31      -62      -93      -93 
  Row 2:        0      -33      -66      -33 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  67 │ -25 │ -39 │ -92 │
├─────┼─────┼─────┼─────┤
│  31 │ -62 │ -93 │ -93 │
├─────┼─────┼─────┼─────┤
│   0 │ -33 │ -66 │ -33 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -21
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -93 (from PE[1][2])
  PE[0][3]: partial_in = -93 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -33 (from PE[2][1])
  PE[1][2]: partial_in = -66 (from PE[2][2])
  PE[1][3]: partial_in = -33 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-93 -> result=-93
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=-33 -> result=-54
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=-66 -> result=-87
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=-33 -> result=-75
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-70 -> result=-106
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-35 -> result=-107
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       31      -62      -93      -93 
  Row 1:       21      -54      -87      -75 
  Row 2:      -35     -106     -107      -36 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │ -62 │ -93 │ -93 │
├─────┼─────┼─────┼─────┤
│  21 │ -54 │ -87 │ -75 │
├─────┼─────┼─────┼─────┤
│ -35 │-106 │-107 │ -36 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -31
  Row 3: input_block[3][2] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -87 (from PE[1][2])
  PE[0][3]: partial_in = -75 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -106 (from PE[2][1])
  PE[1][2]: partial_in = -107 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=21 -> result=21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-54 -> result=-54
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-87 -> result=-87
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-75 -> result=-75
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-106 -> result=-106
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-107 -> result=-107
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-31 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-31 * weight=1 = -31, partial_in=-56 -> result=-87
  PE[2][2]: input=-31 * weight=2 = -62, partial_in=-28 -> result=-90
  PE[2][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       21      -54      -87      -75 
  Row 1:      -35     -106     -107      -36 
  Row 2:      -28      -87      -90      -31 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  21 │ -54 │ -87 │ -75 │
├─────┼─────┼─────┼─────┤
│ -35 │-106 │-107 │ -36 │
├─────┼─────┼─────┼─────┤
│ -28 │ -87 │ -90 │ -31 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = -106 (from PE[1][1])
  PE[0][2]: partial_in = -107 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -87 (from PE[2][1])
  PE[1][2]: partial_in = -90 (from PE[2][2])
  PE[1][3]: partial_in = -31 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-35 -> result=-35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-106 -> result=-106
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-107 -> result=-107
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-87 -> result=-87
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-90 -> result=-90
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -35     -106     -107      -36 
  Row 1:      -28      -87      -90      -31 
  Row 2:      -40      -80      -40        0 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -35 │-106 │-107 │ -36 │
├─────┼─────┼─────┼─────┤
│ -28 │ -87 │ -90 │ -31 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -35     -106     -107      -36 
Row 1:      -28      -87      -90      -31 
Row 2:      -40      -80      -40        0 
Row 3:      -40      -80      -40        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -35 -> clamp(-35) -> final(93)
  PE[0][1]: -106 -> clamp(-106) -> final(22)
  PE[0][2]: -107 -> clamp(-107) -> final(21)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: -28 -> clamp(-28) -> final(100)
  PE[1][1]: -87 -> clamp(-87) -> final(41)
  PE[1][2]: -90 -> clamp(-90) -> final(38)
  PE[1][3]: -31 -> clamp(-31) -> final(97)
  PE[2][0]: -40 -> clamp(-40) -> final(88)
  PE[2][1]: -80 -> clamp(-80) -> final(48)
  PE[2][2]: -40 -> clamp(-40) -> final(88)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -40 -> clamp(-40) -> final(88)
  PE[3][1]: -80 -> clamp(-80) -> final(48)
  PE[3][2]: -40 -> clamp(-40) -> final(88)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    93     22     21     92 
   100     41     38     97 
    88     48     88    128 
    88     48     88    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -33  -30   -8   -7 
 -30  -30  -16  -10 
 -25  -29  -28  -16 
 -22  -28  -38  -21 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -33
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-33 * weight=-2 = 66, partial_in=0 -> result=66
  PE[0][1]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[0][2]: input=-33 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       66       33        0      -33 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  66 │  33 │   0 │ -33 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -30
  Row 1: input_block[1][0] = -30
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       60       30        0      -30 
  Row 1:       30      -30      -30      -60 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│  30 │ -30 │ -30 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -8
  Row 1: input_block[1][1] = -30
  Row 2: input_block[2][0] = -25
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=30 -> result=46
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=-30 -> result=-22
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=-60 -> result=-68
  PE[1][0]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[1][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][3]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       46      -22      -30      -68 
  Row 1:       30      -30      -30      -60 
  Row 2:        0      -25      -50      -25 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │ -22 │ -30 │ -68 │
├─────┼─────┼─────┼─────┤
│  30 │ -30 │ -30 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │ -25 │ -50 │ -25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -7
  Row 1: input_block[1][2] = -16
  Row 2: input_block[2][1] = -29
  Row 3: input_block[3][0] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 30 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -30 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=30 -> result=44
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=-30 -> result=-23
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=-60 -> result=-67
  PE[1][0]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[1][1]: input=-16 * weight=1 = -16, partial_in=-25 -> result=-41
  PE[1][2]: input=-16 * weight=1 = -16, partial_in=-50 -> result=-66
  PE[1][3]: input=-16 * weight=2 = -32, partial_in=-25 -> result=-57
  PE[2][0]: input=-29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[2][2]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][3]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       44      -23      -30      -67 
  Row 1:       16      -41      -66      -57 
  Row 2:        0      -29      -58      -29 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │ -23 │ -30 │ -67 │
├─────┼─────┼─────┼─────┤
│  16 │ -41 │ -66 │ -57 │
├─────┼─────┼─────┼─────┤
│   0 │ -29 │ -58 │ -29 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -10
  Row 2: input_block[2][2] = -28
  Row 3: input_block[3][1] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = -41 (from PE[1][1])
  PE[0][2]: partial_in = -66 (from PE[1][2])
  PE[0][3]: partial_in = -57 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -29 (from PE[2][1])
  PE[1][2]: partial_in = -58 (from PE[2][2])
  PE[1][3]: partial_in = -29 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=16 -> result=16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-41 -> result=-41
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=-29 -> result=-39
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=-58 -> result=-68
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=-29 -> result=-49
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=-44 -> result=-72
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=-22 -> result=-78
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       16      -41      -66      -57 
  Row 1:       10      -39      -68      -49 
  Row 2:      -22      -72      -78      -28 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │ -41 │ -66 │ -57 │
├─────┼─────┼─────┼─────┤
│  10 │ -39 │ -68 │ -49 │
├─────┼─────┼─────┼─────┤
│ -22 │ -72 │ -78 │ -28 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -16
  Row 3: input_block[3][2] = -38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -49 (from PE[1][3])
  PE[1][0]: partial_in = -22 (from PE[2][0])
  PE[1][1]: partial_in = -72 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-39 -> result=-39
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-49 -> result=-49
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-78 -> result=-78
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-28 -> result=-28
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=-56 -> result=-72
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=-28 -> result=-60
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][1]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[3][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][3]: input=-38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       10      -39      -68      -49 
  Row 1:      -22      -72      -78      -28 
  Row 2:      -28      -72      -60      -16 
  Row 3:      -38      -76      -38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │ -39 │ -68 │ -49 │
├─────┼─────┼─────┼─────┤
│ -22 │ -72 │ -78 │ -28 │
├─────┼─────┼─────┼─────┤
│ -28 │ -72 │ -60 │ -16 │
├─────┼─────┼─────┼─────┤
│ -38 │ -76 │ -38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -21

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = -72 (from PE[1][1])
  PE[0][2]: partial_in = -78 (from PE[1][2])
  PE[0][3]: partial_in = -28 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -72 (from PE[2][1])
  PE[1][2]: partial_in = -60 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = -38 (from PE[3][0])
  PE[2][1]: partial_in = -76 (from PE[3][1])
  PE[2][2]: partial_in = -38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-22 -> result=-22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-72 -> result=-72
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-78 -> result=-78
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-28 -> result=-28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-76 -> result=-76
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][1]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[3][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[3][3]: input=-21 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -22      -72      -78      -28 
  Row 1:      -28      -72      -60      -16 
  Row 2:      -38      -76      -38        0 
  Row 3:      -21      -42      -21        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │ -72 │ -78 │ -28 │
├─────┼─────┼─────┼─────┤
│ -28 │ -72 │ -60 │ -16 │
├─────┼─────┼─────┼─────┤
│ -38 │ -76 │ -38 │   0 │
├─────┼─────┼─────┼─────┤
│ -21 │ -42 │ -21 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -22      -72      -78      -28 
Row 1:      -28      -72      -60      -16 
Row 2:      -38      -76      -38        0 
Row 3:      -21      -42      -21        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -22 -> clamp(-22) -> final(106)
  PE[0][1]: -72 -> clamp(-72) -> final(56)
  PE[0][2]: -78 -> clamp(-78) -> final(50)
  PE[0][3]: -28 -> clamp(-28) -> final(100)
  PE[1][0]: -28 -> clamp(-28) -> final(100)
  PE[1][1]: -72 -> clamp(-72) -> final(56)
  PE[1][2]: -60 -> clamp(-60) -> final(68)
  PE[1][3]: -16 -> clamp(-16) -> final(112)
  PE[2][0]: -38 -> clamp(-38) -> final(90)
  PE[2][1]: -76 -> clamp(-76) -> final(52)
  PE[2][2]: -38 -> clamp(-38) -> final(90)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -21 -> clamp(-21) -> final(107)
  PE[3][1]: -42 -> clamp(-42) -> final(86)
  PE[3][2]: -21 -> clamp(-21) -> final(107)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   106     56     50    100 
   100     56     68    112 
    90     52     90    128 
   107     86    107    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -10  -28  -40  -34 
 -10  -29  -43  -40 
  -6  -25  -40  -38 
  -9  -28  -40  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -10
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-10 * weight=-2 = 20, partial_in=0 -> result=20
  PE[0][1]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[0][2]: input=-10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       20       10        0      -10 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  10 │   0 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -28
  Row 1: input_block[1][0] = -10
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=0 -> result=56
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       56       28        0      -28 
  Row 1:       10      -10      -10      -20 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │  28 │   0 │ -28 │
├─────┼─────┼─────┼─────┤
│  10 │ -10 │ -10 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -40
  Row 1: input_block[1][1] = -29
  Row 2: input_block[2][0] = -6
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = -10 (from PE[1][1])
  PE[0][2]: partial_in = -10 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=10 -> result=90
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=-10 -> result=30
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=-20 -> result=-60
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       90       30      -10      -60 
  Row 1:       29      -29      -29      -58 
  Row 2:        0       -6      -12       -6 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │  30 │ -10 │ -60 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │  -6 │ -12 │  -6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -34
  Row 1: input_block[1][2] = -43
  Row 2: input_block[2][1] = -25
  Row 3: input_block[3][0] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -6 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=29 -> result=97
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-29 -> result=5
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-58 -> result=-92
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=-6 -> result=-49
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=-12 -> result=-55
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=-6 -> result=-92
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       97        5      -29      -92 
  Row 1:       43      -49      -55      -92 
  Row 2:        0      -25      -50      -25 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  97 │   5 │ -29 │ -92 │
├─────┼─────┼─────┼─────┤
│  43 │ -49 │ -55 │ -92 │
├─────┼─────┼─────┼─────┤
│   0 │ -25 │ -50 │ -25 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -40
  Row 2: input_block[2][2] = -40
  Row 3: input_block[3][1] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -49 (from PE[1][1])
  PE[0][2]: partial_in = -55 (from PE[1][2])
  PE[0][3]: partial_in = -92 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = -9 (from PE[3][0])
  PE[2][1]: partial_in = -18 (from PE[3][1])
  PE[2][2]: partial_in = -9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=43 -> result=43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-49 -> result=-49
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-55 -> result=-55
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=-25 -> result=-65
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=-50 -> result=-90
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=-25 -> result=-105
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=-18 -> result=-58
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=-9 -> result=-89
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       43      -49      -55      -92 
  Row 1:       40      -65      -90     -105 
  Row 2:       -9      -58      -89      -40 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │ -49 │ -55 │ -92 │
├─────┼─────┼─────┼─────┤
│  40 │ -65 │ -90 │-105 │
├─────┼─────┼─────┼─────┤
│  -9 │ -58 │ -89 │ -40 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = -65 (from PE[1][1])
  PE[0][2]: partial_in = -90 (from PE[1][2])
  PE[0][3]: partial_in = -105 (from PE[1][3])
  PE[1][0]: partial_in = -9 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -89 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-65 -> result=-65
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-105 -> result=-105
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-56 -> result=-94
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-28 -> result=-104
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][1]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[3][2]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][3]: input=-40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       40      -65      -90     -105 
  Row 1:       -9      -58      -89      -40 
  Row 2:      -28      -94     -104      -38 
  Row 3:      -40      -80      -40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ -65 │ -90 │-105 │
├─────┼─────┼─────┼─────┤
│  -9 │ -58 │ -89 │ -40 │
├─────┼─────┼─────┼─────┤
│ -28 │ -94 │-104 │ -38 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = -58 (from PE[1][1])
  PE[0][2]: partial_in = -89 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -94 (from PE[2][1])
  PE[1][2]: partial_in = -104 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -40 (from PE[3][0])
  PE[2][1]: partial_in = -80 (from PE[3][1])
  PE[2][2]: partial_in = -40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-9 -> result=-9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-89 -> result=-89
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-40 -> result=-40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-104 -> result=-104
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-40 -> result=-40
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -9      -58      -89      -40 
  Row 1:      -28      -94     -104      -38 
  Row 2:      -40      -80      -40        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -9 │ -58 │ -89 │ -40 │
├─────┼─────┼─────┼─────┤
│ -28 │ -94 │-104 │ -38 │
├─────┼─────┼─────┼─────┤
│ -40 │ -80 │ -40 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -9      -58      -89      -40 
Row 1:      -28      -94     -104      -38 
Row 2:      -40      -80      -40        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -9 -> clamp(-9) -> final(119)
  PE[0][1]: -58 -> clamp(-58) -> final(70)
  PE[0][2]: -89 -> clamp(-89) -> final(39)
  PE[0][3]: -40 -> clamp(-40) -> final(88)
  PE[1][0]: -28 -> clamp(-28) -> final(100)
  PE[1][1]: -94 -> clamp(-94) -> final(34)
  PE[1][2]: -104 -> clamp(-104) -> final(24)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -40 -> clamp(-40) -> final(88)
  PE[2][1]: -80 -> clamp(-80) -> final(48)
  PE[2][2]: -40 -> clamp(-40) -> final(88)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   119     70     39     88 
   100     34     24     90 
    88     48     88    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -25  -22  -19  -15 
 -32  -28  -25  -20 
 -30  -26  -22  -17 
 -25  -20  -16  -10 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -25
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-25 * weight=-2 = 50, partial_in=0 -> result=50
  PE[0][1]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[0][2]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       50       25        0      -25 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │  25 │   0 │ -25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -22
  Row 1: input_block[1][0] = -32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       44       22        0      -22 
  Row 1:       32      -32      -32      -64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│  32 │ -32 │ -32 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -19
  Row 1: input_block[1][1] = -28
  Row 2: input_block[2][0] = -30
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-19 * weight=-2 = 38, partial_in=32 -> result=70
  PE[0][1]: input=-19 * weight=-1 = 19, partial_in=-32 -> result=-13
  PE[0][2]: input=-19 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=-19 * weight=1 = -19, partial_in=-64 -> result=-83
  PE[1][0]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[1][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][3]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][0]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[2][2]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[2][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       70      -13      -32      -83 
  Row 1:       28      -28      -28      -56 
  Row 2:        0      -30      -60      -30 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │ -13 │ -32 │ -83 │
├─────┼─────┼─────┼─────┤
│  28 │ -28 │ -28 │ -56 │
├─────┼─────┼─────┼─────┤
│   0 │ -30 │ -60 │ -30 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -15
  Row 1: input_block[1][2] = -25
  Row 2: input_block[2][1] = -26
  Row 3: input_block[3][0] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 28 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -28 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -30 (from PE[2][1])
  PE[1][2]: partial_in = -60 (from PE[2][2])
  PE[1][3]: partial_in = -30 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=28 -> result=58
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=-28 -> result=-13
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=-56 -> result=-71
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=-30 -> result=-55
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=-60 -> result=-85
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=-30 -> result=-80
  PE[2][0]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[2][2]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[2][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       58      -13      -28      -71 
  Row 1:       25      -55      -85      -80 
  Row 2:        0      -26      -52      -26 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │ -13 │ -28 │ -71 │
├─────┼─────┼─────┼─────┤
│  25 │ -55 │ -85 │ -80 │
├─────┼─────┼─────┼─────┤
│   0 │ -26 │ -52 │ -26 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -20
  Row 2: input_block[2][2] = -22
  Row 3: input_block[3][1] = -20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = -85 (from PE[1][2])
  PE[0][3]: partial_in = -80 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -26 (from PE[2][1])
  PE[1][2]: partial_in = -52 (from PE[2][2])
  PE[1][3]: partial_in = -26 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=25 -> result=25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-85 -> result=-85
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=-26 -> result=-46
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=-52 -> result=-72
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=-26 -> result=-66
  PE[2][0]: input=-22 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-22 * weight=1 = -22, partial_in=-50 -> result=-72
  PE[2][2]: input=-22 * weight=2 = -44, partial_in=-25 -> result=-69
  PE[2][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][0]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][1]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[3][2]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][3]: input=-20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       25      -55      -85      -80 
  Row 1:       20      -46      -72      -66 
  Row 2:      -25      -72      -69      -22 
  Row 3:      -20      -40      -20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  25 │ -55 │ -85 │ -80 │
├─────┼─────┼─────┼─────┤
│  20 │ -46 │ -72 │ -66 │
├─────┼─────┼─────┼─────┤
│ -25 │ -72 │ -69 │ -22 │
├─────┼─────┼─────┼─────┤
│ -20 │ -40 │ -20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -17
  Row 3: input_block[3][2] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = -46 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -66 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -72 (from PE[2][1])
  PE[1][2]: partial_in = -69 (from PE[2][2])
  PE[1][3]: partial_in = -22 (from PE[2][3])
  PE[2][0]: partial_in = -20 (from PE[3][0])
  PE[2][1]: partial_in = -40 (from PE[3][1])
  PE[2][2]: partial_in = -20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-46 -> result=-46
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-69 -> result=-69
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-22 -> result=-22
  PE[2][0]: input=-17 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[2][1]: input=-17 * weight=1 = -17, partial_in=-40 -> result=-57
  PE[2][2]: input=-17 * weight=2 = -34, partial_in=-20 -> result=-54
  PE[2][3]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       20      -46      -72      -66 
  Row 1:      -25      -72      -69      -22 
  Row 2:      -20      -57      -54      -17 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -46 │ -72 │ -66 │
├─────┼─────┼─────┼─────┤
│ -25 │ -72 │ -69 │ -22 │
├─────┼─────┼─────┼─────┤
│ -20 │ -57 │ -54 │ -17 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = -72 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = -20 (from PE[2][0])
  PE[1][1]: partial_in = -57 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -17 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-72 -> result=-72
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-22 -> result=-22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-20 -> result=-20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-57 -> result=-57
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-17 -> result=-17
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -25      -72      -69      -22 
  Row 1:      -20      -57      -54      -17 
  Row 2:      -16      -32      -16        0 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │ -72 │ -69 │ -22 │
├─────┼─────┼─────┼─────┤
│ -20 │ -57 │ -54 │ -17 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -25      -72      -69      -22 
Row 1:      -20      -57      -54      -17 
Row 2:      -16      -32      -16        0 
Row 3:      -10      -20      -10        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -25 -> clamp(-25) -> final(103)
  PE[0][1]: -72 -> clamp(-72) -> final(56)
  PE[0][2]: -69 -> clamp(-69) -> final(59)
  PE[0][3]: -22 -> clamp(-22) -> final(106)
  PE[1][0]: -20 -> clamp(-20) -> final(108)
  PE[1][1]: -57 -> clamp(-57) -> final(71)
  PE[1][2]: -54 -> clamp(-54) -> final(74)
  PE[1][3]: -17 -> clamp(-17) -> final(111)
  PE[2][0]: -16 -> clamp(-16) -> final(112)
  PE[2][1]: -32 -> clamp(-32) -> final(96)
  PE[2][2]: -16 -> clamp(-16) -> final(112)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -10 -> clamp(-10) -> final(118)
  PE[3][1]: -20 -> clamp(-20) -> final(108)
  PE[3][2]: -10 -> clamp(-10) -> final(118)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   103     56     59    106 
   108     71     74    111 
   112     96    112    128 
   118    108    118    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -14  -11    1   -1 
 -11   -5    7    3 
 -12   -6    6    3 
 -10   -9    2    8 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -14
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       28       14        0      -14 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -11
  Row 1: input_block[1][0] = -11
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-11 * weight=-2 = 22, partial_in=0 -> result=22
  PE[0][1]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[0][2]: input=-11 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       22       11        0      -11 
  Row 1:       11      -11      -11      -22 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  22 │  11 │   0 │ -11 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 1
  Row 1: input_block[1][1] = -5
  Row 2: input_block[2][0] = -12
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=11 -> result=9
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=-11 -> result=-12
  PE[0][2]: input=1 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=1 * weight=1 = 1, partial_in=-22 -> result=-21
  PE[1][0]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[1][1]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][2]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][3]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=0 -> result=-24
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:        9      -12      -11      -21 
  Row 1:        5       -5       -5      -10 
  Row 2:        0      -12      -24      -12 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   9 │ -12 │ -11 │ -21 │
├─────┼─────┼─────┼─────┤
│   5 │  -5 │  -5 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │ -12 │ -24 │ -12 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -1
  Row 1: input_block[1][2] = 7
  Row 2: input_block[2][1] = -6
  Row 3: input_block[3][0] = -10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = -5 (from PE[1][1])
  PE[0][2]: partial_in = -5 (from PE[1][2])
  PE[0][3]: partial_in = -10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -12 (from PE[2][1])
  PE[1][2]: partial_in = -24 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=5 -> result=7
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=-5 -> result=-4
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=-5 -> result=-5
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=-10 -> result=-11
  PE[1][0]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[1][1]: input=7 * weight=1 = 7, partial_in=-12 -> result=-5
  PE[1][2]: input=7 * weight=1 = 7, partial_in=-24 -> result=-17
  PE[1][3]: input=7 * weight=2 = 14, partial_in=-12 -> result=2
  PE[2][0]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[2][2]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][0]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][1]: input=-10 * weight=2 = -20, partial_in=0 -> result=-20
  PE[3][2]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[3][3]: input=-10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:        7       -4       -5      -11 
  Row 1:       -7       -5      -17        2 
  Row 2:        0       -6      -12       -6 
  Row 3:      -10      -20      -10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │  -4 │  -5 │ -11 │
├─────┼─────┼─────┼─────┤
│  -7 │  -5 │ -17 │   2 │
├─────┼─────┼─────┼─────┤
│   0 │  -6 │ -12 │  -6 │
├─────┼─────┼─────┼─────┤
│ -10 │ -20 │ -10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 3
  Row 2: input_block[2][2] = 6
  Row 3: input_block[3][1] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -7 (from PE[1][0])
  PE[0][1]: partial_in = -5 (from PE[1][1])
  PE[0][2]: partial_in = -17 (from PE[1][2])
  PE[0][3]: partial_in = 2 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -6 (from PE[2][1])
  PE[1][2]: partial_in = -12 (from PE[2][2])
  PE[1][3]: partial_in = -6 (from PE[2][3])
  PE[2][0]: partial_in = -10 (from PE[3][0])
  PE[2][1]: partial_in = -20 (from PE[3][1])
  PE[2][2]: partial_in = -10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-7 -> result=-7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-5 -> result=-5
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[0][3]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-6 -> result=-3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-12 -> result=-9
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-6 -> result=0
  PE[2][0]: input=6 * weight=0 = 0, partial_in=-10 -> result=-10
  PE[2][1]: input=6 * weight=1 = 6, partial_in=-20 -> result=-14
  PE[2][2]: input=6 * weight=2 = 12, partial_in=-10 -> result=2
  PE[2][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -7       -5      -17        2 
  Row 1:       -3       -3       -9        0 
  Row 2:      -10      -14        2        6 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -7 │  -5 │ -17 │   2 │
├─────┼─────┼─────┼─────┤
│  -3 │  -3 │  -9 │   0 │
├─────┼─────┼─────┼─────┤
│ -10 │ -14 │   2 │   6 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 3
  Row 3: input_block[3][2] = 2

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -9 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = -10 (from PE[2][0])
  PE[1][1]: partial_in = -14 (from PE[2][1])
  PE[1][2]: partial_in = 2 (from PE[2][2])
  PE[1][3]: partial_in = 6 (from PE[2][3])
  PE[2][0]: partial_in = -9 (from PE[3][0])
  PE[2][1]: partial_in = -18 (from PE[3][1])
  PE[2][2]: partial_in = -9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-3 -> result=-3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-10 -> result=-10
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-14 -> result=-14
  PE[1][2]: input=0 * weight=1 = 0, partial_in=2 -> result=2
  PE[1][3]: input=0 * weight=2 = 0, partial_in=6 -> result=6
  PE[2][0]: input=3 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[2][1]: input=3 * weight=1 = 3, partial_in=-18 -> result=-15
  PE[2][2]: input=3 * weight=2 = 6, partial_in=-9 -> result=-3
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][1]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[3][2]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][3]: input=2 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -3       -3       -9        0 
  Row 1:      -10      -14        2        6 
  Row 2:       -9      -15       -3        3 
  Row 3:        2        4        2        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │  -3 │  -9 │   0 │
├─────┼─────┼─────┼─────┤
│ -10 │ -14 │   2 │   6 │
├─────┼─────┼─────┼─────┤
│  -9 │ -15 │  -3 │   3 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 8

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -10 (from PE[1][0])
  PE[0][1]: partial_in = -14 (from PE[1][1])
  PE[0][2]: partial_in = 2 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -9 (from PE[2][0])
  PE[1][1]: partial_in = -15 (from PE[2][1])
  PE[1][2]: partial_in = -3 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = 2 (from PE[3][0])
  PE[2][1]: partial_in = 4 (from PE[3][1])
  PE[2][2]: partial_in = 2 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-10 -> result=-10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-14 -> result=-14
  PE[0][2]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][3]: input=0 * weight=2 = 0, partial_in=3 -> result=3
  PE[2][0]: input=0 * weight=0 = 0, partial_in=2 -> result=2
  PE[2][1]: input=0 * weight=1 = 0, partial_in=4 -> result=4
  PE[2][2]: input=0 * weight=2 = 0, partial_in=2 -> result=2
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][1]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[3][2]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][3]: input=8 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -10      -14        2        6 
  Row 1:       -9      -15       -3        3 
  Row 2:        2        4        2        0 
  Row 3:        8       16        8        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -10 │ -14 │   2 │   6 │
├─────┼─────┼─────┼─────┤
│  -9 │ -15 │  -3 │   3 │
├─────┼─────┼─────┼─────┤
│   2 │   4 │   2 │   0 │
├─────┼─────┼─────┼─────┤
│   8 │  16 │   8 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -10      -14        2        6 
Row 1:       -9      -15       -3        3 
Row 2:        2        4        2        0 
Row 3:        8       16        8        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -10 -> clamp(-10) -> final(118)
  PE[0][1]: -14 -> clamp(-14) -> final(114)
  PE[0][2]: 2 -> clamp(2) -> final(130)
  PE[0][3]: 6 -> clamp(6) -> final(134)
  PE[1][0]: -9 -> clamp(-9) -> final(119)
  PE[1][1]: -15 -> clamp(-15) -> final(113)
  PE[1][2]: -3 -> clamp(-3) -> final(125)
  PE[1][3]: 3 -> clamp(3) -> final(131)
  PE[2][0]: 2 -> clamp(2) -> final(130)
  PE[2][1]: 4 -> clamp(4) -> final(132)
  PE[2][2]: 2 -> clamp(2) -> final(130)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 8 -> clamp(8) -> final(136)
  PE[3][1]: 16 -> clamp(16) -> final(144)
  PE[3][2]: 8 -> clamp(8) -> final(136)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   118    114    130    134 
   119    113    125    131 
   130    132    130    128 
   136    144    136    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   8  -94 -104  -79 
   5  -95 -110  -94 
  -2  -93 -103  -86 
  -9  -92  -90  -60 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 8
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=0 -> result=-16
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[0][2]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -16       -8        0        8 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -16 │  -8 │   0 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -94
  Row 1: input_block[1][0] = 5
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-94 * weight=-2 = 188, partial_in=0 -> result=188
  PE[0][1]: input=-94 * weight=-1 = 94, partial_in=0 -> result=94
  PE[0][2]: input=-94 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[1][0]: input=5 * weight=-1 = -5, partial_in=0 -> result=-5
  PE[1][1]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][2]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[1][3]: input=5 * weight=2 = 10, partial_in=0 -> result=10
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      188       94        0      -94 
  Row 1:       -5        5        5       10 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 188 │  94 │   0 │ -94 │
├─────┼─────┼─────┼─────┤
│  -5 │   5 │   5 │  10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -104
  Row 1: input_block[1][1] = -95
  Row 2: input_block[2][0] = -2
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -5 (from PE[1][0])
  PE[0][1]: partial_in = 5 (from PE[1][1])
  PE[0][2]: partial_in = 5 (from PE[1][2])
  PE[0][3]: partial_in = 10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-104 * weight=-2 = 208, partial_in=-5 -> result=203
  PE[0][1]: input=-104 * weight=-1 = 104, partial_in=5 -> result=109
  PE[0][2]: input=-104 * weight=0 = 0, partial_in=5 -> result=5
  PE[0][3]: input=-104 * weight=1 = -104, partial_in=10 -> result=-94
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=0 -> result=-190
  PE[2][0]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[2][2]: input=-2 * weight=2 = -4, partial_in=0 -> result=-4
  PE[2][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      203      109        5      -94 
  Row 1:       95      -95      -95     -190 
  Row 2:        0       -2       -4       -2 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 203 │ 109 │   5 │ -94 │
├─────┼─────┼─────┼─────┤
│  95 │ -95 │ -95 │-190 │
├─────┼─────┼─────┼─────┤
│   0 │  -2 │  -4 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -79
  Row 1: input_block[1][2] = -110
  Row 2: input_block[2][1] = -93
  Row 3: input_block[3][0] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -190 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -2 (from PE[2][1])
  PE[1][2]: partial_in = -4 (from PE[2][2])
  PE[1][3]: partial_in = -2 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-79 * weight=-2 = 158, partial_in=95 -> result=253
  PE[0][1]: input=-79 * weight=-1 = 79, partial_in=-95 -> result=-16
  PE[0][2]: input=-79 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=-79 * weight=1 = -79, partial_in=-190 -> result=-269
  PE[1][0]: input=-110 * weight=-1 = 110, partial_in=0 -> result=110
  PE[1][1]: input=-110 * weight=1 = -110, partial_in=-2 -> result=-112
  PE[1][2]: input=-110 * weight=1 = -110, partial_in=-4 -> result=-114
  PE[1][3]: input=-110 * weight=2 = -220, partial_in=-2 -> result=-222
  PE[2][0]: input=-93 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[2][2]: input=-93 * weight=2 = -186, partial_in=0 -> result=-186
  PE[2][3]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      253      -16      -95     -269 
  Row 1:      110     -112     -114     -222 
  Row 2:        0      -93     -186      -93 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 253 │ -16 │ -95 │-269 │
├─────┼─────┼─────┼─────┤
│ 110 │-112 │-114 │-222 │
├─────┼─────┼─────┼─────┤
│   0 │ -93 │-186 │ -93 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -94
  Row 2: input_block[2][2] = -103
  Row 3: input_block[3][1] = -92

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 110 (from PE[1][0])
  PE[0][1]: partial_in = -112 (from PE[1][1])
  PE[0][2]: partial_in = -114 (from PE[1][2])
  PE[0][3]: partial_in = -222 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -93 (from PE[2][1])
  PE[1][2]: partial_in = -186 (from PE[2][2])
  PE[1][3]: partial_in = -93 (from PE[2][3])
  PE[2][0]: partial_in = -9 (from PE[3][0])
  PE[2][1]: partial_in = -18 (from PE[3][1])
  PE[2][2]: partial_in = -9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=110 -> result=110
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-112 -> result=-112
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-114 -> result=-114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-222 -> result=-222
  PE[1][0]: input=-94 * weight=-1 = 94, partial_in=0 -> result=94
  PE[1][1]: input=-94 * weight=1 = -94, partial_in=-93 -> result=-187
  PE[1][2]: input=-94 * weight=1 = -94, partial_in=-186 -> result=-280
  PE[1][3]: input=-94 * weight=2 = -188, partial_in=-93 -> result=-281
  PE[2][0]: input=-103 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[2][1]: input=-103 * weight=1 = -103, partial_in=-18 -> result=-121
  PE[2][2]: input=-103 * weight=2 = -206, partial_in=-9 -> result=-215
  PE[2][3]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][0]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][1]: input=-92 * weight=2 = -184, partial_in=0 -> result=-184
  PE[3][2]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][3]: input=-92 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      110     -112     -114     -222 
  Row 1:       94     -187     -280     -281 
  Row 2:       -9     -121     -215     -103 
  Row 3:      -92     -184      -92        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 110 │-112 │-114 │-222 │
├─────┼─────┼─────┼─────┤
│  94 │-187 │-280 │-281 │
├─────┼─────┼─────┼─────┤
│  -9 │-121 │-215 │-103 │
├─────┼─────┼─────┼─────┤
│ -92 │-184 │ -92 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -86
  Row 3: input_block[3][2] = -90

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 94 (from PE[1][0])
  PE[0][1]: partial_in = -187 (from PE[1][1])
  PE[0][2]: partial_in = -280 (from PE[1][2])
  PE[0][3]: partial_in = -281 (from PE[1][3])
  PE[1][0]: partial_in = -9 (from PE[2][0])
  PE[1][1]: partial_in = -121 (from PE[2][1])
  PE[1][2]: partial_in = -215 (from PE[2][2])
  PE[1][3]: partial_in = -103 (from PE[2][3])
  PE[2][0]: partial_in = -92 (from PE[3][0])
  PE[2][1]: partial_in = -184 (from PE[3][1])
  PE[2][2]: partial_in = -92 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=94 -> result=94
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-187 -> result=-187
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-280 -> result=-280
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-281 -> result=-281
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-121 -> result=-121
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-215 -> result=-215
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-103 -> result=-103
  PE[2][0]: input=-86 * weight=0 = 0, partial_in=-92 -> result=-92
  PE[2][1]: input=-86 * weight=1 = -86, partial_in=-184 -> result=-270
  PE[2][2]: input=-86 * weight=2 = -172, partial_in=-92 -> result=-264
  PE[2][3]: input=-86 * weight=1 = -86, partial_in=0 -> result=-86
  PE[3][0]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][1]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[3][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][3]: input=-90 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       94     -187     -280     -281 
  Row 1:       -9     -121     -215     -103 
  Row 2:      -92     -270     -264      -86 
  Row 3:      -90     -180      -90        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  94 │-187 │-280 │-281 │
├─────┼─────┼─────┼─────┤
│  -9 │-121 │-215 │-103 │
├─────┼─────┼─────┼─────┤
│ -92 │-270 │-264 │ -86 │
├─────┼─────┼─────┼─────┤
│ -90 │-180 │ -90 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = -121 (from PE[1][1])
  PE[0][2]: partial_in = -215 (from PE[1][2])
  PE[0][3]: partial_in = -103 (from PE[1][3])
  PE[1][0]: partial_in = -92 (from PE[2][0])
  PE[1][1]: partial_in = -270 (from PE[2][1])
  PE[1][2]: partial_in = -264 (from PE[2][2])
  PE[1][3]: partial_in = -86 (from PE[2][3])
  PE[2][0]: partial_in = -90 (from PE[3][0])
  PE[2][1]: partial_in = -180 (from PE[3][1])
  PE[2][2]: partial_in = -90 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-9 -> result=-9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-121 -> result=-121
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-215 -> result=-215
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-103 -> result=-103
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-92 -> result=-92
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-264 -> result=-264
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-86 -> result=-86
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-180 -> result=-180
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-90 -> result=-90
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -9     -121     -215     -103 
  Row 1:      -92     -270     -264      -86 
  Row 2:      -90     -180      -90        0 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -9 │-121 │-215 │-103 │
├─────┼─────┼─────┼─────┤
│ -92 │-270 │-264 │ -86 │
├─────┼─────┼─────┼─────┤
│ -90 │-180 │ -90 │   0 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -9     -121     -215     -103 
Row 1:      -92     -270     -264      -86 
Row 2:      -90     -180      -90        0 
Row 3:      -60     -120      -60        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -9 -> clamp(-9) -> final(119)
  PE[0][1]: -121 -> clamp(-121) -> final(7)
  PE[0][2]: -215 -> clamp(-128) -> final(0)
  PE[0][3]: -103 -> clamp(-103) -> final(25)
  PE[1][0]: -92 -> clamp(-92) -> final(36)
  PE[1][1]: -270 -> clamp(-128) -> final(0)
  PE[1][2]: -264 -> clamp(-128) -> final(0)
  PE[1][3]: -86 -> clamp(-86) -> final(42)
  PE[2][0]: -90 -> clamp(-90) -> final(38)
  PE[2][1]: -180 -> clamp(-128) -> final(0)
  PE[2][2]: -90 -> clamp(-90) -> final(38)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -60 -> clamp(-60) -> final(68)
  PE[3][1]: -120 -> clamp(-120) -> final(8)
  PE[3][2]: -60 -> clamp(-60) -> final(68)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   119      7      0     25 
    36      0      0     42 
    38      0     38    128 
    68      8     68    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -52  -52  -47  -45 
 -63  -54  -37  -33 
 -88  -82  -60  -45 
 -94 -104  -91  -65 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -52
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-52 * weight=-2 = 104, partial_in=0 -> result=104
  PE[0][1]: input=-52 * weight=-1 = 52, partial_in=0 -> result=52
  PE[0][2]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      104       52        0      -52 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 104 │  52 │   0 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -52
  Row 1: input_block[1][0] = -63
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-52 * weight=-2 = 104, partial_in=0 -> result=104
  PE[0][1]: input=-52 * weight=-1 = 52, partial_in=0 -> result=52
  PE[0][2]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[1][0]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[1][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][3]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      104       52        0      -52 
  Row 1:       63      -63      -63     -126 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 104 │  52 │   0 │ -52 │
├─────┼─────┼─────┼─────┤
│  63 │ -63 │ -63 │-126 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -47
  Row 1: input_block[1][1] = -54
  Row 2: input_block[2][0] = -88
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 63 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-47 * weight=-2 = 94, partial_in=63 -> result=157
  PE[0][1]: input=-47 * weight=-1 = 47, partial_in=-63 -> result=-16
  PE[0][2]: input=-47 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=-47 * weight=1 = -47, partial_in=-126 -> result=-173
  PE[1][0]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[1][1]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][2]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][3]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[2][0]: input=-88 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[2][2]: input=-88 * weight=2 = -176, partial_in=0 -> result=-176
  PE[2][3]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      157      -16      -63     -173 
  Row 1:       54      -54      -54     -108 
  Row 2:        0      -88     -176      -88 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 157 │ -16 │ -63 │-173 │
├─────┼─────┼─────┼─────┤
│  54 │ -54 │ -54 │-108 │
├─────┼─────┼─────┼─────┤
│   0 │ -88 │-176 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -45
  Row 1: input_block[1][2] = -37
  Row 2: input_block[2][1] = -82
  Row 3: input_block[3][0] = -94

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 54 (from PE[1][0])
  PE[0][1]: partial_in = -54 (from PE[1][1])
  PE[0][2]: partial_in = -54 (from PE[1][2])
  PE[0][3]: partial_in = -108 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -88 (from PE[2][1])
  PE[1][2]: partial_in = -176 (from PE[2][2])
  PE[1][3]: partial_in = -88 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=54 -> result=144
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=-54 -> result=-9
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=-54 -> result=-54
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=-108 -> result=-153
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=-88 -> result=-125
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=-176 -> result=-213
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=-88 -> result=-162
  PE[2][0]: input=-82 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[2][2]: input=-82 * weight=2 = -164, partial_in=0 -> result=-164
  PE[2][3]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[3][0]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[3][1]: input=-94 * weight=2 = -188, partial_in=0 -> result=-188
  PE[3][2]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[3][3]: input=-94 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      144       -9      -54     -153 
  Row 1:       37     -125     -213     -162 
  Row 2:        0      -82     -164      -82 
  Row 3:      -94     -188      -94        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 144 │  -9 │ -54 │-153 │
├─────┼─────┼─────┼─────┤
│  37 │-125 │-213 │-162 │
├─────┼─────┼─────┼─────┤
│   0 │ -82 │-164 │ -82 │
├─────┼─────┼─────┼─────┤
│ -94 │-188 │ -94 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -33
  Row 2: input_block[2][2] = -60
  Row 3: input_block[3][1] = -104

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -125 (from PE[1][1])
  PE[0][2]: partial_in = -213 (from PE[1][2])
  PE[0][3]: partial_in = -162 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -82 (from PE[2][1])
  PE[1][2]: partial_in = -164 (from PE[2][2])
  PE[1][3]: partial_in = -82 (from PE[2][3])
  PE[2][0]: partial_in = -94 (from PE[3][0])
  PE[2][1]: partial_in = -188 (from PE[3][1])
  PE[2][2]: partial_in = -94 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=37 -> result=37
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-125 -> result=-125
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-213 -> result=-213
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-162 -> result=-162
  PE[1][0]: input=-33 * weight=-1 = 33, partial_in=0 -> result=33
  PE[1][1]: input=-33 * weight=1 = -33, partial_in=-82 -> result=-115
  PE[1][2]: input=-33 * weight=1 = -33, partial_in=-164 -> result=-197
  PE[1][3]: input=-33 * weight=2 = -66, partial_in=-82 -> result=-148
  PE[2][0]: input=-60 * weight=0 = 0, partial_in=-94 -> result=-94
  PE[2][1]: input=-60 * weight=1 = -60, partial_in=-188 -> result=-248
  PE[2][2]: input=-60 * weight=2 = -120, partial_in=-94 -> result=-214
  PE[2][3]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][0]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[3][1]: input=-104 * weight=2 = -208, partial_in=0 -> result=-208
  PE[3][2]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[3][3]: input=-104 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       37     -125     -213     -162 
  Row 1:       33     -115     -197     -148 
  Row 2:      -94     -248     -214      -60 
  Row 3:     -104     -208     -104        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  37 │-125 │-213 │-162 │
├─────┼─────┼─────┼─────┤
│  33 │-115 │-197 │-148 │
├─────┼─────┼─────┼─────┤
│ -94 │-248 │-214 │ -60 │
├─────┼─────┼─────┼─────┤
│-104 │-208 │-104 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -45
  Row 3: input_block[3][2] = -91

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = -115 (from PE[1][1])
  PE[0][2]: partial_in = -197 (from PE[1][2])
  PE[0][3]: partial_in = -148 (from PE[1][3])
  PE[1][0]: partial_in = -94 (from PE[2][0])
  PE[1][1]: partial_in = -248 (from PE[2][1])
  PE[1][2]: partial_in = -214 (from PE[2][2])
  PE[1][3]: partial_in = -60 (from PE[2][3])
  PE[2][0]: partial_in = -104 (from PE[3][0])
  PE[2][1]: partial_in = -208 (from PE[3][1])
  PE[2][2]: partial_in = -104 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=33 -> result=33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-115 -> result=-115
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-197 -> result=-197
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-148 -> result=-148
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-94 -> result=-94
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-248 -> result=-248
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-214 -> result=-214
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-60 -> result=-60
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=-104 -> result=-104
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=-208 -> result=-253
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=-104 -> result=-194
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][1]: input=-91 * weight=2 = -182, partial_in=0 -> result=-182
  PE[3][2]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][3]: input=-91 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       33     -115     -197     -148 
  Row 1:      -94     -248     -214      -60 
  Row 2:     -104     -253     -194      -45 
  Row 3:      -91     -182      -91        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │-115 │-197 │-148 │
├─────┼─────┼─────┼─────┤
│ -94 │-248 │-214 │ -60 │
├─────┼─────┼─────┼─────┤
│-104 │-253 │-194 │ -45 │
├─────┼─────┼─────┼─────┤
│ -91 │-182 │ -91 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -65

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -94 (from PE[1][0])
  PE[0][1]: partial_in = -248 (from PE[1][1])
  PE[0][2]: partial_in = -214 (from PE[1][2])
  PE[0][3]: partial_in = -60 (from PE[1][3])
  PE[1][0]: partial_in = -104 (from PE[2][0])
  PE[1][1]: partial_in = -253 (from PE[2][1])
  PE[1][2]: partial_in = -194 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = -91 (from PE[3][0])
  PE[2][1]: partial_in = -182 (from PE[3][1])
  PE[2][2]: partial_in = -91 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-94 -> result=-94
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-248 -> result=-248
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-214 -> result=-214
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-104 -> result=-104
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-253 -> result=-253
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-194 -> result=-194
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-182 -> result=-182
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-91 -> result=-91
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][1]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[3][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][3]: input=-65 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -94     -248     -214      -60 
  Row 1:     -104     -253     -194      -45 
  Row 2:      -91     -182      -91        0 
  Row 3:      -65     -130      -65        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -94 │-248 │-214 │ -60 │
├─────┼─────┼─────┼─────┤
│-104 │-253 │-194 │ -45 │
├─────┼─────┼─────┼─────┤
│ -91 │-182 │ -91 │   0 │
├─────┼─────┼─────┼─────┤
│ -65 │-130 │ -65 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -94     -248     -214      -60 
Row 1:     -104     -253     -194      -45 
Row 2:      -91     -182      -91        0 
Row 3:      -65     -130      -65        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -94 -> clamp(-94) -> final(34)
  PE[0][1]: -248 -> clamp(-128) -> final(0)
  PE[0][2]: -214 -> clamp(-128) -> final(0)
  PE[0][3]: -60 -> clamp(-60) -> final(68)
  PE[1][0]: -104 -> clamp(-104) -> final(24)
  PE[1][1]: -253 -> clamp(-128) -> final(0)
  PE[1][2]: -194 -> clamp(-128) -> final(0)
  PE[1][3]: -45 -> clamp(-45) -> final(83)
  PE[2][0]: -91 -> clamp(-91) -> final(37)
  PE[2][1]: -182 -> clamp(-128) -> final(0)
  PE[2][2]: -91 -> clamp(-91) -> final(37)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -65 -> clamp(-65) -> final(63)
  PE[3][1]: -130 -> clamp(-128) -> final(0)
  PE[3][2]: -65 -> clamp(-65) -> final(63)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    34      0      0     68 
    24      0      0     83 
    37      0     37    128 
    63      0     63    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -43  -31  -34  -56 
 -44  -48  -50  -62 
 -52  -59  -58  -61 
 -58  -59  -58  -60 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -43
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=0 -> result=86
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       86       43        0      -43 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  43 │   0 │ -43 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -31
  Row 1: input_block[1][0] = -44
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=0 -> result=62
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       62       31        0      -31 
  Row 1:       44      -44      -44      -88 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  62 │  31 │   0 │ -31 │
├─────┼─────┼─────┼─────┤
│  44 │ -44 │ -44 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -34
  Row 1: input_block[1][1] = -48
  Row 2: input_block[2][0] = -52
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=44 -> result=112
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-44 -> result=-10
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-88 -> result=-122
  PE[1][0]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[1][1]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][3]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=0 -> result=-104
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      112      -10      -44     -122 
  Row 1:       48      -48      -48      -96 
  Row 2:        0      -52     -104      -52 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 112 │ -10 │ -44 │-122 │
├─────┼─────┼─────┼─────┤
│  48 │ -48 │ -48 │ -96 │
├─────┼─────┼─────┼─────┤
│   0 │ -52 │-104 │ -52 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -56
  Row 1: input_block[1][2] = -50
  Row 2: input_block[2][1] = -59
  Row 3: input_block[3][0] = -58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 48 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -48 (from PE[1][2])
  PE[0][3]: partial_in = -96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -52 (from PE[2][1])
  PE[1][2]: partial_in = -104 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-56 * weight=-2 = 112, partial_in=48 -> result=160
  PE[0][1]: input=-56 * weight=-1 = 56, partial_in=-48 -> result=8
  PE[0][2]: input=-56 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[0][3]: input=-56 * weight=1 = -56, partial_in=-96 -> result=-152
  PE[1][0]: input=-50 * weight=-1 = 50, partial_in=0 -> result=50
  PE[1][1]: input=-50 * weight=1 = -50, partial_in=-52 -> result=-102
  PE[1][2]: input=-50 * weight=1 = -50, partial_in=-104 -> result=-154
  PE[1][3]: input=-50 * weight=2 = -100, partial_in=-52 -> result=-152
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][1]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[3][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][3]: input=-58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      160        8      -48     -152 
  Row 1:       50     -102     -154     -152 
  Row 2:        0      -59     -118      -59 
  Row 3:      -58     -116      -58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 160 │   8 │ -48 │-152 │
├─────┼─────┼─────┼─────┤
│  50 │-102 │-154 │-152 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -62
  Row 2: input_block[2][2] = -58
  Row 3: input_block[3][1] = -59

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 50 (from PE[1][0])
  PE[0][1]: partial_in = -102 (from PE[1][1])
  PE[0][2]: partial_in = -154 (from PE[1][2])
  PE[0][3]: partial_in = -152 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = -58 (from PE[3][0])
  PE[2][1]: partial_in = -116 (from PE[3][1])
  PE[2][2]: partial_in = -58 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=50 -> result=50
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-102 -> result=-102
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-154 -> result=-154
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-152 -> result=-152
  PE[1][0]: input=-62 * weight=-1 = 62, partial_in=0 -> result=62
  PE[1][1]: input=-62 * weight=1 = -62, partial_in=-59 -> result=-121
  PE[1][2]: input=-62 * weight=1 = -62, partial_in=-118 -> result=-180
  PE[1][3]: input=-62 * weight=2 = -124, partial_in=-59 -> result=-183
  PE[2][0]: input=-58 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[2][1]: input=-58 * weight=1 = -58, partial_in=-116 -> result=-174
  PE[2][2]: input=-58 * weight=2 = -116, partial_in=-58 -> result=-174
  PE[2][3]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][0]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][1]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[3][2]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][3]: input=-59 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       50     -102     -154     -152 
  Row 1:       62     -121     -180     -183 
  Row 2:      -58     -174     -174      -58 
  Row 3:      -59     -118      -59        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  50 │-102 │-154 │-152 │
├─────┼─────┼─────┼─────┤
│  62 │-121 │-180 │-183 │
├─────┼─────┼─────┼─────┤
│ -58 │-174 │-174 │ -58 │
├─────┼─────┼─────┼─────┤
│ -59 │-118 │ -59 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -61
  Row 3: input_block[3][2] = -58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 62 (from PE[1][0])
  PE[0][1]: partial_in = -121 (from PE[1][1])
  PE[0][2]: partial_in = -180 (from PE[1][2])
  PE[0][3]: partial_in = -183 (from PE[1][3])
  PE[1][0]: partial_in = -58 (from PE[2][0])
  PE[1][1]: partial_in = -174 (from PE[2][1])
  PE[1][2]: partial_in = -174 (from PE[2][2])
  PE[1][3]: partial_in = -58 (from PE[2][3])
  PE[2][0]: partial_in = -59 (from PE[3][0])
  PE[2][1]: partial_in = -118 (from PE[3][1])
  PE[2][2]: partial_in = -59 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=62 -> result=62
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-121 -> result=-121
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-180 -> result=-180
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-183 -> result=-183
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-174 -> result=-174
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-174 -> result=-174
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-58 -> result=-58
  PE[2][0]: input=-61 * weight=0 = 0, partial_in=-59 -> result=-59
  PE[2][1]: input=-61 * weight=1 = -61, partial_in=-118 -> result=-179
  PE[2][2]: input=-61 * weight=2 = -122, partial_in=-59 -> result=-181
  PE[2][3]: input=-61 * weight=1 = -61, partial_in=0 -> result=-61
  PE[3][0]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][1]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[3][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][3]: input=-58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       62     -121     -180     -183 
  Row 1:      -58     -174     -174      -58 
  Row 2:      -59     -179     -181      -61 
  Row 3:      -58     -116      -58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  62 │-121 │-180 │-183 │
├─────┼─────┼─────┼─────┤
│ -58 │-174 │-174 │ -58 │
├─────┼─────┼─────┼─────┤
│ -59 │-179 │-181 │ -61 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -58 (from PE[1][0])
  PE[0][1]: partial_in = -174 (from PE[1][1])
  PE[0][2]: partial_in = -174 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = -59 (from PE[2][0])
  PE[1][1]: partial_in = -179 (from PE[2][1])
  PE[1][2]: partial_in = -181 (from PE[2][2])
  PE[1][3]: partial_in = -61 (from PE[2][3])
  PE[2][0]: partial_in = -58 (from PE[3][0])
  PE[2][1]: partial_in = -116 (from PE[3][1])
  PE[2][2]: partial_in = -58 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-58 -> result=-58
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-174 -> result=-174
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-174 -> result=-174
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-59 -> result=-59
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-179 -> result=-179
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-181 -> result=-181
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-61 -> result=-61
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-116 -> result=-116
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-58 -> result=-58
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -58     -174     -174      -58 
  Row 1:      -59     -179     -181      -61 
  Row 2:      -58     -116      -58        0 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -58 │-174 │-174 │ -58 │
├─────┼─────┼─────┼─────┤
│ -59 │-179 │-181 │ -61 │
├─────┼─────┼─────┼─────┤
│ -58 │-116 │ -58 │   0 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -58     -174     -174      -58 
Row 1:      -59     -179     -181      -61 
Row 2:      -58     -116      -58        0 
Row 3:      -60     -120      -60        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -58 -> clamp(-58) -> final(70)
  PE[0][1]: -174 -> clamp(-128) -> final(0)
  PE[0][2]: -174 -> clamp(-128) -> final(0)
  PE[0][3]: -58 -> clamp(-58) -> final(70)
  PE[1][0]: -59 -> clamp(-59) -> final(69)
  PE[1][1]: -179 -> clamp(-128) -> final(0)
  PE[1][2]: -181 -> clamp(-128) -> final(0)
  PE[1][3]: -61 -> clamp(-61) -> final(67)
  PE[2][0]: -58 -> clamp(-58) -> final(70)
  PE[2][1]: -116 -> clamp(-116) -> final(12)
  PE[2][2]: -58 -> clamp(-58) -> final(70)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -60 -> clamp(-60) -> final(68)
  PE[3][1]: -120 -> clamp(-120) -> final(8)
  PE[3][2]: -60 -> clamp(-60) -> final(68)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    70      0      0     70 
    69      0      0     67 
    70     12     70    128 
    68      8     68    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -43  -34  -39  -50 
  -8    0  -15  -29 
  18   26    8  -11 
  16   31   18    3 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -43
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=0 -> result=86
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       86       43        0      -43 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  43 │   0 │ -43 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -34
  Row 1: input_block[1][0] = -8
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=0 -> result=68
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=0 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       68       34        0      -34 
  Row 1:        8       -8       -8      -16 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │  34 │   0 │ -34 │
├─────┼─────┼─────┼─────┤
│   8 │  -8 │  -8 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -39
  Row 1: input_block[1][1] = 0
  Row 2: input_block[2][0] = 18
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = -16 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=8 -> result=86
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=-8 -> result=31
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=-16 -> result=-55
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[2][2]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[2][3]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       86       31       -8      -55 
  Row 1:        0        0        0        0 
  Row 2:        0       18       36       18 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  86 │  31 │  -8 │ -55 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │  18 │  36 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -50
  Row 1: input_block[1][2] = -15
  Row 2: input_block[2][1] = 26
  Row 3: input_block[3][0] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 18 (from PE[2][1])
  PE[1][2]: partial_in = 36 (from PE[2][2])
  PE[1][3]: partial_in = 18 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-50 * weight=-2 = 100, partial_in=0 -> result=100
  PE[0][1]: input=-50 * weight=-1 = 50, partial_in=0 -> result=50
  PE[0][2]: input=-50 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][0]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[1][1]: input=-15 * weight=1 = -15, partial_in=18 -> result=3
  PE[1][2]: input=-15 * weight=1 = -15, partial_in=36 -> result=21
  PE[1][3]: input=-15 * weight=2 = -30, partial_in=18 -> result=-12
  PE[2][0]: input=26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[2][2]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      100       50        0      -50 
  Row 1:       15        3       21      -12 
  Row 2:        0       26       52       26 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 100 │  50 │   0 │ -50 │
├─────┼─────┼─────┼─────┤
│  15 │   3 │  21 │ -12 │
├─────┼─────┼─────┼─────┤
│   0 │  26 │  52 │  26 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -29
  Row 2: input_block[2][2] = 8
  Row 3: input_block[3][1] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 15 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 21 (from PE[1][2])
  PE[0][3]: partial_in = -12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 26 (from PE[2][1])
  PE[1][2]: partial_in = 52 (from PE[2][2])
  PE[1][3]: partial_in = 26 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=15 -> result=15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=21 -> result=21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-12 -> result=-12
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=26 -> result=-3
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=52 -> result=23
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=26 -> result=-32
  PE[2][0]: input=8 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=8 * weight=1 = 8, partial_in=32 -> result=40
  PE[2][2]: input=8 * weight=2 = 16, partial_in=16 -> result=32
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       15        3       21      -12 
  Row 1:       29       -3       23      -32 
  Row 2:       16       40       32        8 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  15 │   3 │  21 │ -12 │
├─────┼─────┼─────┼─────┤
│  29 │  -3 │  23 │ -32 │
├─────┼─────┼─────┼─────┤
│  16 │  40 │  32 │   8 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -11
  Row 3: input_block[3][2] = 18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 16 (from PE[2][0])
  PE[1][1]: partial_in = 40 (from PE[2][1])
  PE[1][2]: partial_in = 32 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=29 -> result=29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-3 -> result=-3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[1][1]: input=0 * weight=1 = 0, partial_in=40 -> result=40
  PE[1][2]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=-11 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=-11 * weight=1 = -11, partial_in=62 -> result=51
  PE[2][2]: input=-11 * weight=2 = -22, partial_in=31 -> result=9
  PE[2][3]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[3][0]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][1]: input=18 * weight=2 = 36, partial_in=0 -> result=36
  PE[3][2]: input=18 * weight=1 = 18, partial_in=0 -> result=18
  PE[3][3]: input=18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       29       -3       23      -32 
  Row 1:       16       40       32        8 
  Row 2:       31       51        9      -11 
  Row 3:       18       36       18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  29 │  -3 │  23 │ -32 │
├─────┼─────┼─────┼─────┤
│  16 │  40 │  32 │   8 │
├─────┼─────┼─────┼─────┤
│  31 │  51 │   9 │ -11 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 3

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 16 (from PE[1][0])
  PE[0][1]: partial_in = 40 (from PE[1][1])
  PE[0][2]: partial_in = 32 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 51 (from PE[2][1])
  PE[1][2]: partial_in = 9 (from PE[2][2])
  PE[1][3]: partial_in = -11 (from PE[2][3])
  PE[2][0]: partial_in = 18 (from PE[3][0])
  PE[2][1]: partial_in = 36 (from PE[3][1])
  PE[2][2]: partial_in = 18 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=16 -> result=16
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[0][2]: input=0 * weight=0 = 0, partial_in=32 -> result=32
  PE[0][3]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][2]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-11 -> result=-11
  PE[2][0]: input=0 * weight=0 = 0, partial_in=18 -> result=18
  PE[2][1]: input=0 * weight=1 = 0, partial_in=36 -> result=36
  PE[2][2]: input=0 * weight=2 = 0, partial_in=18 -> result=18
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][1]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[3][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][3]: input=3 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       16       40       32        8 
  Row 1:       31       51        9      -11 
  Row 2:       18       36       18        0 
  Row 3:        3        6        3        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │  40 │  32 │   8 │
├─────┼─────┼─────┼─────┤
│  31 │  51 │   9 │ -11 │
├─────┼─────┼─────┼─────┤
│  18 │  36 │  18 │   0 │
├─────┼─────┼─────┼─────┤
│   3 │   6 │   3 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       16       40       32        8 
Row 1:       31       51        9      -11 
Row 2:       18       36       18        0 
Row 3:        3        6        3        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 16 -> clamp(16) -> final(144)
  PE[0][1]: 40 -> clamp(40) -> final(168)
  PE[0][2]: 32 -> clamp(32) -> final(160)
  PE[0][3]: 8 -> clamp(8) -> final(136)
  PE[1][0]: 31 -> clamp(31) -> final(159)
  PE[1][1]: 51 -> clamp(51) -> final(179)
  PE[1][2]: 9 -> clamp(9) -> final(137)
  PE[1][3]: -11 -> clamp(-11) -> final(117)
  PE[2][0]: 18 -> clamp(18) -> final(146)
  PE[2][1]: 36 -> clamp(36) -> final(164)
  PE[2][2]: 18 -> clamp(18) -> final(146)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 3 -> clamp(3) -> final(131)
  PE[3][1]: 6 -> clamp(6) -> final(134)
  PE[3][2]: 3 -> clamp(3) -> final(131)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   144    168    160    136 
   159    179    137    117 
   146    164    146    128 
   131    134    131    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -59  -72  -69  -46 
 -34  -50  -52  -24 
 -18  -43  -52  -23 
  -4  -34  -48  -18 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -59
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-59 * weight=-2 = 118, partial_in=0 -> result=118
  PE[0][1]: input=-59 * weight=-1 = 59, partial_in=0 -> result=59
  PE[0][2]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      118       59        0      -59 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 118 │  59 │   0 │ -59 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -72
  Row 1: input_block[1][0] = -34
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-72 * weight=-2 = 144, partial_in=0 -> result=144
  PE[0][1]: input=-72 * weight=-1 = 72, partial_in=0 -> result=72
  PE[0][2]: input=-72 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][0]: input=-34 * weight=-1 = 34, partial_in=0 -> result=34
  PE[1][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[1][3]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      144       72        0      -72 
  Row 1:       34      -34      -34      -68 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 144 │  72 │   0 │ -72 │
├─────┼─────┼─────┼─────┤
│  34 │ -34 │ -34 │ -68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -69
  Row 1: input_block[1][1] = -50
  Row 2: input_block[2][0] = -18
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 34 (from PE[1][0])
  PE[0][1]: partial_in = -34 (from PE[1][1])
  PE[0][2]: partial_in = -34 (from PE[1][2])
  PE[0][3]: partial_in = -68 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-69 * weight=-2 = 138, partial_in=34 -> result=172
  PE[0][1]: input=-69 * weight=-1 = 69, partial_in=-34 -> result=35
  PE[0][2]: input=-69 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[0][3]: input=-69 * weight=1 = -69, partial_in=-68 -> result=-137
  PE[1][0]: input=-50 * weight=-1 = 50, partial_in=0 -> result=50
  PE[1][1]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][3]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      172       35      -34     -137 
  Row 1:       50      -50      -50     -100 
  Row 2:        0      -18      -36      -18 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 172 │  35 │ -34 │-137 │
├─────┼─────┼─────┼─────┤
│  50 │ -50 │ -50 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │ -18 │ -36 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -46
  Row 1: input_block[1][2] = -52
  Row 2: input_block[2][1] = -43
  Row 3: input_block[3][0] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 50 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = -36 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=50 -> result=142
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=-50 -> result=-4
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=-100 -> result=-146
  PE[1][0]: input=-52 * weight=-1 = 52, partial_in=0 -> result=52
  PE[1][1]: input=-52 * weight=1 = -52, partial_in=-18 -> result=-70
  PE[1][2]: input=-52 * weight=1 = -52, partial_in=-36 -> result=-88
  PE[1][3]: input=-52 * weight=2 = -104, partial_in=-18 -> result=-122
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      142       -4      -50     -146 
  Row 1:       52      -70      -88     -122 
  Row 2:        0      -43      -86      -43 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 142 │  -4 │ -50 │-146 │
├─────┼─────┼─────┼─────┤
│  52 │ -70 │ -88 │-122 │
├─────┼─────┼─────┼─────┤
│   0 │ -43 │ -86 │ -43 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -24
  Row 2: input_block[2][2] = -52
  Row 3: input_block[3][1] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 52 (from PE[1][0])
  PE[0][1]: partial_in = -70 (from PE[1][1])
  PE[0][2]: partial_in = -88 (from PE[1][2])
  PE[0][3]: partial_in = -122 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -86 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=52 -> result=52
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-70 -> result=-70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-122 -> result=-122
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=-43 -> result=-67
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=-86 -> result=-110
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=-43 -> result=-91
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-8 -> result=-60
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-4 -> result=-108
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       52      -70      -88     -122 
  Row 1:       24      -67     -110      -91 
  Row 2:       -4      -60     -108      -52 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │ -70 │ -88 │-122 │
├─────┼─────┼─────┼─────┤
│  24 │ -67 │-110 │ -91 │
├─────┼─────┼─────┼─────┤
│  -4 │ -60 │-108 │ -52 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -23
  Row 3: input_block[3][2] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -67 (from PE[1][1])
  PE[0][2]: partial_in = -110 (from PE[1][2])
  PE[0][3]: partial_in = -91 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -60 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=24 -> result=24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-67 -> result=-67
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-110 -> result=-110
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=-68 -> result=-91
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=-34 -> result=-80
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       24      -67     -110      -91 
  Row 1:       -4      -60     -108      -52 
  Row 2:      -34      -91      -80      -23 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │ -67 │-110 │ -91 │
├─────┼─────┼─────┼─────┤
│  -4 │ -60 │-108 │ -52 │
├─────┼─────┼─────┼─────┤
│ -34 │ -91 │ -80 │ -23 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -18

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -108 (from PE[1][2])
  PE[0][3]: partial_in = -52 (from PE[1][3])
  PE[1][0]: partial_in = -34 (from PE[2][0])
  PE[1][1]: partial_in = -91 (from PE[2][1])
  PE[1][2]: partial_in = -80 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-4 -> result=-4
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-108 -> result=-108
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-80 -> result=-80
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-48 -> result=-48
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][1]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[3][2]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][3]: input=-18 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -4      -60     -108      -52 
  Row 1:      -34      -91      -80      -23 
  Row 2:      -48      -96      -48        0 
  Row 3:      -18      -36      -18        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -4 │ -60 │-108 │ -52 │
├─────┼─────┼─────┼─────┤
│ -34 │ -91 │ -80 │ -23 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
├─────┼─────┼─────┼─────┤
│ -18 │ -36 │ -18 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -4      -60     -108      -52 
Row 1:      -34      -91      -80      -23 
Row 2:      -48      -96      -48        0 
Row 3:      -18      -36      -18        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -4 -> clamp(-4) -> final(124)
  PE[0][1]: -60 -> clamp(-60) -> final(68)
  PE[0][2]: -108 -> clamp(-108) -> final(20)
  PE[0][3]: -52 -> clamp(-52) -> final(76)
  PE[1][0]: -34 -> clamp(-34) -> final(94)
  PE[1][1]: -91 -> clamp(-91) -> final(37)
  PE[1][2]: -80 -> clamp(-80) -> final(48)
  PE[1][3]: -23 -> clamp(-23) -> final(105)
  PE[2][0]: -48 -> clamp(-48) -> final(80)
  PE[2][1]: -96 -> clamp(-96) -> final(32)
  PE[2][2]: -48 -> clamp(-48) -> final(80)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -18 -> clamp(-18) -> final(110)
  PE[3][1]: -36 -> clamp(-36) -> final(92)
  PE[3][2]: -18 -> clamp(-18) -> final(110)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   124     68     20     76 
    94     37     48    105 
    80     32     80    128 
   110     92    110    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -3    7    8   10 
  -5    6    8   12 
  -7    4   10   15 
  -9    4   12   19 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        6        3        0       -3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 7
  Row 1: input_block[1][0] = -5
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=7 * weight=-2 = -14, partial_in=0 -> result=-14
  PE[0][1]: input=7 * weight=-1 = -7, partial_in=0 -> result=-7
  PE[0][2]: input=7 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[1][0]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[1][1]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][2]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][3]: input=-5 * weight=2 = -10, partial_in=0 -> result=-10
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -14       -7        0        7 
  Row 1:        5       -5       -5      -10 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -14 │  -7 │   0 │   7 │
├─────┼─────┼─────┼─────┤
│   5 │  -5 │  -5 │ -10 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 8
  Row 1: input_block[1][1] = 6
  Row 2: input_block[2][0] = -7
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 5 (from PE[1][0])
  PE[0][1]: partial_in = -5 (from PE[1][1])
  PE[0][2]: partial_in = -5 (from PE[1][2])
  PE[0][3]: partial_in = -10 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=8 * weight=-2 = -16, partial_in=5 -> result=-11
  PE[0][1]: input=8 * weight=-1 = -8, partial_in=-5 -> result=-13
  PE[0][2]: input=8 * weight=0 = 0, partial_in=-5 -> result=-5
  PE[0][3]: input=8 * weight=1 = 8, partial_in=-10 -> result=-2
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[1][3]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -11      -13       -5       -2 
  Row 1:       -6        6        6       12 
  Row 2:        0       -7      -14       -7 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -13 │  -5 │  -2 │
├─────┼─────┼─────┼─────┤
│  -6 │   6 │   6 │  12 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 10
  Row 1: input_block[1][2] = 8
  Row 2: input_block[2][1] = 4
  Row 3: input_block[3][0] = -9

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = 6 (from PE[1][1])
  PE[0][2]: partial_in = 6 (from PE[1][2])
  PE[0][3]: partial_in = 12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=10 * weight=-2 = -20, partial_in=-6 -> result=-26
  PE[0][1]: input=10 * weight=-1 = -10, partial_in=6 -> result=-4
  PE[0][2]: input=10 * weight=0 = 0, partial_in=6 -> result=6
  PE[0][3]: input=10 * weight=1 = 10, partial_in=12 -> result=22
  PE[1][0]: input=8 * weight=-1 = -8, partial_in=0 -> result=-8
  PE[1][1]: input=8 * weight=1 = 8, partial_in=-7 -> result=1
  PE[1][2]: input=8 * weight=1 = 8, partial_in=-14 -> result=-6
  PE[1][3]: input=8 * weight=2 = 16, partial_in=-7 -> result=9
  PE[2][0]: input=4 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[2][2]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[2][3]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][0]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][1]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[3][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[3][3]: input=-9 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -26       -4        6       22 
  Row 1:       -8        1       -6        9 
  Row 2:        0        4        8        4 
  Row 3:       -9      -18       -9        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │  -4 │   6 │  22 │
├─────┼─────┼─────┼─────┤
│  -8 │   1 │  -6 │   9 │
├─────┼─────┼─────┼─────┤
│   0 │   4 │   8 │   4 │
├─────┼─────┼─────┼─────┤
│  -9 │ -18 │  -9 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 12
  Row 2: input_block[2][2] = 10
  Row 3: input_block[3][1] = 4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -8 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = -6 (from PE[1][2])
  PE[0][3]: partial_in = 9 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 4 (from PE[2][1])
  PE[1][2]: partial_in = 8 (from PE[2][2])
  PE[1][3]: partial_in = 4 (from PE[2][3])
  PE[2][0]: partial_in = -9 (from PE[3][0])
  PE[2][1]: partial_in = -18 (from PE[3][1])
  PE[2][2]: partial_in = -9 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-8 -> result=-8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[0][3]: input=0 * weight=1 = 0, partial_in=9 -> result=9
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=4 -> result=16
  PE[1][2]: input=12 * weight=1 = 12, partial_in=8 -> result=20
  PE[1][3]: input=12 * weight=2 = 24, partial_in=4 -> result=28
  PE[2][0]: input=10 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[2][1]: input=10 * weight=1 = 10, partial_in=-18 -> result=-8
  PE[2][2]: input=10 * weight=2 = 20, partial_in=-9 -> result=11
  PE[2][3]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][0]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][1]: input=4 * weight=2 = 8, partial_in=0 -> result=8
  PE[3][2]: input=4 * weight=1 = 4, partial_in=0 -> result=4
  PE[3][3]: input=4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -8        1       -6        9 
  Row 1:      -12       16       20       28 
  Row 2:       -9       -8       11       10 
  Row 3:        4        8        4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -8 │   1 │  -6 │   9 │
├─────┼─────┼─────┼─────┤
│ -12 │  16 │  20 │  28 │
├─────┼─────┼─────┼─────┤
│  -9 │  -8 │  11 │  10 │
├─────┼─────┼─────┼─────┤
│   4 │   8 │   4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 15
  Row 3: input_block[3][2] = 12

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 16 (from PE[1][1])
  PE[0][2]: partial_in = 20 (from PE[1][2])
  PE[0][3]: partial_in = 28 (from PE[1][3])
  PE[1][0]: partial_in = -9 (from PE[2][0])
  PE[1][1]: partial_in = -8 (from PE[2][1])
  PE[1][2]: partial_in = 11 (from PE[2][2])
  PE[1][3]: partial_in = 10 (from PE[2][3])
  PE[2][0]: partial_in = 4 (from PE[3][0])
  PE[2][1]: partial_in = 8 (from PE[3][1])
  PE[2][2]: partial_in = 4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-12 -> result=-12
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=16 -> result=16
  PE[0][2]: input=0 * weight=0 = 0, partial_in=20 -> result=20
  PE[0][3]: input=0 * weight=1 = 0, partial_in=28 -> result=28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-9 -> result=-9
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[1][2]: input=0 * weight=1 = 0, partial_in=11 -> result=11
  PE[1][3]: input=0 * weight=2 = 0, partial_in=10 -> result=10
  PE[2][0]: input=15 * weight=0 = 0, partial_in=4 -> result=4
  PE[2][1]: input=15 * weight=1 = 15, partial_in=8 -> result=23
  PE[2][2]: input=15 * weight=2 = 30, partial_in=4 -> result=34
  PE[2][3]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][0]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][1]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[3][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][3]: input=12 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -12       16       20       28 
  Row 1:       -9       -8       11       10 
  Row 2:        4       23       34       15 
  Row 3:       12       24       12        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -12 │  16 │  20 │  28 │
├─────┼─────┼─────┼─────┤
│  -9 │  -8 │  11 │  10 │
├─────┼─────┼─────┼─────┤
│   4 │  23 │  34 │  15 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 19

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = -8 (from PE[1][1])
  PE[0][2]: partial_in = 11 (from PE[1][2])
  PE[0][3]: partial_in = 10 (from PE[1][3])
  PE[1][0]: partial_in = 4 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 34 (from PE[2][2])
  PE[1][3]: partial_in = 15 (from PE[2][3])
  PE[2][0]: partial_in = 12 (from PE[3][0])
  PE[2][1]: partial_in = 24 (from PE[3][1])
  PE[2][2]: partial_in = 12 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-9 -> result=-9
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-8 -> result=-8
  PE[0][2]: input=0 * weight=0 = 0, partial_in=11 -> result=11
  PE[0][3]: input=0 * weight=1 = 0, partial_in=10 -> result=10
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=4 -> result=4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=23 -> result=23
  PE[1][2]: input=0 * weight=1 = 0, partial_in=34 -> result=34
  PE[1][3]: input=0 * weight=2 = 0, partial_in=15 -> result=15
  PE[2][0]: input=0 * weight=0 = 0, partial_in=12 -> result=12
  PE[2][1]: input=0 * weight=1 = 0, partial_in=24 -> result=24
  PE[2][2]: input=0 * weight=2 = 0, partial_in=12 -> result=12
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][1]: input=19 * weight=2 = 38, partial_in=0 -> result=38
  PE[3][2]: input=19 * weight=1 = 19, partial_in=0 -> result=19
  PE[3][3]: input=19 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -9       -8       11       10 
  Row 1:        4       23       34       15 
  Row 2:       12       24       12        0 
  Row 3:       19       38       19        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -9 │  -8 │  11 │  10 │
├─────┼─────┼─────┼─────┤
│   4 │  23 │  34 │  15 │
├─────┼─────┼─────┼─────┤
│  12 │  24 │  12 │   0 │
├─────┼─────┼─────┼─────┤
│  19 │  38 │  19 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -9       -8       11       10 
Row 1:        4       23       34       15 
Row 2:       12       24       12        0 
Row 3:       19       38       19        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -9 -> clamp(-9) -> final(119)
  PE[0][1]: -8 -> clamp(-8) -> final(120)
  PE[0][2]: 11 -> clamp(11) -> final(139)
  PE[0][3]: 10 -> clamp(10) -> final(138)
  PE[1][0]: 4 -> clamp(4) -> final(132)
  PE[1][1]: 23 -> clamp(23) -> final(151)
  PE[1][2]: 34 -> clamp(34) -> final(162)
  PE[1][3]: 15 -> clamp(15) -> final(143)
  PE[2][0]: 12 -> clamp(12) -> final(140)
  PE[2][1]: 24 -> clamp(24) -> final(152)
  PE[2][2]: 12 -> clamp(12) -> final(140)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 19 -> clamp(19) -> final(147)
  PE[3][1]: 38 -> clamp(38) -> final(166)
  PE[3][2]: 19 -> clamp(19) -> final(147)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   119    120    139    138 
   132    151    162    143 
   140    152    140    128 
   147    166    147    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  22   24   21   24 
  22   23   20   26 
  25   23   21   28 
  27   24   22   30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=0 -> result=-44
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[0][2]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -44      -22        0       22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │ -22 │   0 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 24
  Row 1: input_block[1][0] = 22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=0 -> result=-48
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[0][2]: input=24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][3]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -48      -24        0       24 
  Row 1:      -22       22       22       44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │ -24 │   0 │  24 │
├─────┼─────┼─────┼─────┤
│ -22 │  22 │  22 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 21
  Row 1: input_block[1][1] = 23
  Row 2: input_block[2][0] = 25
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 22 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=21 * weight=-2 = -42, partial_in=-22 -> result=-64
  PE[0][1]: input=21 * weight=-1 = -21, partial_in=22 -> result=1
  PE[0][2]: input=21 * weight=0 = 0, partial_in=22 -> result=22
  PE[0][3]: input=21 * weight=1 = 21, partial_in=44 -> result=65
  PE[1][0]: input=23 * weight=-1 = -23, partial_in=0 -> result=-23
  PE[1][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[1][3]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][0]: input=25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[2][2]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[2][3]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -64        1       22       65 
  Row 1:      -23       23       23       46 
  Row 2:        0       25       50       25 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -64 │   1 │  22 │  65 │
├─────┼─────┼─────┼─────┤
│ -23 │  23 │  23 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │  25 │  50 │  25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 24
  Row 1: input_block[1][2] = 20
  Row 2: input_block[2][1] = 23
  Row 3: input_block[3][0] = 27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -23 (from PE[1][0])
  PE[0][1]: partial_in = 23 (from PE[1][1])
  PE[0][2]: partial_in = 23 (from PE[1][2])
  PE[0][3]: partial_in = 46 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 25 (from PE[2][1])
  PE[1][2]: partial_in = 50 (from PE[2][2])
  PE[1][3]: partial_in = 25 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=-23 -> result=-71
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=23 -> result=-1
  PE[0][2]: input=24 * weight=0 = 0, partial_in=23 -> result=23
  PE[0][3]: input=24 * weight=1 = 24, partial_in=46 -> result=70
  PE[1][0]: input=20 * weight=-1 = -20, partial_in=0 -> result=-20
  PE[1][1]: input=20 * weight=1 = 20, partial_in=25 -> result=45
  PE[1][2]: input=20 * weight=1 = 20, partial_in=50 -> result=70
  PE[1][3]: input=20 * weight=2 = 40, partial_in=25 -> result=65
  PE[2][0]: input=23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[2][2]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[2][3]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][0]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[3][1]: input=27 * weight=2 = 54, partial_in=0 -> result=54
  PE[3][2]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[3][3]: input=27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -71       -1       23       70 
  Row 1:      -20       45       70       65 
  Row 2:        0       23       46       23 
  Row 3:       27       54       27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -71 │  -1 │  23 │  70 │
├─────┼─────┼─────┼─────┤
│ -20 │  45 │  70 │  65 │
├─────┼─────┼─────┼─────┤
│   0 │  23 │  46 │  23 │
├─────┼─────┼─────┼─────┤
│  27 │  54 │  27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 26
  Row 2: input_block[2][2] = 21
  Row 3: input_block[3][1] = 24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -20 (from PE[1][0])
  PE[0][1]: partial_in = 45 (from PE[1][1])
  PE[0][2]: partial_in = 70 (from PE[1][2])
  PE[0][3]: partial_in = 65 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 23 (from PE[2][1])
  PE[1][2]: partial_in = 46 (from PE[2][2])
  PE[1][3]: partial_in = 23 (from PE[2][3])
  PE[2][0]: partial_in = 27 (from PE[3][0])
  PE[2][1]: partial_in = 54 (from PE[3][1])
  PE[2][2]: partial_in = 27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-20 -> result=-20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=45 -> result=45
  PE[0][2]: input=0 * weight=0 = 0, partial_in=70 -> result=70
  PE[0][3]: input=0 * weight=1 = 0, partial_in=65 -> result=65
  PE[1][0]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[1][1]: input=26 * weight=1 = 26, partial_in=23 -> result=49
  PE[1][2]: input=26 * weight=1 = 26, partial_in=46 -> result=72
  PE[1][3]: input=26 * weight=2 = 52, partial_in=23 -> result=75
  PE[2][0]: input=21 * weight=0 = 0, partial_in=27 -> result=27
  PE[2][1]: input=21 * weight=1 = 21, partial_in=54 -> result=75
  PE[2][2]: input=21 * weight=2 = 42, partial_in=27 -> result=69
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][1]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[3][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][3]: input=24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -20       45       70       65 
  Row 1:      -26       49       72       75 
  Row 2:       27       75       69       21 
  Row 3:       24       48       24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -20 │  45 │  70 │  65 │
├─────┼─────┼─────┼─────┤
│ -26 │  49 │  72 │  75 │
├─────┼─────┼─────┼─────┤
│  27 │  75 │  69 │  21 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 28
  Row 3: input_block[3][2] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = 49 (from PE[1][1])
  PE[0][2]: partial_in = 72 (from PE[1][2])
  PE[0][3]: partial_in = 75 (from PE[1][3])
  PE[1][0]: partial_in = 27 (from PE[2][0])
  PE[1][1]: partial_in = 75 (from PE[2][1])
  PE[1][2]: partial_in = 69 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = 24 (from PE[3][0])
  PE[2][1]: partial_in = 48 (from PE[3][1])
  PE[2][2]: partial_in = 24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-26 -> result=-26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=49 -> result=49
  PE[0][2]: input=0 * weight=0 = 0, partial_in=72 -> result=72
  PE[0][3]: input=0 * weight=1 = 0, partial_in=75 -> result=75
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=27 -> result=27
  PE[1][1]: input=0 * weight=1 = 0, partial_in=75 -> result=75
  PE[1][2]: input=0 * weight=1 = 0, partial_in=69 -> result=69
  PE[1][3]: input=0 * weight=2 = 0, partial_in=21 -> result=21
  PE[2][0]: input=28 * weight=0 = 0, partial_in=24 -> result=24
  PE[2][1]: input=28 * weight=1 = 28, partial_in=48 -> result=76
  PE[2][2]: input=28 * weight=2 = 56, partial_in=24 -> result=80
  PE[2][3]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -26       49       72       75 
  Row 1:       27       75       69       21 
  Row 2:       24       76       80       28 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │  49 │  72 │  75 │
├─────┼─────┼─────┼─────┤
│  27 │  75 │  69 │  21 │
├─────┼─────┼─────┼─────┤
│  24 │  76 │  80 │  28 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = 75 (from PE[1][1])
  PE[0][2]: partial_in = 69 (from PE[1][2])
  PE[0][3]: partial_in = 21 (from PE[1][3])
  PE[1][0]: partial_in = 24 (from PE[2][0])
  PE[1][1]: partial_in = 76 (from PE[2][1])
  PE[1][2]: partial_in = 80 (from PE[2][2])
  PE[1][3]: partial_in = 28 (from PE[2][3])
  PE[2][0]: partial_in = 22 (from PE[3][0])
  PE[2][1]: partial_in = 44 (from PE[3][1])
  PE[2][2]: partial_in = 22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=27 -> result=27
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=75 -> result=75
  PE[0][2]: input=0 * weight=0 = 0, partial_in=69 -> result=69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=21 -> result=21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=24 -> result=24
  PE[1][1]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[1][2]: input=0 * weight=1 = 0, partial_in=80 -> result=80
  PE[1][3]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][0]: input=0 * weight=0 = 0, partial_in=22 -> result=22
  PE[2][1]: input=0 * weight=1 = 0, partial_in=44 -> result=44
  PE[2][2]: input=0 * weight=2 = 0, partial_in=22 -> result=22
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       27       75       69       21 
  Row 1:       24       76       80       28 
  Row 2:       22       44       22        0 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  27 │  75 │  69 │  21 │
├─────┼─────┼─────┼─────┤
│  24 │  76 │  80 │  28 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       27       75       69       21 
Row 1:       24       76       80       28 
Row 2:       22       44       22        0 
Row 3:       30       60       30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 27 -> clamp(27) -> final(155)
  PE[0][1]: 75 -> clamp(75) -> final(203)
  PE[0][2]: 69 -> clamp(69) -> final(197)
  PE[0][3]: 21 -> clamp(21) -> final(149)
  PE[1][0]: 24 -> clamp(24) -> final(152)
  PE[1][1]: 76 -> clamp(76) -> final(204)
  PE[1][2]: 80 -> clamp(80) -> final(208)
  PE[1][3]: 28 -> clamp(28) -> final(156)
  PE[2][0]: 22 -> clamp(22) -> final(150)
  PE[2][1]: 44 -> clamp(44) -> final(172)
  PE[2][2]: 22 -> clamp(22) -> final(150)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 30 -> clamp(30) -> final(158)
  PE[3][1]: 60 -> clamp(60) -> final(188)
  PE[3][2]: 30 -> clamp(30) -> final(158)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   155    203    197    149 
   152    204    208    156 
   150    172    150    128 
   158    188    158    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  17  -48 -115 -112 
   3  -75 -113 -113 
 -18  -99 -100 -107 
 -34 -113  -89 -102 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 17
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=17 * weight=-2 = -34, partial_in=0 -> result=-34
  PE[0][1]: input=17 * weight=-1 = -17, partial_in=0 -> result=-17
  PE[0][2]: input=17 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=17 * weight=1 = 17, partial_in=0 -> result=17
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -34      -17        0       17 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │ -17 │   0 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -48
  Row 1: input_block[1][0] = 3
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-48 * weight=-2 = 96, partial_in=0 -> result=96
  PE[0][1]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[0][2]: input=-48 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       96       48        0      -48 
  Row 1:       -3        3        3        6 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │  48 │   0 │ -48 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -115
  Row 1: input_block[1][1] = -75
  Row 2: input_block[2][0] = -18
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-115 * weight=-2 = 230, partial_in=-3 -> result=227
  PE[0][1]: input=-115 * weight=-1 = 115, partial_in=3 -> result=118
  PE[0][2]: input=-115 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=-115 * weight=1 = -115, partial_in=6 -> result=-109
  PE[1][0]: input=-75 * weight=-1 = 75, partial_in=0 -> result=75
  PE[1][1]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[1][2]: input=-75 * weight=1 = -75, partial_in=0 -> result=-75
  PE[1][3]: input=-75 * weight=2 = -150, partial_in=0 -> result=-150
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=0 -> result=-36
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      227      118        3     -109 
  Row 1:       75      -75      -75     -150 
  Row 2:        0      -18      -36      -18 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 227 │ 118 │   3 │-109 │
├─────┼─────┼─────┼─────┤
│  75 │ -75 │ -75 │-150 │
├─────┼─────┼─────┼─────┤
│   0 │ -18 │ -36 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -112
  Row 1: input_block[1][2] = -113
  Row 2: input_block[2][1] = -99
  Row 3: input_block[3][0] = -34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 75 (from PE[1][0])
  PE[0][1]: partial_in = -75 (from PE[1][1])
  PE[0][2]: partial_in = -75 (from PE[1][2])
  PE[0][3]: partial_in = -150 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -18 (from PE[2][1])
  PE[1][2]: partial_in = -36 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-112 * weight=-2 = 224, partial_in=75 -> result=299
  PE[0][1]: input=-112 * weight=-1 = 112, partial_in=-75 -> result=37
  PE[0][2]: input=-112 * weight=0 = 0, partial_in=-75 -> result=-75
  PE[0][3]: input=-112 * weight=1 = -112, partial_in=-150 -> result=-262
  PE[1][0]: input=-113 * weight=-1 = 113, partial_in=0 -> result=113
  PE[1][1]: input=-113 * weight=1 = -113, partial_in=-18 -> result=-131
  PE[1][2]: input=-113 * weight=1 = -113, partial_in=-36 -> result=-149
  PE[1][3]: input=-113 * weight=2 = -226, partial_in=-18 -> result=-244
  PE[2][0]: input=-99 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[2][2]: input=-99 * weight=2 = -198, partial_in=0 -> result=-198
  PE[2][3]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[3][0]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][1]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[3][2]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][3]: input=-34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      299       37      -75     -262 
  Row 1:      113     -131     -149     -244 
  Row 2:        0      -99     -198      -99 
  Row 3:      -34      -68      -34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 299 │  37 │ -75 │-262 │
├─────┼─────┼─────┼─────┤
│ 113 │-131 │-149 │-244 │
├─────┼─────┼─────┼─────┤
│   0 │ -99 │-198 │ -99 │
├─────┼─────┼─────┼─────┤
│ -34 │ -68 │ -34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -113
  Row 2: input_block[2][2] = -100
  Row 3: input_block[3][1] = -113

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 113 (from PE[1][0])
  PE[0][1]: partial_in = -131 (from PE[1][1])
  PE[0][2]: partial_in = -149 (from PE[1][2])
  PE[0][3]: partial_in = -244 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -99 (from PE[2][1])
  PE[1][2]: partial_in = -198 (from PE[2][2])
  PE[1][3]: partial_in = -99 (from PE[2][3])
  PE[2][0]: partial_in = -34 (from PE[3][0])
  PE[2][1]: partial_in = -68 (from PE[3][1])
  PE[2][2]: partial_in = -34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=113 -> result=113
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-131 -> result=-131
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-149 -> result=-149
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-244 -> result=-244
  PE[1][0]: input=-113 * weight=-1 = 113, partial_in=0 -> result=113
  PE[1][1]: input=-113 * weight=1 = -113, partial_in=-99 -> result=-212
  PE[1][2]: input=-113 * weight=1 = -113, partial_in=-198 -> result=-311
  PE[1][3]: input=-113 * weight=2 = -226, partial_in=-99 -> result=-325
  PE[2][0]: input=-100 * weight=0 = 0, partial_in=-34 -> result=-34
  PE[2][1]: input=-100 * weight=1 = -100, partial_in=-68 -> result=-168
  PE[2][2]: input=-100 * weight=2 = -200, partial_in=-34 -> result=-234
  PE[2][3]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][0]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][1]: input=-113 * weight=2 = -226, partial_in=0 -> result=-226
  PE[3][2]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][3]: input=-113 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      113     -131     -149     -244 
  Row 1:      113     -212     -311     -325 
  Row 2:      -34     -168     -234     -100 
  Row 3:     -113     -226     -113        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 113 │-131 │-149 │-244 │
├─────┼─────┼─────┼─────┤
│ 113 │-212 │-311 │-325 │
├─────┼─────┼─────┼─────┤
│ -34 │-168 │-234 │-100 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -107
  Row 3: input_block[3][2] = -89

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 113 (from PE[1][0])
  PE[0][1]: partial_in = -212 (from PE[1][1])
  PE[0][2]: partial_in = -311 (from PE[1][2])
  PE[0][3]: partial_in = -325 (from PE[1][3])
  PE[1][0]: partial_in = -34 (from PE[2][0])
  PE[1][1]: partial_in = -168 (from PE[2][1])
  PE[1][2]: partial_in = -234 (from PE[2][2])
  PE[1][3]: partial_in = -100 (from PE[2][3])
  PE[2][0]: partial_in = -113 (from PE[3][0])
  PE[2][1]: partial_in = -226 (from PE[3][1])
  PE[2][2]: partial_in = -113 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=113 -> result=113
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-212 -> result=-212
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-311 -> result=-311
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-325 -> result=-325
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-34 -> result=-34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-168 -> result=-168
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-234 -> result=-234
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-100 -> result=-100
  PE[2][0]: input=-107 * weight=0 = 0, partial_in=-113 -> result=-113
  PE[2][1]: input=-107 * weight=1 = -107, partial_in=-226 -> result=-333
  PE[2][2]: input=-107 * weight=2 = -214, partial_in=-113 -> result=-327
  PE[2][3]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[3][0]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[3][1]: input=-89 * weight=2 = -178, partial_in=0 -> result=-178
  PE[3][2]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[3][3]: input=-89 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      113     -212     -311     -325 
  Row 1:      -34     -168     -234     -100 
  Row 2:     -113     -333     -327     -107 
  Row 3:      -89     -178      -89        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 113 │-212 │-311 │-325 │
├─────┼─────┼─────┼─────┤
│ -34 │-168 │-234 │-100 │
├─────┼─────┼─────┼─────┤
│-113 │-333 │-327 │-107 │
├─────┼─────┼─────┼─────┤
│ -89 │-178 │ -89 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -102

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = -168 (from PE[1][1])
  PE[0][2]: partial_in = -234 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = -113 (from PE[2][0])
  PE[1][1]: partial_in = -333 (from PE[2][1])
  PE[1][2]: partial_in = -327 (from PE[2][2])
  PE[1][3]: partial_in = -107 (from PE[2][3])
  PE[2][0]: partial_in = -89 (from PE[3][0])
  PE[2][1]: partial_in = -178 (from PE[3][1])
  PE[2][2]: partial_in = -89 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-34 -> result=-34
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-168 -> result=-168
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-234 -> result=-234
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-113 -> result=-113
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-333 -> result=-333
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-327 -> result=-327
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-107 -> result=-107
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-89 -> result=-89
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-178 -> result=-178
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-89 -> result=-89
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[3][1]: input=-102 * weight=2 = -204, partial_in=0 -> result=-204
  PE[3][2]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[3][3]: input=-102 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -34     -168     -234     -100 
  Row 1:     -113     -333     -327     -107 
  Row 2:      -89     -178      -89        0 
  Row 3:     -102     -204     -102        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -34 │-168 │-234 │-100 │
├─────┼─────┼─────┼─────┤
│-113 │-333 │-327 │-107 │
├─────┼─────┼─────┼─────┤
│ -89 │-178 │ -89 │   0 │
├─────┼─────┼─────┼─────┤
│-102 │-204 │-102 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -34     -168     -234     -100 
Row 1:     -113     -333     -327     -107 
Row 2:      -89     -178      -89        0 
Row 3:     -102     -204     -102        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -34 -> clamp(-34) -> final(94)
  PE[0][1]: -168 -> clamp(-128) -> final(0)
  PE[0][2]: -234 -> clamp(-128) -> final(0)
  PE[0][3]: -100 -> clamp(-100) -> final(28)
  PE[1][0]: -113 -> clamp(-113) -> final(15)
  PE[1][1]: -333 -> clamp(-128) -> final(0)
  PE[1][2]: -327 -> clamp(-128) -> final(0)
  PE[1][3]: -107 -> clamp(-107) -> final(21)
  PE[2][0]: -89 -> clamp(-89) -> final(39)
  PE[2][1]: -178 -> clamp(-128) -> final(0)
  PE[2][2]: -89 -> clamp(-89) -> final(39)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -102 -> clamp(-102) -> final(26)
  PE[3][1]: -204 -> clamp(-128) -> final(0)
  PE[3][2]: -102 -> clamp(-102) -> final(26)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    94      0      0     28 
    15      0      0     21 
    39      0     39    128 
    26      0     26    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -99 -101  -62  -42 
 -95  -96  -70  -48 
 -93  -91  -82  -56 
 -92  -90  -93  -63 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -99
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-99 * weight=-2 = 198, partial_in=0 -> result=198
  PE[0][1]: input=-99 * weight=-1 = 99, partial_in=0 -> result=99
  PE[0][2]: input=-99 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      198       99        0      -99 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 198 │  99 │   0 │ -99 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -101
  Row 1: input_block[1][0] = -95
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-101 * weight=-2 = 202, partial_in=0 -> result=202
  PE[0][1]: input=-101 * weight=-1 = 101, partial_in=0 -> result=101
  PE[0][2]: input=-101 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-101 * weight=1 = -101, partial_in=0 -> result=-101
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=0 -> result=-190
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      202      101        0     -101 
  Row 1:       95      -95      -95     -190 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 202 │ 101 │   0 │-101 │
├─────┼─────┼─────┼─────┤
│  95 │ -95 │ -95 │-190 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -62
  Row 1: input_block[1][1] = -96
  Row 2: input_block[2][0] = -93
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -190 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-62 * weight=-2 = 124, partial_in=95 -> result=219
  PE[0][1]: input=-62 * weight=-1 = 62, partial_in=-95 -> result=-33
  PE[0][2]: input=-62 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=-62 * weight=1 = -62, partial_in=-190 -> result=-252
  PE[1][0]: input=-96 * weight=-1 = 96, partial_in=0 -> result=96
  PE[1][1]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[1][2]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[1][3]: input=-96 * weight=2 = -192, partial_in=0 -> result=-192
  PE[2][0]: input=-93 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[2][2]: input=-93 * weight=2 = -186, partial_in=0 -> result=-186
  PE[2][3]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      219      -33      -95     -252 
  Row 1:       96      -96      -96     -192 
  Row 2:        0      -93     -186      -93 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 219 │ -33 │ -95 │-252 │
├─────┼─────┼─────┼─────┤
│  96 │ -96 │ -96 │-192 │
├─────┼─────┼─────┼─────┤
│   0 │ -93 │-186 │ -93 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -42
  Row 1: input_block[1][2] = -70
  Row 2: input_block[2][1] = -91
  Row 3: input_block[3][0] = -92

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 96 (from PE[1][0])
  PE[0][1]: partial_in = -96 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -192 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -93 (from PE[2][1])
  PE[1][2]: partial_in = -186 (from PE[2][2])
  PE[1][3]: partial_in = -93 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-42 * weight=-2 = 84, partial_in=96 -> result=180
  PE[0][1]: input=-42 * weight=-1 = 42, partial_in=-96 -> result=-54
  PE[0][2]: input=-42 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=-42 * weight=1 = -42, partial_in=-192 -> result=-234
  PE[1][0]: input=-70 * weight=-1 = 70, partial_in=0 -> result=70
  PE[1][1]: input=-70 * weight=1 = -70, partial_in=-93 -> result=-163
  PE[1][2]: input=-70 * weight=1 = -70, partial_in=-186 -> result=-256
  PE[1][3]: input=-70 * weight=2 = -140, partial_in=-93 -> result=-233
  PE[2][0]: input=-91 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[2][2]: input=-91 * weight=2 = -182, partial_in=0 -> result=-182
  PE[2][3]: input=-91 * weight=1 = -91, partial_in=0 -> result=-91
  PE[3][0]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][1]: input=-92 * weight=2 = -184, partial_in=0 -> result=-184
  PE[3][2]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][3]: input=-92 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      180      -54      -96     -234 
  Row 1:       70     -163     -256     -233 
  Row 2:        0      -91     -182      -91 
  Row 3:      -92     -184      -92        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 180 │ -54 │ -96 │-234 │
├─────┼─────┼─────┼─────┤
│  70 │-163 │-256 │-233 │
├─────┼─────┼─────┼─────┤
│   0 │ -91 │-182 │ -91 │
├─────┼─────┼─────┼─────┤
│ -92 │-184 │ -92 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -48
  Row 2: input_block[2][2] = -82
  Row 3: input_block[3][1] = -90

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 70 (from PE[1][0])
  PE[0][1]: partial_in = -163 (from PE[1][1])
  PE[0][2]: partial_in = -256 (from PE[1][2])
  PE[0][3]: partial_in = -233 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -91 (from PE[2][1])
  PE[1][2]: partial_in = -182 (from PE[2][2])
  PE[1][3]: partial_in = -91 (from PE[2][3])
  PE[2][0]: partial_in = -92 (from PE[3][0])
  PE[2][1]: partial_in = -184 (from PE[3][1])
  PE[2][2]: partial_in = -92 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=70 -> result=70
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-163 -> result=-163
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-256 -> result=-256
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-233 -> result=-233
  PE[1][0]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[1][1]: input=-48 * weight=1 = -48, partial_in=-91 -> result=-139
  PE[1][2]: input=-48 * weight=1 = -48, partial_in=-182 -> result=-230
  PE[1][3]: input=-48 * weight=2 = -96, partial_in=-91 -> result=-187
  PE[2][0]: input=-82 * weight=0 = 0, partial_in=-92 -> result=-92
  PE[2][1]: input=-82 * weight=1 = -82, partial_in=-184 -> result=-266
  PE[2][2]: input=-82 * weight=2 = -164, partial_in=-92 -> result=-256
  PE[2][3]: input=-82 * weight=1 = -82, partial_in=0 -> result=-82
  PE[3][0]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][1]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[3][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][3]: input=-90 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       70     -163     -256     -233 
  Row 1:       48     -139     -230     -187 
  Row 2:      -92     -266     -256      -82 
  Row 3:      -90     -180      -90        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  70 │-163 │-256 │-233 │
├─────┼─────┼─────┼─────┤
│  48 │-139 │-230 │-187 │
├─────┼─────┼─────┼─────┤
│ -92 │-266 │-256 │ -82 │
├─────┼─────┼─────┼─────┤
│ -90 │-180 │ -90 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -56
  Row 3: input_block[3][2] = -93

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 48 (from PE[1][0])
  PE[0][1]: partial_in = -139 (from PE[1][1])
  PE[0][2]: partial_in = -230 (from PE[1][2])
  PE[0][3]: partial_in = -187 (from PE[1][3])
  PE[1][0]: partial_in = -92 (from PE[2][0])
  PE[1][1]: partial_in = -266 (from PE[2][1])
  PE[1][2]: partial_in = -256 (from PE[2][2])
  PE[1][3]: partial_in = -82 (from PE[2][3])
  PE[2][0]: partial_in = -90 (from PE[3][0])
  PE[2][1]: partial_in = -180 (from PE[3][1])
  PE[2][2]: partial_in = -90 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=48 -> result=48
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-139 -> result=-139
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-230 -> result=-230
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-187 -> result=-187
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-92 -> result=-92
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-266 -> result=-266
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-256 -> result=-256
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-82 -> result=-82
  PE[2][0]: input=-56 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[2][1]: input=-56 * weight=1 = -56, partial_in=-180 -> result=-236
  PE[2][2]: input=-56 * weight=2 = -112, partial_in=-90 -> result=-202
  PE[2][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][0]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][1]: input=-93 * weight=2 = -186, partial_in=0 -> result=-186
  PE[3][2]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[3][3]: input=-93 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       48     -139     -230     -187 
  Row 1:      -92     -266     -256      -82 
  Row 2:      -90     -236     -202      -56 
  Row 3:      -93     -186      -93        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │-139 │-230 │-187 │
├─────┼─────┼─────┼─────┤
│ -92 │-266 │-256 │ -82 │
├─────┼─────┼─────┼─────┤
│ -90 │-236 │-202 │ -56 │
├─────┼─────┼─────┼─────┤
│ -93 │-186 │ -93 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -63

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -92 (from PE[1][0])
  PE[0][1]: partial_in = -266 (from PE[1][1])
  PE[0][2]: partial_in = -256 (from PE[1][2])
  PE[0][3]: partial_in = -82 (from PE[1][3])
  PE[1][0]: partial_in = -90 (from PE[2][0])
  PE[1][1]: partial_in = -236 (from PE[2][1])
  PE[1][2]: partial_in = -202 (from PE[2][2])
  PE[1][3]: partial_in = -56 (from PE[2][3])
  PE[2][0]: partial_in = -93 (from PE[3][0])
  PE[2][1]: partial_in = -186 (from PE[3][1])
  PE[2][2]: partial_in = -93 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-92 -> result=-92
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-266 -> result=-266
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-256 -> result=-256
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-82 -> result=-82
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-90 -> result=-90
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-236 -> result=-236
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-202 -> result=-202
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-56 -> result=-56
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-93 -> result=-93
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-186 -> result=-186
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-93 -> result=-93
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][1]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[3][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][3]: input=-63 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -92     -266     -256      -82 
  Row 1:      -90     -236     -202      -56 
  Row 2:      -93     -186      -93        0 
  Row 3:      -63     -126      -63        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -92 │-266 │-256 │ -82 │
├─────┼─────┼─────┼─────┤
│ -90 │-236 │-202 │ -56 │
├─────┼─────┼─────┼─────┤
│ -93 │-186 │ -93 │   0 │
├─────┼─────┼─────┼─────┤
│ -63 │-126 │ -63 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -92     -266     -256      -82 
Row 1:      -90     -236     -202      -56 
Row 2:      -93     -186      -93        0 
Row 3:      -63     -126      -63        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -92 -> clamp(-92) -> final(36)
  PE[0][1]: -266 -> clamp(-128) -> final(0)
  PE[0][2]: -256 -> clamp(-128) -> final(0)
  PE[0][3]: -82 -> clamp(-82) -> final(46)
  PE[1][0]: -90 -> clamp(-90) -> final(38)
  PE[1][1]: -236 -> clamp(-128) -> final(0)
  PE[1][2]: -202 -> clamp(-128) -> final(0)
  PE[1][3]: -56 -> clamp(-56) -> final(72)
  PE[2][0]: -93 -> clamp(-93) -> final(35)
  PE[2][1]: -186 -> clamp(-128) -> final(0)
  PE[2][2]: -93 -> clamp(-93) -> final(35)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -63 -> clamp(-63) -> final(65)
  PE[3][1]: -126 -> clamp(-126) -> final(2)
  PE[3][2]: -63 -> clamp(-63) -> final(65)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    36      0      0     46 
    38      0      0     72 
    35      0     35    128 
    65      2     65    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -40  -27  -42  -45 
 -44  -29  -41  -43 
 -46  -34  -39  -39 
 -48  -37  -37  -35 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -40
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=0 -> result=80
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       80       40        0      -40 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  80 │  40 │   0 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -27
  Row 1: input_block[1][0] = -44
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=0 -> result=54
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       54       27        0      -27 
  Row 1:       44      -44      -44      -88 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │  27 │   0 │ -27 │
├─────┼─────┼─────┼─────┤
│  44 │ -44 │ -44 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -42
  Row 1: input_block[1][1] = -29
  Row 2: input_block[2][0] = -46
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-42 * weight=-2 = 84, partial_in=44 -> result=128
  PE[0][1]: input=-42 * weight=-1 = 42, partial_in=-44 -> result=-2
  PE[0][2]: input=-42 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=-42 * weight=1 = -42, partial_in=-88 -> result=-130
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=-46 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[2][2]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[2][3]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      128       -2      -44     -130 
  Row 1:       29      -29      -29      -58 
  Row 2:        0      -46      -92      -46 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 128 │  -2 │ -44 │-130 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │ -46 │ -92 │ -46 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -45
  Row 1: input_block[1][2] = -41
  Row 2: input_block[2][1] = -34
  Row 3: input_block[3][0] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -46 (from PE[2][1])
  PE[1][2]: partial_in = -92 (from PE[2][2])
  PE[1][3]: partial_in = -46 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=29 -> result=119
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=-29 -> result=16
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=-58 -> result=-103
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-46 -> result=-87
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-92 -> result=-133
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-46 -> result=-128
  PE[2][0]: input=-34 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[2][2]: input=-34 * weight=2 = -68, partial_in=0 -> result=-68
  PE[2][3]: input=-34 * weight=1 = -34, partial_in=0 -> result=-34
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      119       16      -29     -103 
  Row 1:       41      -87     -133     -128 
  Row 2:        0      -34      -68      -34 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 119 │  16 │ -29 │-103 │
├─────┼─────┼─────┼─────┤
│  41 │ -87 │-133 │-128 │
├─────┼─────┼─────┼─────┤
│   0 │ -34 │ -68 │ -34 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -43
  Row 2: input_block[2][2] = -39
  Row 3: input_block[3][1] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -87 (from PE[1][1])
  PE[0][2]: partial_in = -133 (from PE[1][2])
  PE[0][3]: partial_in = -128 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -34 (from PE[2][1])
  PE[1][2]: partial_in = -68 (from PE[2][2])
  PE[1][3]: partial_in = -34 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-87 -> result=-87
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-133 -> result=-133
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-128 -> result=-128
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=-34 -> result=-77
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=-68 -> result=-111
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=-34 -> result=-120
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-96 -> result=-135
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-48 -> result=-126
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       41      -87     -133     -128 
  Row 1:       43      -77     -111     -120 
  Row 2:      -48     -135     -126      -39 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │ -87 │-133 │-128 │
├─────┼─────┼─────┼─────┤
│  43 │ -77 │-111 │-120 │
├─────┼─────┼─────┼─────┤
│ -48 │-135 │-126 │ -39 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -39
  Row 3: input_block[3][2] = -37

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -77 (from PE[1][1])
  PE[0][2]: partial_in = -111 (from PE[1][2])
  PE[0][3]: partial_in = -120 (from PE[1][3])
  PE[1][0]: partial_in = -48 (from PE[2][0])
  PE[1][1]: partial_in = -135 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=43 -> result=43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-77 -> result=-77
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-111 -> result=-111
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-120 -> result=-120
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-135 -> result=-135
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-126 -> result=-126
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-74 -> result=-113
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-37 -> result=-115
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][1]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[3][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][3]: input=-37 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       43      -77     -111     -120 
  Row 1:      -48     -135     -126      -39 
  Row 2:      -37     -113     -115      -39 
  Row 3:      -37      -74      -37        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │ -77 │-111 │-120 │
├─────┼─────┼─────┼─────┤
│ -48 │-135 │-126 │ -39 │
├─────┼─────┼─────┼─────┤
│ -37 │-113 │-115 │ -39 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -48 (from PE[1][0])
  PE[0][1]: partial_in = -135 (from PE[1][1])
  PE[0][2]: partial_in = -126 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = -37 (from PE[2][0])
  PE[1][1]: partial_in = -113 (from PE[2][1])
  PE[1][2]: partial_in = -115 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -37 (from PE[3][0])
  PE[2][1]: partial_in = -74 (from PE[3][1])
  PE[2][2]: partial_in = -37 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-48 -> result=-48
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-135 -> result=-135
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-126 -> result=-126
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-113 -> result=-113
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-115 -> result=-115
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-74 -> result=-74
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -48     -135     -126      -39 
  Row 1:      -37     -113     -115      -39 
  Row 2:      -37      -74      -37        0 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -48 │-135 │-126 │ -39 │
├─────┼─────┼─────┼─────┤
│ -37 │-113 │-115 │ -39 │
├─────┼─────┼─────┼─────┤
│ -37 │ -74 │ -37 │   0 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -48     -135     -126      -39 
Row 1:      -37     -113     -115      -39 
Row 2:      -37      -74      -37        0 
Row 3:      -35      -70      -35        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -48 -> clamp(-48) -> final(80)
  PE[0][1]: -135 -> clamp(-128) -> final(0)
  PE[0][2]: -126 -> clamp(-126) -> final(2)
  PE[0][3]: -39 -> clamp(-39) -> final(89)
  PE[1][0]: -37 -> clamp(-37) -> final(91)
  PE[1][1]: -113 -> clamp(-113) -> final(15)
  PE[1][2]: -115 -> clamp(-115) -> final(13)
  PE[1][3]: -39 -> clamp(-39) -> final(89)
  PE[2][0]: -37 -> clamp(-37) -> final(91)
  PE[2][1]: -74 -> clamp(-74) -> final(54)
  PE[2][2]: -37 -> clamp(-37) -> final(91)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -35 -> clamp(-35) -> final(93)
  PE[3][1]: -70 -> clamp(-70) -> final(58)
  PE[3][2]: -35 -> clamp(-35) -> final(93)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    80      0      2     89 
    91     15     13     89 
    91     54     91    128 
    93     58     93    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -20  -26  -41  -24 
 -21  -25  -39  -24 
 -23  -24  -32  -23 
 -25  -24  -27  -22 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -20
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=0 -> result=40
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       40       20        0      -20 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  20 │   0 │ -20 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -26
  Row 1: input_block[1][0] = -21
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=0 -> result=52
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=0 -> result=26
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[1][0]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[1][1]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][2]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][3]: input=-21 * weight=2 = -42, partial_in=0 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       52       26        0      -26 
  Row 1:       21      -21      -21      -42 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  52 │  26 │   0 │ -26 │
├─────┼─────┼─────┼─────┤
│  21 │ -21 │ -21 │ -42 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -41
  Row 1: input_block[1][1] = -25
  Row 2: input_block[2][0] = -23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 21 (from PE[1][0])
  PE[0][1]: partial_in = -21 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=21 -> result=103
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=-21 -> result=20
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=-42 -> result=-83
  PE[1][0]: input=-25 * weight=-1 = 25, partial_in=0 -> result=25
  PE[1][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[1][3]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      103       20      -21      -83 
  Row 1:       25      -25      -25      -50 
  Row 2:        0      -23      -46      -23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 103 │  20 │ -21 │ -83 │
├─────┼─────┼─────┼─────┤
│  25 │ -25 │ -25 │ -50 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -24
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = -24
  Row 3: input_block[3][0] = -25

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 25 (from PE[1][0])
  PE[0][1]: partial_in = -25 (from PE[1][1])
  PE[0][2]: partial_in = -25 (from PE[1][2])
  PE[0][3]: partial_in = -50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=25 -> result=73
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=-25 -> result=-1
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=-50 -> result=-74
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=-23 -> result=-62
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=-46 -> result=-85
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=-23 -> result=-101
  PE[2][0]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[2][2]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[2][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][0]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][1]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[3][2]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][3]: input=-25 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       73       -1      -25      -74 
  Row 1:       39      -62      -85     -101 
  Row 2:        0      -24      -48      -24 
  Row 3:      -25      -50      -25        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  73 │  -1 │ -25 │ -74 │
├─────┼─────┼─────┼─────┤
│  39 │ -62 │ -85 │-101 │
├─────┼─────┼─────┼─────┤
│   0 │ -24 │ -48 │ -24 │
├─────┼─────┼─────┼─────┤
│ -25 │ -50 │ -25 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -24
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -62 (from PE[1][1])
  PE[0][2]: partial_in = -85 (from PE[1][2])
  PE[0][3]: partial_in = -101 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -24 (from PE[2][1])
  PE[1][2]: partial_in = -48 (from PE[2][2])
  PE[1][3]: partial_in = -24 (from PE[2][3])
  PE[2][0]: partial_in = -25 (from PE[3][0])
  PE[2][1]: partial_in = -50 (from PE[3][1])
  PE[2][2]: partial_in = -25 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-62 -> result=-62
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-85 -> result=-85
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-101 -> result=-101
  PE[1][0]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[1][1]: input=-24 * weight=1 = -24, partial_in=-24 -> result=-48
  PE[1][2]: input=-24 * weight=1 = -24, partial_in=-48 -> result=-72
  PE[1][3]: input=-24 * weight=2 = -48, partial_in=-24 -> result=-72
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=-25 -> result=-25
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=-50 -> result=-82
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=-25 -> result=-89
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39      -62      -85     -101 
  Row 1:       24      -48      -72      -72 
  Row 2:      -25      -82      -89      -32 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │ -62 │ -85 │-101 │
├─────┼─────┼─────┼─────┤
│  24 │ -48 │ -72 │ -72 │
├─────┼─────┼─────┼─────┤
│ -25 │ -82 │ -89 │ -32 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -23
  Row 3: input_block[3][2] = -27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 24 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -72 (from PE[1][3])
  PE[1][0]: partial_in = -25 (from PE[2][0])
  PE[1][1]: partial_in = -82 (from PE[2][1])
  PE[1][2]: partial_in = -89 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = -24 (from PE[3][0])
  PE[2][1]: partial_in = -48 (from PE[3][1])
  PE[2][2]: partial_in = -24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=24 -> result=24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-48 -> result=-48
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-72 -> result=-72
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-25 -> result=-25
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-82 -> result=-82
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-89 -> result=-89
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=-24 -> result=-24
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=-48 -> result=-71
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=-24 -> result=-70
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][1]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[3][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[3][3]: input=-27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       24      -48      -72      -72 
  Row 1:      -25      -82      -89      -32 
  Row 2:      -24      -71      -70      -23 
  Row 3:      -27      -54      -27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  24 │ -48 │ -72 │ -72 │
├─────┼─────┼─────┼─────┤
│ -25 │ -82 │ -89 │ -32 │
├─────┼─────┼─────┼─────┤
│ -24 │ -71 │ -70 │ -23 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = -82 (from PE[1][1])
  PE[0][2]: partial_in = -89 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -24 (from PE[2][0])
  PE[1][1]: partial_in = -71 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = -27 (from PE[3][0])
  PE[2][1]: partial_in = -54 (from PE[3][1])
  PE[2][2]: partial_in = -27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-82 -> result=-82
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-89 -> result=-89
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-24 -> result=-24
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-71 -> result=-71
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-23 -> result=-23
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-27 -> result=-27
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -25      -82      -89      -32 
  Row 1:      -24      -71      -70      -23 
  Row 2:      -27      -54      -27        0 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │ -82 │ -89 │ -32 │
├─────┼─────┼─────┼─────┤
│ -24 │ -71 │ -70 │ -23 │
├─────┼─────┼─────┼─────┤
│ -27 │ -54 │ -27 │   0 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -25      -82      -89      -32 
Row 1:      -24      -71      -70      -23 
Row 2:      -27      -54      -27        0 
Row 3:      -22      -44      -22        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -25 -> clamp(-25) -> final(103)
  PE[0][1]: -82 -> clamp(-82) -> final(46)
  PE[0][2]: -89 -> clamp(-89) -> final(39)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: -24 -> clamp(-24) -> final(104)
  PE[1][1]: -71 -> clamp(-71) -> final(57)
  PE[1][2]: -70 -> clamp(-70) -> final(58)
  PE[1][3]: -23 -> clamp(-23) -> final(105)
  PE[2][0]: -27 -> clamp(-27) -> final(101)
  PE[2][1]: -54 -> clamp(-54) -> final(74)
  PE[2][2]: -27 -> clamp(-27) -> final(101)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -22 -> clamp(-22) -> final(106)
  PE[3][1]: -44 -> clamp(-44) -> final(84)
  PE[3][2]: -22 -> clamp(-22) -> final(106)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   103     46     39     96 
   104     57     58    105 
   101     74    101    128 
   106     84    106    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -22  -38  -46  -37 
 -27  -43  -51  -41 
 -25  -43  -56  -49 
 -26  -47  -64  -62 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       44       22        0      -22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -38
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-38 * weight=-2 = 76, partial_in=0 -> result=76
  PE[0][1]: input=-38 * weight=-1 = 38, partial_in=0 -> result=38
  PE[0][2]: input=-38 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       76       38        0      -38 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  76 │  38 │   0 │ -38 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -46
  Row 1: input_block[1][1] = -43
  Row 2: input_block[2][0] = -25
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-46 * weight=-2 = 92, partial_in=27 -> result=119
  PE[0][1]: input=-46 * weight=-1 = 46, partial_in=-27 -> result=19
  PE[0][2]: input=-46 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-46 * weight=1 = -46, partial_in=-54 -> result=-100
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][0]: input=-25 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[2][2]: input=-25 * weight=2 = -50, partial_in=0 -> result=-50
  PE[2][3]: input=-25 * weight=1 = -25, partial_in=0 -> result=-25
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      119       19      -27     -100 
  Row 1:       43      -43      -43      -86 
  Row 2:        0      -25      -50      -25 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 119 │  19 │ -27 │-100 │
├─────┼─────┼─────┼─────┤
│  43 │ -43 │ -43 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │ -25 │ -50 │ -25 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -37
  Row 1: input_block[1][2] = -51
  Row 2: input_block[2][1] = -43
  Row 3: input_block[3][0] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -43 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -25 (from PE[2][1])
  PE[1][2]: partial_in = -50 (from PE[2][2])
  PE[1][3]: partial_in = -25 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-37 * weight=-2 = 74, partial_in=43 -> result=117
  PE[0][1]: input=-37 * weight=-1 = 37, partial_in=-43 -> result=-6
  PE[0][2]: input=-37 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[0][3]: input=-37 * weight=1 = -37, partial_in=-86 -> result=-123
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=-25 -> result=-76
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=-50 -> result=-101
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=-25 -> result=-127
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      117       -6      -43     -123 
  Row 1:       51      -76     -101     -127 
  Row 2:        0      -43      -86      -43 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 117 │  -6 │ -43 │-123 │
├─────┼─────┼─────┼─────┤
│  51 │ -76 │-101 │-127 │
├─────┼─────┼─────┼─────┤
│   0 │ -43 │ -86 │ -43 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -41
  Row 2: input_block[2][2] = -56
  Row 3: input_block[3][1] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -76 (from PE[1][1])
  PE[0][2]: partial_in = -101 (from PE[1][2])
  PE[0][3]: partial_in = -127 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -43 (from PE[2][1])
  PE[1][2]: partial_in = -86 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=51 -> result=51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-76 -> result=-76
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-101 -> result=-101
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-127 -> result=-127
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-43 -> result=-84
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-86 -> result=-127
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-43 -> result=-125
  PE[2][0]: input=-56 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=-56 * weight=1 = -56, partial_in=-52 -> result=-108
  PE[2][2]: input=-56 * weight=2 = -112, partial_in=-26 -> result=-138
  PE[2][3]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       51      -76     -101     -127 
  Row 1:       41      -84     -127     -125 
  Row 2:      -26     -108     -138      -56 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  51 │ -76 │-101 │-127 │
├─────┼─────┼─────┼─────┤
│  41 │ -84 │-127 │-125 │
├─────┼─────┼─────┼─────┤
│ -26 │-108 │-138 │ -56 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -49
  Row 3: input_block[3][2] = -64

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -84 (from PE[1][1])
  PE[0][2]: partial_in = -127 (from PE[1][2])
  PE[0][3]: partial_in = -125 (from PE[1][3])
  PE[1][0]: partial_in = -26 (from PE[2][0])
  PE[1][1]: partial_in = -108 (from PE[2][1])
  PE[1][2]: partial_in = -138 (from PE[2][2])
  PE[1][3]: partial_in = -56 (from PE[2][3])
  PE[2][0]: partial_in = -47 (from PE[3][0])
  PE[2][1]: partial_in = -94 (from PE[3][1])
  PE[2][2]: partial_in = -47 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-84 -> result=-84
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-127 -> result=-127
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-125 -> result=-125
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-26 -> result=-26
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-138 -> result=-138
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-56 -> result=-56
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=-94 -> result=-143
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=-47 -> result=-145
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][1]: input=-64 * weight=2 = -128, partial_in=0 -> result=-128
  PE[3][2]: input=-64 * weight=1 = -64, partial_in=0 -> result=-64
  PE[3][3]: input=-64 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       41      -84     -127     -125 
  Row 1:      -26     -108     -138      -56 
  Row 2:      -47     -143     -145      -49 
  Row 3:      -64     -128      -64        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │ -84 │-127 │-125 │
├─────┼─────┼─────┼─────┤
│ -26 │-108 │-138 │ -56 │
├─────┼─────┼─────┼─────┤
│ -47 │-143 │-145 │ -49 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -62

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -26 (from PE[1][0])
  PE[0][1]: partial_in = -108 (from PE[1][1])
  PE[0][2]: partial_in = -138 (from PE[1][2])
  PE[0][3]: partial_in = -56 (from PE[1][3])
  PE[1][0]: partial_in = -47 (from PE[2][0])
  PE[1][1]: partial_in = -143 (from PE[2][1])
  PE[1][2]: partial_in = -145 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = -64 (from PE[3][0])
  PE[2][1]: partial_in = -128 (from PE[3][1])
  PE[2][2]: partial_in = -64 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-26 -> result=-26
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-108 -> result=-108
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-138 -> result=-138
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-56 -> result=-56
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-145 -> result=-145
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-128 -> result=-128
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-64 -> result=-64
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][1]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[3][2]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][3]: input=-62 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -26     -108     -138      -56 
  Row 1:      -47     -143     -145      -49 
  Row 2:      -64     -128      -64        0 
  Row 3:      -62     -124      -62        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -26 │-108 │-138 │ -56 │
├─────┼─────┼─────┼─────┤
│ -47 │-143 │-145 │ -49 │
├─────┼─────┼─────┼─────┤
│ -64 │-128 │ -64 │   0 │
├─────┼─────┼─────┼─────┤
│ -62 │-124 │ -62 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -26     -108     -138      -56 
Row 1:      -47     -143     -145      -49 
Row 2:      -64     -128      -64        0 
Row 3:      -62     -124      -62        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -26 -> clamp(-26) -> final(102)
  PE[0][1]: -108 -> clamp(-108) -> final(20)
  PE[0][2]: -138 -> clamp(-128) -> final(0)
  PE[0][3]: -56 -> clamp(-56) -> final(72)
  PE[1][0]: -47 -> clamp(-47) -> final(81)
  PE[1][1]: -143 -> clamp(-128) -> final(0)
  PE[1][2]: -145 -> clamp(-128) -> final(0)
  PE[1][3]: -49 -> clamp(-49) -> final(79)
  PE[2][0]: -64 -> clamp(-64) -> final(64)
  PE[2][1]: -128 -> clamp(-128) -> final(0)
  PE[2][2]: -64 -> clamp(-64) -> final(64)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -62 -> clamp(-62) -> final(66)
  PE[3][1]: -124 -> clamp(-124) -> final(4)
  PE[3][2]: -62 -> clamp(-62) -> final(66)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   102     20      0     72 
    81      0      0     79 
    64      0     64    128 
    66      4     66    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -24  -18  -14   -9 
 -27  -19  -14   -8 
 -36  -28  -20  -12 
 -51  -41  -31  -22 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -24
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-24 * weight=-2 = 48, partial_in=0 -> result=48
  PE[0][1]: input=-24 * weight=-1 = 24, partial_in=0 -> result=24
  PE[0][2]: input=-24 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       48       24        0      -24 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  48 │  24 │   0 │ -24 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -18
  Row 1: input_block[1][0] = -27
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-18 * weight=-2 = 36, partial_in=0 -> result=36
  PE[0][1]: input=-18 * weight=-1 = 18, partial_in=0 -> result=18
  PE[0][2]: input=-18 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[1][0]: input=-27 * weight=-1 = 27, partial_in=0 -> result=27
  PE[1][1]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][2]: input=-27 * weight=1 = -27, partial_in=0 -> result=-27
  PE[1][3]: input=-27 * weight=2 = -54, partial_in=0 -> result=-54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       36       18        0      -18 
  Row 1:       27      -27      -27      -54 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │  18 │   0 │ -18 │
├─────┼─────┼─────┼─────┤
│  27 │ -27 │ -27 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -14
  Row 1: input_block[1][1] = -19
  Row 2: input_block[2][0] = -36
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 27 (from PE[1][0])
  PE[0][1]: partial_in = -27 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=27 -> result=55
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=-27 -> result=-13
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=-54 -> result=-68
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       55      -13      -27      -68 
  Row 1:       19      -19      -19      -38 
  Row 2:        0      -36      -72      -36 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │ -13 │ -27 │ -68 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │ -36 │ -72 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -9
  Row 1: input_block[1][2] = -14
  Row 2: input_block[2][1] = -28
  Row 3: input_block[3][0] = -51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -36 (from PE[2][1])
  PE[1][2]: partial_in = -72 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-9 * weight=-2 = 18, partial_in=19 -> result=37
  PE[0][1]: input=-9 * weight=-1 = 9, partial_in=-19 -> result=-10
  PE[0][2]: input=-9 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=-9 * weight=1 = -9, partial_in=-38 -> result=-47
  PE[1][0]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[1][1]: input=-14 * weight=1 = -14, partial_in=-36 -> result=-50
  PE[1][2]: input=-14 * weight=1 = -14, partial_in=-72 -> result=-86
  PE[1][3]: input=-14 * weight=2 = -28, partial_in=-36 -> result=-64
  PE[2][0]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[2][2]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[2][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][0]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][1]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[3][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][3]: input=-51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       37      -10      -19      -47 
  Row 1:       14      -50      -86      -64 
  Row 2:        0      -28      -56      -28 
  Row 3:      -51     -102      -51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  37 │ -10 │ -19 │ -47 │
├─────┼─────┼─────┼─────┤
│  14 │ -50 │ -86 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │ -28 │ -56 │ -28 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -8
  Row 2: input_block[2][2] = -20
  Row 3: input_block[3][1] = -41

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 14 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -86 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -28 (from PE[2][1])
  PE[1][2]: partial_in = -56 (from PE[2][2])
  PE[1][3]: partial_in = -28 (from PE[2][3])
  PE[2][0]: partial_in = -51 (from PE[3][0])
  PE[2][1]: partial_in = -102 (from PE[3][1])
  PE[2][2]: partial_in = -51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=14 -> result=14
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-86 -> result=-86
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][0]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[1][1]: input=-8 * weight=1 = -8, partial_in=-28 -> result=-36
  PE[1][2]: input=-8 * weight=1 = -8, partial_in=-56 -> result=-64
  PE[1][3]: input=-8 * weight=2 = -16, partial_in=-28 -> result=-44
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=-102 -> result=-122
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=-51 -> result=-91
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][1]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[3][2]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][3]: input=-41 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       14      -50      -86      -64 
  Row 1:        8      -36      -64      -44 
  Row 2:      -51     -122      -91      -20 
  Row 3:      -41      -82      -41        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  14 │ -50 │ -86 │ -64 │
├─────┼─────┼─────┼─────┤
│   8 │ -36 │ -64 │ -44 │
├─────┼─────┼─────┼─────┤
│ -51 │-122 │ -91 │ -20 │
├─────┼─────┼─────┼─────┤
│ -41 │ -82 │ -41 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -12
  Row 3: input_block[3][2] = -31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 8 (from PE[1][0])
  PE[0][1]: partial_in = -36 (from PE[1][1])
  PE[0][2]: partial_in = -64 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = -51 (from PE[2][0])
  PE[1][1]: partial_in = -122 (from PE[2][1])
  PE[1][2]: partial_in = -91 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = -41 (from PE[3][0])
  PE[2][1]: partial_in = -82 (from PE[3][1])
  PE[2][2]: partial_in = -41 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=8 -> result=8
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-64 -> result=-64
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-44 -> result=-44
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-51 -> result=-51
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-122 -> result=-122
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-91 -> result=-91
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-20 -> result=-20
  PE[2][0]: input=-12 * weight=0 = 0, partial_in=-41 -> result=-41
  PE[2][1]: input=-12 * weight=1 = -12, partial_in=-82 -> result=-94
  PE[2][2]: input=-12 * weight=2 = -24, partial_in=-41 -> result=-65
  PE[2][3]: input=-12 * weight=1 = -12, partial_in=0 -> result=-12
  PE[3][0]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][1]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[3][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[3][3]: input=-31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        8      -36      -64      -44 
  Row 1:      -51     -122      -91      -20 
  Row 2:      -41      -94      -65      -12 
  Row 3:      -31      -62      -31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   8 │ -36 │ -64 │ -44 │
├─────┼─────┼─────┼─────┤
│ -51 │-122 │ -91 │ -20 │
├─────┼─────┼─────┼─────┤
│ -41 │ -94 │ -65 │ -12 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -51 (from PE[1][0])
  PE[0][1]: partial_in = -122 (from PE[1][1])
  PE[0][2]: partial_in = -91 (from PE[1][2])
  PE[0][3]: partial_in = -20 (from PE[1][3])
  PE[1][0]: partial_in = -41 (from PE[2][0])
  PE[1][1]: partial_in = -94 (from PE[2][1])
  PE[1][2]: partial_in = -65 (from PE[2][2])
  PE[1][3]: partial_in = -12 (from PE[2][3])
  PE[2][0]: partial_in = -31 (from PE[3][0])
  PE[2][1]: partial_in = -62 (from PE[3][1])
  PE[2][2]: partial_in = -31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-51 -> result=-51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-122 -> result=-122
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-91 -> result=-91
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-20 -> result=-20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-41 -> result=-41
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-65 -> result=-65
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-12 -> result=-12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-62 -> result=-62
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-31 -> result=-31
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -51     -122      -91      -20 
  Row 1:      -41      -94      -65      -12 
  Row 2:      -31      -62      -31        0 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -51 │-122 │ -91 │ -20 │
├─────┼─────┼─────┼─────┤
│ -41 │ -94 │ -65 │ -12 │
├─────┼─────┼─────┼─────┤
│ -31 │ -62 │ -31 │   0 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -51     -122      -91      -20 
Row 1:      -41      -94      -65      -12 
Row 2:      -31      -62      -31        0 
Row 3:      -22      -44      -22        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -51 -> clamp(-51) -> final(77)
  PE[0][1]: -122 -> clamp(-122) -> final(6)
  PE[0][2]: -91 -> clamp(-91) -> final(37)
  PE[0][3]: -20 -> clamp(-20) -> final(108)
  PE[1][0]: -41 -> clamp(-41) -> final(87)
  PE[1][1]: -94 -> clamp(-94) -> final(34)
  PE[1][2]: -65 -> clamp(-65) -> final(63)
  PE[1][3]: -12 -> clamp(-12) -> final(116)
  PE[2][0]: -31 -> clamp(-31) -> final(97)
  PE[2][1]: -62 -> clamp(-62) -> final(66)
  PE[2][2]: -31 -> clamp(-31) -> final(97)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -22 -> clamp(-22) -> final(106)
  PE[3][1]: -44 -> clamp(-44) -> final(84)
  PE[3][2]: -22 -> clamp(-22) -> final(106)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    77      6     37    108 
    87     34     63    116 
    97     66     97    128 
   106     84    106    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -3   -5    5   14 
  -6   -3    3    3 
 -15    0   -3  -18 
 -17    7   -4  -30 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -3
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-3 * weight=-2 = 6, partial_in=0 -> result=6
  PE[0][1]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[0][2]: input=-3 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        6        3        0       -3 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   6 │   3 │   0 │  -3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -5
  Row 1: input_block[1][0] = -6
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=0 -> result=10
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][0]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[1][1]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][3]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       10        5        0       -5 
  Row 1:        6       -6       -6      -12 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   5 │   0 │  -5 │
├─────┼─────┼─────┼─────┤
│   6 │  -6 │  -6 │ -12 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 5
  Row 1: input_block[1][1] = -3
  Row 2: input_block[2][0] = -15
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 6 (from PE[1][0])
  PE[0][1]: partial_in = -6 (from PE[1][1])
  PE[0][2]: partial_in = -6 (from PE[1][2])
  PE[0][3]: partial_in = -12 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=5 * weight=-2 = -10, partial_in=6 -> result=-4
  PE[0][1]: input=5 * weight=-1 = -5, partial_in=-6 -> result=-11
  PE[0][2]: input=5 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[0][3]: input=5 * weight=1 = 5, partial_in=-12 -> result=-7
  PE[1][0]: input=-3 * weight=-1 = 3, partial_in=0 -> result=3
  PE[1][1]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][2]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[1][3]: input=-3 * weight=2 = -6, partial_in=0 -> result=-6
  PE[2][0]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[2][2]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[2][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       -4      -11       -6       -7 
  Row 1:        3       -3       -3       -6 
  Row 2:        0      -15      -30      -15 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -4 │ -11 │  -6 │  -7 │
├─────┼─────┼─────┼─────┤
│   3 │  -3 │  -3 │  -6 │
├─────┼─────┼─────┼─────┤
│   0 │ -15 │ -30 │ -15 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 14
  Row 1: input_block[1][2] = 3
  Row 2: input_block[2][1] = 0
  Row 3: input_block[3][0] = -17

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 3 (from PE[1][0])
  PE[0][1]: partial_in = -3 (from PE[1][1])
  PE[0][2]: partial_in = -3 (from PE[1][2])
  PE[0][3]: partial_in = -6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -15 (from PE[2][1])
  PE[1][2]: partial_in = -30 (from PE[2][2])
  PE[1][3]: partial_in = -15 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=3 -> result=-25
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=-3 -> result=-17
  PE[0][2]: input=14 * weight=0 = 0, partial_in=-3 -> result=-3
  PE[0][3]: input=14 * weight=1 = 14, partial_in=-6 -> result=8
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=-15 -> result=-12
  PE[1][2]: input=3 * weight=1 = 3, partial_in=-30 -> result=-27
  PE[1][3]: input=3 * weight=2 = 6, partial_in=-15 -> result=-9
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][1]: input=-17 * weight=2 = -34, partial_in=0 -> result=-34
  PE[3][2]: input=-17 * weight=1 = -17, partial_in=0 -> result=-17
  PE[3][3]: input=-17 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -25      -17       -3        8 
  Row 1:       -3      -12      -27       -9 
  Row 2:        0        0        0        0 
  Row 3:      -17      -34      -17        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │ -17 │  -3 │   8 │
├─────┼─────┼─────┼─────┤
│  -3 │ -12 │ -27 │  -9 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│ -17 │ -34 │ -17 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 3
  Row 2: input_block[2][2] = -3
  Row 3: input_block[3][1] = 7

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = -12 (from PE[1][1])
  PE[0][2]: partial_in = -27 (from PE[1][2])
  PE[0][3]: partial_in = -9 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = -17 (from PE[3][0])
  PE[2][1]: partial_in = -34 (from PE[3][1])
  PE[2][2]: partial_in = -17 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-12 -> result=-12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-27 -> result=-27
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-9 -> result=-9
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=-3 * weight=0 = 0, partial_in=-17 -> result=-17
  PE[2][1]: input=-3 * weight=1 = -3, partial_in=-34 -> result=-37
  PE[2][2]: input=-3 * weight=2 = -6, partial_in=-17 -> result=-23
  PE[2][3]: input=-3 * weight=1 = -3, partial_in=0 -> result=-3
  PE[3][0]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][1]: input=7 * weight=2 = 14, partial_in=0 -> result=14
  PE[3][2]: input=7 * weight=1 = 7, partial_in=0 -> result=7
  PE[3][3]: input=7 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -3      -12      -27       -9 
  Row 1:       -3        3        3        6 
  Row 2:      -17      -37      -23       -3 
  Row 3:        7       14        7        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │ -12 │ -27 │  -9 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│ -17 │ -37 │ -23 │  -3 │
├─────┼─────┼─────┼─────┤
│   7 │  14 │   7 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -18
  Row 3: input_block[3][2] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -17 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -23 (from PE[2][2])
  PE[1][3]: partial_in = -3 (from PE[2][3])
  PE[2][0]: partial_in = 7 (from PE[3][0])
  PE[2][1]: partial_in = 14 (from PE[3][1])
  PE[2][2]: partial_in = 7 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-3 -> result=-3
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=3 -> result=3
  PE[0][2]: input=0 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-17 -> result=-17
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-37 -> result=-37
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-23 -> result=-23
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-3 -> result=-3
  PE[2][0]: input=-18 * weight=0 = 0, partial_in=7 -> result=7
  PE[2][1]: input=-18 * weight=1 = -18, partial_in=14 -> result=-4
  PE[2][2]: input=-18 * weight=2 = -36, partial_in=7 -> result=-29
  PE[2][3]: input=-18 * weight=1 = -18, partial_in=0 -> result=-18
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -3        3        3        6 
  Row 1:      -17      -37      -23       -3 
  Row 2:        7       -4      -29      -18 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│ -17 │ -37 │ -23 │  -3 │
├─────┼─────┼─────┼─────┤
│   7 │  -4 │ -29 │ -18 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -17 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -23 (from PE[1][2])
  PE[0][3]: partial_in = -3 (from PE[1][3])
  PE[1][0]: partial_in = 7 (from PE[2][0])
  PE[1][1]: partial_in = -4 (from PE[2][1])
  PE[1][2]: partial_in = -29 (from PE[2][2])
  PE[1][3]: partial_in = -18 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-17 -> result=-17
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-37 -> result=-37
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-23 -> result=-23
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-3 -> result=-3
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=7 -> result=7
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-4 -> result=-4
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-29 -> result=-29
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-18 -> result=-18
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-8 -> result=-8
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-4 -> result=-4
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -17      -37      -23       -3 
  Row 1:        7       -4      -29      -18 
  Row 2:       -4       -8       -4        0 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -17 │ -37 │ -23 │  -3 │
├─────┼─────┼─────┼─────┤
│   7 │  -4 │ -29 │ -18 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -17      -37      -23       -3 
Row 1:        7       -4      -29      -18 
Row 2:       -4       -8       -4        0 
Row 3:      -30      -60      -30        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -17 -> clamp(-17) -> final(111)
  PE[0][1]: -37 -> clamp(-37) -> final(91)
  PE[0][2]: -23 -> clamp(-23) -> final(105)
  PE[0][3]: -3 -> clamp(-3) -> final(125)
  PE[1][0]: 7 -> clamp(7) -> final(135)
  PE[1][1]: -4 -> clamp(-4) -> final(124)
  PE[1][2]: -29 -> clamp(-29) -> final(99)
  PE[1][3]: -18 -> clamp(-18) -> final(110)
  PE[2][0]: -4 -> clamp(-4) -> final(124)
  PE[2][1]: -8 -> clamp(-8) -> final(120)
  PE[2][2]: -4 -> clamp(-4) -> final(124)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -30 -> clamp(-30) -> final(98)
  PE[3][1]: -60 -> clamp(-60) -> final(68)
  PE[3][2]: -30 -> clamp(-30) -> final(98)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   111     91    105    125 
   135    124     99    110 
   124    120    124    128 
    98     68     98    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -21 -107 -103  -69 
 -46 -122 -128 -112 
 -62 -100 -105 -117 
 -60  -57  -50  -80 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -21
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=0 -> result=42
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       42       21        0      -21 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │  21 │   0 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -107
  Row 1: input_block[1][0] = -46
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-107 * weight=-2 = 214, partial_in=0 -> result=214
  PE[0][1]: input=-107 * weight=-1 = 107, partial_in=0 -> result=107
  PE[0][2]: input=-107 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[1][0]: input=-46 * weight=-1 = 46, partial_in=0 -> result=46
  PE[1][1]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][2]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[1][3]: input=-46 * weight=2 = -92, partial_in=0 -> result=-92
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      214      107        0     -107 
  Row 1:       46      -46      -46      -92 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 214 │ 107 │   0 │-107 │
├─────┼─────┼─────┼─────┤
│  46 │ -46 │ -46 │ -92 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -103
  Row 1: input_block[1][1] = -122
  Row 2: input_block[2][0] = -62
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 46 (from PE[1][0])
  PE[0][1]: partial_in = -46 (from PE[1][1])
  PE[0][2]: partial_in = -46 (from PE[1][2])
  PE[0][3]: partial_in = -92 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-103 * weight=-2 = 206, partial_in=46 -> result=252
  PE[0][1]: input=-103 * weight=-1 = 103, partial_in=-46 -> result=57
  PE[0][2]: input=-103 * weight=0 = 0, partial_in=-46 -> result=-46
  PE[0][3]: input=-103 * weight=1 = -103, partial_in=-92 -> result=-195
  PE[1][0]: input=-122 * weight=-1 = 122, partial_in=0 -> result=122
  PE[1][1]: input=-122 * weight=1 = -122, partial_in=0 -> result=-122
  PE[1][2]: input=-122 * weight=1 = -122, partial_in=0 -> result=-122
  PE[1][3]: input=-122 * weight=2 = -244, partial_in=0 -> result=-244
  PE[2][0]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[2][2]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      252       57      -46     -195 
  Row 1:      122     -122     -122     -244 
  Row 2:        0      -62     -124      -62 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 252 │  57 │ -46 │-195 │
├─────┼─────┼─────┼─────┤
│ 122 │-122 │-122 │-244 │
├─────┼─────┼─────┼─────┤
│   0 │ -62 │-124 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -69
  Row 1: input_block[1][2] = -128
  Row 2: input_block[2][1] = -100
  Row 3: input_block[3][0] = -60

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 122 (from PE[1][0])
  PE[0][1]: partial_in = -122 (from PE[1][1])
  PE[0][2]: partial_in = -122 (from PE[1][2])
  PE[0][3]: partial_in = -244 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -62 (from PE[2][1])
  PE[1][2]: partial_in = -124 (from PE[2][2])
  PE[1][3]: partial_in = -62 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-69 * weight=-2 = 138, partial_in=122 -> result=260
  PE[0][1]: input=-69 * weight=-1 = 69, partial_in=-122 -> result=-53
  PE[0][2]: input=-69 * weight=0 = 0, partial_in=-122 -> result=-122
  PE[0][3]: input=-69 * weight=1 = -69, partial_in=-244 -> result=-313
  PE[1][0]: input=-128 * weight=-1 = 128, partial_in=0 -> result=128
  PE[1][1]: input=-128 * weight=1 = -128, partial_in=-62 -> result=-190
  PE[1][2]: input=-128 * weight=1 = -128, partial_in=-124 -> result=-252
  PE[1][3]: input=-128 * weight=2 = -256, partial_in=-62 -> result=-318
  PE[2][0]: input=-100 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[2][2]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[2][3]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][0]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][1]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[3][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[3][3]: input=-60 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      260      -53     -122     -313 
  Row 1:      128     -190     -252     -318 
  Row 2:        0     -100     -200     -100 
  Row 3:      -60     -120      -60        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 260 │ -53 │-122 │-313 │
├─────┼─────┼─────┼─────┤
│ 128 │-190 │-252 │-318 │
├─────┼─────┼─────┼─────┤
│   0 │-100 │-200 │-100 │
├─────┼─────┼─────┼─────┤
│ -60 │-120 │ -60 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -112
  Row 2: input_block[2][2] = -105
  Row 3: input_block[3][1] = -57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 128 (from PE[1][0])
  PE[0][1]: partial_in = -190 (from PE[1][1])
  PE[0][2]: partial_in = -252 (from PE[1][2])
  PE[0][3]: partial_in = -318 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -100 (from PE[2][1])
  PE[1][2]: partial_in = -200 (from PE[2][2])
  PE[1][3]: partial_in = -100 (from PE[2][3])
  PE[2][0]: partial_in = -60 (from PE[3][0])
  PE[2][1]: partial_in = -120 (from PE[3][1])
  PE[2][2]: partial_in = -60 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=128 -> result=128
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-190 -> result=-190
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-252 -> result=-252
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-318 -> result=-318
  PE[1][0]: input=-112 * weight=-1 = 112, partial_in=0 -> result=112
  PE[1][1]: input=-112 * weight=1 = -112, partial_in=-100 -> result=-212
  PE[1][2]: input=-112 * weight=1 = -112, partial_in=-200 -> result=-312
  PE[1][3]: input=-112 * weight=2 = -224, partial_in=-100 -> result=-324
  PE[2][0]: input=-105 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[2][1]: input=-105 * weight=1 = -105, partial_in=-120 -> result=-225
  PE[2][2]: input=-105 * weight=2 = -210, partial_in=-60 -> result=-270
  PE[2][3]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][0]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][1]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[3][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[3][3]: input=-57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      128     -190     -252     -318 
  Row 1:      112     -212     -312     -324 
  Row 2:      -60     -225     -270     -105 
  Row 3:      -57     -114      -57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 128 │-190 │-252 │-318 │
├─────┼─────┼─────┼─────┤
│ 112 │-212 │-312 │-324 │
├─────┼─────┼─────┼─────┤
│ -60 │-225 │-270 │-105 │
├─────┼─────┼─────┼─────┤
│ -57 │-114 │ -57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -117
  Row 3: input_block[3][2] = -50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 112 (from PE[1][0])
  PE[0][1]: partial_in = -212 (from PE[1][1])
  PE[0][2]: partial_in = -312 (from PE[1][2])
  PE[0][3]: partial_in = -324 (from PE[1][3])
  PE[1][0]: partial_in = -60 (from PE[2][0])
  PE[1][1]: partial_in = -225 (from PE[2][1])
  PE[1][2]: partial_in = -270 (from PE[2][2])
  PE[1][3]: partial_in = -105 (from PE[2][3])
  PE[2][0]: partial_in = -57 (from PE[3][0])
  PE[2][1]: partial_in = -114 (from PE[3][1])
  PE[2][2]: partial_in = -57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=112 -> result=112
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-212 -> result=-212
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-312 -> result=-312
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-324 -> result=-324
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-225 -> result=-225
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-105 -> result=-105
  PE[2][0]: input=-117 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[2][1]: input=-117 * weight=1 = -117, partial_in=-114 -> result=-231
  PE[2][2]: input=-117 * weight=2 = -234, partial_in=-57 -> result=-291
  PE[2][3]: input=-117 * weight=1 = -117, partial_in=0 -> result=-117
  PE[3][0]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][1]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[3][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][3]: input=-50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      112     -212     -312     -324 
  Row 1:      -60     -225     -270     -105 
  Row 2:      -57     -231     -291     -117 
  Row 3:      -50     -100      -50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 112 │-212 │-312 │-324 │
├─────┼─────┼─────┼─────┤
│ -60 │-225 │-270 │-105 │
├─────┼─────┼─────┼─────┤
│ -57 │-231 │-291 │-117 │
├─────┼─────┼─────┼─────┤
│ -50 │-100 │ -50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -80

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -60 (from PE[1][0])
  PE[0][1]: partial_in = -225 (from PE[1][1])
  PE[0][2]: partial_in = -270 (from PE[1][2])
  PE[0][3]: partial_in = -105 (from PE[1][3])
  PE[1][0]: partial_in = -57 (from PE[2][0])
  PE[1][1]: partial_in = -231 (from PE[2][1])
  PE[1][2]: partial_in = -291 (from PE[2][2])
  PE[1][3]: partial_in = -117 (from PE[2][3])
  PE[2][0]: partial_in = -50 (from PE[3][0])
  PE[2][1]: partial_in = -100 (from PE[3][1])
  PE[2][2]: partial_in = -50 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-60 -> result=-60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-225 -> result=-225
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-270 -> result=-270
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-105 -> result=-105
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-57 -> result=-57
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-231 -> result=-231
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-291 -> result=-291
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-117 -> result=-117
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-100 -> result=-100
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-50 -> result=-50
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][1]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[3][2]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][3]: input=-80 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -60     -225     -270     -105 
  Row 1:      -57     -231     -291     -117 
  Row 2:      -50     -100      -50        0 
  Row 3:      -80     -160      -80        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -60 │-225 │-270 │-105 │
├─────┼─────┼─────┼─────┤
│ -57 │-231 │-291 │-117 │
├─────┼─────┼─────┼─────┤
│ -50 │-100 │ -50 │   0 │
├─────┼─────┼─────┼─────┤
│ -80 │-160 │ -80 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -60     -225     -270     -105 
Row 1:      -57     -231     -291     -117 
Row 2:      -50     -100      -50        0 
Row 3:      -80     -160      -80        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -60 -> clamp(-60) -> final(68)
  PE[0][1]: -225 -> clamp(-128) -> final(0)
  PE[0][2]: -270 -> clamp(-128) -> final(0)
  PE[0][3]: -105 -> clamp(-105) -> final(23)
  PE[1][0]: -57 -> clamp(-57) -> final(71)
  PE[1][1]: -231 -> clamp(-128) -> final(0)
  PE[1][2]: -291 -> clamp(-128) -> final(0)
  PE[1][3]: -117 -> clamp(-117) -> final(11)
  PE[2][0]: -50 -> clamp(-50) -> final(78)
  PE[2][1]: -100 -> clamp(-100) -> final(28)
  PE[2][2]: -50 -> clamp(-50) -> final(78)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -80 -> clamp(-80) -> final(48)
  PE[3][1]: -160 -> clamp(-128) -> final(0)
  PE[3][2]: -80 -> clamp(-80) -> final(48)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    68      0      0     23 
    71      0      0     11 
    78     28     78    128 
    48      0     48    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -87  -99  -84  -59 
-105  -98  -68  -44 
-120 -107  -73  -50 
-109 -105  -84  -63 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -87
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-87 * weight=-2 = 174, partial_in=0 -> result=174
  PE[0][1]: input=-87 * weight=-1 = 87, partial_in=0 -> result=87
  PE[0][2]: input=-87 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      174       87        0      -87 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 174 │  87 │   0 │ -87 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -99
  Row 1: input_block[1][0] = -105
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-99 * weight=-2 = 198, partial_in=0 -> result=198
  PE[0][1]: input=-99 * weight=-1 = 99, partial_in=0 -> result=99
  PE[0][2]: input=-99 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[1][0]: input=-105 * weight=-1 = 105, partial_in=0 -> result=105
  PE[1][1]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[1][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[1][3]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      198       99        0      -99 
  Row 1:      105     -105     -105     -210 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 198 │  99 │   0 │ -99 │
├─────┼─────┼─────┼─────┤
│ 105 │-105 │-105 │-210 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -84
  Row 1: input_block[1][1] = -98
  Row 2: input_block[2][0] = -120
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 105 (from PE[1][0])
  PE[0][1]: partial_in = -105 (from PE[1][1])
  PE[0][2]: partial_in = -105 (from PE[1][2])
  PE[0][3]: partial_in = -210 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-84 * weight=-2 = 168, partial_in=105 -> result=273
  PE[0][1]: input=-84 * weight=-1 = 84, partial_in=-105 -> result=-21
  PE[0][2]: input=-84 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[0][3]: input=-84 * weight=1 = -84, partial_in=-210 -> result=-294
  PE[1][0]: input=-98 * weight=-1 = 98, partial_in=0 -> result=98
  PE[1][1]: input=-98 * weight=1 = -98, partial_in=0 -> result=-98
  PE[1][2]: input=-98 * weight=1 = -98, partial_in=0 -> result=-98
  PE[1][3]: input=-98 * weight=2 = -196, partial_in=0 -> result=-196
  PE[2][0]: input=-120 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-120 * weight=1 = -120, partial_in=0 -> result=-120
  PE[2][2]: input=-120 * weight=2 = -240, partial_in=0 -> result=-240
  PE[2][3]: input=-120 * weight=1 = -120, partial_in=0 -> result=-120
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      273      -21     -105     -294 
  Row 1:       98      -98      -98     -196 
  Row 2:        0     -120     -240     -120 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 273 │ -21 │-105 │-294 │
├─────┼─────┼─────┼─────┤
│  98 │ -98 │ -98 │-196 │
├─────┼─────┼─────┼─────┤
│   0 │-120 │-240 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -59
  Row 1: input_block[1][2] = -68
  Row 2: input_block[2][1] = -107
  Row 3: input_block[3][0] = -109

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 98 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -98 (from PE[1][2])
  PE[0][3]: partial_in = -196 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -120 (from PE[2][1])
  PE[1][2]: partial_in = -240 (from PE[2][2])
  PE[1][3]: partial_in = -120 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-59 * weight=-2 = 118, partial_in=98 -> result=216
  PE[0][1]: input=-59 * weight=-1 = 59, partial_in=-98 -> result=-39
  PE[0][2]: input=-59 * weight=0 = 0, partial_in=-98 -> result=-98
  PE[0][3]: input=-59 * weight=1 = -59, partial_in=-196 -> result=-255
  PE[1][0]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[1][1]: input=-68 * weight=1 = -68, partial_in=-120 -> result=-188
  PE[1][2]: input=-68 * weight=1 = -68, partial_in=-240 -> result=-308
  PE[1][3]: input=-68 * weight=2 = -136, partial_in=-120 -> result=-256
  PE[2][0]: input=-107 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[2][2]: input=-107 * weight=2 = -214, partial_in=0 -> result=-214
  PE[2][3]: input=-107 * weight=1 = -107, partial_in=0 -> result=-107
  PE[3][0]: input=-109 * weight=1 = -109, partial_in=0 -> result=-109
  PE[3][1]: input=-109 * weight=2 = -218, partial_in=0 -> result=-218
  PE[3][2]: input=-109 * weight=1 = -109, partial_in=0 -> result=-109
  PE[3][3]: input=-109 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      216      -39      -98     -255 
  Row 1:       68     -188     -308     -256 
  Row 2:        0     -107     -214     -107 
  Row 3:     -109     -218     -109        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 216 │ -39 │ -98 │-255 │
├─────┼─────┼─────┼─────┤
│  68 │-188 │-308 │-256 │
├─────┼─────┼─────┼─────┤
│   0 │-107 │-214 │-107 │
├─────┼─────┼─────┼─────┤
│-109 │-218 │-109 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -44
  Row 2: input_block[2][2] = -73
  Row 3: input_block[3][1] = -105

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 68 (from PE[1][0])
  PE[0][1]: partial_in = -188 (from PE[1][1])
  PE[0][2]: partial_in = -308 (from PE[1][2])
  PE[0][3]: partial_in = -256 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -107 (from PE[2][1])
  PE[1][2]: partial_in = -214 (from PE[2][2])
  PE[1][3]: partial_in = -107 (from PE[2][3])
  PE[2][0]: partial_in = -109 (from PE[3][0])
  PE[2][1]: partial_in = -218 (from PE[3][1])
  PE[2][2]: partial_in = -109 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=68 -> result=68
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-188 -> result=-188
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-308 -> result=-308
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-256 -> result=-256
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=-107 -> result=-151
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=-214 -> result=-258
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=-107 -> result=-195
  PE[2][0]: input=-73 * weight=0 = 0, partial_in=-109 -> result=-109
  PE[2][1]: input=-73 * weight=1 = -73, partial_in=-218 -> result=-291
  PE[2][2]: input=-73 * weight=2 = -146, partial_in=-109 -> result=-255
  PE[2][3]: input=-73 * weight=1 = -73, partial_in=0 -> result=-73
  PE[3][0]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][1]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[3][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][3]: input=-105 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       68     -188     -308     -256 
  Row 1:       44     -151     -258     -195 
  Row 2:     -109     -291     -255      -73 
  Row 3:     -105     -210     -105        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  68 │-188 │-308 │-256 │
├─────┼─────┼─────┼─────┤
│  44 │-151 │-258 │-195 │
├─────┼─────┼─────┼─────┤
│-109 │-291 │-255 │ -73 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -50
  Row 3: input_block[3][2] = -84

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -151 (from PE[1][1])
  PE[0][2]: partial_in = -258 (from PE[1][2])
  PE[0][3]: partial_in = -195 (from PE[1][3])
  PE[1][0]: partial_in = -109 (from PE[2][0])
  PE[1][1]: partial_in = -291 (from PE[2][1])
  PE[1][2]: partial_in = -255 (from PE[2][2])
  PE[1][3]: partial_in = -73 (from PE[2][3])
  PE[2][0]: partial_in = -105 (from PE[3][0])
  PE[2][1]: partial_in = -210 (from PE[3][1])
  PE[2][2]: partial_in = -105 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=44 -> result=44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-151 -> result=-151
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-258 -> result=-258
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-195 -> result=-195
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-109 -> result=-109
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-291 -> result=-291
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-255 -> result=-255
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-73 -> result=-73
  PE[2][0]: input=-50 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[2][1]: input=-50 * weight=1 = -50, partial_in=-210 -> result=-260
  PE[2][2]: input=-50 * weight=2 = -100, partial_in=-105 -> result=-205
  PE[2][3]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][0]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][1]: input=-84 * weight=2 = -168, partial_in=0 -> result=-168
  PE[3][2]: input=-84 * weight=1 = -84, partial_in=0 -> result=-84
  PE[3][3]: input=-84 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       44     -151     -258     -195 
  Row 1:     -109     -291     -255      -73 
  Row 2:     -105     -260     -205      -50 
  Row 3:      -84     -168      -84        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │-151 │-258 │-195 │
├─────┼─────┼─────┼─────┤
│-109 │-291 │-255 │ -73 │
├─────┼─────┼─────┼─────┤
│-105 │-260 │-205 │ -50 │
├─────┼─────┼─────┼─────┤
│ -84 │-168 │ -84 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -63

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -109 (from PE[1][0])
  PE[0][1]: partial_in = -291 (from PE[1][1])
  PE[0][2]: partial_in = -255 (from PE[1][2])
  PE[0][3]: partial_in = -73 (from PE[1][3])
  PE[1][0]: partial_in = -105 (from PE[2][0])
  PE[1][1]: partial_in = -260 (from PE[2][1])
  PE[1][2]: partial_in = -205 (from PE[2][2])
  PE[1][3]: partial_in = -50 (from PE[2][3])
  PE[2][0]: partial_in = -84 (from PE[3][0])
  PE[2][1]: partial_in = -168 (from PE[3][1])
  PE[2][2]: partial_in = -84 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-109 -> result=-109
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-291 -> result=-291
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-255 -> result=-255
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-73 -> result=-73
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-105 -> result=-105
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-260 -> result=-260
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-205 -> result=-205
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-50 -> result=-50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-84 -> result=-84
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-168 -> result=-168
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-84 -> result=-84
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][1]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[3][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][3]: input=-63 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -109     -291     -255      -73 
  Row 1:     -105     -260     -205      -50 
  Row 2:      -84     -168      -84        0 
  Row 3:      -63     -126      -63        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-109 │-291 │-255 │ -73 │
├─────┼─────┼─────┼─────┤
│-105 │-260 │-205 │ -50 │
├─────┼─────┼─────┼─────┤
│ -84 │-168 │ -84 │   0 │
├─────┼─────┼─────┼─────┤
│ -63 │-126 │ -63 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -109     -291     -255      -73 
Row 1:     -105     -260     -205      -50 
Row 2:      -84     -168      -84        0 
Row 3:      -63     -126      -63        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -109 -> clamp(-109) -> final(19)
  PE[0][1]: -291 -> clamp(-128) -> final(0)
  PE[0][2]: -255 -> clamp(-128) -> final(0)
  PE[0][3]: -73 -> clamp(-73) -> final(55)
  PE[1][0]: -105 -> clamp(-105) -> final(23)
  PE[1][1]: -260 -> clamp(-128) -> final(0)
  PE[1][2]: -205 -> clamp(-128) -> final(0)
  PE[1][3]: -50 -> clamp(-50) -> final(78)
  PE[2][0]: -84 -> clamp(-84) -> final(44)
  PE[2][1]: -168 -> clamp(-128) -> final(0)
  PE[2][2]: -84 -> clamp(-84) -> final(44)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -63 -> clamp(-63) -> final(65)
  PE[3][1]: -126 -> clamp(-126) -> final(2)
  PE[3][2]: -63 -> clamp(-63) -> final(65)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    19      0      0     55 
    23      0      0     78 
    44      0     44    128 
    65      2     65    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -54  -60  -60  -61 
 -51  -63  -60  -56 
 -54  -59  -54  -52 
 -56  -50  -48  -56 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -54
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-54 * weight=-2 = 108, partial_in=0 -> result=108
  PE[0][1]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[0][2]: input=-54 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      108       54        0      -54 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 108 │  54 │   0 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -60
  Row 1: input_block[1][0] = -51
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-60 * weight=-2 = 120, partial_in=0 -> result=120
  PE[0][1]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[0][2]: input=-60 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      120       60        0      -60 
  Row 1:       51      -51      -51     -102 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 120 │  60 │   0 │ -60 │
├─────┼─────┼─────┼─────┤
│  51 │ -51 │ -51 │-102 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -60
  Row 1: input_block[1][1] = -63
  Row 2: input_block[2][0] = -54
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-60 * weight=-2 = 120, partial_in=51 -> result=171
  PE[0][1]: input=-60 * weight=-1 = 60, partial_in=-51 -> result=9
  PE[0][2]: input=-60 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=-60 * weight=1 = -60, partial_in=-102 -> result=-162
  PE[1][0]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[1][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][3]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][0]: input=-54 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[2][2]: input=-54 * weight=2 = -108, partial_in=0 -> result=-108
  PE[2][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      171        9      -51     -162 
  Row 1:       63      -63      -63     -126 
  Row 2:        0      -54     -108      -54 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 171 │   9 │ -51 │-162 │
├─────┼─────┼─────┼─────┤
│  63 │ -63 │ -63 │-126 │
├─────┼─────┼─────┼─────┤
│   0 │ -54 │-108 │ -54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -61
  Row 1: input_block[1][2] = -60
  Row 2: input_block[2][1] = -59
  Row 3: input_block[3][0] = -56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 63 (from PE[1][0])
  PE[0][1]: partial_in = -63 (from PE[1][1])
  PE[0][2]: partial_in = -63 (from PE[1][2])
  PE[0][3]: partial_in = -126 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -54 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-61 * weight=-2 = 122, partial_in=63 -> result=185
  PE[0][1]: input=-61 * weight=-1 = 61, partial_in=-63 -> result=-2
  PE[0][2]: input=-61 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[0][3]: input=-61 * weight=1 = -61, partial_in=-126 -> result=-187
  PE[1][0]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[1][1]: input=-60 * weight=1 = -60, partial_in=-54 -> result=-114
  PE[1][2]: input=-60 * weight=1 = -60, partial_in=-108 -> result=-168
  PE[1][3]: input=-60 * weight=2 = -120, partial_in=-54 -> result=-174
  PE[2][0]: input=-59 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[2][2]: input=-59 * weight=2 = -118, partial_in=0 -> result=-118
  PE[2][3]: input=-59 * weight=1 = -59, partial_in=0 -> result=-59
  PE[3][0]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][1]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[3][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][3]: input=-56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      185       -2      -63     -187 
  Row 1:       60     -114     -168     -174 
  Row 2:        0      -59     -118      -59 
  Row 3:      -56     -112      -56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 185 │  -2 │ -63 │-187 │
├─────┼─────┼─────┼─────┤
│  60 │-114 │-168 │-174 │
├─────┼─────┼─────┼─────┤
│   0 │ -59 │-118 │ -59 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -56
  Row 2: input_block[2][2] = -54
  Row 3: input_block[3][1] = -50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 60 (from PE[1][0])
  PE[0][1]: partial_in = -114 (from PE[1][1])
  PE[0][2]: partial_in = -168 (from PE[1][2])
  PE[0][3]: partial_in = -174 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -59 (from PE[2][1])
  PE[1][2]: partial_in = -118 (from PE[2][2])
  PE[1][3]: partial_in = -59 (from PE[2][3])
  PE[2][0]: partial_in = -56 (from PE[3][0])
  PE[2][1]: partial_in = -112 (from PE[3][1])
  PE[2][2]: partial_in = -56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=60 -> result=60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-114 -> result=-114
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-168 -> result=-168
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-174 -> result=-174
  PE[1][0]: input=-56 * weight=-1 = 56, partial_in=0 -> result=56
  PE[1][1]: input=-56 * weight=1 = -56, partial_in=-59 -> result=-115
  PE[1][2]: input=-56 * weight=1 = -56, partial_in=-118 -> result=-174
  PE[1][3]: input=-56 * weight=2 = -112, partial_in=-59 -> result=-171
  PE[2][0]: input=-54 * weight=0 = 0, partial_in=-56 -> result=-56
  PE[2][1]: input=-54 * weight=1 = -54, partial_in=-112 -> result=-166
  PE[2][2]: input=-54 * weight=2 = -108, partial_in=-56 -> result=-164
  PE[2][3]: input=-54 * weight=1 = -54, partial_in=0 -> result=-54
  PE[3][0]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][1]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[3][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[3][3]: input=-50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       60     -114     -168     -174 
  Row 1:       56     -115     -174     -171 
  Row 2:      -56     -166     -164      -54 
  Row 3:      -50     -100      -50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │-114 │-168 │-174 │
├─────┼─────┼─────┼─────┤
│  56 │-115 │-174 │-171 │
├─────┼─────┼─────┼─────┤
│ -56 │-166 │-164 │ -54 │
├─────┼─────┼─────┼─────┤
│ -50 │-100 │ -50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -52
  Row 3: input_block[3][2] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 56 (from PE[1][0])
  PE[0][1]: partial_in = -115 (from PE[1][1])
  PE[0][2]: partial_in = -174 (from PE[1][2])
  PE[0][3]: partial_in = -171 (from PE[1][3])
  PE[1][0]: partial_in = -56 (from PE[2][0])
  PE[1][1]: partial_in = -166 (from PE[2][1])
  PE[1][2]: partial_in = -164 (from PE[2][2])
  PE[1][3]: partial_in = -54 (from PE[2][3])
  PE[2][0]: partial_in = -50 (from PE[3][0])
  PE[2][1]: partial_in = -100 (from PE[3][1])
  PE[2][2]: partial_in = -50 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=56 -> result=56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-115 -> result=-115
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-174 -> result=-174
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-171 -> result=-171
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-56 -> result=-56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-166 -> result=-166
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-164 -> result=-164
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-54 -> result=-54
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-100 -> result=-152
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-50 -> result=-154
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       56     -115     -174     -171 
  Row 1:      -56     -166     -164      -54 
  Row 2:      -50     -152     -154      -52 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │-115 │-174 │-171 │
├─────┼─────┼─────┼─────┤
│ -56 │-166 │-164 │ -54 │
├─────┼─────┼─────┼─────┤
│ -50 │-152 │-154 │ -52 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -56 (from PE[1][0])
  PE[0][1]: partial_in = -166 (from PE[1][1])
  PE[0][2]: partial_in = -164 (from PE[1][2])
  PE[0][3]: partial_in = -54 (from PE[1][3])
  PE[1][0]: partial_in = -50 (from PE[2][0])
  PE[1][1]: partial_in = -152 (from PE[2][1])
  PE[1][2]: partial_in = -154 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-56 -> result=-56
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-166 -> result=-166
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-164 -> result=-164
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-152 -> result=-152
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-154 -> result=-154
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-48 -> result=-48
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][1]: input=-56 * weight=2 = -112, partial_in=0 -> result=-112
  PE[3][2]: input=-56 * weight=1 = -56, partial_in=0 -> result=-56
  PE[3][3]: input=-56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -56     -166     -164      -54 
  Row 1:      -50     -152     -154      -52 
  Row 2:      -48      -96      -48        0 
  Row 3:      -56     -112      -56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -56 │-166 │-164 │ -54 │
├─────┼─────┼─────┼─────┤
│ -50 │-152 │-154 │ -52 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
├─────┼─────┼─────┼─────┤
│ -56 │-112 │ -56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -56     -166     -164      -54 
Row 1:      -50     -152     -154      -52 
Row 2:      -48      -96      -48        0 
Row 3:      -56     -112      -56        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -56 -> clamp(-56) -> final(72)
  PE[0][1]: -166 -> clamp(-128) -> final(0)
  PE[0][2]: -164 -> clamp(-128) -> final(0)
  PE[0][3]: -54 -> clamp(-54) -> final(74)
  PE[1][0]: -50 -> clamp(-50) -> final(78)
  PE[1][1]: -152 -> clamp(-128) -> final(0)
  PE[1][2]: -154 -> clamp(-128) -> final(0)
  PE[1][3]: -52 -> clamp(-52) -> final(76)
  PE[2][0]: -48 -> clamp(-48) -> final(80)
  PE[2][1]: -96 -> clamp(-96) -> final(32)
  PE[2][2]: -48 -> clamp(-48) -> final(80)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -56 -> clamp(-56) -> final(72)
  PE[3][1]: -112 -> clamp(-112) -> final(16)
  PE[3][2]: -56 -> clamp(-56) -> final(72)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    72      0      0     74 
    78      0      0     76 
    80     32     80    128 
    72     16     72    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  49   57   49   24 
  60   68   55   21 
  36   42   31    9 
  20   27   24   23 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 49
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=49 * weight=-2 = -98, partial_in=0 -> result=-98
  PE[0][1]: input=49 * weight=-1 = -49, partial_in=0 -> result=-49
  PE[0][2]: input=49 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=49 * weight=1 = 49, partial_in=0 -> result=49
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -98      -49        0       49 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -98 │ -49 │   0 │  49 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 57
  Row 1: input_block[1][0] = 60
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=57 * weight=-2 = -114, partial_in=0 -> result=-114
  PE[0][1]: input=57 * weight=-1 = -57, partial_in=0 -> result=-57
  PE[0][2]: input=57 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[1][0]: input=60 * weight=-1 = -60, partial_in=0 -> result=-60
  PE[1][1]: input=60 * weight=1 = 60, partial_in=0 -> result=60
  PE[1][2]: input=60 * weight=1 = 60, partial_in=0 -> result=60
  PE[1][3]: input=60 * weight=2 = 120, partial_in=0 -> result=120
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:     -114      -57        0       57 
  Row 1:      -60       60       60      120 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-114 │ -57 │   0 │  57 │
├─────┼─────┼─────┼─────┤
│ -60 │  60 │  60 │ 120 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 49
  Row 1: input_block[1][1] = 68
  Row 2: input_block[2][0] = 36
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -60 (from PE[1][0])
  PE[0][1]: partial_in = 60 (from PE[1][1])
  PE[0][2]: partial_in = 60 (from PE[1][2])
  PE[0][3]: partial_in = 120 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=49 * weight=-2 = -98, partial_in=-60 -> result=-158
  PE[0][1]: input=49 * weight=-1 = -49, partial_in=60 -> result=11
  PE[0][2]: input=49 * weight=0 = 0, partial_in=60 -> result=60
  PE[0][3]: input=49 * weight=1 = 49, partial_in=120 -> result=169
  PE[1][0]: input=68 * weight=-1 = -68, partial_in=0 -> result=-68
  PE[1][1]: input=68 * weight=1 = 68, partial_in=0 -> result=68
  PE[1][2]: input=68 * weight=1 = 68, partial_in=0 -> result=68
  PE[1][3]: input=68 * weight=2 = 136, partial_in=0 -> result=136
  PE[2][0]: input=36 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[2][2]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][3]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -158       11       60      169 
  Row 1:      -68       68       68      136 
  Row 2:        0       36       72       36 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-158 │  11 │  60 │ 169 │
├─────┼─────┼─────┼─────┤
│ -68 │  68 │  68 │ 136 │
├─────┼─────┼─────┼─────┤
│   0 │  36 │  72 │  36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 24
  Row 1: input_block[1][2] = 55
  Row 2: input_block[2][1] = 42
  Row 3: input_block[3][0] = 20

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -68 (from PE[1][0])
  PE[0][1]: partial_in = 68 (from PE[1][1])
  PE[0][2]: partial_in = 68 (from PE[1][2])
  PE[0][3]: partial_in = 136 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 36 (from PE[2][1])
  PE[1][2]: partial_in = 72 (from PE[2][2])
  PE[1][3]: partial_in = 36 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=-68 -> result=-116
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=68 -> result=44
  PE[0][2]: input=24 * weight=0 = 0, partial_in=68 -> result=68
  PE[0][3]: input=24 * weight=1 = 24, partial_in=136 -> result=160
  PE[1][0]: input=55 * weight=-1 = -55, partial_in=0 -> result=-55
  PE[1][1]: input=55 * weight=1 = 55, partial_in=36 -> result=91
  PE[1][2]: input=55 * weight=1 = 55, partial_in=72 -> result=127
  PE[1][3]: input=55 * weight=2 = 110, partial_in=36 -> result=146
  PE[2][0]: input=42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[2][2]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[2][3]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][0]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][1]: input=20 * weight=2 = 40, partial_in=0 -> result=40
  PE[3][2]: input=20 * weight=1 = 20, partial_in=0 -> result=20
  PE[3][3]: input=20 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -116       44       68      160 
  Row 1:      -55       91      127      146 
  Row 2:        0       42       84       42 
  Row 3:       20       40       20        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-116 │  44 │  68 │ 160 │
├─────┼─────┼─────┼─────┤
│ -55 │  91 │ 127 │ 146 │
├─────┼─────┼─────┼─────┤
│   0 │  42 │  84 │  42 │
├─────┼─────┼─────┼─────┤
│  20 │  40 │  20 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 21
  Row 2: input_block[2][2] = 31
  Row 3: input_block[3][1] = 27

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -55 (from PE[1][0])
  PE[0][1]: partial_in = 91 (from PE[1][1])
  PE[0][2]: partial_in = 127 (from PE[1][2])
  PE[0][3]: partial_in = 146 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 42 (from PE[2][1])
  PE[1][2]: partial_in = 84 (from PE[2][2])
  PE[1][3]: partial_in = 42 (from PE[2][3])
  PE[2][0]: partial_in = 20 (from PE[3][0])
  PE[2][1]: partial_in = 40 (from PE[3][1])
  PE[2][2]: partial_in = 20 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-55 -> result=-55
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=91 -> result=91
  PE[0][2]: input=0 * weight=0 = 0, partial_in=127 -> result=127
  PE[0][3]: input=0 * weight=1 = 0, partial_in=146 -> result=146
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=42 -> result=63
  PE[1][2]: input=21 * weight=1 = 21, partial_in=84 -> result=105
  PE[1][3]: input=21 * weight=2 = 42, partial_in=42 -> result=84
  PE[2][0]: input=31 * weight=0 = 0, partial_in=20 -> result=20
  PE[2][1]: input=31 * weight=1 = 31, partial_in=40 -> result=71
  PE[2][2]: input=31 * weight=2 = 62, partial_in=20 -> result=82
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[3][1]: input=27 * weight=2 = 54, partial_in=0 -> result=54
  PE[3][2]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[3][3]: input=27 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -55       91      127      146 
  Row 1:      -21       63      105       84 
  Row 2:       20       71       82       31 
  Row 3:       27       54       27        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -55 │  91 │ 127 │ 146 │
├─────┼─────┼─────┼─────┤
│ -21 │  63 │ 105 │  84 │
├─────┼─────┼─────┼─────┤
│  20 │  71 │  82 │  31 │
├─────┼─────┼─────┼─────┤
│  27 │  54 │  27 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 9
  Row 3: input_block[3][2] = 24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 63 (from PE[1][1])
  PE[0][2]: partial_in = 105 (from PE[1][2])
  PE[0][3]: partial_in = 84 (from PE[1][3])
  PE[1][0]: partial_in = 20 (from PE[2][0])
  PE[1][1]: partial_in = 71 (from PE[2][1])
  PE[1][2]: partial_in = 82 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = 27 (from PE[3][0])
  PE[2][1]: partial_in = 54 (from PE[3][1])
  PE[2][2]: partial_in = 27 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-21 -> result=-21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=63 -> result=63
  PE[0][2]: input=0 * weight=0 = 0, partial_in=105 -> result=105
  PE[0][3]: input=0 * weight=1 = 0, partial_in=84 -> result=84
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=20 -> result=20
  PE[1][1]: input=0 * weight=1 = 0, partial_in=71 -> result=71
  PE[1][2]: input=0 * weight=1 = 0, partial_in=82 -> result=82
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=9 * weight=0 = 0, partial_in=27 -> result=27
  PE[2][1]: input=9 * weight=1 = 9, partial_in=54 -> result=63
  PE[2][2]: input=9 * weight=2 = 18, partial_in=27 -> result=45
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][1]: input=24 * weight=2 = 48, partial_in=0 -> result=48
  PE[3][2]: input=24 * weight=1 = 24, partial_in=0 -> result=24
  PE[3][3]: input=24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -21       63      105       84 
  Row 1:       20       71       82       31 
  Row 2:       27       63       45        9 
  Row 3:       24       48       24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  63 │ 105 │  84 │
├─────┼─────┼─────┼─────┤
│  20 │  71 │  82 │  31 │
├─────┼─────┼─────┼─────┤
│  27 │  63 │  45 │   9 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = 71 (from PE[1][1])
  PE[0][2]: partial_in = 82 (from PE[1][2])
  PE[0][3]: partial_in = 31 (from PE[1][3])
  PE[1][0]: partial_in = 27 (from PE[2][0])
  PE[1][1]: partial_in = 63 (from PE[2][1])
  PE[1][2]: partial_in = 45 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 24 (from PE[3][0])
  PE[2][1]: partial_in = 48 (from PE[3][1])
  PE[2][2]: partial_in = 24 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=71 -> result=71
  PE[0][2]: input=0 * weight=0 = 0, partial_in=82 -> result=82
  PE[0][3]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=27 -> result=27
  PE[1][1]: input=0 * weight=1 = 0, partial_in=63 -> result=63
  PE[1][2]: input=0 * weight=1 = 0, partial_in=45 -> result=45
  PE[1][3]: input=0 * weight=2 = 0, partial_in=9 -> result=9
  PE[2][0]: input=0 * weight=0 = 0, partial_in=24 -> result=24
  PE[2][1]: input=0 * weight=1 = 0, partial_in=48 -> result=48
  PE[2][2]: input=0 * weight=2 = 0, partial_in=24 -> result=24
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][1]: input=23 * weight=2 = 46, partial_in=0 -> result=46
  PE[3][2]: input=23 * weight=1 = 23, partial_in=0 -> result=23
  PE[3][3]: input=23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       20       71       82       31 
  Row 1:       27       63       45        9 
  Row 2:       24       48       24        0 
  Row 3:       23       46       23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  71 │  82 │  31 │
├─────┼─────┼─────┼─────┤
│  27 │  63 │  45 │   9 │
├─────┼─────┼─────┼─────┤
│  24 │  48 │  24 │   0 │
├─────┼─────┼─────┼─────┤
│  23 │  46 │  23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       20       71       82       31 
Row 1:       27       63       45        9 
Row 2:       24       48       24        0 
Row 3:       23       46       23        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 20 -> clamp(20) -> final(148)
  PE[0][1]: 71 -> clamp(71) -> final(199)
  PE[0][2]: 82 -> clamp(82) -> final(210)
  PE[0][3]: 31 -> clamp(31) -> final(159)
  PE[1][0]: 27 -> clamp(27) -> final(155)
  PE[1][1]: 63 -> clamp(63) -> final(191)
  PE[1][2]: 45 -> clamp(45) -> final(173)
  PE[1][3]: 9 -> clamp(9) -> final(137)
  PE[2][0]: 24 -> clamp(24) -> final(152)
  PE[2][1]: 48 -> clamp(48) -> final(176)
  PE[2][2]: 24 -> clamp(24) -> final(152)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 23 -> clamp(23) -> final(151)
  PE[3][1]: 46 -> clamp(46) -> final(174)
  PE[3][2]: 23 -> clamp(23) -> final(151)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   148    199    210    159 
   155    191    173    137 
   152    176    152    128 
   151    174    151    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -9  -42  -44  -20 
 -22  -58  -60  -36 
 -13  -32  -32  -14 
  32   33   29   33 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -9
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-9 * weight=-2 = 18, partial_in=0 -> result=18
  PE[0][1]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[0][2]: input=-9 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       18        9        0       -9 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  18 │   9 │   0 │  -9 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -42
  Row 1: input_block[1][0] = -22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-42 * weight=-2 = 84, partial_in=0 -> result=84
  PE[0][1]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[0][2]: input=-42 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       84       42        0      -42 
  Row 1:       22      -22      -22      -44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  84 │  42 │   0 │ -42 │
├─────┼─────┼─────┼─────┤
│  22 │ -22 │ -22 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -44
  Row 1: input_block[1][1] = -58
  Row 2: input_block[2][0] = -13
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=22 -> result=110
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=-22 -> result=22
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=-44 -> result=-88
  PE[1][0]: input=-58 * weight=-1 = 58, partial_in=0 -> result=58
  PE[1][1]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[1][2]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[1][3]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[2][0]: input=-13 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[2][2]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[2][3]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      110       22      -22      -88 
  Row 1:       58      -58      -58     -116 
  Row 2:        0      -13      -26      -13 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 110 │  22 │ -22 │ -88 │
├─────┼─────┼─────┼─────┤
│  58 │ -58 │ -58 │-116 │
├─────┼─────┼─────┼─────┤
│   0 │ -13 │ -26 │ -13 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -20
  Row 1: input_block[1][2] = -60
  Row 2: input_block[2][1] = -32
  Row 3: input_block[3][0] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 58 (from PE[1][0])
  PE[0][1]: partial_in = -58 (from PE[1][1])
  PE[0][2]: partial_in = -58 (from PE[1][2])
  PE[0][3]: partial_in = -116 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -13 (from PE[2][1])
  PE[1][2]: partial_in = -26 (from PE[2][2])
  PE[1][3]: partial_in = -13 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-20 * weight=-2 = 40, partial_in=58 -> result=98
  PE[0][1]: input=-20 * weight=-1 = 20, partial_in=-58 -> result=-38
  PE[0][2]: input=-20 * weight=0 = 0, partial_in=-58 -> result=-58
  PE[0][3]: input=-20 * weight=1 = -20, partial_in=-116 -> result=-136
  PE[1][0]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[1][1]: input=-60 * weight=1 = -60, partial_in=-13 -> result=-73
  PE[1][2]: input=-60 * weight=1 = -60, partial_in=-26 -> result=-86
  PE[1][3]: input=-60 * weight=2 = -120, partial_in=-13 -> result=-133
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       98      -38      -58     -136 
  Row 1:       60      -73      -86     -133 
  Row 2:        0      -32      -64      -32 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  98 │ -38 │ -58 │-136 │
├─────┼─────┼─────┼─────┤
│  60 │ -73 │ -86 │-133 │
├─────┼─────┼─────┼─────┤
│   0 │ -32 │ -64 │ -32 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -36
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 60 (from PE[1][0])
  PE[0][1]: partial_in = -73 (from PE[1][1])
  PE[0][2]: partial_in = -86 (from PE[1][2])
  PE[0][3]: partial_in = -133 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -32 (from PE[2][1])
  PE[1][2]: partial_in = -64 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = 32 (from PE[3][0])
  PE[2][1]: partial_in = 64 (from PE[3][1])
  PE[2][2]: partial_in = 32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=60 -> result=60
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-73 -> result=-73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-86 -> result=-86
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-133 -> result=-133
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=-32 -> result=-68
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=-64 -> result=-100
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=-32 -> result=-104
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=32 -> result=32
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=64 -> result=32
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=32 -> result=-32
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       60      -73      -86     -133 
  Row 1:       36      -68     -100     -104 
  Row 2:       32       32      -32      -32 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │ -73 │ -86 │-133 │
├─────┼─────┼─────┼─────┤
│  36 │ -68 │-100 │-104 │
├─────┼─────┼─────┼─────┤
│  32 │  32 │ -32 │ -32 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -14
  Row 3: input_block[3][2] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -100 (from PE[1][2])
  PE[0][3]: partial_in = -104 (from PE[1][3])
  PE[1][0]: partial_in = 32 (from PE[2][0])
  PE[1][1]: partial_in = 32 (from PE[2][1])
  PE[1][2]: partial_in = -32 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-68 -> result=-68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-100 -> result=-100
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-104 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-14 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=-14 * weight=1 = -14, partial_in=66 -> result=52
  PE[2][2]: input=-14 * weight=2 = -28, partial_in=33 -> result=5
  PE[2][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       36      -68     -100     -104 
  Row 1:       32       32      -32      -32 
  Row 2:       33       52        5      -14 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -68 │-100 │-104 │
├─────┼─────┼─────┼─────┤
│  32 │  32 │ -32 │ -32 │
├─────┼─────┼─────┼─────┤
│  33 │  52 │   5 │ -14 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = -32 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = 33 (from PE[2][0])
  PE[1][1]: partial_in = 52 (from PE[2][1])
  PE[1][2]: partial_in = 5 (from PE[2][2])
  PE[1][3]: partial_in = -14 (from PE[2][3])
  PE[2][0]: partial_in = 29 (from PE[3][0])
  PE[2][1]: partial_in = 58 (from PE[3][1])
  PE[2][2]: partial_in = 29 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-32 -> result=-32
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][2]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-14 -> result=-14
  PE[2][0]: input=0 * weight=0 = 0, partial_in=29 -> result=29
  PE[2][1]: input=0 * weight=1 = 0, partial_in=58 -> result=58
  PE[2][2]: input=0 * weight=2 = 0, partial_in=29 -> result=29
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       32       32      -32      -32 
  Row 1:       33       52        5      -14 
  Row 2:       29       58       29        0 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  32 │ -32 │ -32 │
├─────┼─────┼─────┼─────┤
│  33 │  52 │   5 │ -14 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       32       32      -32      -32 
Row 1:       33       52        5      -14 
Row 2:       29       58       29        0 
Row 3:       33       66       33        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 32 -> clamp(32) -> final(160)
  PE[0][1]: 32 -> clamp(32) -> final(160)
  PE[0][2]: -32 -> clamp(-32) -> final(96)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: 33 -> clamp(33) -> final(161)
  PE[1][1]: 52 -> clamp(52) -> final(180)
  PE[1][2]: 5 -> clamp(5) -> final(133)
  PE[1][3]: -14 -> clamp(-14) -> final(114)
  PE[2][0]: 29 -> clamp(29) -> final(157)
  PE[2][1]: 58 -> clamp(58) -> final(186)
  PE[2][2]: 29 -> clamp(29) -> final(157)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 33 -> clamp(33) -> final(161)
  PE[3][1]: 66 -> clamp(66) -> final(194)
  PE[3][2]: 33 -> clamp(33) -> final(161)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   160    160     96     96 
   161    180    133    114 
   157    186    157    128 
   161    194    161    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -8   -2   15   24 
 -19   -9    6   14 
  -7    1    8    9 
  33   33   35   32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -8
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=0 -> result=16
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=0 -> result=8
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=0 -> result=-8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       16        8        0       -8 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  16 │   8 │   0 │  -8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -2
  Row 1: input_block[1][0] = -19
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-2 * weight=-2 = 4, partial_in=0 -> result=4
  PE[0][1]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[0][2]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:        4        2        0       -2 
  Row 1:       19      -19      -19      -38 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   4 │   2 │   0 │  -2 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 15
  Row 1: input_block[1][1] = -9
  Row 2: input_block[2][0] = -7
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=15 * weight=-2 = -30, partial_in=19 -> result=-11
  PE[0][1]: input=15 * weight=-1 = -15, partial_in=-19 -> result=-34
  PE[0][2]: input=15 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=15 * weight=1 = 15, partial_in=-38 -> result=-23
  PE[1][0]: input=-9 * weight=-1 = 9, partial_in=0 -> result=9
  PE[1][1]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][2]: input=-9 * weight=1 = -9, partial_in=0 -> result=-9
  PE[1][3]: input=-9 * weight=2 = -18, partial_in=0 -> result=-18
  PE[2][0]: input=-7 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[2][2]: input=-7 * weight=2 = -14, partial_in=0 -> result=-14
  PE[2][3]: input=-7 * weight=1 = -7, partial_in=0 -> result=-7
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -11      -34      -19      -23 
  Row 1:        9       -9       -9      -18 
  Row 2:        0       -7      -14       -7 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -11 │ -34 │ -19 │ -23 │
├─────┼─────┼─────┼─────┤
│   9 │  -9 │  -9 │ -18 │
├─────┼─────┼─────┼─────┤
│   0 │  -7 │ -14 │  -7 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 24
  Row 1: input_block[1][2] = 6
  Row 2: input_block[2][1] = 1
  Row 3: input_block[3][0] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 9 (from PE[1][0])
  PE[0][1]: partial_in = -9 (from PE[1][1])
  PE[0][2]: partial_in = -9 (from PE[1][2])
  PE[0][3]: partial_in = -18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -7 (from PE[2][1])
  PE[1][2]: partial_in = -14 (from PE[2][2])
  PE[1][3]: partial_in = -7 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=24 * weight=-2 = -48, partial_in=9 -> result=-39
  PE[0][1]: input=24 * weight=-1 = -24, partial_in=-9 -> result=-33
  PE[0][2]: input=24 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[0][3]: input=24 * weight=1 = 24, partial_in=-18 -> result=6
  PE[1][0]: input=6 * weight=-1 = -6, partial_in=0 -> result=-6
  PE[1][1]: input=6 * weight=1 = 6, partial_in=-7 -> result=-1
  PE[1][2]: input=6 * weight=1 = 6, partial_in=-14 -> result=-8
  PE[1][3]: input=6 * weight=2 = 12, partial_in=-7 -> result=5
  PE[2][0]: input=1 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[2][2]: input=1 * weight=2 = 2, partial_in=0 -> result=2
  PE[2][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -39      -33       -9        6 
  Row 1:       -6       -1       -8        5 
  Row 2:        0        1        2        1 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │ -33 │  -9 │   6 │
├─────┼─────┼─────┼─────┤
│  -6 │  -1 │  -8 │   5 │
├─────┼─────┼─────┼─────┤
│   0 │   1 │   2 │   1 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 14
  Row 2: input_block[2][2] = 8
  Row 3: input_block[3][1] = 33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = -1 (from PE[1][1])
  PE[0][2]: partial_in = -8 (from PE[1][2])
  PE[0][3]: partial_in = 5 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 1 (from PE[2][1])
  PE[1][2]: partial_in = 2 (from PE[2][2])
  PE[1][3]: partial_in = 1 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-1 -> result=-1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-8 -> result=-8
  PE[0][3]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][0]: input=14 * weight=-1 = -14, partial_in=0 -> result=-14
  PE[1][1]: input=14 * weight=1 = 14, partial_in=1 -> result=15
  PE[1][2]: input=14 * weight=1 = 14, partial_in=2 -> result=16
  PE[1][3]: input=14 * weight=2 = 28, partial_in=1 -> result=29
  PE[2][0]: input=8 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=8 * weight=1 = 8, partial_in=66 -> result=74
  PE[2][2]: input=8 * weight=2 = 16, partial_in=33 -> result=49
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][1]: input=33 * weight=2 = 66, partial_in=0 -> result=66
  PE[3][2]: input=33 * weight=1 = 33, partial_in=0 -> result=33
  PE[3][3]: input=33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -6       -1       -8        5 
  Row 1:      -14       15       16       29 
  Row 2:       33       74       49        8 
  Row 3:       33       66       33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │  -1 │  -8 │   5 │
├─────┼─────┼─────┼─────┤
│ -14 │  15 │  16 │  29 │
├─────┼─────┼─────┼─────┤
│  33 │  74 │  49 │   8 │
├─────┼─────┼─────┼─────┤
│  33 │  66 │  33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 9
  Row 3: input_block[3][2] = 35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -14 (from PE[1][0])
  PE[0][1]: partial_in = 15 (from PE[1][1])
  PE[0][2]: partial_in = 16 (from PE[1][2])
  PE[0][3]: partial_in = 29 (from PE[1][3])
  PE[1][0]: partial_in = 33 (from PE[2][0])
  PE[1][1]: partial_in = 74 (from PE[2][1])
  PE[1][2]: partial_in = 49 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 33 (from PE[3][0])
  PE[2][1]: partial_in = 66 (from PE[3][1])
  PE[2][2]: partial_in = 33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-14 -> result=-14
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=15 -> result=15
  PE[0][2]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=29 -> result=29
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=74 -> result=74
  PE[1][2]: input=0 * weight=1 = 0, partial_in=49 -> result=49
  PE[1][3]: input=0 * weight=2 = 0, partial_in=8 -> result=8
  PE[2][0]: input=9 * weight=0 = 0, partial_in=33 -> result=33
  PE[2][1]: input=9 * weight=1 = 9, partial_in=66 -> result=75
  PE[2][2]: input=9 * weight=2 = 18, partial_in=33 -> result=51
  PE[2][3]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[3][0]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][1]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[3][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[3][3]: input=35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -14       15       16       29 
  Row 1:       33       74       49        8 
  Row 2:       33       75       51        9 
  Row 3:       35       70       35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -14 │  15 │  16 │  29 │
├─────┼─────┼─────┼─────┤
│  33 │  74 │  49 │   8 │
├─────┼─────┼─────┼─────┤
│  33 │  75 │  51 │   9 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 33 (from PE[1][0])
  PE[0][1]: partial_in = 74 (from PE[1][1])
  PE[0][2]: partial_in = 49 (from PE[1][2])
  PE[0][3]: partial_in = 8 (from PE[1][3])
  PE[1][0]: partial_in = 33 (from PE[2][0])
  PE[1][1]: partial_in = 75 (from PE[2][1])
  PE[1][2]: partial_in = 51 (from PE[2][2])
  PE[1][3]: partial_in = 9 (from PE[2][3])
  PE[2][0]: partial_in = 35 (from PE[3][0])
  PE[2][1]: partial_in = 70 (from PE[3][1])
  PE[2][2]: partial_in = 35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=33 -> result=33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=74 -> result=74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=49 -> result=49
  PE[0][3]: input=0 * weight=1 = 0, partial_in=8 -> result=8
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=33 -> result=33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=75 -> result=75
  PE[1][2]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][3]: input=0 * weight=2 = 0, partial_in=9 -> result=9
  PE[2][0]: input=0 * weight=0 = 0, partial_in=35 -> result=35
  PE[2][1]: input=0 * weight=1 = 0, partial_in=70 -> result=70
  PE[2][2]: input=0 * weight=2 = 0, partial_in=35 -> result=35
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       33       74       49        8 
  Row 1:       33       75       51        9 
  Row 2:       35       70       35        0 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  33 │  74 │  49 │   8 │
├─────┼─────┼─────┼─────┤
│  33 │  75 │  51 │   9 │
├─────┼─────┼─────┼─────┤
│  35 │  70 │  35 │   0 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       33       74       49        8 
Row 1:       33       75       51        9 
Row 2:       35       70       35        0 
Row 3:       32       64       32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 33 -> clamp(33) -> final(161)
  PE[0][1]: 74 -> clamp(74) -> final(202)
  PE[0][2]: 49 -> clamp(49) -> final(177)
  PE[0][3]: 8 -> clamp(8) -> final(136)
  PE[1][0]: 33 -> clamp(33) -> final(161)
  PE[1][1]: 75 -> clamp(75) -> final(203)
  PE[1][2]: 51 -> clamp(51) -> final(179)
  PE[1][3]: 9 -> clamp(9) -> final(137)
  PE[2][0]: 35 -> clamp(35) -> final(163)
  PE[2][1]: 70 -> clamp(70) -> final(198)
  PE[2][2]: 35 -> clamp(35) -> final(163)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 32 -> clamp(32) -> final(160)
  PE[3][1]: 64 -> clamp(64) -> final(192)
  PE[3][2]: 32 -> clamp(32) -> final(160)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   161    202    177    136 
   161    203    179    137 
   163    198    163    128 
   160    192    160    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  22   26   28   18 
  22   35   24   -7 
  16   29    5  -45 
  31   36   16  -23 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 22
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=0 -> result=-44
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[0][2]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -44      -22        0       22 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │ -22 │   0 │  22 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 26
  Row 1: input_block[1][0] = 22
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=26 * weight=-2 = -52, partial_in=0 -> result=-52
  PE[0][1]: input=26 * weight=-1 = -26, partial_in=0 -> result=-26
  PE[0][2]: input=26 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[1][0]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[1][1]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][3]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -52      -26        0       26 
  Row 1:      -22       22       22       44 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -52 │ -26 │   0 │  26 │
├─────┼─────┼─────┼─────┤
│ -22 │  22 │  22 │  44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 28
  Row 1: input_block[1][1] = 35
  Row 2: input_block[2][0] = 16
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 22 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=28 * weight=-2 = -56, partial_in=-22 -> result=-78
  PE[0][1]: input=28 * weight=-1 = -28, partial_in=22 -> result=-6
  PE[0][2]: input=28 * weight=0 = 0, partial_in=22 -> result=22
  PE[0][3]: input=28 * weight=1 = 28, partial_in=44 -> result=72
  PE[1][0]: input=35 * weight=-1 = -35, partial_in=0 -> result=-35
  PE[1][1]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][3]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[2][0]: input=16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[2][2]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[2][3]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -78       -6       22       72 
  Row 1:      -35       35       35       70 
  Row 2:        0       16       32       16 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -78 │  -6 │  22 │  72 │
├─────┼─────┼─────┼─────┤
│ -35 │  35 │  35 │  70 │
├─────┼─────┼─────┼─────┤
│   0 │  16 │  32 │  16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 18
  Row 1: input_block[1][2] = 24
  Row 2: input_block[2][1] = 29
  Row 3: input_block[3][0] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = 35 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 16 (from PE[2][1])
  PE[1][2]: partial_in = 32 (from PE[2][2])
  PE[1][3]: partial_in = 16 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=18 * weight=-2 = -36, partial_in=-35 -> result=-71
  PE[0][1]: input=18 * weight=-1 = -18, partial_in=35 -> result=17
  PE[0][2]: input=18 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=18 * weight=1 = 18, partial_in=70 -> result=88
  PE[1][0]: input=24 * weight=-1 = -24, partial_in=0 -> result=-24
  PE[1][1]: input=24 * weight=1 = 24, partial_in=16 -> result=40
  PE[1][2]: input=24 * weight=1 = 24, partial_in=32 -> result=56
  PE[1][3]: input=24 * weight=2 = 48, partial_in=16 -> result=64
  PE[2][0]: input=29 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[2][2]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[2][3]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -71       17       35       88 
  Row 1:      -24       40       56       64 
  Row 2:        0       29       58       29 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -71 │  17 │  35 │  88 │
├─────┼─────┼─────┼─────┤
│ -24 │  40 │  56 │  64 │
├─────┼─────┼─────┼─────┤
│   0 │  29 │  58 │  29 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -7
  Row 2: input_block[2][2] = 5
  Row 3: input_block[3][1] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -24 (from PE[1][0])
  PE[0][1]: partial_in = 40 (from PE[1][1])
  PE[0][2]: partial_in = 56 (from PE[1][2])
  PE[0][3]: partial_in = 64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 29 (from PE[2][1])
  PE[1][2]: partial_in = 58 (from PE[2][2])
  PE[1][3]: partial_in = 29 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-24 -> result=-24
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[0][2]: input=0 * weight=0 = 0, partial_in=56 -> result=56
  PE[0][3]: input=0 * weight=1 = 0, partial_in=64 -> result=64
  PE[1][0]: input=-7 * weight=-1 = 7, partial_in=0 -> result=7
  PE[1][1]: input=-7 * weight=1 = -7, partial_in=29 -> result=22
  PE[1][2]: input=-7 * weight=1 = -7, partial_in=58 -> result=51
  PE[1][3]: input=-7 * weight=2 = -14, partial_in=29 -> result=15
  PE[2][0]: input=5 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=5 * weight=1 = 5, partial_in=62 -> result=67
  PE[2][2]: input=5 * weight=2 = 10, partial_in=31 -> result=41
  PE[2][3]: input=5 * weight=1 = 5, partial_in=0 -> result=5
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -24       40       56       64 
  Row 1:        7       22       51       15 
  Row 2:       31       67       41        5 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -24 │  40 │  56 │  64 │
├─────┼─────┼─────┼─────┤
│   7 │  22 │  51 │  15 │
├─────┼─────┼─────┼─────┤
│  31 │  67 │  41 │   5 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -45
  Row 3: input_block[3][2] = 16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 7 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = 51 (from PE[1][2])
  PE[0][3]: partial_in = 15 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 67 (from PE[2][1])
  PE[1][2]: partial_in = 41 (from PE[2][2])
  PE[1][3]: partial_in = 5 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=7 -> result=7
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=51 -> result=51
  PE[0][3]: input=0 * weight=1 = 0, partial_in=15 -> result=15
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=67 -> result=67
  PE[1][2]: input=0 * weight=1 = 0, partial_in=41 -> result=41
  PE[1][3]: input=0 * weight=2 = 0, partial_in=5 -> result=5
  PE[2][0]: input=-45 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=-45 * weight=1 = -45, partial_in=72 -> result=27
  PE[2][2]: input=-45 * weight=2 = -90, partial_in=36 -> result=-54
  PE[2][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][0]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][1]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[3][2]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][3]: input=16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:        7       22       51       15 
  Row 1:       31       67       41        5 
  Row 2:       36       27      -54      -45 
  Row 3:       16       32       16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   7 │  22 │  51 │  15 │
├─────┼─────┼─────┼─────┤
│  31 │  67 │  41 │   5 │
├─────┼─────┼─────┼─────┤
│  36 │  27 │ -54 │ -45 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -23

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = 67 (from PE[1][1])
  PE[0][2]: partial_in = 41 (from PE[1][2])
  PE[0][3]: partial_in = 5 (from PE[1][3])
  PE[1][0]: partial_in = 36 (from PE[2][0])
  PE[1][1]: partial_in = 27 (from PE[2][1])
  PE[1][2]: partial_in = -54 (from PE[2][2])
  PE[1][3]: partial_in = -45 (from PE[2][3])
  PE[2][0]: partial_in = 16 (from PE[3][0])
  PE[2][1]: partial_in = 32 (from PE[3][1])
  PE[2][2]: partial_in = 16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=67 -> result=67
  PE[0][2]: input=0 * weight=0 = 0, partial_in=41 -> result=41
  PE[0][3]: input=0 * weight=1 = 0, partial_in=5 -> result=5
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=27 -> result=27
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-45 -> result=-45
  PE[2][0]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=32 -> result=32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=16 -> result=16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][1]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[3][2]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][3]: input=-23 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       31       67       41        5 
  Row 1:       36       27      -54      -45 
  Row 2:       16       32       16        0 
  Row 3:      -23      -46      -23        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │  67 │  41 │   5 │
├─────┼─────┼─────┼─────┤
│  36 │  27 │ -54 │ -45 │
├─────┼─────┼─────┼─────┤
│  16 │  32 │  16 │   0 │
├─────┼─────┼─────┼─────┤
│ -23 │ -46 │ -23 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       31       67       41        5 
Row 1:       36       27      -54      -45 
Row 2:       16       32       16        0 
Row 3:      -23      -46      -23        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 31 -> clamp(31) -> final(159)
  PE[0][1]: 67 -> clamp(67) -> final(195)
  PE[0][2]: 41 -> clamp(41) -> final(169)
  PE[0][3]: 5 -> clamp(5) -> final(133)
  PE[1][0]: 36 -> clamp(36) -> final(164)
  PE[1][1]: 27 -> clamp(27) -> final(155)
  PE[1][2]: -54 -> clamp(-54) -> final(74)
  PE[1][3]: -45 -> clamp(-45) -> final(83)
  PE[2][0]: 16 -> clamp(16) -> final(144)
  PE[2][1]: 32 -> clamp(32) -> final(160)
  PE[2][2]: 16 -> clamp(16) -> final(144)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -23 -> clamp(-23) -> final(105)
  PE[3][1]: -46 -> clamp(-46) -> final(82)
  PE[3][2]: -23 -> clamp(-23) -> final(105)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   159    195    169    133 
   164    155     74     83 
   144    160    144    128 
   105     82    105    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -76  -94 -103  -96 
 -95  -99  -96  -89 
-109 -106 -104 -104 
 -36  -36  -48  -70 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -76
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-76 * weight=-2 = 152, partial_in=0 -> result=152
  PE[0][1]: input=-76 * weight=-1 = 76, partial_in=0 -> result=76
  PE[0][2]: input=-76 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      152       76        0      -76 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 152 │  76 │   0 │ -76 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -94
  Row 1: input_block[1][0] = -95
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-94 * weight=-2 = 188, partial_in=0 -> result=188
  PE[0][1]: input=-94 * weight=-1 = 94, partial_in=0 -> result=94
  PE[0][2]: input=-94 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=0 -> result=-190
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      188       94        0      -94 
  Row 1:       95      -95      -95     -190 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 188 │  94 │   0 │ -94 │
├─────┼─────┼─────┼─────┤
│  95 │ -95 │ -95 │-190 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -103
  Row 1: input_block[1][1] = -99
  Row 2: input_block[2][0] = -109
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -190 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-103 * weight=-2 = 206, partial_in=95 -> result=301
  PE[0][1]: input=-103 * weight=-1 = 103, partial_in=-95 -> result=8
  PE[0][2]: input=-103 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=-103 * weight=1 = -103, partial_in=-190 -> result=-293
  PE[1][0]: input=-99 * weight=-1 = 99, partial_in=0 -> result=99
  PE[1][1]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[1][2]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[1][3]: input=-99 * weight=2 = -198, partial_in=0 -> result=-198
  PE[2][0]: input=-109 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-109 * weight=1 = -109, partial_in=0 -> result=-109
  PE[2][2]: input=-109 * weight=2 = -218, partial_in=0 -> result=-218
  PE[2][3]: input=-109 * weight=1 = -109, partial_in=0 -> result=-109
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      301        8      -95     -293 
  Row 1:       99      -99      -99     -198 
  Row 2:        0     -109     -218     -109 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 301 │   8 │ -95 │-293 │
├─────┼─────┼─────┼─────┤
│  99 │ -99 │ -99 │-198 │
├─────┼─────┼─────┼─────┤
│   0 │-109 │-218 │-109 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -96
  Row 1: input_block[1][2] = -96
  Row 2: input_block[2][1] = -106
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 99 (from PE[1][0])
  PE[0][1]: partial_in = -99 (from PE[1][1])
  PE[0][2]: partial_in = -99 (from PE[1][2])
  PE[0][3]: partial_in = -198 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -109 (from PE[2][1])
  PE[1][2]: partial_in = -218 (from PE[2][2])
  PE[1][3]: partial_in = -109 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-96 * weight=-2 = 192, partial_in=99 -> result=291
  PE[0][1]: input=-96 * weight=-1 = 96, partial_in=-99 -> result=-3
  PE[0][2]: input=-96 * weight=0 = 0, partial_in=-99 -> result=-99
  PE[0][3]: input=-96 * weight=1 = -96, partial_in=-198 -> result=-294
  PE[1][0]: input=-96 * weight=-1 = 96, partial_in=0 -> result=96
  PE[1][1]: input=-96 * weight=1 = -96, partial_in=-109 -> result=-205
  PE[1][2]: input=-96 * weight=1 = -96, partial_in=-218 -> result=-314
  PE[1][3]: input=-96 * weight=2 = -192, partial_in=-109 -> result=-301
  PE[2][0]: input=-106 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[2][2]: input=-106 * weight=2 = -212, partial_in=0 -> result=-212
  PE[2][3]: input=-106 * weight=1 = -106, partial_in=0 -> result=-106
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      291       -3      -99     -294 
  Row 1:       96     -205     -314     -301 
  Row 2:        0     -106     -212     -106 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 291 │  -3 │ -99 │-294 │
├─────┼─────┼─────┼─────┤
│  96 │-205 │-314 │-301 │
├─────┼─────┼─────┼─────┤
│   0 │-106 │-212 │-106 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -89
  Row 2: input_block[2][2] = -104
  Row 3: input_block[3][1] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 96 (from PE[1][0])
  PE[0][1]: partial_in = -205 (from PE[1][1])
  PE[0][2]: partial_in = -314 (from PE[1][2])
  PE[0][3]: partial_in = -301 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -106 (from PE[2][1])
  PE[1][2]: partial_in = -212 (from PE[2][2])
  PE[1][3]: partial_in = -106 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=96 -> result=96
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-205 -> result=-205
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-314 -> result=-314
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-301 -> result=-301
  PE[1][0]: input=-89 * weight=-1 = 89, partial_in=0 -> result=89
  PE[1][1]: input=-89 * weight=1 = -89, partial_in=-106 -> result=-195
  PE[1][2]: input=-89 * weight=1 = -89, partial_in=-212 -> result=-301
  PE[1][3]: input=-89 * weight=2 = -178, partial_in=-106 -> result=-284
  PE[2][0]: input=-104 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-104 * weight=1 = -104, partial_in=-72 -> result=-176
  PE[2][2]: input=-104 * weight=2 = -208, partial_in=-36 -> result=-244
  PE[2][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       96     -205     -314     -301 
  Row 1:       89     -195     -301     -284 
  Row 2:      -36     -176     -244     -104 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  96 │-205 │-314 │-301 │
├─────┼─────┼─────┼─────┤
│  89 │-195 │-301 │-284 │
├─────┼─────┼─────┼─────┤
│ -36 │-176 │-244 │-104 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -104
  Row 3: input_block[3][2] = -48

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 89 (from PE[1][0])
  PE[0][1]: partial_in = -195 (from PE[1][1])
  PE[0][2]: partial_in = -301 (from PE[1][2])
  PE[0][3]: partial_in = -284 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -176 (from PE[2][1])
  PE[1][2]: partial_in = -244 (from PE[2][2])
  PE[1][3]: partial_in = -104 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=89 -> result=89
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-195 -> result=-195
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-301 -> result=-301
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-284 -> result=-284
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-176 -> result=-176
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-244 -> result=-244
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-104 -> result=-104
  PE[2][0]: input=-104 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-104 * weight=1 = -104, partial_in=-72 -> result=-176
  PE[2][2]: input=-104 * weight=2 = -208, partial_in=-36 -> result=-244
  PE[2][3]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[3][0]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][1]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[3][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[3][3]: input=-48 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       89     -195     -301     -284 
  Row 1:      -36     -176     -244     -104 
  Row 2:      -36     -176     -244     -104 
  Row 3:      -48      -96      -48        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  89 │-195 │-301 │-284 │
├─────┼─────┼─────┼─────┤
│ -36 │-176 │-244 │-104 │
├─────┼─────┼─────┼─────┤
│ -36 │-176 │-244 │-104 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -176 (from PE[1][1])
  PE[0][2]: partial_in = -244 (from PE[1][2])
  PE[0][3]: partial_in = -104 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -176 (from PE[2][1])
  PE[1][2]: partial_in = -244 (from PE[2][2])
  PE[1][3]: partial_in = -104 (from PE[2][3])
  PE[2][0]: partial_in = -48 (from PE[3][0])
  PE[2][1]: partial_in = -96 (from PE[3][1])
  PE[2][2]: partial_in = -48 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-176 -> result=-176
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-244 -> result=-244
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-104 -> result=-104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-176 -> result=-176
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-244 -> result=-244
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-104 -> result=-104
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-48 -> result=-48
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36     -176     -244     -104 
  Row 1:      -36     -176     -244     -104 
  Row 2:      -48      -96      -48        0 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │-176 │-244 │-104 │
├─────┼─────┼─────┼─────┤
│ -36 │-176 │-244 │-104 │
├─────┼─────┼─────┼─────┤
│ -48 │ -96 │ -48 │   0 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36     -176     -244     -104 
Row 1:      -36     -176     -244     -104 
Row 2:      -48      -96      -48        0 
Row 3:      -70     -140      -70        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -176 -> clamp(-128) -> final(0)
  PE[0][2]: -244 -> clamp(-128) -> final(0)
  PE[0][3]: -104 -> clamp(-104) -> final(24)
  PE[1][0]: -36 -> clamp(-36) -> final(92)
  PE[1][1]: -176 -> clamp(-128) -> final(0)
  PE[1][2]: -244 -> clamp(-128) -> final(0)
  PE[1][3]: -104 -> clamp(-104) -> final(24)
  PE[2][0]: -48 -> clamp(-48) -> final(80)
  PE[2][1]: -96 -> clamp(-96) -> final(32)
  PE[2][2]: -48 -> clamp(-48) -> final(80)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -70 -> clamp(-70) -> final(58)
  PE[3][1]: -140 -> clamp(-128) -> final(0)
  PE[3][2]: -70 -> clamp(-70) -> final(58)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92      0      0     24 
    92      0      0     24 
    80     32     80    128 
    58      0     58    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -94  -99  -93  -79 
 -90  -97  -97  -90 
-105 -102  -94  -87 
 -88  -96 -105 -114 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -94
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-94 * weight=-2 = 188, partial_in=0 -> result=188
  PE[0][1]: input=-94 * weight=-1 = 94, partial_in=0 -> result=94
  PE[0][2]: input=-94 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      188       94        0      -94 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 188 │  94 │   0 │ -94 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -99
  Row 1: input_block[1][0] = -90
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-99 * weight=-2 = 198, partial_in=0 -> result=198
  PE[0][1]: input=-99 * weight=-1 = 99, partial_in=0 -> result=99
  PE[0][2]: input=-99 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[1][0]: input=-90 * weight=-1 = 90, partial_in=0 -> result=90
  PE[1][1]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[1][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[1][3]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      198       99        0      -99 
  Row 1:       90      -90      -90     -180 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 198 │  99 │   0 │ -99 │
├─────┼─────┼─────┼─────┤
│  90 │ -90 │ -90 │-180 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -93
  Row 1: input_block[1][1] = -97
  Row 2: input_block[2][0] = -105
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 90 (from PE[1][0])
  PE[0][1]: partial_in = -90 (from PE[1][1])
  PE[0][2]: partial_in = -90 (from PE[1][2])
  PE[0][3]: partial_in = -180 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-93 * weight=-2 = 186, partial_in=90 -> result=276
  PE[0][1]: input=-93 * weight=-1 = 93, partial_in=-90 -> result=3
  PE[0][2]: input=-93 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[0][3]: input=-93 * weight=1 = -93, partial_in=-180 -> result=-273
  PE[1][0]: input=-97 * weight=-1 = 97, partial_in=0 -> result=97
  PE[1][1]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[1][2]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[1][3]: input=-97 * weight=2 = -194, partial_in=0 -> result=-194
  PE[2][0]: input=-105 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[2][2]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[2][3]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      276        3      -90     -273 
  Row 1:       97      -97      -97     -194 
  Row 2:        0     -105     -210     -105 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 276 │   3 │ -90 │-273 │
├─────┼─────┼─────┼─────┤
│  97 │ -97 │ -97 │-194 │
├─────┼─────┼─────┼─────┤
│   0 │-105 │-210 │-105 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -79
  Row 1: input_block[1][2] = -97
  Row 2: input_block[2][1] = -102
  Row 3: input_block[3][0] = -88

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 97 (from PE[1][0])
  PE[0][1]: partial_in = -97 (from PE[1][1])
  PE[0][2]: partial_in = -97 (from PE[1][2])
  PE[0][3]: partial_in = -194 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -105 (from PE[2][1])
  PE[1][2]: partial_in = -210 (from PE[2][2])
  PE[1][3]: partial_in = -105 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-79 * weight=-2 = 158, partial_in=97 -> result=255
  PE[0][1]: input=-79 * weight=-1 = 79, partial_in=-97 -> result=-18
  PE[0][2]: input=-79 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[0][3]: input=-79 * weight=1 = -79, partial_in=-194 -> result=-273
  PE[1][0]: input=-97 * weight=-1 = 97, partial_in=0 -> result=97
  PE[1][1]: input=-97 * weight=1 = -97, partial_in=-105 -> result=-202
  PE[1][2]: input=-97 * weight=1 = -97, partial_in=-210 -> result=-307
  PE[1][3]: input=-97 * weight=2 = -194, partial_in=-105 -> result=-299
  PE[2][0]: input=-102 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[2][2]: input=-102 * weight=2 = -204, partial_in=0 -> result=-204
  PE[2][3]: input=-102 * weight=1 = -102, partial_in=0 -> result=-102
  PE[3][0]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][1]: input=-88 * weight=2 = -176, partial_in=0 -> result=-176
  PE[3][2]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][3]: input=-88 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      255      -18      -97     -273 
  Row 1:       97     -202     -307     -299 
  Row 2:        0     -102     -204     -102 
  Row 3:      -88     -176      -88        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 255 │ -18 │ -97 │-273 │
├─────┼─────┼─────┼─────┤
│  97 │-202 │-307 │-299 │
├─────┼─────┼─────┼─────┤
│   0 │-102 │-204 │-102 │
├─────┼─────┼─────┼─────┤
│ -88 │-176 │ -88 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -90
  Row 2: input_block[2][2] = -94
  Row 3: input_block[3][1] = -96

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 97 (from PE[1][0])
  PE[0][1]: partial_in = -202 (from PE[1][1])
  PE[0][2]: partial_in = -307 (from PE[1][2])
  PE[0][3]: partial_in = -299 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -102 (from PE[2][1])
  PE[1][2]: partial_in = -204 (from PE[2][2])
  PE[1][3]: partial_in = -102 (from PE[2][3])
  PE[2][0]: partial_in = -88 (from PE[3][0])
  PE[2][1]: partial_in = -176 (from PE[3][1])
  PE[2][2]: partial_in = -88 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=97 -> result=97
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-202 -> result=-202
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-307 -> result=-307
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-299 -> result=-299
  PE[1][0]: input=-90 * weight=-1 = 90, partial_in=0 -> result=90
  PE[1][1]: input=-90 * weight=1 = -90, partial_in=-102 -> result=-192
  PE[1][2]: input=-90 * weight=1 = -90, partial_in=-204 -> result=-294
  PE[1][3]: input=-90 * weight=2 = -180, partial_in=-102 -> result=-282
  PE[2][0]: input=-94 * weight=0 = 0, partial_in=-88 -> result=-88
  PE[2][1]: input=-94 * weight=1 = -94, partial_in=-176 -> result=-270
  PE[2][2]: input=-94 * weight=2 = -188, partial_in=-88 -> result=-276
  PE[2][3]: input=-94 * weight=1 = -94, partial_in=0 -> result=-94
  PE[3][0]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][1]: input=-96 * weight=2 = -192, partial_in=0 -> result=-192
  PE[3][2]: input=-96 * weight=1 = -96, partial_in=0 -> result=-96
  PE[3][3]: input=-96 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       97     -202     -307     -299 
  Row 1:       90     -192     -294     -282 
  Row 2:      -88     -270     -276      -94 
  Row 3:      -96     -192      -96        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  97 │-202 │-307 │-299 │
├─────┼─────┼─────┼─────┤
│  90 │-192 │-294 │-282 │
├─────┼─────┼─────┼─────┤
│ -88 │-270 │-276 │ -94 │
├─────┼─────┼─────┼─────┤
│ -96 │-192 │ -96 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -87
  Row 3: input_block[3][2] = -105

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 90 (from PE[1][0])
  PE[0][1]: partial_in = -192 (from PE[1][1])
  PE[0][2]: partial_in = -294 (from PE[1][2])
  PE[0][3]: partial_in = -282 (from PE[1][3])
  PE[1][0]: partial_in = -88 (from PE[2][0])
  PE[1][1]: partial_in = -270 (from PE[2][1])
  PE[1][2]: partial_in = -276 (from PE[2][2])
  PE[1][3]: partial_in = -94 (from PE[2][3])
  PE[2][0]: partial_in = -96 (from PE[3][0])
  PE[2][1]: partial_in = -192 (from PE[3][1])
  PE[2][2]: partial_in = -96 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=90 -> result=90
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-192 -> result=-192
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-294 -> result=-294
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-282 -> result=-282
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-88 -> result=-88
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-276 -> result=-276
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-94 -> result=-94
  PE[2][0]: input=-87 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[2][1]: input=-87 * weight=1 = -87, partial_in=-192 -> result=-279
  PE[2][2]: input=-87 * weight=2 = -174, partial_in=-96 -> result=-270
  PE[2][3]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][0]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][1]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[3][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][3]: input=-105 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       90     -192     -294     -282 
  Row 1:      -88     -270     -276      -94 
  Row 2:      -96     -279     -270      -87 
  Row 3:     -105     -210     -105        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │-192 │-294 │-282 │
├─────┼─────┼─────┼─────┤
│ -88 │-270 │-276 │ -94 │
├─────┼─────┼─────┼─────┤
│ -96 │-279 │-270 │ -87 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -114

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -88 (from PE[1][0])
  PE[0][1]: partial_in = -270 (from PE[1][1])
  PE[0][2]: partial_in = -276 (from PE[1][2])
  PE[0][3]: partial_in = -94 (from PE[1][3])
  PE[1][0]: partial_in = -96 (from PE[2][0])
  PE[1][1]: partial_in = -279 (from PE[2][1])
  PE[1][2]: partial_in = -270 (from PE[2][2])
  PE[1][3]: partial_in = -87 (from PE[2][3])
  PE[2][0]: partial_in = -105 (from PE[3][0])
  PE[2][1]: partial_in = -210 (from PE[3][1])
  PE[2][2]: partial_in = -105 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-88 -> result=-88
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-270 -> result=-270
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-276 -> result=-276
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-96 -> result=-96
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-279 -> result=-279
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-270 -> result=-270
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-87 -> result=-87
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-210 -> result=-210
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-105 -> result=-105
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-114 * weight=1 = -114, partial_in=0 -> result=-114
  PE[3][1]: input=-114 * weight=2 = -228, partial_in=0 -> result=-228
  PE[3][2]: input=-114 * weight=1 = -114, partial_in=0 -> result=-114
  PE[3][3]: input=-114 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -88     -270     -276      -94 
  Row 1:      -96     -279     -270      -87 
  Row 2:     -105     -210     -105        0 
  Row 3:     -114     -228     -114        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -88 │-270 │-276 │ -94 │
├─────┼─────┼─────┼─────┤
│ -96 │-279 │-270 │ -87 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
├─────┼─────┼─────┼─────┤
│-114 │-228 │-114 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -88     -270     -276      -94 
Row 1:      -96     -279     -270      -87 
Row 2:     -105     -210     -105        0 
Row 3:     -114     -228     -114        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -88 -> clamp(-88) -> final(40)
  PE[0][1]: -270 -> clamp(-128) -> final(0)
  PE[0][2]: -276 -> clamp(-128) -> final(0)
  PE[0][3]: -94 -> clamp(-94) -> final(34)
  PE[1][0]: -96 -> clamp(-96) -> final(32)
  PE[1][1]: -279 -> clamp(-128) -> final(0)
  PE[1][2]: -270 -> clamp(-128) -> final(0)
  PE[1][3]: -87 -> clamp(-87) -> final(41)
  PE[2][0]: -105 -> clamp(-105) -> final(23)
  PE[2][1]: -210 -> clamp(-128) -> final(0)
  PE[2][2]: -105 -> clamp(-105) -> final(23)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -114 -> clamp(-114) -> final(14)
  PE[3][1]: -228 -> clamp(-128) -> final(0)
  PE[3][2]: -114 -> clamp(-114) -> final(14)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    40      0      0     34 
    32      0      0     41 
    23      0     23    128 
    14      0     14    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -60  -30  -43  -53 
 -76  -37  -32  -45 
 -89  -53  -36  -52 
-105  -90  -70  -72 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -60
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-60 * weight=-2 = 120, partial_in=0 -> result=120
  PE[0][1]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[0][2]: input=-60 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      120       60        0      -60 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 120 │  60 │   0 │ -60 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -30
  Row 1: input_block[1][0] = -76
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-30 * weight=-2 = 60, partial_in=0 -> result=60
  PE[0][1]: input=-30 * weight=-1 = 30, partial_in=0 -> result=30
  PE[0][2]: input=-30 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[1][0]: input=-76 * weight=-1 = 76, partial_in=0 -> result=76
  PE[1][1]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[1][2]: input=-76 * weight=1 = -76, partial_in=0 -> result=-76
  PE[1][3]: input=-76 * weight=2 = -152, partial_in=0 -> result=-152
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       60       30        0      -30 
  Row 1:       76      -76      -76     -152 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  60 │  30 │   0 │ -30 │
├─────┼─────┼─────┼─────┤
│  76 │ -76 │ -76 │-152 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -43
  Row 1: input_block[1][1] = -37
  Row 2: input_block[2][0] = -89
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 76 (from PE[1][0])
  PE[0][1]: partial_in = -76 (from PE[1][1])
  PE[0][2]: partial_in = -76 (from PE[1][2])
  PE[0][3]: partial_in = -152 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-43 * weight=-2 = 86, partial_in=76 -> result=162
  PE[0][1]: input=-43 * weight=-1 = 43, partial_in=-76 -> result=-33
  PE[0][2]: input=-43 * weight=0 = 0, partial_in=-76 -> result=-76
  PE[0][3]: input=-43 * weight=1 = -43, partial_in=-152 -> result=-195
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=-89 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[2][2]: input=-89 * weight=2 = -178, partial_in=0 -> result=-178
  PE[2][3]: input=-89 * weight=1 = -89, partial_in=0 -> result=-89
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      162      -33      -76     -195 
  Row 1:       37      -37      -37      -74 
  Row 2:        0      -89     -178      -89 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 162 │ -33 │ -76 │-195 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │ -89 │-178 │ -89 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -53
  Row 1: input_block[1][2] = -32
  Row 2: input_block[2][1] = -53
  Row 3: input_block[3][0] = -105

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -89 (from PE[2][1])
  PE[1][2]: partial_in = -178 (from PE[2][2])
  PE[1][3]: partial_in = -89 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=37 -> result=143
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=-37 -> result=16
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=-74 -> result=-127
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-89 -> result=-121
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-178 -> result=-210
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-89 -> result=-153
  PE[2][0]: input=-53 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[2][2]: input=-53 * weight=2 = -106, partial_in=0 -> result=-106
  PE[2][3]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][0]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][1]: input=-105 * weight=2 = -210, partial_in=0 -> result=-210
  PE[3][2]: input=-105 * weight=1 = -105, partial_in=0 -> result=-105
  PE[3][3]: input=-105 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      143       16      -37     -127 
  Row 1:       32     -121     -210     -153 
  Row 2:        0      -53     -106      -53 
  Row 3:     -105     -210     -105        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 143 │  16 │ -37 │-127 │
├─────┼─────┼─────┼─────┤
│  32 │-121 │-210 │-153 │
├─────┼─────┼─────┼─────┤
│   0 │ -53 │-106 │ -53 │
├─────┼─────┼─────┼─────┤
│-105 │-210 │-105 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -45
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = -90

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -121 (from PE[1][1])
  PE[0][2]: partial_in = -210 (from PE[1][2])
  PE[0][3]: partial_in = -153 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -53 (from PE[2][1])
  PE[1][2]: partial_in = -106 (from PE[2][2])
  PE[1][3]: partial_in = -53 (from PE[2][3])
  PE[2][0]: partial_in = -105 (from PE[3][0])
  PE[2][1]: partial_in = -210 (from PE[3][1])
  PE[2][2]: partial_in = -105 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-121 -> result=-121
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-210 -> result=-210
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-153 -> result=-153
  PE[1][0]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[1][1]: input=-45 * weight=1 = -45, partial_in=-53 -> result=-98
  PE[1][2]: input=-45 * weight=1 = -45, partial_in=-106 -> result=-151
  PE[1][3]: input=-45 * weight=2 = -90, partial_in=-53 -> result=-143
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=-105 -> result=-105
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=-210 -> result=-246
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=-105 -> result=-177
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][1]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[3][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[3][3]: input=-90 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       32     -121     -210     -153 
  Row 1:       45      -98     -151     -143 
  Row 2:     -105     -246     -177      -36 
  Row 3:      -90     -180      -90        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │-121 │-210 │-153 │
├─────┼─────┼─────┼─────┤
│  45 │ -98 │-151 │-143 │
├─────┼─────┼─────┼─────┤
│-105 │-246 │-177 │ -36 │
├─────┼─────┼─────┼─────┤
│ -90 │-180 │ -90 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -52
  Row 3: input_block[3][2] = -70

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 45 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -151 (from PE[1][2])
  PE[0][3]: partial_in = -143 (from PE[1][3])
  PE[1][0]: partial_in = -105 (from PE[2][0])
  PE[1][1]: partial_in = -246 (from PE[2][1])
  PE[1][2]: partial_in = -177 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = -90 (from PE[3][0])
  PE[2][1]: partial_in = -180 (from PE[3][1])
  PE[2][2]: partial_in = -90 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=45 -> result=45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-98 -> result=-98
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-151 -> result=-151
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-143 -> result=-143
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-105 -> result=-105
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-246 -> result=-246
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-177 -> result=-177
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-180 -> result=-232
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-90 -> result=-194
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][1]: input=-70 * weight=2 = -140, partial_in=0 -> result=-140
  PE[3][2]: input=-70 * weight=1 = -70, partial_in=0 -> result=-70
  PE[3][3]: input=-70 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       45      -98     -151     -143 
  Row 1:     -105     -246     -177      -36 
  Row 2:      -90     -232     -194      -52 
  Row 3:      -70     -140      -70        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  45 │ -98 │-151 │-143 │
├─────┼─────┼─────┼─────┤
│-105 │-246 │-177 │ -36 │
├─────┼─────┼─────┼─────┤
│ -90 │-232 │-194 │ -52 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -72

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -105 (from PE[1][0])
  PE[0][1]: partial_in = -246 (from PE[1][1])
  PE[0][2]: partial_in = -177 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = -90 (from PE[2][0])
  PE[1][1]: partial_in = -232 (from PE[2][1])
  PE[1][2]: partial_in = -194 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -70 (from PE[3][0])
  PE[2][1]: partial_in = -140 (from PE[3][1])
  PE[2][2]: partial_in = -70 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-105 -> result=-105
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-246 -> result=-246
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-177 -> result=-177
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-90 -> result=-90
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-232 -> result=-232
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-194 -> result=-194
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-70 -> result=-70
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-140 -> result=-140
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-70 -> result=-70
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][1]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[3][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[3][3]: input=-72 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -105     -246     -177      -36 
  Row 1:      -90     -232     -194      -52 
  Row 2:      -70     -140      -70        0 
  Row 3:      -72     -144      -72        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-105 │-246 │-177 │ -36 │
├─────┼─────┼─────┼─────┤
│ -90 │-232 │-194 │ -52 │
├─────┼─────┼─────┼─────┤
│ -70 │-140 │ -70 │   0 │
├─────┼─────┼─────┼─────┤
│ -72 │-144 │ -72 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -105     -246     -177      -36 
Row 1:      -90     -232     -194      -52 
Row 2:      -70     -140      -70        0 
Row 3:      -72     -144      -72        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -105 -> clamp(-105) -> final(23)
  PE[0][1]: -246 -> clamp(-128) -> final(0)
  PE[0][2]: -177 -> clamp(-128) -> final(0)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: -90 -> clamp(-90) -> final(38)
  PE[1][1]: -232 -> clamp(-128) -> final(0)
  PE[1][2]: -194 -> clamp(-128) -> final(0)
  PE[1][3]: -52 -> clamp(-52) -> final(76)
  PE[2][0]: -70 -> clamp(-70) -> final(58)
  PE[2][1]: -140 -> clamp(-128) -> final(0)
  PE[2][2]: -70 -> clamp(-70) -> final(58)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -72 -> clamp(-72) -> final(56)
  PE[3][1]: -144 -> clamp(-128) -> final(0)
  PE[3][2]: -72 -> clamp(-72) -> final(56)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    23      0      0     92 
    38      0      0     76 
    58      0     58    128 
    56      0     56    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -21  -14  -31  -23 
 -37  -35  -41  -32 
 -63  -55  -43  -38 
 -80  -63  -51  -65 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -21
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-21 * weight=-2 = 42, partial_in=0 -> result=42
  PE[0][1]: input=-21 * weight=-1 = 21, partial_in=0 -> result=21
  PE[0][2]: input=-21 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-21 * weight=1 = -21, partial_in=0 -> result=-21
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       42       21        0      -21 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │  21 │   0 │ -21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -14
  Row 1: input_block[1][0] = -37
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-14 * weight=-2 = 28, partial_in=0 -> result=28
  PE[0][1]: input=-14 * weight=-1 = 14, partial_in=0 -> result=14
  PE[0][2]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[1][0]: input=-37 * weight=-1 = 37, partial_in=0 -> result=37
  PE[1][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][2]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[1][3]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       28       14        0      -14 
  Row 1:       37      -37      -37      -74 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  28 │  14 │   0 │ -14 │
├─────┼─────┼─────┼─────┤
│  37 │ -37 │ -37 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -31
  Row 1: input_block[1][1] = -35
  Row 2: input_block[2][0] = -63
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 37 (from PE[1][0])
  PE[0][1]: partial_in = -37 (from PE[1][1])
  PE[0][2]: partial_in = -37 (from PE[1][2])
  PE[0][3]: partial_in = -74 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-31 * weight=-2 = 62, partial_in=37 -> result=99
  PE[0][1]: input=-31 * weight=-1 = 31, partial_in=-37 -> result=-6
  PE[0][2]: input=-31 * weight=0 = 0, partial_in=-37 -> result=-37
  PE[0][3]: input=-31 * weight=1 = -31, partial_in=-74 -> result=-105
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[2][2]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[2][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       99       -6      -37     -105 
  Row 1:       35      -35      -35      -70 
  Row 2:        0      -63     -126      -63 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  99 │  -6 │ -37 │-105 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │ -63 │-126 │ -63 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -23
  Row 1: input_block[1][2] = -41
  Row 2: input_block[2][1] = -55
  Row 3: input_block[3][0] = -80

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -63 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -63 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=35 -> result=81
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=-35 -> result=-12
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=-70 -> result=-93
  PE[1][0]: input=-41 * weight=-1 = 41, partial_in=0 -> result=41
  PE[1][1]: input=-41 * weight=1 = -41, partial_in=-63 -> result=-104
  PE[1][2]: input=-41 * weight=1 = -41, partial_in=-126 -> result=-167
  PE[1][3]: input=-41 * weight=2 = -82, partial_in=-63 -> result=-145
  PE[2][0]: input=-55 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[2][2]: input=-55 * weight=2 = -110, partial_in=0 -> result=-110
  PE[2][3]: input=-55 * weight=1 = -55, partial_in=0 -> result=-55
  PE[3][0]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][1]: input=-80 * weight=2 = -160, partial_in=0 -> result=-160
  PE[3][2]: input=-80 * weight=1 = -80, partial_in=0 -> result=-80
  PE[3][3]: input=-80 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       81      -12      -35      -93 
  Row 1:       41     -104     -167     -145 
  Row 2:        0      -55     -110      -55 
  Row 3:      -80     -160      -80        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  81 │ -12 │ -35 │ -93 │
├─────┼─────┼─────┼─────┤
│  41 │-104 │-167 │-145 │
├─────┼─────┼─────┼─────┤
│   0 │ -55 │-110 │ -55 │
├─────┼─────┼─────┼─────┤
│ -80 │-160 │ -80 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -32
  Row 2: input_block[2][2] = -43
  Row 3: input_block[3][1] = -63

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 41 (from PE[1][0])
  PE[0][1]: partial_in = -104 (from PE[1][1])
  PE[0][2]: partial_in = -167 (from PE[1][2])
  PE[0][3]: partial_in = -145 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -55 (from PE[2][1])
  PE[1][2]: partial_in = -110 (from PE[2][2])
  PE[1][3]: partial_in = -55 (from PE[2][3])
  PE[2][0]: partial_in = -80 (from PE[3][0])
  PE[2][1]: partial_in = -160 (from PE[3][1])
  PE[2][2]: partial_in = -80 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=41 -> result=41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-104 -> result=-104
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-167 -> result=-167
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-145 -> result=-145
  PE[1][0]: input=-32 * weight=-1 = 32, partial_in=0 -> result=32
  PE[1][1]: input=-32 * weight=1 = -32, partial_in=-55 -> result=-87
  PE[1][2]: input=-32 * weight=1 = -32, partial_in=-110 -> result=-142
  PE[1][3]: input=-32 * weight=2 = -64, partial_in=-55 -> result=-119
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=-80 -> result=-80
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=-160 -> result=-203
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=-80 -> result=-166
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][1]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[3][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][3]: input=-63 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       41     -104     -167     -145 
  Row 1:       32      -87     -142     -119 
  Row 2:      -80     -203     -166      -43 
  Row 3:      -63     -126      -63        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  41 │-104 │-167 │-145 │
├─────┼─────┼─────┼─────┤
│  32 │ -87 │-142 │-119 │
├─────┼─────┼─────┼─────┤
│ -80 │-203 │-166 │ -43 │
├─────┼─────┼─────┼─────┤
│ -63 │-126 │ -63 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = -87 (from PE[1][1])
  PE[0][2]: partial_in = -142 (from PE[1][2])
  PE[0][3]: partial_in = -119 (from PE[1][3])
  PE[1][0]: partial_in = -80 (from PE[2][0])
  PE[1][1]: partial_in = -203 (from PE[2][1])
  PE[1][2]: partial_in = -166 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -63 (from PE[3][0])
  PE[2][1]: partial_in = -126 (from PE[3][1])
  PE[2][2]: partial_in = -63 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-87 -> result=-87
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-142 -> result=-142
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-119 -> result=-119
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-80 -> result=-80
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-203 -> result=-203
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-166 -> result=-166
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-43 -> result=-43
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-63 -> result=-63
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-126 -> result=-164
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-63 -> result=-139
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][1]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[3][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[3][3]: input=-51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       32      -87     -142     -119 
  Row 1:      -80     -203     -166      -43 
  Row 2:      -63     -164     -139      -38 
  Row 3:      -51     -102      -51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ -87 │-142 │-119 │
├─────┼─────┼─────┼─────┤
│ -80 │-203 │-166 │ -43 │
├─────┼─────┼─────┼─────┤
│ -63 │-164 │-139 │ -38 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -65

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -80 (from PE[1][0])
  PE[0][1]: partial_in = -203 (from PE[1][1])
  PE[0][2]: partial_in = -166 (from PE[1][2])
  PE[0][3]: partial_in = -43 (from PE[1][3])
  PE[1][0]: partial_in = -63 (from PE[2][0])
  PE[1][1]: partial_in = -164 (from PE[2][1])
  PE[1][2]: partial_in = -139 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -51 (from PE[3][0])
  PE[2][1]: partial_in = -102 (from PE[3][1])
  PE[2][2]: partial_in = -51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-80 -> result=-80
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-203 -> result=-203
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-166 -> result=-166
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-43 -> result=-43
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-63 -> result=-63
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-164 -> result=-164
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-139 -> result=-139
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-51 -> result=-51
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][1]: input=-65 * weight=2 = -130, partial_in=0 -> result=-130
  PE[3][2]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[3][3]: input=-65 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -80     -203     -166      -43 
  Row 1:      -63     -164     -139      -38 
  Row 2:      -51     -102      -51        0 
  Row 3:      -65     -130      -65        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │-203 │-166 │ -43 │
├─────┼─────┼─────┼─────┤
│ -63 │-164 │-139 │ -38 │
├─────┼─────┼─────┼─────┤
│ -51 │-102 │ -51 │   0 │
├─────┼─────┼─────┼─────┤
│ -65 │-130 │ -65 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -80     -203     -166      -43 
Row 1:      -63     -164     -139      -38 
Row 2:      -51     -102      -51        0 
Row 3:      -65     -130      -65        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -80 -> clamp(-80) -> final(48)
  PE[0][1]: -203 -> clamp(-128) -> final(0)
  PE[0][2]: -166 -> clamp(-128) -> final(0)
  PE[0][3]: -43 -> clamp(-43) -> final(85)
  PE[1][0]: -63 -> clamp(-63) -> final(65)
  PE[1][1]: -164 -> clamp(-128) -> final(0)
  PE[1][2]: -139 -> clamp(-128) -> final(0)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -51 -> clamp(-51) -> final(77)
  PE[2][1]: -102 -> clamp(-102) -> final(26)
  PE[2][2]: -51 -> clamp(-51) -> final(77)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -65 -> clamp(-65) -> final(63)
  PE[3][1]: -130 -> clamp(-128) -> final(0)
  PE[3][2]: -65 -> clamp(-65) -> final(63)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    48      0      0     85 
    65      0      0     90 
    77     26     77    128 
    63      0     63    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -28  -53  -69  -63 
 -45  -66  -78  -69 
 -62  -81  -92  -87 
-100 -110 -113 -103 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -28
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-28 * weight=-2 = 56, partial_in=0 -> result=56
  PE[0][1]: input=-28 * weight=-1 = 28, partial_in=0 -> result=28
  PE[0][2]: input=-28 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       56       28        0      -28 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  56 │  28 │   0 │ -28 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -53
  Row 1: input_block[1][0] = -45
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=0 -> result=106
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=0 -> result=53
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[1][0]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[1][1]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][3]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      106       53        0      -53 
  Row 1:       45      -45      -45      -90 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 106 │  53 │   0 │ -53 │
├─────┼─────┼─────┼─────┤
│  45 │ -45 │ -45 │ -90 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -69
  Row 1: input_block[1][1] = -66
  Row 2: input_block[2][0] = -62
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 45 (from PE[1][0])
  PE[0][1]: partial_in = -45 (from PE[1][1])
  PE[0][2]: partial_in = -45 (from PE[1][2])
  PE[0][3]: partial_in = -90 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-69 * weight=-2 = 138, partial_in=45 -> result=183
  PE[0][1]: input=-69 * weight=-1 = 69, partial_in=-45 -> result=24
  PE[0][2]: input=-69 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[0][3]: input=-69 * weight=1 = -69, partial_in=-90 -> result=-159
  PE[1][0]: input=-66 * weight=-1 = 66, partial_in=0 -> result=66
  PE[1][1]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][2]: input=-66 * weight=1 = -66, partial_in=0 -> result=-66
  PE[1][3]: input=-66 * weight=2 = -132, partial_in=0 -> result=-132
  PE[2][0]: input=-62 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[2][2]: input=-62 * weight=2 = -124, partial_in=0 -> result=-124
  PE[2][3]: input=-62 * weight=1 = -62, partial_in=0 -> result=-62
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      183       24      -45     -159 
  Row 1:       66      -66      -66     -132 
  Row 2:        0      -62     -124      -62 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 183 │  24 │ -45 │-159 │
├─────┼─────┼─────┼─────┤
│  66 │ -66 │ -66 │-132 │
├─────┼─────┼─────┼─────┤
│   0 │ -62 │-124 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -63
  Row 1: input_block[1][2] = -78
  Row 2: input_block[2][1] = -81
  Row 3: input_block[3][0] = -100

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 66 (from PE[1][0])
  PE[0][1]: partial_in = -66 (from PE[1][1])
  PE[0][2]: partial_in = -66 (from PE[1][2])
  PE[0][3]: partial_in = -132 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -62 (from PE[2][1])
  PE[1][2]: partial_in = -124 (from PE[2][2])
  PE[1][3]: partial_in = -62 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=66 -> result=192
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=-66 -> result=-3
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=-66 -> result=-66
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=-132 -> result=-195
  PE[1][0]: input=-78 * weight=-1 = 78, partial_in=0 -> result=78
  PE[1][1]: input=-78 * weight=1 = -78, partial_in=-62 -> result=-140
  PE[1][2]: input=-78 * weight=1 = -78, partial_in=-124 -> result=-202
  PE[1][3]: input=-78 * weight=2 = -156, partial_in=-62 -> result=-218
  PE[2][0]: input=-81 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[2][2]: input=-81 * weight=2 = -162, partial_in=0 -> result=-162
  PE[2][3]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[3][0]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][1]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[3][2]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][3]: input=-100 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      192       -3      -66     -195 
  Row 1:       78     -140     -202     -218 
  Row 2:        0      -81     -162      -81 
  Row 3:     -100     -200     -100        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 192 │  -3 │ -66 │-195 │
├─────┼─────┼─────┼─────┤
│  78 │-140 │-202 │-218 │
├─────┼─────┼─────┼─────┤
│   0 │ -81 │-162 │ -81 │
├─────┼─────┼─────┼─────┤
│-100 │-200 │-100 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -69
  Row 2: input_block[2][2] = -92
  Row 3: input_block[3][1] = -110

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 78 (from PE[1][0])
  PE[0][1]: partial_in = -140 (from PE[1][1])
  PE[0][2]: partial_in = -202 (from PE[1][2])
  PE[0][3]: partial_in = -218 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -81 (from PE[2][1])
  PE[1][2]: partial_in = -162 (from PE[2][2])
  PE[1][3]: partial_in = -81 (from PE[2][3])
  PE[2][0]: partial_in = -100 (from PE[3][0])
  PE[2][1]: partial_in = -200 (from PE[3][1])
  PE[2][2]: partial_in = -100 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=78 -> result=78
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-140 -> result=-140
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-202 -> result=-202
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-218 -> result=-218
  PE[1][0]: input=-69 * weight=-1 = 69, partial_in=0 -> result=69
  PE[1][1]: input=-69 * weight=1 = -69, partial_in=-81 -> result=-150
  PE[1][2]: input=-69 * weight=1 = -69, partial_in=-162 -> result=-231
  PE[1][3]: input=-69 * weight=2 = -138, partial_in=-81 -> result=-219
  PE[2][0]: input=-92 * weight=0 = 0, partial_in=-100 -> result=-100
  PE[2][1]: input=-92 * weight=1 = -92, partial_in=-200 -> result=-292
  PE[2][2]: input=-92 * weight=2 = -184, partial_in=-100 -> result=-284
  PE[2][3]: input=-92 * weight=1 = -92, partial_in=0 -> result=-92
  PE[3][0]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[3][1]: input=-110 * weight=2 = -220, partial_in=0 -> result=-220
  PE[3][2]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[3][3]: input=-110 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       78     -140     -202     -218 
  Row 1:       69     -150     -231     -219 
  Row 2:     -100     -292     -284      -92 
  Row 3:     -110     -220     -110        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │-140 │-202 │-218 │
├─────┼─────┼─────┼─────┤
│  69 │-150 │-231 │-219 │
├─────┼─────┼─────┼─────┤
│-100 │-292 │-284 │ -92 │
├─────┼─────┼─────┼─────┤
│-110 │-220 │-110 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -87
  Row 3: input_block[3][2] = -113

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 69 (from PE[1][0])
  PE[0][1]: partial_in = -150 (from PE[1][1])
  PE[0][2]: partial_in = -231 (from PE[1][2])
  PE[0][3]: partial_in = -219 (from PE[1][3])
  PE[1][0]: partial_in = -100 (from PE[2][0])
  PE[1][1]: partial_in = -292 (from PE[2][1])
  PE[1][2]: partial_in = -284 (from PE[2][2])
  PE[1][3]: partial_in = -92 (from PE[2][3])
  PE[2][0]: partial_in = -110 (from PE[3][0])
  PE[2][1]: partial_in = -220 (from PE[3][1])
  PE[2][2]: partial_in = -110 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=69 -> result=69
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-150 -> result=-150
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-231 -> result=-231
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-219 -> result=-219
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-100 -> result=-100
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-292 -> result=-292
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-284 -> result=-284
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-92 -> result=-92
  PE[2][0]: input=-87 * weight=0 = 0, partial_in=-110 -> result=-110
  PE[2][1]: input=-87 * weight=1 = -87, partial_in=-220 -> result=-307
  PE[2][2]: input=-87 * weight=2 = -174, partial_in=-110 -> result=-284
  PE[2][3]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][0]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][1]: input=-113 * weight=2 = -226, partial_in=0 -> result=-226
  PE[3][2]: input=-113 * weight=1 = -113, partial_in=0 -> result=-113
  PE[3][3]: input=-113 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       69     -150     -231     -219 
  Row 1:     -100     -292     -284      -92 
  Row 2:     -110     -307     -284      -87 
  Row 3:     -113     -226     -113        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  69 │-150 │-231 │-219 │
├─────┼─────┼─────┼─────┤
│-100 │-292 │-284 │ -92 │
├─────┼─────┼─────┼─────┤
│-110 │-307 │-284 │ -87 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -103

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -100 (from PE[1][0])
  PE[0][1]: partial_in = -292 (from PE[1][1])
  PE[0][2]: partial_in = -284 (from PE[1][2])
  PE[0][3]: partial_in = -92 (from PE[1][3])
  PE[1][0]: partial_in = -110 (from PE[2][0])
  PE[1][1]: partial_in = -307 (from PE[2][1])
  PE[1][2]: partial_in = -284 (from PE[2][2])
  PE[1][3]: partial_in = -87 (from PE[2][3])
  PE[2][0]: partial_in = -113 (from PE[3][0])
  PE[2][1]: partial_in = -226 (from PE[3][1])
  PE[2][2]: partial_in = -113 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-100 -> result=-100
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-292 -> result=-292
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-284 -> result=-284
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-110 -> result=-110
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-307 -> result=-307
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-284 -> result=-284
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-87 -> result=-87
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-113 -> result=-113
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-226 -> result=-226
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-113 -> result=-113
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][1]: input=-103 * weight=2 = -206, partial_in=0 -> result=-206
  PE[3][2]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][3]: input=-103 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:     -100     -292     -284      -92 
  Row 1:     -110     -307     -284      -87 
  Row 2:     -113     -226     -113        0 
  Row 3:     -103     -206     -103        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-100 │-292 │-284 │ -92 │
├─────┼─────┼─────┼─────┤
│-110 │-307 │-284 │ -87 │
├─────┼─────┼─────┼─────┤
│-113 │-226 │-113 │   0 │
├─────┼─────┼─────┼─────┤
│-103 │-206 │-103 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:     -100     -292     -284      -92 
Row 1:     -110     -307     -284      -87 
Row 2:     -113     -226     -113        0 
Row 3:     -103     -206     -103        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -100 -> clamp(-100) -> final(28)
  PE[0][1]: -292 -> clamp(-128) -> final(0)
  PE[0][2]: -284 -> clamp(-128) -> final(0)
  PE[0][3]: -92 -> clamp(-92) -> final(36)
  PE[1][0]: -110 -> clamp(-110) -> final(18)
  PE[1][1]: -307 -> clamp(-128) -> final(0)
  PE[1][2]: -284 -> clamp(-128) -> final(0)
  PE[1][3]: -87 -> clamp(-87) -> final(41)
  PE[2][0]: -113 -> clamp(-113) -> final(15)
  PE[2][1]: -226 -> clamp(-128) -> final(0)
  PE[2][2]: -113 -> clamp(-113) -> final(15)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -103 -> clamp(-103) -> final(25)
  PE[3][1]: -206 -> clamp(-128) -> final(0)
  PE[3][2]: -103 -> clamp(-103) -> final(25)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    28      0      0     36 
    18      0      0     41 
    15      0     15    128 
    25      0     25    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -53  -44  -27   -8 
 -57  -51  -39  -23 
 -83  -87  -88  -81 
 -97 -100 -103  -99 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -53
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=0 -> result=106
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=0 -> result=53
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      106       53        0      -53 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 106 │  53 │   0 │ -53 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -44
  Row 1: input_block[1][0] = -57
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-44 * weight=-2 = 88, partial_in=0 -> result=88
  PE[0][1]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[0][2]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][0]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[1][1]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][2]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][3]: input=-57 * weight=2 = -114, partial_in=0 -> result=-114
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       88       44        0      -44 
  Row 1:       57      -57      -57     -114 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  88 │  44 │   0 │ -44 │
├─────┼─────┼─────┼─────┤
│  57 │ -57 │ -57 │-114 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -27
  Row 1: input_block[1][1] = -51
  Row 2: input_block[2][0] = -83
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 57 (from PE[1][0])
  PE[0][1]: partial_in = -57 (from PE[1][1])
  PE[0][2]: partial_in = -57 (from PE[1][2])
  PE[0][3]: partial_in = -114 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=57 -> result=111
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=-57 -> result=-30
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=-57 -> result=-57
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=-114 -> result=-141
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][0]: input=-83 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[2][2]: input=-83 * weight=2 = -166, partial_in=0 -> result=-166
  PE[2][3]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      111      -30      -57     -141 
  Row 1:       51      -51      -51     -102 
  Row 2:        0      -83     -166      -83 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 111 │ -30 │ -57 │-141 │
├─────┼─────┼─────┼─────┤
│  51 │ -51 │ -51 │-102 │
├─────┼─────┼─────┼─────┤
│   0 │ -83 │-166 │ -83 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -8
  Row 1: input_block[1][2] = -39
  Row 2: input_block[2][1] = -87
  Row 3: input_block[3][0] = -97

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -83 (from PE[2][1])
  PE[1][2]: partial_in = -166 (from PE[2][2])
  PE[1][3]: partial_in = -83 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-8 * weight=-2 = 16, partial_in=51 -> result=67
  PE[0][1]: input=-8 * weight=-1 = 8, partial_in=-51 -> result=-43
  PE[0][2]: input=-8 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=-8 * weight=1 = -8, partial_in=-102 -> result=-110
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=-83 -> result=-122
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=-166 -> result=-205
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=-83 -> result=-161
  PE[2][0]: input=-87 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[2][2]: input=-87 * weight=2 = -174, partial_in=0 -> result=-174
  PE[2][3]: input=-87 * weight=1 = -87, partial_in=0 -> result=-87
  PE[3][0]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[3][1]: input=-97 * weight=2 = -194, partial_in=0 -> result=-194
  PE[3][2]: input=-97 * weight=1 = -97, partial_in=0 -> result=-97
  PE[3][3]: input=-97 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       67      -43      -51     -110 
  Row 1:       39     -122     -205     -161 
  Row 2:        0      -87     -174      -87 
  Row 3:      -97     -194      -97        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  67 │ -43 │ -51 │-110 │
├─────┼─────┼─────┼─────┤
│  39 │-122 │-205 │-161 │
├─────┼─────┼─────┼─────┤
│   0 │ -87 │-174 │ -87 │
├─────┼─────┼─────┼─────┤
│ -97 │-194 │ -97 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -23
  Row 2: input_block[2][2] = -88
  Row 3: input_block[3][1] = -100

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -122 (from PE[1][1])
  PE[0][2]: partial_in = -205 (from PE[1][2])
  PE[0][3]: partial_in = -161 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -87 (from PE[2][1])
  PE[1][2]: partial_in = -174 (from PE[2][2])
  PE[1][3]: partial_in = -87 (from PE[2][3])
  PE[2][0]: partial_in = -97 (from PE[3][0])
  PE[2][1]: partial_in = -194 (from PE[3][1])
  PE[2][2]: partial_in = -97 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=39 -> result=39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-122 -> result=-122
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-205 -> result=-205
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-161 -> result=-161
  PE[1][0]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[1][1]: input=-23 * weight=1 = -23, partial_in=-87 -> result=-110
  PE[1][2]: input=-23 * weight=1 = -23, partial_in=-174 -> result=-197
  PE[1][3]: input=-23 * weight=2 = -46, partial_in=-87 -> result=-133
  PE[2][0]: input=-88 * weight=0 = 0, partial_in=-97 -> result=-97
  PE[2][1]: input=-88 * weight=1 = -88, partial_in=-194 -> result=-282
  PE[2][2]: input=-88 * weight=2 = -176, partial_in=-97 -> result=-273
  PE[2][3]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[3][0]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][1]: input=-100 * weight=2 = -200, partial_in=0 -> result=-200
  PE[3][2]: input=-100 * weight=1 = -100, partial_in=0 -> result=-100
  PE[3][3]: input=-100 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       39     -122     -205     -161 
  Row 1:       23     -110     -197     -133 
  Row 2:      -97     -282     -273      -88 
  Row 3:     -100     -200     -100        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  39 │-122 │-205 │-161 │
├─────┼─────┼─────┼─────┤
│  23 │-110 │-197 │-133 │
├─────┼─────┼─────┼─────┤
│ -97 │-282 │-273 │ -88 │
├─────┼─────┼─────┼─────┤
│-100 │-200 │-100 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -81
  Row 3: input_block[3][2] = -103

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 23 (from PE[1][0])
  PE[0][1]: partial_in = -110 (from PE[1][1])
  PE[0][2]: partial_in = -197 (from PE[1][2])
  PE[0][3]: partial_in = -133 (from PE[1][3])
  PE[1][0]: partial_in = -97 (from PE[2][0])
  PE[1][1]: partial_in = -282 (from PE[2][1])
  PE[1][2]: partial_in = -273 (from PE[2][2])
  PE[1][3]: partial_in = -88 (from PE[2][3])
  PE[2][0]: partial_in = -100 (from PE[3][0])
  PE[2][1]: partial_in = -200 (from PE[3][1])
  PE[2][2]: partial_in = -100 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=23 -> result=23
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-110 -> result=-110
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-197 -> result=-197
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-133 -> result=-133
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-97 -> result=-97
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-282 -> result=-282
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-273 -> result=-273
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-88 -> result=-88
  PE[2][0]: input=-81 * weight=0 = 0, partial_in=-100 -> result=-100
  PE[2][1]: input=-81 * weight=1 = -81, partial_in=-200 -> result=-281
  PE[2][2]: input=-81 * weight=2 = -162, partial_in=-100 -> result=-262
  PE[2][3]: input=-81 * weight=1 = -81, partial_in=0 -> result=-81
  PE[3][0]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][1]: input=-103 * weight=2 = -206, partial_in=0 -> result=-206
  PE[3][2]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[3][3]: input=-103 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       23     -110     -197     -133 
  Row 1:      -97     -282     -273      -88 
  Row 2:     -100     -281     -262      -81 
  Row 3:     -103     -206     -103        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  23 │-110 │-197 │-133 │
├─────┼─────┼─────┼─────┤
│ -97 │-282 │-273 │ -88 │
├─────┼─────┼─────┼─────┤
│-100 │-281 │-262 │ -81 │
├─────┼─────┼─────┼─────┤
│-103 │-206 │-103 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -99

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -97 (from PE[1][0])
  PE[0][1]: partial_in = -282 (from PE[1][1])
  PE[0][2]: partial_in = -273 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = -100 (from PE[2][0])
  PE[1][1]: partial_in = -281 (from PE[2][1])
  PE[1][2]: partial_in = -262 (from PE[2][2])
  PE[1][3]: partial_in = -81 (from PE[2][3])
  PE[2][0]: partial_in = -103 (from PE[3][0])
  PE[2][1]: partial_in = -206 (from PE[3][1])
  PE[2][2]: partial_in = -103 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-97 -> result=-97
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-282 -> result=-282
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-273 -> result=-273
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-88 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-100 -> result=-100
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-281 -> result=-281
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-262 -> result=-262
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-81 -> result=-81
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-103 -> result=-103
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-206 -> result=-206
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-103 -> result=-103
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[3][1]: input=-99 * weight=2 = -198, partial_in=0 -> result=-198
  PE[3][2]: input=-99 * weight=1 = -99, partial_in=0 -> result=-99
  PE[3][3]: input=-99 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -97     -282     -273      -88 
  Row 1:     -100     -281     -262      -81 
  Row 2:     -103     -206     -103        0 
  Row 3:      -99     -198      -99        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -97 │-282 │-273 │ -88 │
├─────┼─────┼─────┼─────┤
│-100 │-281 │-262 │ -81 │
├─────┼─────┼─────┼─────┤
│-103 │-206 │-103 │   0 │
├─────┼─────┼─────┼─────┤
│ -99 │-198 │ -99 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -97     -282     -273      -88 
Row 1:     -100     -281     -262      -81 
Row 2:     -103     -206     -103        0 
Row 3:      -99     -198      -99        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -97 -> clamp(-97) -> final(31)
  PE[0][1]: -282 -> clamp(-128) -> final(0)
  PE[0][2]: -273 -> clamp(-128) -> final(0)
  PE[0][3]: -88 -> clamp(-88) -> final(40)
  PE[1][0]: -100 -> clamp(-100) -> final(28)
  PE[1][1]: -281 -> clamp(-128) -> final(0)
  PE[1][2]: -262 -> clamp(-128) -> final(0)
  PE[1][3]: -81 -> clamp(-81) -> final(47)
  PE[2][0]: -103 -> clamp(-103) -> final(25)
  PE[2][1]: -206 -> clamp(-128) -> final(0)
  PE[2][2]: -103 -> clamp(-103) -> final(25)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -99 -> clamp(-99) -> final(29)
  PE[3][1]: -198 -> clamp(-128) -> final(0)
  PE[3][2]: -99 -> clamp(-99) -> final(29)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    31      0      0     40 
    28      0      0     47 
    25      0     25    128 
    29      0     29    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -6   -5  -50  -81 
 -29  -22  -54  -73 
   3   26    6  -37 
 -33  -28  -47  -63 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -6
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-6 * weight=-2 = 12, partial_in=0 -> result=12
  PE[0][1]: input=-6 * weight=-1 = 6, partial_in=0 -> result=6
  PE[0][2]: input=-6 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       12        6        0       -6 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  12 │   6 │   0 │  -6 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -5
  Row 1: input_block[1][0] = -29
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-5 * weight=-2 = 10, partial_in=0 -> result=10
  PE[0][1]: input=-5 * weight=-1 = 5, partial_in=0 -> result=5
  PE[0][2]: input=-5 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-5 * weight=1 = -5, partial_in=0 -> result=-5
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       10        5        0       -5 
  Row 1:       29      -29      -29      -58 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │   5 │   0 │  -5 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -50
  Row 1: input_block[1][1] = -22
  Row 2: input_block[2][0] = 3
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-50 * weight=-2 = 100, partial_in=29 -> result=129
  PE[0][1]: input=-50 * weight=-1 = 50, partial_in=-29 -> result=21
  PE[0][2]: input=-50 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-50 * weight=1 = -50, partial_in=-58 -> result=-108
  PE[1][0]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[1][1]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][3]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[2][0]: input=3 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[2][2]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][3]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      129       21      -29     -108 
  Row 1:       22      -22      -22      -44 
  Row 2:        0        3        6        3 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 129 │  21 │ -29 │-108 │
├─────┼─────┼─────┼─────┤
│  22 │ -22 │ -22 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   3 │   6 │   3 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -81
  Row 1: input_block[1][2] = -54
  Row 2: input_block[2][1] = 26
  Row 3: input_block[3][0] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 22 (from PE[1][0])
  PE[0][1]: partial_in = -22 (from PE[1][1])
  PE[0][2]: partial_in = -22 (from PE[1][2])
  PE[0][3]: partial_in = -44 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 3 (from PE[2][1])
  PE[1][2]: partial_in = 6 (from PE[2][2])
  PE[1][3]: partial_in = 3 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-81 * weight=-2 = 162, partial_in=22 -> result=184
  PE[0][1]: input=-81 * weight=-1 = 81, partial_in=-22 -> result=59
  PE[0][2]: input=-81 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[0][3]: input=-81 * weight=1 = -81, partial_in=-44 -> result=-125
  PE[1][0]: input=-54 * weight=-1 = 54, partial_in=0 -> result=54
  PE[1][1]: input=-54 * weight=1 = -54, partial_in=3 -> result=-51
  PE[1][2]: input=-54 * weight=1 = -54, partial_in=6 -> result=-48
  PE[1][3]: input=-54 * weight=2 = -108, partial_in=3 -> result=-105
  PE[2][0]: input=26 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[2][2]: input=26 * weight=2 = 52, partial_in=0 -> result=52
  PE[2][3]: input=26 * weight=1 = 26, partial_in=0 -> result=26
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      184       59      -22     -125 
  Row 1:       54      -51      -48     -105 
  Row 2:        0       26       52       26 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 184 │  59 │ -22 │-125 │
├─────┼─────┼─────┼─────┤
│  54 │ -51 │ -48 │-105 │
├─────┼─────┼─────┼─────┤
│   0 │  26 │  52 │  26 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -73
  Row 2: input_block[2][2] = 6
  Row 3: input_block[3][1] = -28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 54 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -48 (from PE[1][2])
  PE[0][3]: partial_in = -105 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 26 (from PE[2][1])
  PE[1][2]: partial_in = 52 (from PE[2][2])
  PE[1][3]: partial_in = 26 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=54 -> result=54
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-51 -> result=-51
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-105 -> result=-105
  PE[1][0]: input=-73 * weight=-1 = 73, partial_in=0 -> result=73
  PE[1][1]: input=-73 * weight=1 = -73, partial_in=26 -> result=-47
  PE[1][2]: input=-73 * weight=1 = -73, partial_in=52 -> result=-21
  PE[1][3]: input=-73 * weight=2 = -146, partial_in=26 -> result=-120
  PE[2][0]: input=6 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=6 * weight=1 = 6, partial_in=-66 -> result=-60
  PE[2][2]: input=6 * weight=2 = 12, partial_in=-33 -> result=-21
  PE[2][3]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][0]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][1]: input=-28 * weight=2 = -56, partial_in=0 -> result=-56
  PE[3][2]: input=-28 * weight=1 = -28, partial_in=0 -> result=-28
  PE[3][3]: input=-28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       54      -51      -48     -105 
  Row 1:       73      -47      -21     -120 
  Row 2:      -33      -60      -21        6 
  Row 3:      -28      -56      -28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  54 │ -51 │ -48 │-105 │
├─────┼─────┼─────┼─────┤
│  73 │ -47 │ -21 │-120 │
├─────┼─────┼─────┼─────┤
│ -33 │ -60 │ -21 │   6 │
├─────┼─────┼─────┼─────┤
│ -28 │ -56 │ -28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -37
  Row 3: input_block[3][2] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 73 (from PE[1][0])
  PE[0][1]: partial_in = -47 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = -120 (from PE[1][3])
  PE[1][0]: partial_in = -33 (from PE[2][0])
  PE[1][1]: partial_in = -60 (from PE[2][1])
  PE[1][2]: partial_in = -21 (from PE[2][2])
  PE[1][3]: partial_in = 6 (from PE[2][3])
  PE[2][0]: partial_in = -28 (from PE[3][0])
  PE[2][1]: partial_in = -56 (from PE[3][1])
  PE[2][2]: partial_in = -28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=73 -> result=73
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-120 -> result=-120
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-33 -> result=-33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-21 -> result=-21
  PE[1][3]: input=0 * weight=2 = 0, partial_in=6 -> result=6
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-28 -> result=-28
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-56 -> result=-93
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-28 -> result=-102
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       73      -47      -21     -120 
  Row 1:      -33      -60      -21        6 
  Row 2:      -28      -93     -102      -37 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  73 │ -47 │ -21 │-120 │
├─────┼─────┼─────┼─────┤
│ -33 │ -60 │ -21 │   6 │
├─────┼─────┼─────┼─────┤
│ -28 │ -93 │-102 │ -37 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -63

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -33 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -21 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = -28 (from PE[2][0])
  PE[1][1]: partial_in = -93 (from PE[2][1])
  PE[1][2]: partial_in = -102 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -47 (from PE[3][0])
  PE[2][1]: partial_in = -94 (from PE[3][1])
  PE[2][2]: partial_in = -47 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-33 -> result=-33
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-60 -> result=-60
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-21 -> result=-21
  PE[0][3]: input=0 * weight=1 = 0, partial_in=6 -> result=6
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-93 -> result=-93
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-102 -> result=-102
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-47 -> result=-47
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-94 -> result=-94
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-47 -> result=-47
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][1]: input=-63 * weight=2 = -126, partial_in=0 -> result=-126
  PE[3][2]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[3][3]: input=-63 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -33      -60      -21        6 
  Row 1:      -28      -93     -102      -37 
  Row 2:      -47      -94      -47        0 
  Row 3:      -63     -126      -63        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │ -60 │ -21 │   6 │
├─────┼─────┼─────┼─────┤
│ -28 │ -93 │-102 │ -37 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
├─────┼─────┼─────┼─────┤
│ -63 │-126 │ -63 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -33      -60      -21        6 
Row 1:      -28      -93     -102      -37 
Row 2:      -47      -94      -47        0 
Row 3:      -63     -126      -63        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -33 -> clamp(-33) -> final(95)
  PE[0][1]: -60 -> clamp(-60) -> final(68)
  PE[0][2]: -21 -> clamp(-21) -> final(107)
  PE[0][3]: 6 -> clamp(6) -> final(134)
  PE[1][0]: -28 -> clamp(-28) -> final(100)
  PE[1][1]: -93 -> clamp(-93) -> final(35)
  PE[1][2]: -102 -> clamp(-102) -> final(26)
  PE[1][3]: -37 -> clamp(-37) -> final(91)
  PE[2][0]: -47 -> clamp(-47) -> final(81)
  PE[2][1]: -94 -> clamp(-94) -> final(34)
  PE[2][2]: -47 -> clamp(-47) -> final(81)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -63 -> clamp(-63) -> final(65)
  PE[3][1]: -126 -> clamp(-126) -> final(2)
  PE[3][2]: -63 -> clamp(-63) -> final(65)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    95     68    107    134 
   100     35     26     91 
    81     34     81    128 
    65      2     65    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -45  -10   -7   -1 
 -31   12   29   44 
 -41  -14   31   78 
 -43  -13   10   29 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -45
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-45 * weight=-2 = 90, partial_in=0 -> result=90
  PE[0][1]: input=-45 * weight=-1 = 45, partial_in=0 -> result=45
  PE[0][2]: input=-45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       90       45        0      -45 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  90 │  45 │   0 │ -45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -10
  Row 1: input_block[1][0] = -31
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-10 * weight=-2 = 20, partial_in=0 -> result=20
  PE[0][1]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[0][2]: input=-10 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-10 * weight=1 = -10, partial_in=0 -> result=-10
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=0 -> result=-31
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=0 -> result=-62
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       20       10        0      -10 
  Row 1:       31      -31      -31      -62 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  10 │   0 │ -10 │
├─────┼─────┼─────┼─────┤
│  31 │ -31 │ -31 │ -62 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -7
  Row 1: input_block[1][1] = 12
  Row 2: input_block[2][0] = -41
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -31 (from PE[1][1])
  PE[0][2]: partial_in = -31 (from PE[1][2])
  PE[0][3]: partial_in = -62 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-7 * weight=-2 = 14, partial_in=31 -> result=45
  PE[0][1]: input=-7 * weight=-1 = 7, partial_in=-31 -> result=-24
  PE[0][2]: input=-7 * weight=0 = 0, partial_in=-31 -> result=-31
  PE[0][3]: input=-7 * weight=1 = -7, partial_in=-62 -> result=-69
  PE[1][0]: input=12 * weight=-1 = -12, partial_in=0 -> result=-12
  PE[1][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][2]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[1][3]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][0]: input=-41 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[2][2]: input=-41 * weight=2 = -82, partial_in=0 -> result=-82
  PE[2][3]: input=-41 * weight=1 = -41, partial_in=0 -> result=-41
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       45      -24      -31      -69 
  Row 1:      -12       12       12       24 
  Row 2:        0      -41      -82      -41 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  45 │ -24 │ -31 │ -69 │
├─────┼─────┼─────┼─────┤
│ -12 │  12 │  12 │  24 │
├─────┼─────┼─────┼─────┤
│   0 │ -41 │ -82 │ -41 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -1
  Row 1: input_block[1][2] = 29
  Row 2: input_block[2][1] = -14
  Row 3: input_block[3][0] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -12 (from PE[1][0])
  PE[0][1]: partial_in = 12 (from PE[1][1])
  PE[0][2]: partial_in = 12 (from PE[1][2])
  PE[0][3]: partial_in = 24 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -41 (from PE[2][1])
  PE[1][2]: partial_in = -82 (from PE[2][2])
  PE[1][3]: partial_in = -41 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-1 * weight=-2 = 2, partial_in=-12 -> result=-10
  PE[0][1]: input=-1 * weight=-1 = 1, partial_in=12 -> result=13
  PE[0][2]: input=-1 * weight=0 = 0, partial_in=12 -> result=12
  PE[0][3]: input=-1 * weight=1 = -1, partial_in=24 -> result=23
  PE[1][0]: input=29 * weight=-1 = -29, partial_in=0 -> result=-29
  PE[1][1]: input=29 * weight=1 = 29, partial_in=-41 -> result=-12
  PE[1][2]: input=29 * weight=1 = 29, partial_in=-82 -> result=-53
  PE[1][3]: input=29 * weight=2 = 58, partial_in=-41 -> result=17
  PE[2][0]: input=-14 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[2][2]: input=-14 * weight=2 = -28, partial_in=0 -> result=-28
  PE[2][3]: input=-14 * weight=1 = -14, partial_in=0 -> result=-14
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -10       13       12       23 
  Row 1:      -29      -12      -53       17 
  Row 2:        0      -14      -28      -14 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -10 │  13 │  12 │  23 │
├─────┼─────┼─────┼─────┤
│ -29 │ -12 │ -53 │  17 │
├─────┼─────┼─────┼─────┤
│   0 │ -14 │ -28 │ -14 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 44
  Row 2: input_block[2][2] = 31
  Row 3: input_block[3][1] = -13

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -29 (from PE[1][0])
  PE[0][1]: partial_in = -12 (from PE[1][1])
  PE[0][2]: partial_in = -53 (from PE[1][2])
  PE[0][3]: partial_in = 17 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -14 (from PE[2][1])
  PE[1][2]: partial_in = -28 (from PE[2][2])
  PE[1][3]: partial_in = -14 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-29 -> result=-29
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-12 -> result=-12
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-53 -> result=-53
  PE[0][3]: input=0 * weight=1 = 0, partial_in=17 -> result=17
  PE[1][0]: input=44 * weight=-1 = -44, partial_in=0 -> result=-44
  PE[1][1]: input=44 * weight=1 = 44, partial_in=-14 -> result=30
  PE[1][2]: input=44 * weight=1 = 44, partial_in=-28 -> result=16
  PE[1][3]: input=44 * weight=2 = 88, partial_in=-14 -> result=74
  PE[2][0]: input=31 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=31 * weight=1 = 31, partial_in=-86 -> result=-55
  PE[2][2]: input=31 * weight=2 = 62, partial_in=-43 -> result=19
  PE[2][3]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][0]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][1]: input=-13 * weight=2 = -26, partial_in=0 -> result=-26
  PE[3][2]: input=-13 * weight=1 = -13, partial_in=0 -> result=-13
  PE[3][3]: input=-13 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -29      -12      -53       17 
  Row 1:      -44       30       16       74 
  Row 2:      -43      -55       19       31 
  Row 3:      -13      -26      -13        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -29 │ -12 │ -53 │  17 │
├─────┼─────┼─────┼─────┤
│ -44 │  30 │  16 │  74 │
├─────┼─────┼─────┼─────┤
│ -43 │ -55 │  19 │  31 │
├─────┼─────┼─────┼─────┤
│ -13 │ -26 │ -13 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 78
  Row 3: input_block[3][2] = 10

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -44 (from PE[1][0])
  PE[0][1]: partial_in = 30 (from PE[1][1])
  PE[0][2]: partial_in = 16 (from PE[1][2])
  PE[0][3]: partial_in = 74 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -55 (from PE[2][1])
  PE[1][2]: partial_in = 19 (from PE[2][2])
  PE[1][3]: partial_in = 31 (from PE[2][3])
  PE[2][0]: partial_in = -13 (from PE[3][0])
  PE[2][1]: partial_in = -26 (from PE[3][1])
  PE[2][2]: partial_in = -13 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-44 -> result=-44
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=16 -> result=16
  PE[0][3]: input=0 * weight=1 = 0, partial_in=74 -> result=74
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-55 -> result=-55
  PE[1][2]: input=0 * weight=1 = 0, partial_in=19 -> result=19
  PE[1][3]: input=0 * weight=2 = 0, partial_in=31 -> result=31
  PE[2][0]: input=78 * weight=0 = 0, partial_in=-13 -> result=-13
  PE[2][1]: input=78 * weight=1 = 78, partial_in=-26 -> result=52
  PE[2][2]: input=78 * weight=2 = 156, partial_in=-13 -> result=143
  PE[2][3]: input=78 * weight=1 = 78, partial_in=0 -> result=78
  PE[3][0]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][1]: input=10 * weight=2 = 20, partial_in=0 -> result=20
  PE[3][2]: input=10 * weight=1 = 10, partial_in=0 -> result=10
  PE[3][3]: input=10 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -44       30       16       74 
  Row 1:      -43      -55       19       31 
  Row 2:      -13       52      143       78 
  Row 3:       10       20       10        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │  30 │  16 │  74 │
├─────┼─────┼─────┼─────┤
│ -43 │ -55 │  19 │  31 │
├─────┼─────┼─────┼─────┤
│ -13 │  52 │ 143 │  78 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = -55 (from PE[1][1])
  PE[0][2]: partial_in = 19 (from PE[1][2])
  PE[0][3]: partial_in = 31 (from PE[1][3])
  PE[1][0]: partial_in = -13 (from PE[2][0])
  PE[1][1]: partial_in = 52 (from PE[2][1])
  PE[1][2]: partial_in = 143 (from PE[2][2])
  PE[1][3]: partial_in = 78 (from PE[2][3])
  PE[2][0]: partial_in = 10 (from PE[3][0])
  PE[2][1]: partial_in = 20 (from PE[3][1])
  PE[2][2]: partial_in = 10 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-55 -> result=-55
  PE[0][2]: input=0 * weight=0 = 0, partial_in=19 -> result=19
  PE[0][3]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-13 -> result=-13
  PE[1][1]: input=0 * weight=1 = 0, partial_in=52 -> result=52
  PE[1][2]: input=0 * weight=1 = 0, partial_in=143 -> result=143
  PE[1][3]: input=0 * weight=2 = 0, partial_in=78 -> result=78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=10 -> result=10
  PE[2][1]: input=0 * weight=1 = 0, partial_in=20 -> result=20
  PE[2][2]: input=0 * weight=2 = 0, partial_in=10 -> result=10
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -43      -55       19       31 
  Row 1:      -13       52      143       78 
  Row 2:       10       20       10        0 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │ -55 │  19 │  31 │
├─────┼─────┼─────┼─────┤
│ -13 │  52 │ 143 │  78 │
├─────┼─────┼─────┼─────┤
│  10 │  20 │  10 │   0 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -43      -55       19       31 
Row 1:      -13       52      143       78 
Row 2:       10       20       10        0 
Row 3:       29       58       29        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -43 -> clamp(-43) -> final(85)
  PE[0][1]: -55 -> clamp(-55) -> final(73)
  PE[0][2]: 19 -> clamp(19) -> final(147)
  PE[0][3]: 31 -> clamp(31) -> final(159)
  PE[1][0]: -13 -> clamp(-13) -> final(115)
  PE[1][1]: 52 -> clamp(52) -> final(180)
  PE[1][2]: 143 -> clamp(127) -> final(255)
  PE[1][3]: 78 -> clamp(78) -> final(206)
  PE[2][0]: 10 -> clamp(10) -> final(138)
  PE[2][1]: 20 -> clamp(20) -> final(148)
  PE[2][2]: 10 -> clamp(10) -> final(138)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 29 -> clamp(29) -> final(157)
  PE[3][1]: 58 -> clamp(58) -> final(186)
  PE[3][2]: 29 -> clamp(29) -> final(157)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    85     73    147    159 
   115    180    255    206 
   138    148    138    128 
   157    186    157    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -36  -63  -80  -81 
  25    3  -10  -20 
  80   70   71   61 
  55   56   73   76 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -36
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-36 * weight=-2 = 72, partial_in=0 -> result=72
  PE[0][1]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[0][2]: input=-36 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       72       36        0      -36 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  72 │  36 │   0 │ -36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -63
  Row 1: input_block[1][0] = 25
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-63 * weight=-2 = 126, partial_in=0 -> result=126
  PE[0][1]: input=-63 * weight=-1 = 63, partial_in=0 -> result=63
  PE[0][2]: input=-63 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-63 * weight=1 = -63, partial_in=0 -> result=-63
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][2]: input=25 * weight=1 = 25, partial_in=0 -> result=25
  PE[1][3]: input=25 * weight=2 = 50, partial_in=0 -> result=50
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      126       63        0      -63 
  Row 1:      -25       25       25       50 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 126 │  63 │   0 │ -63 │
├─────┼─────┼─────┼─────┤
│ -25 │  25 │  25 │  50 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -80
  Row 1: input_block[1][1] = 3
  Row 2: input_block[2][0] = 80
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 25 (from PE[1][1])
  PE[0][2]: partial_in = 25 (from PE[1][2])
  PE[0][3]: partial_in = 50 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-80 * weight=-2 = 160, partial_in=-25 -> result=135
  PE[0][1]: input=-80 * weight=-1 = 80, partial_in=25 -> result=105
  PE[0][2]: input=-80 * weight=0 = 0, partial_in=25 -> result=25
  PE[0][3]: input=-80 * weight=1 = -80, partial_in=50 -> result=-30
  PE[1][0]: input=3 * weight=-1 = -3, partial_in=0 -> result=-3
  PE[1][1]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][2]: input=3 * weight=1 = 3, partial_in=0 -> result=3
  PE[1][3]: input=3 * weight=2 = 6, partial_in=0 -> result=6
  PE[2][0]: input=80 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[2][2]: input=80 * weight=2 = 160, partial_in=0 -> result=160
  PE[2][3]: input=80 * weight=1 = 80, partial_in=0 -> result=80
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      135      105       25      -30 
  Row 1:       -3        3        3        6 
  Row 2:        0       80      160       80 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 135 │ 105 │  25 │ -30 │
├─────┼─────┼─────┼─────┤
│  -3 │   3 │   3 │   6 │
├─────┼─────┼─────┼─────┤
│   0 │  80 │ 160 │  80 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -81
  Row 1: input_block[1][2] = -10
  Row 2: input_block[2][1] = 70
  Row 3: input_block[3][0] = 55

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -3 (from PE[1][0])
  PE[0][1]: partial_in = 3 (from PE[1][1])
  PE[0][2]: partial_in = 3 (from PE[1][2])
  PE[0][3]: partial_in = 6 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 80 (from PE[2][1])
  PE[1][2]: partial_in = 160 (from PE[2][2])
  PE[1][3]: partial_in = 80 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-81 * weight=-2 = 162, partial_in=-3 -> result=159
  PE[0][1]: input=-81 * weight=-1 = 81, partial_in=3 -> result=84
  PE[0][2]: input=-81 * weight=0 = 0, partial_in=3 -> result=3
  PE[0][3]: input=-81 * weight=1 = -81, partial_in=6 -> result=-75
  PE[1][0]: input=-10 * weight=-1 = 10, partial_in=0 -> result=10
  PE[1][1]: input=-10 * weight=1 = -10, partial_in=80 -> result=70
  PE[1][2]: input=-10 * weight=1 = -10, partial_in=160 -> result=150
  PE[1][3]: input=-10 * weight=2 = -20, partial_in=80 -> result=60
  PE[2][0]: input=70 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[2][2]: input=70 * weight=2 = 140, partial_in=0 -> result=140
  PE[2][3]: input=70 * weight=1 = 70, partial_in=0 -> result=70
  PE[3][0]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][1]: input=55 * weight=2 = 110, partial_in=0 -> result=110
  PE[3][2]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][3]: input=55 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      159       84        3      -75 
  Row 1:       10       70      150       60 
  Row 2:        0       70      140       70 
  Row 3:       55      110       55        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 159 │  84 │   3 │ -75 │
├─────┼─────┼─────┼─────┤
│  10 │  70 │ 150 │  60 │
├─────┼─────┼─────┼─────┤
│   0 │  70 │ 140 │  70 │
├─────┼─────┼─────┼─────┤
│  55 │ 110 │  55 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -20
  Row 2: input_block[2][2] = 71
  Row 3: input_block[3][1] = 56

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 10 (from PE[1][0])
  PE[0][1]: partial_in = 70 (from PE[1][1])
  PE[0][2]: partial_in = 150 (from PE[1][2])
  PE[0][3]: partial_in = 60 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 70 (from PE[2][1])
  PE[1][2]: partial_in = 140 (from PE[2][2])
  PE[1][3]: partial_in = 70 (from PE[2][3])
  PE[2][0]: partial_in = 55 (from PE[3][0])
  PE[2][1]: partial_in = 110 (from PE[3][1])
  PE[2][2]: partial_in = 55 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=10 -> result=10
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=70 -> result=70
  PE[0][2]: input=0 * weight=0 = 0, partial_in=150 -> result=150
  PE[0][3]: input=0 * weight=1 = 0, partial_in=60 -> result=60
  PE[1][0]: input=-20 * weight=-1 = 20, partial_in=0 -> result=20
  PE[1][1]: input=-20 * weight=1 = -20, partial_in=70 -> result=50
  PE[1][2]: input=-20 * weight=1 = -20, partial_in=140 -> result=120
  PE[1][3]: input=-20 * weight=2 = -40, partial_in=70 -> result=30
  PE[2][0]: input=71 * weight=0 = 0, partial_in=55 -> result=55
  PE[2][1]: input=71 * weight=1 = 71, partial_in=110 -> result=181
  PE[2][2]: input=71 * weight=2 = 142, partial_in=55 -> result=197
  PE[2][3]: input=71 * weight=1 = 71, partial_in=0 -> result=71
  PE[3][0]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][1]: input=56 * weight=2 = 112, partial_in=0 -> result=112
  PE[3][2]: input=56 * weight=1 = 56, partial_in=0 -> result=56
  PE[3][3]: input=56 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       10       70      150       60 
  Row 1:       20       50      120       30 
  Row 2:       55      181      197       71 
  Row 3:       56      112       56        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  10 │  70 │ 150 │  60 │
├─────┼─────┼─────┼─────┤
│  20 │  50 │ 120 │  30 │
├─────┼─────┼─────┼─────┤
│  55 │ 181 │ 197 │  71 │
├─────┼─────┼─────┼─────┤
│  56 │ 112 │  56 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 61
  Row 3: input_block[3][2] = 73

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 20 (from PE[1][0])
  PE[0][1]: partial_in = 50 (from PE[1][1])
  PE[0][2]: partial_in = 120 (from PE[1][2])
  PE[0][3]: partial_in = 30 (from PE[1][3])
  PE[1][0]: partial_in = 55 (from PE[2][0])
  PE[1][1]: partial_in = 181 (from PE[2][1])
  PE[1][2]: partial_in = 197 (from PE[2][2])
  PE[1][3]: partial_in = 71 (from PE[2][3])
  PE[2][0]: partial_in = 56 (from PE[3][0])
  PE[2][1]: partial_in = 112 (from PE[3][1])
  PE[2][2]: partial_in = 56 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=20 -> result=20
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=50 -> result=50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=120 -> result=120
  PE[0][3]: input=0 * weight=1 = 0, partial_in=30 -> result=30
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=55 -> result=55
  PE[1][1]: input=0 * weight=1 = 0, partial_in=181 -> result=181
  PE[1][2]: input=0 * weight=1 = 0, partial_in=197 -> result=197
  PE[1][3]: input=0 * weight=2 = 0, partial_in=71 -> result=71
  PE[2][0]: input=61 * weight=0 = 0, partial_in=56 -> result=56
  PE[2][1]: input=61 * weight=1 = 61, partial_in=112 -> result=173
  PE[2][2]: input=61 * weight=2 = 122, partial_in=56 -> result=178
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=73 * weight=1 = 73, partial_in=0 -> result=73
  PE[3][1]: input=73 * weight=2 = 146, partial_in=0 -> result=146
  PE[3][2]: input=73 * weight=1 = 73, partial_in=0 -> result=73
  PE[3][3]: input=73 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       20       50      120       30 
  Row 1:       55      181      197       71 
  Row 2:       56      173      178       61 
  Row 3:       73      146       73        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │  50 │ 120 │  30 │
├─────┼─────┼─────┼─────┤
│  55 │ 181 │ 197 │  71 │
├─────┼─────┼─────┼─────┤
│  56 │ 173 │ 178 │  61 │
├─────┼─────┼─────┼─────┤
│  73 │ 146 │  73 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 76

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 55 (from PE[1][0])
  PE[0][1]: partial_in = 181 (from PE[1][1])
  PE[0][2]: partial_in = 197 (from PE[1][2])
  PE[0][3]: partial_in = 71 (from PE[1][3])
  PE[1][0]: partial_in = 56 (from PE[2][0])
  PE[1][1]: partial_in = 173 (from PE[2][1])
  PE[1][2]: partial_in = 178 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = 73 (from PE[3][0])
  PE[2][1]: partial_in = 146 (from PE[3][1])
  PE[2][2]: partial_in = 73 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=55 -> result=55
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=181 -> result=181
  PE[0][2]: input=0 * weight=0 = 0, partial_in=197 -> result=197
  PE[0][3]: input=0 * weight=1 = 0, partial_in=71 -> result=71
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=56 -> result=56
  PE[1][1]: input=0 * weight=1 = 0, partial_in=173 -> result=173
  PE[1][2]: input=0 * weight=1 = 0, partial_in=178 -> result=178
  PE[1][3]: input=0 * weight=2 = 0, partial_in=61 -> result=61
  PE[2][0]: input=0 * weight=0 = 0, partial_in=73 -> result=73
  PE[2][1]: input=0 * weight=1 = 0, partial_in=146 -> result=146
  PE[2][2]: input=0 * weight=2 = 0, partial_in=73 -> result=73
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=76 * weight=1 = 76, partial_in=0 -> result=76
  PE[3][1]: input=76 * weight=2 = 152, partial_in=0 -> result=152
  PE[3][2]: input=76 * weight=1 = 76, partial_in=0 -> result=76
  PE[3][3]: input=76 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       55      181      197       71 
  Row 1:       56      173      178       61 
  Row 2:       73      146       73        0 
  Row 3:       76      152       76        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │ 181 │ 197 │  71 │
├─────┼─────┼─────┼─────┤
│  56 │ 173 │ 178 │  61 │
├─────┼─────┼─────┼─────┤
│  73 │ 146 │  73 │   0 │
├─────┼─────┼─────┼─────┤
│  76 │ 152 │  76 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       55      181      197       71 
Row 1:       56      173      178       61 
Row 2:       73      146       73        0 
Row 3:       76      152       76        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 55 -> clamp(55) -> final(183)
  PE[0][1]: 181 -> clamp(127) -> final(255)
  PE[0][2]: 197 -> clamp(127) -> final(255)
  PE[0][3]: 71 -> clamp(71) -> final(199)
  PE[1][0]: 56 -> clamp(56) -> final(184)
  PE[1][1]: 173 -> clamp(127) -> final(255)
  PE[1][2]: 178 -> clamp(127) -> final(255)
  PE[1][3]: 61 -> clamp(61) -> final(189)
  PE[2][0]: 73 -> clamp(73) -> final(201)
  PE[2][1]: 146 -> clamp(127) -> final(255)
  PE[2][2]: 73 -> clamp(73) -> final(201)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 76 -> clamp(76) -> final(204)
  PE[3][1]: 152 -> clamp(127) -> final(255)
  PE[3][2]: 76 -> clamp(76) -> final(204)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   183    255    255    199 
   184    255    255    189 
   201    255    201    128 
   204    255    204    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -74  -57  -41  -40 
 -39  -50  -51  -55 
  21  -20  -42  -52 
  40   -4  -30  -43 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -74
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-74 * weight=-2 = 148, partial_in=0 -> result=148
  PE[0][1]: input=-74 * weight=-1 = 74, partial_in=0 -> result=74
  PE[0][2]: input=-74 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-74 * weight=1 = -74, partial_in=0 -> result=-74
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      148       74        0      -74 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 148 │  74 │   0 │ -74 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -57
  Row 1: input_block[1][0] = -39
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-57 * weight=-2 = 114, partial_in=0 -> result=114
  PE[0][1]: input=-57 * weight=-1 = 57, partial_in=0 -> result=57
  PE[0][2]: input=-57 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-57 * weight=1 = -57, partial_in=0 -> result=-57
  PE[1][0]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[1][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][3]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      114       57        0      -57 
  Row 1:       39      -39      -39      -78 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 114 │  57 │   0 │ -57 │
├─────┼─────┼─────┼─────┤
│  39 │ -39 │ -39 │ -78 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -41
  Row 1: input_block[1][1] = -50
  Row 2: input_block[2][0] = 21
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 39 (from PE[1][0])
  PE[0][1]: partial_in = -39 (from PE[1][1])
  PE[0][2]: partial_in = -39 (from PE[1][2])
  PE[0][3]: partial_in = -78 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-41 * weight=-2 = 82, partial_in=39 -> result=121
  PE[0][1]: input=-41 * weight=-1 = 41, partial_in=-39 -> result=2
  PE[0][2]: input=-41 * weight=0 = 0, partial_in=-39 -> result=-39
  PE[0][3]: input=-41 * weight=1 = -41, partial_in=-78 -> result=-119
  PE[1][0]: input=-50 * weight=-1 = 50, partial_in=0 -> result=50
  PE[1][1]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][2]: input=-50 * weight=1 = -50, partial_in=0 -> result=-50
  PE[1][3]: input=-50 * weight=2 = -100, partial_in=0 -> result=-100
  PE[2][0]: input=21 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[2][2]: input=21 * weight=2 = 42, partial_in=0 -> result=42
  PE[2][3]: input=21 * weight=1 = 21, partial_in=0 -> result=21
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      121        2      -39     -119 
  Row 1:       50      -50      -50     -100 
  Row 2:        0       21       42       21 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 121 │   2 │ -39 │-119 │
├─────┼─────┼─────┼─────┤
│  50 │ -50 │ -50 │-100 │
├─────┼─────┼─────┼─────┤
│   0 │  21 │  42 │  21 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -40
  Row 1: input_block[1][2] = -51
  Row 2: input_block[2][1] = -20
  Row 3: input_block[3][0] = 40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 50 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -50 (from PE[1][2])
  PE[0][3]: partial_in = -100 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 21 (from PE[2][1])
  PE[1][2]: partial_in = 42 (from PE[2][2])
  PE[1][3]: partial_in = 21 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-40 * weight=-2 = 80, partial_in=50 -> result=130
  PE[0][1]: input=-40 * weight=-1 = 40, partial_in=-50 -> result=-10
  PE[0][2]: input=-40 * weight=0 = 0, partial_in=-50 -> result=-50
  PE[0][3]: input=-40 * weight=1 = -40, partial_in=-100 -> result=-140
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=21 -> result=-30
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=42 -> result=-9
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=21 -> result=-81
  PE[2][0]: input=-20 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[2][2]: input=-20 * weight=2 = -40, partial_in=0 -> result=-40
  PE[2][3]: input=-20 * weight=1 = -20, partial_in=0 -> result=-20
  PE[3][0]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][1]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[3][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][3]: input=40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      130      -10      -50     -140 
  Row 1:       51      -30       -9      -81 
  Row 2:        0      -20      -40      -20 
  Row 3:       40       80       40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 130 │ -10 │ -50 │-140 │
├─────┼─────┼─────┼─────┤
│  51 │ -30 │  -9 │ -81 │
├─────┼─────┼─────┼─────┤
│   0 │ -20 │ -40 │ -20 │
├─────┼─────┼─────┼─────┤
│  40 │  80 │  40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -55
  Row 2: input_block[2][2] = -42
  Row 3: input_block[3][1] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -30 (from PE[1][1])
  PE[0][2]: partial_in = -9 (from PE[1][2])
  PE[0][3]: partial_in = -81 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -20 (from PE[2][1])
  PE[1][2]: partial_in = -40 (from PE[2][2])
  PE[1][3]: partial_in = -20 (from PE[2][3])
  PE[2][0]: partial_in = 40 (from PE[3][0])
  PE[2][1]: partial_in = 80 (from PE[3][1])
  PE[2][2]: partial_in = 40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=51 -> result=51
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-30 -> result=-30
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-9 -> result=-9
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-81 -> result=-81
  PE[1][0]: input=-55 * weight=-1 = 55, partial_in=0 -> result=55
  PE[1][1]: input=-55 * weight=1 = -55, partial_in=-20 -> result=-75
  PE[1][2]: input=-55 * weight=1 = -55, partial_in=-40 -> result=-95
  PE[1][3]: input=-55 * weight=2 = -110, partial_in=-20 -> result=-130
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=40 -> result=40
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=80 -> result=38
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=40 -> result=-44
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       51      -30       -9      -81 
  Row 1:       55      -75      -95     -130 
  Row 2:       40       38      -44      -42 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  51 │ -30 │  -9 │ -81 │
├─────┼─────┼─────┼─────┤
│  55 │ -75 │ -95 │-130 │
├─────┼─────┼─────┼─────┤
│  40 │  38 │ -44 │ -42 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -52
  Row 3: input_block[3][2] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 55 (from PE[1][0])
  PE[0][1]: partial_in = -75 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -130 (from PE[1][3])
  PE[1][0]: partial_in = 40 (from PE[2][0])
  PE[1][1]: partial_in = 38 (from PE[2][1])
  PE[1][2]: partial_in = -44 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=55 -> result=55
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-75 -> result=-75
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-130 -> result=-130
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=38 -> result=38
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-44 -> result=-44
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=-52 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-52 * weight=1 = -52, partial_in=-8 -> result=-60
  PE[2][2]: input=-52 * weight=2 = -104, partial_in=-4 -> result=-108
  PE[2][3]: input=-52 * weight=1 = -52, partial_in=0 -> result=-52
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       55      -75      -95     -130 
  Row 1:       40       38      -44      -42 
  Row 2:       -4      -60     -108      -52 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  55 │ -75 │ -95 │-130 │
├─────┼─────┼─────┼─────┤
│  40 │  38 │ -44 │ -42 │
├─────┼─────┼─────┼─────┤
│  -4 │ -60 │-108 │ -52 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = 38 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -42 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -60 (from PE[2][1])
  PE[1][2]: partial_in = -108 (from PE[2][2])
  PE[1][3]: partial_in = -52 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=38 -> result=38
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-42 -> result=-42
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-52 -> result=-52
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       40       38      -44      -42 
  Row 1:       -4      -60     -108      -52 
  Row 2:      -30      -60      -30        0 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │  38 │ -44 │ -42 │
├─────┼─────┼─────┼─────┤
│  -4 │ -60 │-108 │ -52 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       40       38      -44      -42 
Row 1:       -4      -60     -108      -52 
Row 2:      -30      -60      -30        0 
Row 3:      -43      -86      -43        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 40 -> clamp(40) -> final(168)
  PE[0][1]: 38 -> clamp(38) -> final(166)
  PE[0][2]: -44 -> clamp(-44) -> final(84)
  PE[0][3]: -42 -> clamp(-42) -> final(86)
  PE[1][0]: -4 -> clamp(-4) -> final(124)
  PE[1][1]: -60 -> clamp(-60) -> final(68)
  PE[1][2]: -108 -> clamp(-108) -> final(20)
  PE[1][3]: -52 -> clamp(-52) -> final(76)
  PE[2][0]: -30 -> clamp(-30) -> final(98)
  PE[2][1]: -60 -> clamp(-60) -> final(68)
  PE[2][2]: -30 -> clamp(-30) -> final(98)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -43 -> clamp(-43) -> final(85)
  PE[3][1]: -86 -> clamp(-86) -> final(42)
  PE[3][2]: -43 -> clamp(-43) -> final(85)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   168    166     84     86 
   124     68     20     76 
    98     68     98    128 
    85     42     85    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   0   22   34   38 
 -35    9   39   40 
 -37   12   45   46 
 -22   15   34   34 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 0
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=0 -> result=0
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[0][2]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        0        0        0        0 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 22
  Row 1: input_block[1][0] = -35
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=22 * weight=-2 = -44, partial_in=0 -> result=-44
  PE[0][1]: input=22 * weight=-1 = -22, partial_in=0 -> result=-22
  PE[0][2]: input=22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -44      -22        0       22 
  Row 1:       35      -35      -35      -70 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -44 │ -22 │   0 │  22 │
├─────┼─────┼─────┼─────┤
│  35 │ -35 │ -35 │ -70 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 34
  Row 1: input_block[1][1] = 9
  Row 2: input_block[2][0] = -37
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -35 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = -70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=34 * weight=-2 = -68, partial_in=35 -> result=-33
  PE[0][1]: input=34 * weight=-1 = -34, partial_in=-35 -> result=-69
  PE[0][2]: input=34 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=34 * weight=1 = 34, partial_in=-70 -> result=-36
  PE[1][0]: input=9 * weight=-1 = -9, partial_in=0 -> result=-9
  PE[1][1]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][2]: input=9 * weight=1 = 9, partial_in=0 -> result=9
  PE[1][3]: input=9 * weight=2 = 18, partial_in=0 -> result=18
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      -33      -69      -35      -36 
  Row 1:       -9        9        9       18 
  Row 2:        0      -37      -74      -37 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -33 │ -69 │ -35 │ -36 │
├─────┼─────┼─────┼─────┤
│  -9 │   9 │   9 │  18 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 38
  Row 1: input_block[1][2] = 39
  Row 2: input_block[2][1] = 12
  Row 3: input_block[3][0] = -22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -9 (from PE[1][0])
  PE[0][1]: partial_in = 9 (from PE[1][1])
  PE[0][2]: partial_in = 9 (from PE[1][2])
  PE[0][3]: partial_in = 18 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=38 * weight=-2 = -76, partial_in=-9 -> result=-85
  PE[0][1]: input=38 * weight=-1 = -38, partial_in=9 -> result=-29
  PE[0][2]: input=38 * weight=0 = 0, partial_in=9 -> result=9
  PE[0][3]: input=38 * weight=1 = 38, partial_in=18 -> result=56
  PE[1][0]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[1][1]: input=39 * weight=1 = 39, partial_in=-37 -> result=2
  PE[1][2]: input=39 * weight=1 = 39, partial_in=-74 -> result=-35
  PE[1][3]: input=39 * weight=2 = 78, partial_in=-37 -> result=41
  PE[2][0]: input=12 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[2][2]: input=12 * weight=2 = 24, partial_in=0 -> result=24
  PE[2][3]: input=12 * weight=1 = 12, partial_in=0 -> result=12
  PE[3][0]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][1]: input=-22 * weight=2 = -44, partial_in=0 -> result=-44
  PE[3][2]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[3][3]: input=-22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -85      -29        9       56 
  Row 1:      -39        2      -35       41 
  Row 2:        0       12       24       12 
  Row 3:      -22      -44      -22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -85 │ -29 │   9 │  56 │
├─────┼─────┼─────┼─────┤
│ -39 │   2 │ -35 │  41 │
├─────┼─────┼─────┼─────┤
│   0 │  12 │  24 │  12 │
├─────┼─────┼─────┼─────┤
│ -22 │ -44 │ -22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 40
  Row 2: input_block[2][2] = 45
  Row 3: input_block[3][1] = 15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -39 (from PE[1][0])
  PE[0][1]: partial_in = 2 (from PE[1][1])
  PE[0][2]: partial_in = -35 (from PE[1][2])
  PE[0][3]: partial_in = 41 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 12 (from PE[2][1])
  PE[1][2]: partial_in = 24 (from PE[2][2])
  PE[1][3]: partial_in = 12 (from PE[2][3])
  PE[2][0]: partial_in = -22 (from PE[3][0])
  PE[2][1]: partial_in = -44 (from PE[3][1])
  PE[2][2]: partial_in = -22 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-39 -> result=-39
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=2 -> result=2
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[0][3]: input=0 * weight=1 = 0, partial_in=41 -> result=41
  PE[1][0]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[1][1]: input=40 * weight=1 = 40, partial_in=12 -> result=52
  PE[1][2]: input=40 * weight=1 = 40, partial_in=24 -> result=64
  PE[1][3]: input=40 * weight=2 = 80, partial_in=12 -> result=92
  PE[2][0]: input=45 * weight=0 = 0, partial_in=-22 -> result=-22
  PE[2][1]: input=45 * weight=1 = 45, partial_in=-44 -> result=1
  PE[2][2]: input=45 * weight=2 = 90, partial_in=-22 -> result=68
  PE[2][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[3][0]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][1]: input=15 * weight=2 = 30, partial_in=0 -> result=30
  PE[3][2]: input=15 * weight=1 = 15, partial_in=0 -> result=15
  PE[3][3]: input=15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -39        2      -35       41 
  Row 1:      -40       52       64       92 
  Row 2:      -22        1       68       45 
  Row 3:       15       30       15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -39 │   2 │ -35 │  41 │
├─────┼─────┼─────┼─────┤
│ -40 │  52 │  64 │  92 │
├─────┼─────┼─────┼─────┤
│ -22 │   1 │  68 │  45 │
├─────┼─────┼─────┼─────┤
│  15 │  30 │  15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 46
  Row 3: input_block[3][2] = 34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -40 (from PE[1][0])
  PE[0][1]: partial_in = 52 (from PE[1][1])
  PE[0][2]: partial_in = 64 (from PE[1][2])
  PE[0][3]: partial_in = 92 (from PE[1][3])
  PE[1][0]: partial_in = -22 (from PE[2][0])
  PE[1][1]: partial_in = 1 (from PE[2][1])
  PE[1][2]: partial_in = 68 (from PE[2][2])
  PE[1][3]: partial_in = 45 (from PE[2][3])
  PE[2][0]: partial_in = 15 (from PE[3][0])
  PE[2][1]: partial_in = 30 (from PE[3][1])
  PE[2][2]: partial_in = 15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-40 -> result=-40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=52 -> result=52
  PE[0][2]: input=0 * weight=0 = 0, partial_in=64 -> result=64
  PE[0][3]: input=0 * weight=1 = 0, partial_in=92 -> result=92
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-22 -> result=-22
  PE[1][1]: input=0 * weight=1 = 0, partial_in=1 -> result=1
  PE[1][2]: input=0 * weight=1 = 0, partial_in=68 -> result=68
  PE[1][3]: input=0 * weight=2 = 0, partial_in=45 -> result=45
  PE[2][0]: input=46 * weight=0 = 0, partial_in=15 -> result=15
  PE[2][1]: input=46 * weight=1 = 46, partial_in=30 -> result=76
  PE[2][2]: input=46 * weight=2 = 92, partial_in=15 -> result=107
  PE[2][3]: input=46 * weight=1 = 46, partial_in=0 -> result=46
  PE[3][0]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][1]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[3][2]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][3]: input=34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -40       52       64       92 
  Row 1:      -22        1       68       45 
  Row 2:       15       76      107       46 
  Row 3:       34       68       34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -40 │  52 │  64 │  92 │
├─────┼─────┼─────┼─────┤
│ -22 │   1 │  68 │  45 │
├─────┼─────┼─────┼─────┤
│  15 │  76 │ 107 │  46 │
├─────┼─────┼─────┼─────┤
│  34 │  68 │  34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -22 (from PE[1][0])
  PE[0][1]: partial_in = 1 (from PE[1][1])
  PE[0][2]: partial_in = 68 (from PE[1][2])
  PE[0][3]: partial_in = 45 (from PE[1][3])
  PE[1][0]: partial_in = 15 (from PE[2][0])
  PE[1][1]: partial_in = 76 (from PE[2][1])
  PE[1][2]: partial_in = 107 (from PE[2][2])
  PE[1][3]: partial_in = 46 (from PE[2][3])
  PE[2][0]: partial_in = 34 (from PE[3][0])
  PE[2][1]: partial_in = 68 (from PE[3][1])
  PE[2][2]: partial_in = 34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-22 -> result=-22
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=1 -> result=1
  PE[0][2]: input=0 * weight=0 = 0, partial_in=68 -> result=68
  PE[0][3]: input=0 * weight=1 = 0, partial_in=45 -> result=45
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=15 -> result=15
  PE[1][1]: input=0 * weight=1 = 0, partial_in=76 -> result=76
  PE[1][2]: input=0 * weight=1 = 0, partial_in=107 -> result=107
  PE[1][3]: input=0 * weight=2 = 0, partial_in=46 -> result=46
  PE[2][0]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[2][1]: input=0 * weight=1 = 0, partial_in=68 -> result=68
  PE[2][2]: input=0 * weight=2 = 0, partial_in=34 -> result=34
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][1]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[3][2]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][3]: input=34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -22        1       68       45 
  Row 1:       15       76      107       46 
  Row 2:       34       68       34        0 
  Row 3:       34       68       34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -22 │   1 │  68 │  45 │
├─────┼─────┼─────┼─────┤
│  15 │  76 │ 107 │  46 │
├─────┼─────┼─────┼─────┤
│  34 │  68 │  34 │   0 │
├─────┼─────┼─────┼─────┤
│  34 │  68 │  34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -22        1       68       45 
Row 1:       15       76      107       46 
Row 2:       34       68       34        0 
Row 3:       34       68       34        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -22 -> clamp(-22) -> final(106)
  PE[0][1]: 1 -> clamp(1) -> final(129)
  PE[0][2]: 68 -> clamp(68) -> final(196)
  PE[0][3]: 45 -> clamp(45) -> final(173)
  PE[1][0]: 15 -> clamp(15) -> final(143)
  PE[1][1]: 76 -> clamp(76) -> final(204)
  PE[1][2]: 107 -> clamp(107) -> final(235)
  PE[1][3]: 46 -> clamp(46) -> final(174)
  PE[2][0]: 34 -> clamp(34) -> final(162)
  PE[2][1]: 68 -> clamp(68) -> final(196)
  PE[2][2]: 34 -> clamp(34) -> final(162)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 34 -> clamp(34) -> final(162)
  PE[3][1]: 68 -> clamp(68) -> final(196)
  PE[3][2]: 34 -> clamp(34) -> final(162)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   106    129    196    173 
   143    204    235    174 
   162    196    162    128 
   162    196    162    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  46   45   36   34 
  34   28   25   31 
  43   42   42   47 
  40   44   36   29 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 46
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=46 * weight=-2 = -92, partial_in=0 -> result=-92
  PE[0][1]: input=46 * weight=-1 = -46, partial_in=0 -> result=-46
  PE[0][2]: input=46 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=46 * weight=1 = 46, partial_in=0 -> result=46
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -92      -46        0       46 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -92 │ -46 │   0 │  46 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 45
  Row 1: input_block[1][0] = 34
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=45 * weight=-2 = -90, partial_in=0 -> result=-90
  PE[0][1]: input=45 * weight=-1 = -45, partial_in=0 -> result=-45
  PE[0][2]: input=45 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[1][0]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[1][1]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[1][2]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[1][3]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -90      -45        0       45 
  Row 1:      -34       34       34       68 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │ -45 │   0 │  45 │
├─────┼─────┼─────┼─────┤
│ -34 │  34 │  34 │  68 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 36
  Row 1: input_block[1][1] = 28
  Row 2: input_block[2][0] = 43
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -34 (from PE[1][0])
  PE[0][1]: partial_in = 34 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = 68 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=36 * weight=-2 = -72, partial_in=-34 -> result=-106
  PE[0][1]: input=36 * weight=-1 = -36, partial_in=34 -> result=-2
  PE[0][2]: input=36 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=36 * weight=1 = 36, partial_in=68 -> result=104
  PE[1][0]: input=28 * weight=-1 = -28, partial_in=0 -> result=-28
  PE[1][1]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[1][3]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[2][0]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[2][2]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[2][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -106       -2       34      104 
  Row 1:      -28       28       28       56 
  Row 2:        0       43       86       43 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-106 │  -2 │  34 │ 104 │
├─────┼─────┼─────┼─────┤
│ -28 │  28 │  28 │  56 │
├─────┼─────┼─────┼─────┤
│   0 │  43 │  86 │  43 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 34
  Row 1: input_block[1][2] = 25
  Row 2: input_block[2][1] = 42
  Row 3: input_block[3][0] = 40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -28 (from PE[1][0])
  PE[0][1]: partial_in = 28 (from PE[1][1])
  PE[0][2]: partial_in = 28 (from PE[1][2])
  PE[0][3]: partial_in = 56 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 43 (from PE[2][1])
  PE[1][2]: partial_in = 86 (from PE[2][2])
  PE[1][3]: partial_in = 43 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=34 * weight=-2 = -68, partial_in=-28 -> result=-96
  PE[0][1]: input=34 * weight=-1 = -34, partial_in=28 -> result=-6
  PE[0][2]: input=34 * weight=0 = 0, partial_in=28 -> result=28
  PE[0][3]: input=34 * weight=1 = 34, partial_in=56 -> result=90
  PE[1][0]: input=25 * weight=-1 = -25, partial_in=0 -> result=-25
  PE[1][1]: input=25 * weight=1 = 25, partial_in=43 -> result=68
  PE[1][2]: input=25 * weight=1 = 25, partial_in=86 -> result=111
  PE[1][3]: input=25 * weight=2 = 50, partial_in=43 -> result=93
  PE[2][0]: input=42 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[2][2]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[2][3]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][0]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][1]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[3][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][3]: input=40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -96       -6       28       90 
  Row 1:      -25       68      111       93 
  Row 2:        0       42       84       42 
  Row 3:       40       80       40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -96 │  -6 │  28 │  90 │
├─────┼─────┼─────┼─────┤
│ -25 │  68 │ 111 │  93 │
├─────┼─────┼─────┼─────┤
│   0 │  42 │  84 │  42 │
├─────┼─────┼─────┼─────┤
│  40 │  80 │  40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 31
  Row 2: input_block[2][2] = 42
  Row 3: input_block[3][1] = 44

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -25 (from PE[1][0])
  PE[0][1]: partial_in = 68 (from PE[1][1])
  PE[0][2]: partial_in = 111 (from PE[1][2])
  PE[0][3]: partial_in = 93 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 42 (from PE[2][1])
  PE[1][2]: partial_in = 84 (from PE[2][2])
  PE[1][3]: partial_in = 42 (from PE[2][3])
  PE[2][0]: partial_in = 40 (from PE[3][0])
  PE[2][1]: partial_in = 80 (from PE[3][1])
  PE[2][2]: partial_in = 40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-25 -> result=-25
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=68 -> result=68
  PE[0][2]: input=0 * weight=0 = 0, partial_in=111 -> result=111
  PE[0][3]: input=0 * weight=1 = 0, partial_in=93 -> result=93
  PE[1][0]: input=31 * weight=-1 = -31, partial_in=0 -> result=-31
  PE[1][1]: input=31 * weight=1 = 31, partial_in=42 -> result=73
  PE[1][2]: input=31 * weight=1 = 31, partial_in=84 -> result=115
  PE[1][3]: input=31 * weight=2 = 62, partial_in=42 -> result=104
  PE[2][0]: input=42 * weight=0 = 0, partial_in=40 -> result=40
  PE[2][1]: input=42 * weight=1 = 42, partial_in=80 -> result=122
  PE[2][2]: input=42 * weight=2 = 84, partial_in=40 -> result=124
  PE[2][3]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][0]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][1]: input=44 * weight=2 = 88, partial_in=0 -> result=88
  PE[3][2]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][3]: input=44 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -25       68      111       93 
  Row 1:      -31       73      115      104 
  Row 2:       40      122      124       42 
  Row 3:       44       88       44        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -25 │  68 │ 111 │  93 │
├─────┼─────┼─────┼─────┤
│ -31 │  73 │ 115 │ 104 │
├─────┼─────┼─────┼─────┤
│  40 │ 122 │ 124 │  42 │
├─────┼─────┼─────┼─────┤
│  44 │  88 │  44 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 47
  Row 3: input_block[3][2] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -31 (from PE[1][0])
  PE[0][1]: partial_in = 73 (from PE[1][1])
  PE[0][2]: partial_in = 115 (from PE[1][2])
  PE[0][3]: partial_in = 104 (from PE[1][3])
  PE[1][0]: partial_in = 40 (from PE[2][0])
  PE[1][1]: partial_in = 122 (from PE[2][1])
  PE[1][2]: partial_in = 124 (from PE[2][2])
  PE[1][3]: partial_in = 42 (from PE[2][3])
  PE[2][0]: partial_in = 44 (from PE[3][0])
  PE[2][1]: partial_in = 88 (from PE[3][1])
  PE[2][2]: partial_in = 44 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-31 -> result=-31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=73 -> result=73
  PE[0][2]: input=0 * weight=0 = 0, partial_in=115 -> result=115
  PE[0][3]: input=0 * weight=1 = 0, partial_in=104 -> result=104
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=122 -> result=122
  PE[1][2]: input=0 * weight=1 = 0, partial_in=124 -> result=124
  PE[1][3]: input=0 * weight=2 = 0, partial_in=42 -> result=42
  PE[2][0]: input=47 * weight=0 = 0, partial_in=44 -> result=44
  PE[2][1]: input=47 * weight=1 = 47, partial_in=88 -> result=135
  PE[2][2]: input=47 * weight=2 = 94, partial_in=44 -> result=138
  PE[2][3]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -31       73      115      104 
  Row 1:       40      122      124       42 
  Row 2:       44      135      138       47 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -31 │  73 │ 115 │ 104 │
├─────┼─────┼─────┼─────┤
│  40 │ 122 │ 124 │  42 │
├─────┼─────┼─────┼─────┤
│  44 │ 135 │ 138 │  47 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 29

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = 122 (from PE[1][1])
  PE[0][2]: partial_in = 124 (from PE[1][2])
  PE[0][3]: partial_in = 42 (from PE[1][3])
  PE[1][0]: partial_in = 44 (from PE[2][0])
  PE[1][1]: partial_in = 135 (from PE[2][1])
  PE[1][2]: partial_in = 138 (from PE[2][2])
  PE[1][3]: partial_in = 47 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=122 -> result=122
  PE[0][2]: input=0 * weight=0 = 0, partial_in=124 -> result=124
  PE[0][3]: input=0 * weight=1 = 0, partial_in=42 -> result=42
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=44 -> result=44
  PE[1][1]: input=0 * weight=1 = 0, partial_in=135 -> result=135
  PE[1][2]: input=0 * weight=1 = 0, partial_in=138 -> result=138
  PE[1][3]: input=0 * weight=2 = 0, partial_in=47 -> result=47
  PE[2][0]: input=0 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=0 * weight=1 = 0, partial_in=72 -> result=72
  PE[2][2]: input=0 * weight=2 = 0, partial_in=36 -> result=36
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][1]: input=29 * weight=2 = 58, partial_in=0 -> result=58
  PE[3][2]: input=29 * weight=1 = 29, partial_in=0 -> result=29
  PE[3][3]: input=29 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       40      122      124       42 
  Row 1:       44      135      138       47 
  Row 2:       36       72       36        0 
  Row 3:       29       58       29        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ 122 │ 124 │  42 │
├─────┼─────┼─────┼─────┤
│  44 │ 135 │ 138 │  47 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
├─────┼─────┼─────┼─────┤
│  29 │  58 │  29 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       40      122      124       42 
Row 1:       44      135      138       47 
Row 2:       36       72       36        0 
Row 3:       29       58       29        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 40 -> clamp(40) -> final(168)
  PE[0][1]: 122 -> clamp(122) -> final(250)
  PE[0][2]: 124 -> clamp(124) -> final(252)
  PE[0][3]: 42 -> clamp(42) -> final(170)
  PE[1][0]: 44 -> clamp(44) -> final(172)
  PE[1][1]: 135 -> clamp(127) -> final(255)
  PE[1][2]: 138 -> clamp(127) -> final(255)
  PE[1][3]: 47 -> clamp(47) -> final(175)
  PE[2][0]: 36 -> clamp(36) -> final(164)
  PE[2][1]: 72 -> clamp(72) -> final(200)
  PE[2][2]: 36 -> clamp(36) -> final(164)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 29 -> clamp(29) -> final(157)
  PE[3][1]: 58 -> clamp(58) -> final(186)
  PE[3][2]: 29 -> clamp(29) -> final(157)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   168    250    252    170 
   172    255    255    175 
   164    200    164    128 
   157    186    157    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  39   34   39   42 
  32   27   35   43 
  45   45   53   55 
  36   42   50   47 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=39 * weight=-2 = -78, partial_in=0 -> result=-78
  PE[0][1]: input=39 * weight=-1 = -39, partial_in=0 -> result=-39
  PE[0][2]: input=39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=39 * weight=1 = 39, partial_in=0 -> result=39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -78      -39        0       39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -78 │ -39 │   0 │  39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 34
  Row 1: input_block[1][0] = 32
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=34 * weight=-2 = -68, partial_in=0 -> result=-68
  PE[0][1]: input=34 * weight=-1 = -34, partial_in=0 -> result=-34
  PE[0][2]: input=34 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[1][0]: input=32 * weight=-1 = -32, partial_in=0 -> result=-32
  PE[1][1]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[1][3]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -68      -34        0       34 
  Row 1:      -32       32       32       64 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -68 │ -34 │   0 │  34 │
├─────┼─────┼─────┼─────┤
│ -32 │  32 │  32 │  64 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 39
  Row 1: input_block[1][1] = 27
  Row 2: input_block[2][0] = 45
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -32 (from PE[1][0])
  PE[0][1]: partial_in = 32 (from PE[1][1])
  PE[0][2]: partial_in = 32 (from PE[1][2])
  PE[0][3]: partial_in = 64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=39 * weight=-2 = -78, partial_in=-32 -> result=-110
  PE[0][1]: input=39 * weight=-1 = -39, partial_in=32 -> result=-7
  PE[0][2]: input=39 * weight=0 = 0, partial_in=32 -> result=32
  PE[0][3]: input=39 * weight=1 = 39, partial_in=64 -> result=103
  PE[1][0]: input=27 * weight=-1 = -27, partial_in=0 -> result=-27
  PE[1][1]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[1][2]: input=27 * weight=1 = 27, partial_in=0 -> result=27
  PE[1][3]: input=27 * weight=2 = 54, partial_in=0 -> result=54
  PE[2][0]: input=45 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[2][2]: input=45 * weight=2 = 90, partial_in=0 -> result=90
  PE[2][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -110       -7       32      103 
  Row 1:      -27       27       27       54 
  Row 2:        0       45       90       45 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-110 │  -7 │  32 │ 103 │
├─────┼─────┼─────┼─────┤
│ -27 │  27 │  27 │  54 │
├─────┼─────┼─────┼─────┤
│   0 │  45 │  90 │  45 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 42
  Row 1: input_block[1][2] = 35
  Row 2: input_block[2][1] = 45
  Row 3: input_block[3][0] = 36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -27 (from PE[1][0])
  PE[0][1]: partial_in = 27 (from PE[1][1])
  PE[0][2]: partial_in = 27 (from PE[1][2])
  PE[0][3]: partial_in = 54 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 45 (from PE[2][1])
  PE[1][2]: partial_in = 90 (from PE[2][2])
  PE[1][3]: partial_in = 45 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=42 * weight=-2 = -84, partial_in=-27 -> result=-111
  PE[0][1]: input=42 * weight=-1 = -42, partial_in=27 -> result=-15
  PE[0][2]: input=42 * weight=0 = 0, partial_in=27 -> result=27
  PE[0][3]: input=42 * weight=1 = 42, partial_in=54 -> result=96
  PE[1][0]: input=35 * weight=-1 = -35, partial_in=0 -> result=-35
  PE[1][1]: input=35 * weight=1 = 35, partial_in=45 -> result=80
  PE[1][2]: input=35 * weight=1 = 35, partial_in=90 -> result=125
  PE[1][3]: input=35 * weight=2 = 70, partial_in=45 -> result=115
  PE[2][0]: input=45 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[2][2]: input=45 * weight=2 = 90, partial_in=0 -> result=90
  PE[2][3]: input=45 * weight=1 = 45, partial_in=0 -> result=45
  PE[3][0]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][1]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[3][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[3][3]: input=36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -111      -15       27       96 
  Row 1:      -35       80      125      115 
  Row 2:        0       45       90       45 
  Row 3:       36       72       36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-111 │ -15 │  27 │  96 │
├─────┼─────┼─────┼─────┤
│ -35 │  80 │ 125 │ 115 │
├─────┼─────┼─────┼─────┤
│   0 │  45 │  90 │  45 │
├─────┼─────┼─────┼─────┤
│  36 │  72 │  36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 43
  Row 2: input_block[2][2] = 53
  Row 3: input_block[3][1] = 42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = 80 (from PE[1][1])
  PE[0][2]: partial_in = 125 (from PE[1][2])
  PE[0][3]: partial_in = 115 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 45 (from PE[2][1])
  PE[1][2]: partial_in = 90 (from PE[2][2])
  PE[1][3]: partial_in = 45 (from PE[2][3])
  PE[2][0]: partial_in = 36 (from PE[3][0])
  PE[2][1]: partial_in = 72 (from PE[3][1])
  PE[2][2]: partial_in = 36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-35 -> result=-35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=80 -> result=80
  PE[0][2]: input=0 * weight=0 = 0, partial_in=125 -> result=125
  PE[0][3]: input=0 * weight=1 = 0, partial_in=115 -> result=115
  PE[1][0]: input=43 * weight=-1 = -43, partial_in=0 -> result=-43
  PE[1][1]: input=43 * weight=1 = 43, partial_in=45 -> result=88
  PE[1][2]: input=43 * weight=1 = 43, partial_in=90 -> result=133
  PE[1][3]: input=43 * weight=2 = 86, partial_in=45 -> result=131
  PE[2][0]: input=53 * weight=0 = 0, partial_in=36 -> result=36
  PE[2][1]: input=53 * weight=1 = 53, partial_in=72 -> result=125
  PE[2][2]: input=53 * weight=2 = 106, partial_in=36 -> result=142
  PE[2][3]: input=53 * weight=1 = 53, partial_in=0 -> result=53
  PE[3][0]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][1]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[3][2]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][3]: input=42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -35       80      125      115 
  Row 1:      -43       88      133      131 
  Row 2:       36      125      142       53 
  Row 3:       42       84       42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -35 │  80 │ 125 │ 115 │
├─────┼─────┼─────┼─────┤
│ -43 │  88 │ 133 │ 131 │
├─────┼─────┼─────┼─────┤
│  36 │ 125 │ 142 │  53 │
├─────┼─────┼─────┼─────┤
│  42 │  84 │  42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 55
  Row 3: input_block[3][2] = 50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = 88 (from PE[1][1])
  PE[0][2]: partial_in = 133 (from PE[1][2])
  PE[0][3]: partial_in = 131 (from PE[1][3])
  PE[1][0]: partial_in = 36 (from PE[2][0])
  PE[1][1]: partial_in = 125 (from PE[2][1])
  PE[1][2]: partial_in = 142 (from PE[2][2])
  PE[1][3]: partial_in = 53 (from PE[2][3])
  PE[2][0]: partial_in = 42 (from PE[3][0])
  PE[2][1]: partial_in = 84 (from PE[3][1])
  PE[2][2]: partial_in = 42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=88 -> result=88
  PE[0][2]: input=0 * weight=0 = 0, partial_in=133 -> result=133
  PE[0][3]: input=0 * weight=1 = 0, partial_in=131 -> result=131
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=36 -> result=36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=125 -> result=125
  PE[1][2]: input=0 * weight=1 = 0, partial_in=142 -> result=142
  PE[1][3]: input=0 * weight=2 = 0, partial_in=53 -> result=53
  PE[2][0]: input=55 * weight=0 = 0, partial_in=42 -> result=42
  PE[2][1]: input=55 * weight=1 = 55, partial_in=84 -> result=139
  PE[2][2]: input=55 * weight=2 = 110, partial_in=42 -> result=152
  PE[2][3]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][0]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][1]: input=50 * weight=2 = 100, partial_in=0 -> result=100
  PE[3][2]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][3]: input=50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -43       88      133      131 
  Row 1:       36      125      142       53 
  Row 2:       42      139      152       55 
  Row 3:       50      100       50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │  88 │ 133 │ 131 │
├─────┼─────┼─────┼─────┤
│  36 │ 125 │ 142 │  53 │
├─────┼─────┼─────┼─────┤
│  42 │ 139 │ 152 │  55 │
├─────┼─────┼─────┼─────┤
│  50 │ 100 │  50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = 125 (from PE[1][1])
  PE[0][2]: partial_in = 142 (from PE[1][2])
  PE[0][3]: partial_in = 53 (from PE[1][3])
  PE[1][0]: partial_in = 42 (from PE[2][0])
  PE[1][1]: partial_in = 139 (from PE[2][1])
  PE[1][2]: partial_in = 152 (from PE[2][2])
  PE[1][3]: partial_in = 55 (from PE[2][3])
  PE[2][0]: partial_in = 50 (from PE[3][0])
  PE[2][1]: partial_in = 100 (from PE[3][1])
  PE[2][2]: partial_in = 50 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=125 -> result=125
  PE[0][2]: input=0 * weight=0 = 0, partial_in=142 -> result=142
  PE[0][3]: input=0 * weight=1 = 0, partial_in=53 -> result=53
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=42 -> result=42
  PE[1][1]: input=0 * weight=1 = 0, partial_in=139 -> result=139
  PE[1][2]: input=0 * weight=1 = 0, partial_in=152 -> result=152
  PE[1][3]: input=0 * weight=2 = 0, partial_in=55 -> result=55
  PE[2][0]: input=0 * weight=0 = 0, partial_in=50 -> result=50
  PE[2][1]: input=0 * weight=1 = 0, partial_in=100 -> result=100
  PE[2][2]: input=0 * weight=2 = 0, partial_in=50 -> result=50
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][1]: input=47 * weight=2 = 94, partial_in=0 -> result=94
  PE[3][2]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][3]: input=47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       36      125      142       53 
  Row 1:       42      139      152       55 
  Row 2:       50      100       50        0 
  Row 3:       47       94       47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ 125 │ 142 │  53 │
├─────┼─────┼─────┼─────┤
│  42 │ 139 │ 152 │  55 │
├─────┼─────┼─────┼─────┤
│  50 │ 100 │  50 │   0 │
├─────┼─────┼─────┼─────┤
│  47 │  94 │  47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       36      125      142       53 
Row 1:       42      139      152       55 
Row 2:       50      100       50        0 
Row 3:       47       94       47        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 36 -> clamp(36) -> final(164)
  PE[0][1]: 125 -> clamp(125) -> final(253)
  PE[0][2]: 142 -> clamp(127) -> final(255)
  PE[0][3]: 53 -> clamp(53) -> final(181)
  PE[1][0]: 42 -> clamp(42) -> final(170)
  PE[1][1]: 139 -> clamp(127) -> final(255)
  PE[1][2]: 152 -> clamp(127) -> final(255)
  PE[1][3]: 55 -> clamp(55) -> final(183)
  PE[2][0]: 50 -> clamp(50) -> final(178)
  PE[2][1]: 100 -> clamp(100) -> final(228)
  PE[2][2]: 50 -> clamp(50) -> final(178)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 47 -> clamp(47) -> final(175)
  PE[3][1]: 94 -> clamp(94) -> final(222)
  PE[3][2]: 47 -> clamp(47) -> final(175)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   164    253    255    181 
   170    255    255    183 
   178    228    178    128 
   175    222    175    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  36   38   40   33 
  35   36   52   63 
  47   51   61   61 
  43   52   51   32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 36
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=36 * weight=-2 = -72, partial_in=0 -> result=-72
  PE[0][1]: input=36 * weight=-1 = -36, partial_in=0 -> result=-36
  PE[0][2]: input=36 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -72      -36        0       36 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -72 │ -36 │   0 │  36 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 38
  Row 1: input_block[1][0] = 35
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=38 * weight=-2 = -76, partial_in=0 -> result=-76
  PE[0][1]: input=38 * weight=-1 = -38, partial_in=0 -> result=-38
  PE[0][2]: input=38 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=38 * weight=1 = 38, partial_in=0 -> result=38
  PE[1][0]: input=35 * weight=-1 = -35, partial_in=0 -> result=-35
  PE[1][1]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][2]: input=35 * weight=1 = 35, partial_in=0 -> result=35
  PE[1][3]: input=35 * weight=2 = 70, partial_in=0 -> result=70
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -76      -38        0       38 
  Row 1:      -35       35       35       70 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -76 │ -38 │   0 │  38 │
├─────┼─────┼─────┼─────┤
│ -35 │  35 │  35 │  70 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 40
  Row 1: input_block[1][1] = 36
  Row 2: input_block[2][0] = 47
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -35 (from PE[1][0])
  PE[0][1]: partial_in = 35 (from PE[1][1])
  PE[0][2]: partial_in = 35 (from PE[1][2])
  PE[0][3]: partial_in = 70 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=40 * weight=-2 = -80, partial_in=-35 -> result=-115
  PE[0][1]: input=40 * weight=-1 = -40, partial_in=35 -> result=-5
  PE[0][2]: input=40 * weight=0 = 0, partial_in=35 -> result=35
  PE[0][3]: input=40 * weight=1 = 40, partial_in=70 -> result=110
  PE[1][0]: input=36 * weight=-1 = -36, partial_in=0 -> result=-36
  PE[1][1]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][2]: input=36 * weight=1 = 36, partial_in=0 -> result=36
  PE[1][3]: input=36 * weight=2 = 72, partial_in=0 -> result=72
  PE[2][0]: input=47 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[2][2]: input=47 * weight=2 = 94, partial_in=0 -> result=94
  PE[2][3]: input=47 * weight=1 = 47, partial_in=0 -> result=47
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -115       -5       35      110 
  Row 1:      -36       36       36       72 
  Row 2:        0       47       94       47 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-115 │  -5 │  35 │ 110 │
├─────┼─────┼─────┼─────┤
│ -36 │  36 │  36 │  72 │
├─────┼─────┼─────┼─────┤
│   0 │  47 │  94 │  47 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 33
  Row 1: input_block[1][2] = 52
  Row 2: input_block[2][1] = 51
  Row 3: input_block[3][0] = 43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = 36 (from PE[1][1])
  PE[0][2]: partial_in = 36 (from PE[1][2])
  PE[0][3]: partial_in = 72 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 47 (from PE[2][1])
  PE[1][2]: partial_in = 94 (from PE[2][2])
  PE[1][3]: partial_in = 47 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=33 * weight=-2 = -66, partial_in=-36 -> result=-102
  PE[0][1]: input=33 * weight=-1 = -33, partial_in=36 -> result=3
  PE[0][2]: input=33 * weight=0 = 0, partial_in=36 -> result=36
  PE[0][3]: input=33 * weight=1 = 33, partial_in=72 -> result=105
  PE[1][0]: input=52 * weight=-1 = -52, partial_in=0 -> result=-52
  PE[1][1]: input=52 * weight=1 = 52, partial_in=47 -> result=99
  PE[1][2]: input=52 * weight=1 = 52, partial_in=94 -> result=146
  PE[1][3]: input=52 * weight=2 = 104, partial_in=47 -> result=151
  PE[2][0]: input=51 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[2][2]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[2][3]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][0]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][1]: input=43 * weight=2 = 86, partial_in=0 -> result=86
  PE[3][2]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[3][3]: input=43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:     -102        3       36      105 
  Row 1:      -52       99      146      151 
  Row 2:        0       51      102       51 
  Row 3:       43       86       43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-102 │   3 │  36 │ 105 │
├─────┼─────┼─────┼─────┤
│ -52 │  99 │ 146 │ 151 │
├─────┼─────┼─────┼─────┤
│   0 │  51 │ 102 │  51 │
├─────┼─────┼─────┼─────┤
│  43 │  86 │  43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 63
  Row 2: input_block[2][2] = 61
  Row 3: input_block[3][1] = 52

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -52 (from PE[1][0])
  PE[0][1]: partial_in = 99 (from PE[1][1])
  PE[0][2]: partial_in = 146 (from PE[1][2])
  PE[0][3]: partial_in = 151 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 51 (from PE[2][1])
  PE[1][2]: partial_in = 102 (from PE[2][2])
  PE[1][3]: partial_in = 51 (from PE[2][3])
  PE[2][0]: partial_in = 43 (from PE[3][0])
  PE[2][1]: partial_in = 86 (from PE[3][1])
  PE[2][2]: partial_in = 43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-52 -> result=-52
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=99 -> result=99
  PE[0][2]: input=0 * weight=0 = 0, partial_in=146 -> result=146
  PE[0][3]: input=0 * weight=1 = 0, partial_in=151 -> result=151
  PE[1][0]: input=63 * weight=-1 = -63, partial_in=0 -> result=-63
  PE[1][1]: input=63 * weight=1 = 63, partial_in=51 -> result=114
  PE[1][2]: input=63 * weight=1 = 63, partial_in=102 -> result=165
  PE[1][3]: input=63 * weight=2 = 126, partial_in=51 -> result=177
  PE[2][0]: input=61 * weight=0 = 0, partial_in=43 -> result=43
  PE[2][1]: input=61 * weight=1 = 61, partial_in=86 -> result=147
  PE[2][2]: input=61 * weight=2 = 122, partial_in=43 -> result=165
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[3][1]: input=52 * weight=2 = 104, partial_in=0 -> result=104
  PE[3][2]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[3][3]: input=52 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -52       99      146      151 
  Row 1:      -63      114      165      177 
  Row 2:       43      147      165       61 
  Row 3:       52      104       52        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -52 │  99 │ 146 │ 151 │
├─────┼─────┼─────┼─────┤
│ -63 │ 114 │ 165 │ 177 │
├─────┼─────┼─────┼─────┤
│  43 │ 147 │ 165 │  61 │
├─────┼─────┼─────┼─────┤
│  52 │ 104 │  52 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 61
  Row 3: input_block[3][2] = 51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -63 (from PE[1][0])
  PE[0][1]: partial_in = 114 (from PE[1][1])
  PE[0][2]: partial_in = 165 (from PE[1][2])
  PE[0][3]: partial_in = 177 (from PE[1][3])
  PE[1][0]: partial_in = 43 (from PE[2][0])
  PE[1][1]: partial_in = 147 (from PE[2][1])
  PE[1][2]: partial_in = 165 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = 52 (from PE[3][0])
  PE[2][1]: partial_in = 104 (from PE[3][1])
  PE[2][2]: partial_in = 52 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-63 -> result=-63
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=114 -> result=114
  PE[0][2]: input=0 * weight=0 = 0, partial_in=165 -> result=165
  PE[0][3]: input=0 * weight=1 = 0, partial_in=177 -> result=177
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=43 -> result=43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=147 -> result=147
  PE[1][2]: input=0 * weight=1 = 0, partial_in=165 -> result=165
  PE[1][3]: input=0 * weight=2 = 0, partial_in=61 -> result=61
  PE[2][0]: input=61 * weight=0 = 0, partial_in=52 -> result=52
  PE[2][1]: input=61 * weight=1 = 61, partial_in=104 -> result=165
  PE[2][2]: input=61 * weight=2 = 122, partial_in=52 -> result=174
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][1]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[3][2]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][3]: input=51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -63      114      165      177 
  Row 1:       43      147      165       61 
  Row 2:       52      165      174       61 
  Row 3:       51      102       51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -63 │ 114 │ 165 │ 177 │
├─────┼─────┼─────┼─────┤
│  43 │ 147 │ 165 │  61 │
├─────┼─────┼─────┼─────┤
│  52 │ 165 │ 174 │  61 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = 147 (from PE[1][1])
  PE[0][2]: partial_in = 165 (from PE[1][2])
  PE[0][3]: partial_in = 61 (from PE[1][3])
  PE[1][0]: partial_in = 52 (from PE[2][0])
  PE[1][1]: partial_in = 165 (from PE[2][1])
  PE[1][2]: partial_in = 174 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = 51 (from PE[3][0])
  PE[2][1]: partial_in = 102 (from PE[3][1])
  PE[2][2]: partial_in = 51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=43 -> result=43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=147 -> result=147
  PE[0][2]: input=0 * weight=0 = 0, partial_in=165 -> result=165
  PE[0][3]: input=0 * weight=1 = 0, partial_in=61 -> result=61
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=52 -> result=52
  PE[1][1]: input=0 * weight=1 = 0, partial_in=165 -> result=165
  PE[1][2]: input=0 * weight=1 = 0, partial_in=174 -> result=174
  PE[1][3]: input=0 * weight=2 = 0, partial_in=61 -> result=61
  PE[2][0]: input=0 * weight=0 = 0, partial_in=51 -> result=51
  PE[2][1]: input=0 * weight=1 = 0, partial_in=102 -> result=102
  PE[2][2]: input=0 * weight=2 = 0, partial_in=51 -> result=51
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       43      147      165       61 
  Row 1:       52      165      174       61 
  Row 2:       51      102       51        0 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  43 │ 147 │ 165 │  61 │
├─────┼─────┼─────┼─────┤
│  52 │ 165 │ 174 │  61 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       43      147      165       61 
Row 1:       52      165      174       61 
Row 2:       51      102       51        0 
Row 3:       32       64       32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 43 -> clamp(43) -> final(171)
  PE[0][1]: 147 -> clamp(127) -> final(255)
  PE[0][2]: 165 -> clamp(127) -> final(255)
  PE[0][3]: 61 -> clamp(61) -> final(189)
  PE[1][0]: 52 -> clamp(52) -> final(180)
  PE[1][1]: 165 -> clamp(127) -> final(255)
  PE[1][2]: 174 -> clamp(127) -> final(255)
  PE[1][3]: 61 -> clamp(61) -> final(189)
  PE[2][0]: 51 -> clamp(51) -> final(179)
  PE[2][1]: 102 -> clamp(102) -> final(230)
  PE[2][2]: 51 -> clamp(51) -> final(179)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 32 -> clamp(32) -> final(160)
  PE[3][1]: 64 -> clamp(64) -> final(192)
  PE[3][2]: 32 -> clamp(32) -> final(160)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   171    255    255    189 
   180    255    255    189 
   179    230    179    128 
   160    192    160    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  40   43   35   16 
  54   58   59   59 
  54   52   51   54 
  32   34   42   52 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 40
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=40 * weight=-2 = -80, partial_in=0 -> result=-80
  PE[0][1]: input=40 * weight=-1 = -40, partial_in=0 -> result=-40
  PE[0][2]: input=40 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      -80      -40        0       40 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -80 │ -40 │   0 │  40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = 43
  Row 1: input_block[1][0] = 54
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=43 * weight=-2 = -86, partial_in=0 -> result=-86
  PE[0][1]: input=43 * weight=-1 = -43, partial_in=0 -> result=-43
  PE[0][2]: input=43 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=43 * weight=1 = 43, partial_in=0 -> result=43
  PE[1][0]: input=54 * weight=-1 = -54, partial_in=0 -> result=-54
  PE[1][1]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[1][2]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[1][3]: input=54 * weight=2 = 108, partial_in=0 -> result=108
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      -86      -43        0       43 
  Row 1:      -54       54       54      108 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -86 │ -43 │   0 │  43 │
├─────┼─────┼─────┼─────┤
│ -54 │  54 │  54 │ 108 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 35
  Row 1: input_block[1][1] = 58
  Row 2: input_block[2][0] = 54
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -54 (from PE[1][0])
  PE[0][1]: partial_in = 54 (from PE[1][1])
  PE[0][2]: partial_in = 54 (from PE[1][2])
  PE[0][3]: partial_in = 108 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=35 * weight=-2 = -70, partial_in=-54 -> result=-124
  PE[0][1]: input=35 * weight=-1 = -35, partial_in=54 -> result=19
  PE[0][2]: input=35 * weight=0 = 0, partial_in=54 -> result=54
  PE[0][3]: input=35 * weight=1 = 35, partial_in=108 -> result=143
  PE[1][0]: input=58 * weight=-1 = -58, partial_in=0 -> result=-58
  PE[1][1]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[1][2]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[1][3]: input=58 * weight=2 = 116, partial_in=0 -> result=116
  PE[2][0]: input=54 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[2][2]: input=54 * weight=2 = 108, partial_in=0 -> result=108
  PE[2][3]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:     -124       19       54      143 
  Row 1:      -58       58       58      116 
  Row 2:        0       54      108       54 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│-124 │  19 │  54 │ 143 │
├─────┼─────┼─────┼─────┤
│ -58 │  58 │  58 │ 116 │
├─────┼─────┼─────┼─────┤
│   0 │  54 │ 108 │  54 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 16
  Row 1: input_block[1][2] = 59
  Row 2: input_block[2][1] = 52
  Row 3: input_block[3][0] = 32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -58 (from PE[1][0])
  PE[0][1]: partial_in = 58 (from PE[1][1])
  PE[0][2]: partial_in = 58 (from PE[1][2])
  PE[0][3]: partial_in = 116 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 54 (from PE[2][1])
  PE[1][2]: partial_in = 108 (from PE[2][2])
  PE[1][3]: partial_in = 54 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=16 * weight=-2 = -32, partial_in=-58 -> result=-90
  PE[0][1]: input=16 * weight=-1 = -16, partial_in=58 -> result=42
  PE[0][2]: input=16 * weight=0 = 0, partial_in=58 -> result=58
  PE[0][3]: input=16 * weight=1 = 16, partial_in=116 -> result=132
  PE[1][0]: input=59 * weight=-1 = -59, partial_in=0 -> result=-59
  PE[1][1]: input=59 * weight=1 = 59, partial_in=54 -> result=113
  PE[1][2]: input=59 * weight=1 = 59, partial_in=108 -> result=167
  PE[1][3]: input=59 * weight=2 = 118, partial_in=54 -> result=172
  PE[2][0]: input=52 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[2][2]: input=52 * weight=2 = 104, partial_in=0 -> result=104
  PE[2][3]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[3][0]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][1]: input=32 * weight=2 = 64, partial_in=0 -> result=64
  PE[3][2]: input=32 * weight=1 = 32, partial_in=0 -> result=32
  PE[3][3]: input=32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      -90       42       58      132 
  Row 1:      -59      113      167      172 
  Row 2:        0       52      104       52 
  Row 3:       32       64       32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -90 │  42 │  58 │ 132 │
├─────┼─────┼─────┼─────┤
│ -59 │ 113 │ 167 │ 172 │
├─────┼─────┼─────┼─────┤
│   0 │  52 │ 104 │  52 │
├─────┼─────┼─────┼─────┤
│  32 │  64 │  32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 59
  Row 2: input_block[2][2] = 51
  Row 3: input_block[3][1] = 34

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -59 (from PE[1][0])
  PE[0][1]: partial_in = 113 (from PE[1][1])
  PE[0][2]: partial_in = 167 (from PE[1][2])
  PE[0][3]: partial_in = 172 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 52 (from PE[2][1])
  PE[1][2]: partial_in = 104 (from PE[2][2])
  PE[1][3]: partial_in = 52 (from PE[2][3])
  PE[2][0]: partial_in = 32 (from PE[3][0])
  PE[2][1]: partial_in = 64 (from PE[3][1])
  PE[2][2]: partial_in = 32 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-59 -> result=-59
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=113 -> result=113
  PE[0][2]: input=0 * weight=0 = 0, partial_in=167 -> result=167
  PE[0][3]: input=0 * weight=1 = 0, partial_in=172 -> result=172
  PE[1][0]: input=59 * weight=-1 = -59, partial_in=0 -> result=-59
  PE[1][1]: input=59 * weight=1 = 59, partial_in=52 -> result=111
  PE[1][2]: input=59 * weight=1 = 59, partial_in=104 -> result=163
  PE[1][3]: input=59 * weight=2 = 118, partial_in=52 -> result=170
  PE[2][0]: input=51 * weight=0 = 0, partial_in=32 -> result=32
  PE[2][1]: input=51 * weight=1 = 51, partial_in=64 -> result=115
  PE[2][2]: input=51 * weight=2 = 102, partial_in=32 -> result=134
  PE[2][3]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][0]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][1]: input=34 * weight=2 = 68, partial_in=0 -> result=68
  PE[3][2]: input=34 * weight=1 = 34, partial_in=0 -> result=34
  PE[3][3]: input=34 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -59      113      167      172 
  Row 1:      -59      111      163      170 
  Row 2:       32      115      134       51 
  Row 3:       34       68       34        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -59 │ 113 │ 167 │ 172 │
├─────┼─────┼─────┼─────┤
│ -59 │ 111 │ 163 │ 170 │
├─────┼─────┼─────┼─────┤
│  32 │ 115 │ 134 │  51 │
├─────┼─────┼─────┼─────┤
│  34 │  68 │  34 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 54
  Row 3: input_block[3][2] = 42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -59 (from PE[1][0])
  PE[0][1]: partial_in = 111 (from PE[1][1])
  PE[0][2]: partial_in = 163 (from PE[1][2])
  PE[0][3]: partial_in = 170 (from PE[1][3])
  PE[1][0]: partial_in = 32 (from PE[2][0])
  PE[1][1]: partial_in = 115 (from PE[2][1])
  PE[1][2]: partial_in = 134 (from PE[2][2])
  PE[1][3]: partial_in = 51 (from PE[2][3])
  PE[2][0]: partial_in = 34 (from PE[3][0])
  PE[2][1]: partial_in = 68 (from PE[3][1])
  PE[2][2]: partial_in = 34 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-59 -> result=-59
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=111 -> result=111
  PE[0][2]: input=0 * weight=0 = 0, partial_in=163 -> result=163
  PE[0][3]: input=0 * weight=1 = 0, partial_in=170 -> result=170
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=32 -> result=32
  PE[1][1]: input=0 * weight=1 = 0, partial_in=115 -> result=115
  PE[1][2]: input=0 * weight=1 = 0, partial_in=134 -> result=134
  PE[1][3]: input=0 * weight=2 = 0, partial_in=51 -> result=51
  PE[2][0]: input=54 * weight=0 = 0, partial_in=34 -> result=34
  PE[2][1]: input=54 * weight=1 = 54, partial_in=68 -> result=122
  PE[2][2]: input=54 * weight=2 = 108, partial_in=34 -> result=142
  PE[2][3]: input=54 * weight=1 = 54, partial_in=0 -> result=54
  PE[3][0]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][1]: input=42 * weight=2 = 84, partial_in=0 -> result=84
  PE[3][2]: input=42 * weight=1 = 42, partial_in=0 -> result=42
  PE[3][3]: input=42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -59      111      163      170 
  Row 1:       32      115      134       51 
  Row 2:       34      122      142       54 
  Row 3:       42       84       42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -59 │ 111 │ 163 │ 170 │
├─────┼─────┼─────┼─────┤
│  32 │ 115 │ 134 │  51 │
├─────┼─────┼─────┼─────┤
│  34 │ 122 │ 142 │  54 │
├─────┼─────┼─────┼─────┤
│  42 │  84 │  42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 52

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 32 (from PE[1][0])
  PE[0][1]: partial_in = 115 (from PE[1][1])
  PE[0][2]: partial_in = 134 (from PE[1][2])
  PE[0][3]: partial_in = 51 (from PE[1][3])
  PE[1][0]: partial_in = 34 (from PE[2][0])
  PE[1][1]: partial_in = 122 (from PE[2][1])
  PE[1][2]: partial_in = 142 (from PE[2][2])
  PE[1][3]: partial_in = 54 (from PE[2][3])
  PE[2][0]: partial_in = 42 (from PE[3][0])
  PE[2][1]: partial_in = 84 (from PE[3][1])
  PE[2][2]: partial_in = 42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=32 -> result=32
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=115 -> result=115
  PE[0][2]: input=0 * weight=0 = 0, partial_in=134 -> result=134
  PE[0][3]: input=0 * weight=1 = 0, partial_in=51 -> result=51
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=34 -> result=34
  PE[1][1]: input=0 * weight=1 = 0, partial_in=122 -> result=122
  PE[1][2]: input=0 * weight=1 = 0, partial_in=142 -> result=142
  PE[1][3]: input=0 * weight=2 = 0, partial_in=54 -> result=54
  PE[2][0]: input=0 * weight=0 = 0, partial_in=42 -> result=42
  PE[2][1]: input=0 * weight=1 = 0, partial_in=84 -> result=84
  PE[2][2]: input=0 * weight=2 = 0, partial_in=42 -> result=42
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[3][1]: input=52 * weight=2 = 104, partial_in=0 -> result=104
  PE[3][2]: input=52 * weight=1 = 52, partial_in=0 -> result=52
  PE[3][3]: input=52 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       32      115      134       51 
  Row 1:       34      122      142       54 
  Row 2:       42       84       42        0 
  Row 3:       52      104       52        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │ 115 │ 134 │  51 │
├─────┼─────┼─────┼─────┤
│  34 │ 122 │ 142 │  54 │
├─────┼─────┼─────┼─────┤
│  42 │  84 │  42 │   0 │
├─────┼─────┼─────┼─────┤
│  52 │ 104 │  52 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       32      115      134       51 
Row 1:       34      122      142       54 
Row 2:       42       84       42        0 
Row 3:       52      104       52        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 32 -> clamp(32) -> final(160)
  PE[0][1]: 115 -> clamp(115) -> final(243)
  PE[0][2]: 134 -> clamp(127) -> final(255)
  PE[0][3]: 51 -> clamp(51) -> final(179)
  PE[1][0]: 34 -> clamp(34) -> final(162)
  PE[1][1]: 122 -> clamp(122) -> final(250)
  PE[1][2]: 142 -> clamp(127) -> final(255)
  PE[1][3]: 54 -> clamp(54) -> final(182)
  PE[2][0]: 42 -> clamp(42) -> final(170)
  PE[2][1]: 84 -> clamp(84) -> final(212)
  PE[2][2]: 42 -> clamp(42) -> final(170)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 52 -> clamp(52) -> final(180)
  PE[3][1]: 104 -> clamp(104) -> final(232)
  PE[3][2]: 52 -> clamp(52) -> final(180)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   160    243    255    179 
   162    250    255    182 
   170    212    170    128 
   180    232    180    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
  -2  -22  -53  -81 
  62   59   41   21 
  61   66   64   59 
  57   55   51   50 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -2
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-2 * weight=-2 = 4, partial_in=0 -> result=4
  PE[0][1]: input=-2 * weight=-1 = 2, partial_in=0 -> result=2
  PE[0][2]: input=-2 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-2 * weight=1 = -2, partial_in=0 -> result=-2
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:        4        2        0       -2 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│   4 │   2 │   0 │  -2 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -22
  Row 1: input_block[1][0] = 62
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-22 * weight=-2 = 44, partial_in=0 -> result=44
  PE[0][1]: input=-22 * weight=-1 = 22, partial_in=0 -> result=22
  PE[0][2]: input=-22 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-22 * weight=1 = -22, partial_in=0 -> result=-22
  PE[1][0]: input=62 * weight=-1 = -62, partial_in=0 -> result=-62
  PE[1][1]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[1][2]: input=62 * weight=1 = 62, partial_in=0 -> result=62
  PE[1][3]: input=62 * weight=2 = 124, partial_in=0 -> result=124
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       44       22        0      -22 
  Row 1:      -62       62       62      124 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │  22 │   0 │ -22 │
├─────┼─────┼─────┼─────┤
│ -62 │  62 │  62 │ 124 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -53
  Row 1: input_block[1][1] = 59
  Row 2: input_block[2][0] = 61
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -62 (from PE[1][0])
  PE[0][1]: partial_in = 62 (from PE[1][1])
  PE[0][2]: partial_in = 62 (from PE[1][2])
  PE[0][3]: partial_in = 124 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-53 * weight=-2 = 106, partial_in=-62 -> result=44
  PE[0][1]: input=-53 * weight=-1 = 53, partial_in=62 -> result=115
  PE[0][2]: input=-53 * weight=0 = 0, partial_in=62 -> result=62
  PE[0][3]: input=-53 * weight=1 = -53, partial_in=124 -> result=71
  PE[1][0]: input=59 * weight=-1 = -59, partial_in=0 -> result=-59
  PE[1][1]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[1][2]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[1][3]: input=59 * weight=2 = 118, partial_in=0 -> result=118
  PE[2][0]: input=61 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[2][2]: input=61 * weight=2 = 122, partial_in=0 -> result=122
  PE[2][3]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       44      115       62       71 
  Row 1:      -59       59       59      118 
  Row 2:        0       61      122       61 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  44 │ 115 │  62 │  71 │
├─────┼─────┼─────┼─────┤
│ -59 │  59 │  59 │ 118 │
├─────┼─────┼─────┼─────┤
│   0 │  61 │ 122 │  61 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -81
  Row 1: input_block[1][2] = 41
  Row 2: input_block[2][1] = 66
  Row 3: input_block[3][0] = 57

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -59 (from PE[1][0])
  PE[0][1]: partial_in = 59 (from PE[1][1])
  PE[0][2]: partial_in = 59 (from PE[1][2])
  PE[0][3]: partial_in = 118 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 61 (from PE[2][1])
  PE[1][2]: partial_in = 122 (from PE[2][2])
  PE[1][3]: partial_in = 61 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-81 * weight=-2 = 162, partial_in=-59 -> result=103
  PE[0][1]: input=-81 * weight=-1 = 81, partial_in=59 -> result=140
  PE[0][2]: input=-81 * weight=0 = 0, partial_in=59 -> result=59
  PE[0][3]: input=-81 * weight=1 = -81, partial_in=118 -> result=37
  PE[1][0]: input=41 * weight=-1 = -41, partial_in=0 -> result=-41
  PE[1][1]: input=41 * weight=1 = 41, partial_in=61 -> result=102
  PE[1][2]: input=41 * weight=1 = 41, partial_in=122 -> result=163
  PE[1][3]: input=41 * weight=2 = 82, partial_in=61 -> result=143
  PE[2][0]: input=66 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=66 * weight=1 = 66, partial_in=0 -> result=66
  PE[2][2]: input=66 * weight=2 = 132, partial_in=0 -> result=132
  PE[2][3]: input=66 * weight=1 = 66, partial_in=0 -> result=66
  PE[3][0]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[3][1]: input=57 * weight=2 = 114, partial_in=0 -> result=114
  PE[3][2]: input=57 * weight=1 = 57, partial_in=0 -> result=57
  PE[3][3]: input=57 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      103      140       59       37 
  Row 1:      -41      102      163      143 
  Row 2:        0       66      132       66 
  Row 3:       57      114       57        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 103 │ 140 │  59 │  37 │
├─────┼─────┼─────┼─────┤
│ -41 │ 102 │ 163 │ 143 │
├─────┼─────┼─────┼─────┤
│   0 │  66 │ 132 │  66 │
├─────┼─────┼─────┼─────┤
│  57 │ 114 │  57 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 21
  Row 2: input_block[2][2] = 64
  Row 3: input_block[3][1] = 55

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -41 (from PE[1][0])
  PE[0][1]: partial_in = 102 (from PE[1][1])
  PE[0][2]: partial_in = 163 (from PE[1][2])
  PE[0][3]: partial_in = 143 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 66 (from PE[2][1])
  PE[1][2]: partial_in = 132 (from PE[2][2])
  PE[1][3]: partial_in = 66 (from PE[2][3])
  PE[2][0]: partial_in = 57 (from PE[3][0])
  PE[2][1]: partial_in = 114 (from PE[3][1])
  PE[2][2]: partial_in = 57 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-41 -> result=-41
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=102 -> result=102
  PE[0][2]: input=0 * weight=0 = 0, partial_in=163 -> result=163
  PE[0][3]: input=0 * weight=1 = 0, partial_in=143 -> result=143
  PE[1][0]: input=21 * weight=-1 = -21, partial_in=0 -> result=-21
  PE[1][1]: input=21 * weight=1 = 21, partial_in=66 -> result=87
  PE[1][2]: input=21 * weight=1 = 21, partial_in=132 -> result=153
  PE[1][3]: input=21 * weight=2 = 42, partial_in=66 -> result=108
  PE[2][0]: input=64 * weight=0 = 0, partial_in=57 -> result=57
  PE[2][1]: input=64 * weight=1 = 64, partial_in=114 -> result=178
  PE[2][2]: input=64 * weight=2 = 128, partial_in=57 -> result=185
  PE[2][3]: input=64 * weight=1 = 64, partial_in=0 -> result=64
  PE[3][0]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][1]: input=55 * weight=2 = 110, partial_in=0 -> result=110
  PE[3][2]: input=55 * weight=1 = 55, partial_in=0 -> result=55
  PE[3][3]: input=55 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      -41      102      163      143 
  Row 1:      -21       87      153      108 
  Row 2:       57      178      185       64 
  Row 3:       55      110       55        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -41 │ 102 │ 163 │ 143 │
├─────┼─────┼─────┼─────┤
│ -21 │  87 │ 153 │ 108 │
├─────┼─────┼─────┼─────┤
│  57 │ 178 │ 185 │  64 │
├─────┼─────┼─────┼─────┤
│  55 │ 110 │  55 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 59
  Row 3: input_block[3][2] = 51

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -21 (from PE[1][0])
  PE[0][1]: partial_in = 87 (from PE[1][1])
  PE[0][2]: partial_in = 153 (from PE[1][2])
  PE[0][3]: partial_in = 108 (from PE[1][3])
  PE[1][0]: partial_in = 57 (from PE[2][0])
  PE[1][1]: partial_in = 178 (from PE[2][1])
  PE[1][2]: partial_in = 185 (from PE[2][2])
  PE[1][3]: partial_in = 64 (from PE[2][3])
  PE[2][0]: partial_in = 55 (from PE[3][0])
  PE[2][1]: partial_in = 110 (from PE[3][1])
  PE[2][2]: partial_in = 55 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-21 -> result=-21
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=87 -> result=87
  PE[0][2]: input=0 * weight=0 = 0, partial_in=153 -> result=153
  PE[0][3]: input=0 * weight=1 = 0, partial_in=108 -> result=108
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=57 -> result=57
  PE[1][1]: input=0 * weight=1 = 0, partial_in=178 -> result=178
  PE[1][2]: input=0 * weight=1 = 0, partial_in=185 -> result=185
  PE[1][3]: input=0 * weight=2 = 0, partial_in=64 -> result=64
  PE[2][0]: input=59 * weight=0 = 0, partial_in=55 -> result=55
  PE[2][1]: input=59 * weight=1 = 59, partial_in=110 -> result=169
  PE[2][2]: input=59 * weight=2 = 118, partial_in=55 -> result=173
  PE[2][3]: input=59 * weight=1 = 59, partial_in=0 -> result=59
  PE[3][0]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][1]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[3][2]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][3]: input=51 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      -21       87      153      108 
  Row 1:       57      178      185       64 
  Row 2:       55      169      173       59 
  Row 3:       51      102       51        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -21 │  87 │ 153 │ 108 │
├─────┼─────┼─────┼─────┤
│  57 │ 178 │ 185 │  64 │
├─────┼─────┼─────┼─────┤
│  55 │ 169 │ 173 │  59 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 57 (from PE[1][0])
  PE[0][1]: partial_in = 178 (from PE[1][1])
  PE[0][2]: partial_in = 185 (from PE[1][2])
  PE[0][3]: partial_in = 64 (from PE[1][3])
  PE[1][0]: partial_in = 55 (from PE[2][0])
  PE[1][1]: partial_in = 169 (from PE[2][1])
  PE[1][2]: partial_in = 173 (from PE[2][2])
  PE[1][3]: partial_in = 59 (from PE[2][3])
  PE[2][0]: partial_in = 51 (from PE[3][0])
  PE[2][1]: partial_in = 102 (from PE[3][1])
  PE[2][2]: partial_in = 51 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=57 -> result=57
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=178 -> result=178
  PE[0][2]: input=0 * weight=0 = 0, partial_in=185 -> result=185
  PE[0][3]: input=0 * weight=1 = 0, partial_in=64 -> result=64
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=55 -> result=55
  PE[1][1]: input=0 * weight=1 = 0, partial_in=169 -> result=169
  PE[1][2]: input=0 * weight=1 = 0, partial_in=173 -> result=173
  PE[1][3]: input=0 * weight=2 = 0, partial_in=59 -> result=59
  PE[2][0]: input=0 * weight=0 = 0, partial_in=51 -> result=51
  PE[2][1]: input=0 * weight=1 = 0, partial_in=102 -> result=102
  PE[2][2]: input=0 * weight=2 = 0, partial_in=51 -> result=51
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][1]: input=50 * weight=2 = 100, partial_in=0 -> result=100
  PE[3][2]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][3]: input=50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       57      178      185       64 
  Row 1:       55      169      173       59 
  Row 2:       51      102       51        0 
  Row 3:       50      100       50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  57 │ 178 │ 185 │  64 │
├─────┼─────┼─────┼─────┤
│  55 │ 169 │ 173 │  59 │
├─────┼─────┼─────┼─────┤
│  51 │ 102 │  51 │   0 │
├─────┼─────┼─────┼─────┤
│  50 │ 100 │  50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       57      178      185       64 
Row 1:       55      169      173       59 
Row 2:       51      102       51        0 
Row 3:       50      100       50        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 57 -> clamp(57) -> final(185)
  PE[0][1]: 178 -> clamp(127) -> final(255)
  PE[0][2]: 185 -> clamp(127) -> final(255)
  PE[0][3]: 64 -> clamp(64) -> final(192)
  PE[1][0]: 55 -> clamp(55) -> final(183)
  PE[1][1]: 169 -> clamp(127) -> final(255)
  PE[1][2]: 173 -> clamp(127) -> final(255)
  PE[1][3]: 59 -> clamp(59) -> final(187)
  PE[2][0]: 51 -> clamp(51) -> final(179)
  PE[2][1]: 102 -> clamp(102) -> final(230)
  PE[2][2]: 51 -> clamp(51) -> final(179)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 50 -> clamp(50) -> final(178)
  PE[3][1]: 100 -> clamp(100) -> final(228)
  PE[3][2]: 50 -> clamp(50) -> final(178)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   185    255    255    192 
   183    255    255    187 
   179    230    179    128 
   178    228    178    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -93 -110 -106  -95 
 -19  -68  -98 -100 
  51    2  -36  -49 
  61   40   28   22 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -93
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-93 * weight=-2 = 186, partial_in=0 -> result=186
  PE[0][1]: input=-93 * weight=-1 = 93, partial_in=0 -> result=93
  PE[0][2]: input=-93 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-93 * weight=1 = -93, partial_in=0 -> result=-93
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      186       93        0      -93 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 186 │  93 │   0 │ -93 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -110
  Row 1: input_block[1][0] = -19
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-110 * weight=-2 = 220, partial_in=0 -> result=220
  PE[0][1]: input=-110 * weight=-1 = 110, partial_in=0 -> result=110
  PE[0][2]: input=-110 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[1][0]: input=-19 * weight=-1 = 19, partial_in=0 -> result=19
  PE[1][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][2]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[1][3]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      220      110        0     -110 
  Row 1:       19      -19      -19      -38 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 220 │ 110 │   0 │-110 │
├─────┼─────┼─────┼─────┤
│  19 │ -19 │ -19 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -106
  Row 1: input_block[1][1] = -68
  Row 2: input_block[2][0] = 51
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 19 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -19 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-106 * weight=-2 = 212, partial_in=19 -> result=231
  PE[0][1]: input=-106 * weight=-1 = 106, partial_in=-19 -> result=87
  PE[0][2]: input=-106 * weight=0 = 0, partial_in=-19 -> result=-19
  PE[0][3]: input=-106 * weight=1 = -106, partial_in=-38 -> result=-144
  PE[1][0]: input=-68 * weight=-1 = 68, partial_in=0 -> result=68
  PE[1][1]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][2]: input=-68 * weight=1 = -68, partial_in=0 -> result=-68
  PE[1][3]: input=-68 * weight=2 = -136, partial_in=0 -> result=-136
  PE[2][0]: input=51 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[2][2]: input=51 * weight=2 = 102, partial_in=0 -> result=102
  PE[2][3]: input=51 * weight=1 = 51, partial_in=0 -> result=51
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      231       87      -19     -144 
  Row 1:       68      -68      -68     -136 
  Row 2:        0       51      102       51 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 231 │  87 │ -19 │-144 │
├─────┼─────┼─────┼─────┤
│  68 │ -68 │ -68 │-136 │
├─────┼─────┼─────┼─────┤
│   0 │  51 │ 102 │  51 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -95
  Row 1: input_block[1][2] = -98
  Row 2: input_block[2][1] = 2
  Row 3: input_block[3][0] = 61

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 68 (from PE[1][0])
  PE[0][1]: partial_in = -68 (from PE[1][1])
  PE[0][2]: partial_in = -68 (from PE[1][2])
  PE[0][3]: partial_in = -136 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 51 (from PE[2][1])
  PE[1][2]: partial_in = 102 (from PE[2][2])
  PE[1][3]: partial_in = 51 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-95 * weight=-2 = 190, partial_in=68 -> result=258
  PE[0][1]: input=-95 * weight=-1 = 95, partial_in=-68 -> result=27
  PE[0][2]: input=-95 * weight=0 = 0, partial_in=-68 -> result=-68
  PE[0][3]: input=-95 * weight=1 = -95, partial_in=-136 -> result=-231
  PE[1][0]: input=-98 * weight=-1 = 98, partial_in=0 -> result=98
  PE[1][1]: input=-98 * weight=1 = -98, partial_in=51 -> result=-47
  PE[1][2]: input=-98 * weight=1 = -98, partial_in=102 -> result=4
  PE[1][3]: input=-98 * weight=2 = -196, partial_in=51 -> result=-145
  PE[2][0]: input=2 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[2][2]: input=2 * weight=2 = 4, partial_in=0 -> result=4
  PE[2][3]: input=2 * weight=1 = 2, partial_in=0 -> result=2
  PE[3][0]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][1]: input=61 * weight=2 = 122, partial_in=0 -> result=122
  PE[3][2]: input=61 * weight=1 = 61, partial_in=0 -> result=61
  PE[3][3]: input=61 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      258       27      -68     -231 
  Row 1:       98      -47        4     -145 
  Row 2:        0        2        4        2 
  Row 3:       61      122       61        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 258 │  27 │ -68 │-231 │
├─────┼─────┼─────┼─────┤
│  98 │ -47 │   4 │-145 │
├─────┼─────┼─────┼─────┤
│   0 │   2 │   4 │   2 │
├─────┼─────┼─────┼─────┤
│  61 │ 122 │  61 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -100
  Row 2: input_block[2][2] = -36
  Row 3: input_block[3][1] = 40

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 98 (from PE[1][0])
  PE[0][1]: partial_in = -47 (from PE[1][1])
  PE[0][2]: partial_in = 4 (from PE[1][2])
  PE[0][3]: partial_in = -145 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 2 (from PE[2][1])
  PE[1][2]: partial_in = 4 (from PE[2][2])
  PE[1][3]: partial_in = 2 (from PE[2][3])
  PE[2][0]: partial_in = 61 (from PE[3][0])
  PE[2][1]: partial_in = 122 (from PE[3][1])
  PE[2][2]: partial_in = 61 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=98 -> result=98
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-47 -> result=-47
  PE[0][2]: input=0 * weight=0 = 0, partial_in=4 -> result=4
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-145 -> result=-145
  PE[1][0]: input=-100 * weight=-1 = 100, partial_in=0 -> result=100
  PE[1][1]: input=-100 * weight=1 = -100, partial_in=2 -> result=-98
  PE[1][2]: input=-100 * weight=1 = -100, partial_in=4 -> result=-96
  PE[1][3]: input=-100 * weight=2 = -200, partial_in=2 -> result=-198
  PE[2][0]: input=-36 * weight=0 = 0, partial_in=61 -> result=61
  PE[2][1]: input=-36 * weight=1 = -36, partial_in=122 -> result=86
  PE[2][2]: input=-36 * weight=2 = -72, partial_in=61 -> result=-11
  PE[2][3]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][0]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][1]: input=40 * weight=2 = 80, partial_in=0 -> result=80
  PE[3][2]: input=40 * weight=1 = 40, partial_in=0 -> result=40
  PE[3][3]: input=40 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       98      -47        4     -145 
  Row 1:      100      -98      -96     -198 
  Row 2:       61       86      -11      -36 
  Row 3:       40       80       40        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  98 │ -47 │   4 │-145 │
├─────┼─────┼─────┼─────┤
│ 100 │ -98 │ -96 │-198 │
├─────┼─────┼─────┼─────┤
│  61 │  86 │ -11 │ -36 │
├─────┼─────┼─────┼─────┤
│  40 │  80 │  40 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -49
  Row 3: input_block[3][2] = 28

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 100 (from PE[1][0])
  PE[0][1]: partial_in = -98 (from PE[1][1])
  PE[0][2]: partial_in = -96 (from PE[1][2])
  PE[0][3]: partial_in = -198 (from PE[1][3])
  PE[1][0]: partial_in = 61 (from PE[2][0])
  PE[1][1]: partial_in = 86 (from PE[2][1])
  PE[1][2]: partial_in = -11 (from PE[2][2])
  PE[1][3]: partial_in = -36 (from PE[2][3])
  PE[2][0]: partial_in = 40 (from PE[3][0])
  PE[2][1]: partial_in = 80 (from PE[3][1])
  PE[2][2]: partial_in = 40 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=100 -> result=100
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-98 -> result=-98
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-96 -> result=-96
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-198 -> result=-198
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=61 -> result=61
  PE[1][1]: input=0 * weight=1 = 0, partial_in=86 -> result=86
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-11 -> result=-11
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-36 -> result=-36
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=40 -> result=40
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=80 -> result=31
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=40 -> result=-58
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][1]: input=28 * weight=2 = 56, partial_in=0 -> result=56
  PE[3][2]: input=28 * weight=1 = 28, partial_in=0 -> result=28
  PE[3][3]: input=28 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      100      -98      -96     -198 
  Row 1:       61       86      -11      -36 
  Row 2:       40       31      -58      -49 
  Row 3:       28       56       28        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 100 │ -98 │ -96 │-198 │
├─────┼─────┼─────┼─────┤
│  61 │  86 │ -11 │ -36 │
├─────┼─────┼─────┼─────┤
│  40 │  31 │ -58 │ -49 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 22

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 61 (from PE[1][0])
  PE[0][1]: partial_in = 86 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -36 (from PE[1][3])
  PE[1][0]: partial_in = 40 (from PE[2][0])
  PE[1][1]: partial_in = 31 (from PE[2][1])
  PE[1][2]: partial_in = -58 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = 28 (from PE[3][0])
  PE[2][1]: partial_in = 56 (from PE[3][1])
  PE[2][2]: partial_in = 28 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=61 -> result=61
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=86 -> result=86
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-36 -> result=-36
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=40 -> result=40
  PE[1][1]: input=0 * weight=1 = 0, partial_in=31 -> result=31
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][0]: input=0 * weight=0 = 0, partial_in=28 -> result=28
  PE[2][1]: input=0 * weight=1 = 0, partial_in=56 -> result=56
  PE[2][2]: input=0 * weight=2 = 0, partial_in=28 -> result=28
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][1]: input=22 * weight=2 = 44, partial_in=0 -> result=44
  PE[3][2]: input=22 * weight=1 = 22, partial_in=0 -> result=22
  PE[3][3]: input=22 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       61       86      -11      -36 
  Row 1:       40       31      -58      -49 
  Row 2:       28       56       28        0 
  Row 3:       22       44       22        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  61 │  86 │ -11 │ -36 │
├─────┼─────┼─────┼─────┤
│  40 │  31 │ -58 │ -49 │
├─────┼─────┼─────┼─────┤
│  28 │  56 │  28 │   0 │
├─────┼─────┼─────┼─────┤
│  22 │  44 │  22 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       61       86      -11      -36 
Row 1:       40       31      -58      -49 
Row 2:       28       56       28        0 
Row 3:       22       44       22        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 61 -> clamp(61) -> final(189)
  PE[0][1]: 86 -> clamp(86) -> final(214)
  PE[0][2]: -11 -> clamp(-11) -> final(117)
  PE[0][3]: -36 -> clamp(-36) -> final(92)
  PE[1][0]: 40 -> clamp(40) -> final(168)
  PE[1][1]: 31 -> clamp(31) -> final(159)
  PE[1][2]: -58 -> clamp(-58) -> final(70)
  PE[1][3]: -49 -> clamp(-49) -> final(79)
  PE[2][0]: 28 -> clamp(28) -> final(156)
  PE[2][1]: 56 -> clamp(56) -> final(184)
  PE[2][2]: 28 -> clamp(28) -> final(156)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 22 -> clamp(22) -> final(150)
  PE[3][1]: 44 -> clamp(44) -> final(172)
  PE[3][2]: 22 -> clamp(22) -> final(150)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   189    214    117     92 
   168    159     70     79 
   156    184    156    128 
   150    172    150    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -88  -65  -64  -97 
 -90  -67  -58  -75 
 -58  -58  -46  -37 
  -6  -43  -49  -32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -88
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-88 * weight=-2 = 176, partial_in=0 -> result=176
  PE[0][1]: input=-88 * weight=-1 = 88, partial_in=0 -> result=88
  PE[0][2]: input=-88 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-88 * weight=1 = -88, partial_in=0 -> result=-88
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      176       88        0      -88 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 176 │  88 │   0 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -65
  Row 1: input_block[1][0] = -90
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-65 * weight=-2 = 130, partial_in=0 -> result=130
  PE[0][1]: input=-65 * weight=-1 = 65, partial_in=0 -> result=65
  PE[0][2]: input=-65 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-65 * weight=1 = -65, partial_in=0 -> result=-65
  PE[1][0]: input=-90 * weight=-1 = 90, partial_in=0 -> result=90
  PE[1][1]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[1][2]: input=-90 * weight=1 = -90, partial_in=0 -> result=-90
  PE[1][3]: input=-90 * weight=2 = -180, partial_in=0 -> result=-180
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      130       65        0      -65 
  Row 1:       90      -90      -90     -180 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 130 │  65 │   0 │ -65 │
├─────┼─────┼─────┼─────┤
│  90 │ -90 │ -90 │-180 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -64
  Row 1: input_block[1][1] = -67
  Row 2: input_block[2][0] = -58
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 90 (from PE[1][0])
  PE[0][1]: partial_in = -90 (from PE[1][1])
  PE[0][2]: partial_in = -90 (from PE[1][2])
  PE[0][3]: partial_in = -180 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-64 * weight=-2 = 128, partial_in=90 -> result=218
  PE[0][1]: input=-64 * weight=-1 = 64, partial_in=-90 -> result=-26
  PE[0][2]: input=-64 * weight=0 = 0, partial_in=-90 -> result=-90
  PE[0][3]: input=-64 * weight=1 = -64, partial_in=-180 -> result=-244
  PE[1][0]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[1][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][3]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][0]: input=-58 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[2][2]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[2][3]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      218      -26      -90     -244 
  Row 1:       67      -67      -67     -134 
  Row 2:        0      -58     -116      -58 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 218 │ -26 │ -90 │-244 │
├─────┼─────┼─────┼─────┤
│  67 │ -67 │ -67 │-134 │
├─────┼─────┼─────┼─────┤
│   0 │ -58 │-116 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -97
  Row 1: input_block[1][2] = -58
  Row 2: input_block[2][1] = -58
  Row 3: input_block[3][0] = -6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 67 (from PE[1][0])
  PE[0][1]: partial_in = -67 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -134 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -116 (from PE[2][2])
  PE[1][3]: partial_in = -58 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-97 * weight=-2 = 194, partial_in=67 -> result=261
  PE[0][1]: input=-97 * weight=-1 = 97, partial_in=-67 -> result=30
  PE[0][2]: input=-97 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=-97 * weight=1 = -97, partial_in=-134 -> result=-231
  PE[1][0]: input=-58 * weight=-1 = 58, partial_in=0 -> result=58
  PE[1][1]: input=-58 * weight=1 = -58, partial_in=-58 -> result=-116
  PE[1][2]: input=-58 * weight=1 = -58, partial_in=-116 -> result=-174
  PE[1][3]: input=-58 * weight=2 = -116, partial_in=-58 -> result=-174
  PE[2][0]: input=-58 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[2][2]: input=-58 * weight=2 = -116, partial_in=0 -> result=-116
  PE[2][3]: input=-58 * weight=1 = -58, partial_in=0 -> result=-58
  PE[3][0]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][1]: input=-6 * weight=2 = -12, partial_in=0 -> result=-12
  PE[3][2]: input=-6 * weight=1 = -6, partial_in=0 -> result=-6
  PE[3][3]: input=-6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      261       30      -67     -231 
  Row 1:       58     -116     -174     -174 
  Row 2:        0      -58     -116      -58 
  Row 3:       -6      -12       -6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 261 │  30 │ -67 │-231 │
├─────┼─────┼─────┼─────┤
│  58 │-116 │-174 │-174 │
├─────┼─────┼─────┼─────┤
│   0 │ -58 │-116 │ -58 │
├─────┼─────┼─────┼─────┤
│  -6 │ -12 │  -6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -75
  Row 2: input_block[2][2] = -46
  Row 3: input_block[3][1] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 58 (from PE[1][0])
  PE[0][1]: partial_in = -116 (from PE[1][1])
  PE[0][2]: partial_in = -174 (from PE[1][2])
  PE[0][3]: partial_in = -174 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -116 (from PE[2][2])
  PE[1][3]: partial_in = -58 (from PE[2][3])
  PE[2][0]: partial_in = -6 (from PE[3][0])
  PE[2][1]: partial_in = -12 (from PE[3][1])
  PE[2][2]: partial_in = -6 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=58 -> result=58
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-116 -> result=-116
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-174 -> result=-174
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-174 -> result=-174
  PE[1][0]: input=-75 * weight=-1 = 75, partial_in=0 -> result=75
  PE[1][1]: input=-75 * weight=1 = -75, partial_in=-58 -> result=-133
  PE[1][2]: input=-75 * weight=1 = -75, partial_in=-116 -> result=-191
  PE[1][3]: input=-75 * weight=2 = -150, partial_in=-58 -> result=-208
  PE[2][0]: input=-46 * weight=0 = 0, partial_in=-6 -> result=-6
  PE[2][1]: input=-46 * weight=1 = -46, partial_in=-12 -> result=-58
  PE[2][2]: input=-46 * weight=2 = -92, partial_in=-6 -> result=-98
  PE[2][3]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       58     -116     -174     -174 
  Row 1:       75     -133     -191     -208 
  Row 2:       -6      -58      -98      -46 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  58 │-116 │-174 │-174 │
├─────┼─────┼─────┼─────┤
│  75 │-133 │-191 │-208 │
├─────┼─────┼─────┼─────┤
│  -6 │ -58 │ -98 │ -46 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -37
  Row 3: input_block[3][2] = -49

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 75 (from PE[1][0])
  PE[0][1]: partial_in = -133 (from PE[1][1])
  PE[0][2]: partial_in = -191 (from PE[1][2])
  PE[0][3]: partial_in = -208 (from PE[1][3])
  PE[1][0]: partial_in = -6 (from PE[2][0])
  PE[1][1]: partial_in = -58 (from PE[2][1])
  PE[1][2]: partial_in = -98 (from PE[2][2])
  PE[1][3]: partial_in = -46 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=75 -> result=75
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-133 -> result=-133
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-191 -> result=-191
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-208 -> result=-208
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-6 -> result=-6
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-58 -> result=-58
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-46 -> result=-46
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=-86 -> result=-123
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=-43 -> result=-117
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][1]: input=-49 * weight=2 = -98, partial_in=0 -> result=-98
  PE[3][2]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][3]: input=-49 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       75     -133     -191     -208 
  Row 1:       -6      -58      -98      -46 
  Row 2:      -43     -123     -117      -37 
  Row 3:      -49      -98      -49        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  75 │-133 │-191 │-208 │
├─────┼─────┼─────┼─────┤
│  -6 │ -58 │ -98 │ -46 │
├─────┼─────┼─────┼─────┤
│ -43 │-123 │-117 │ -37 │
├─────┼─────┼─────┼─────┤
│ -49 │ -98 │ -49 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -6 (from PE[1][0])
  PE[0][1]: partial_in = -58 (from PE[1][1])
  PE[0][2]: partial_in = -98 (from PE[1][2])
  PE[0][3]: partial_in = -46 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -123 (from PE[2][1])
  PE[1][2]: partial_in = -117 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -49 (from PE[3][0])
  PE[2][1]: partial_in = -98 (from PE[3][1])
  PE[2][2]: partial_in = -49 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-6 -> result=-6
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-58 -> result=-58
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-98 -> result=-98
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-46 -> result=-46
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-123 -> result=-123
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-117 -> result=-117
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-37 -> result=-37
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-49 -> result=-49
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-98 -> result=-98
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-49 -> result=-49
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       -6      -58      -98      -46 
  Row 1:      -43     -123     -117      -37 
  Row 2:      -49      -98      -49        0 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -6 │ -58 │ -98 │ -46 │
├─────┼─────┼─────┼─────┤
│ -43 │-123 │-117 │ -37 │
├─────┼─────┼─────┼─────┤
│ -49 │ -98 │ -49 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       -6      -58      -98      -46 
Row 1:      -43     -123     -117      -37 
Row 2:      -49      -98      -49        0 
Row 3:      -32      -64      -32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -6 -> clamp(-6) -> final(122)
  PE[0][1]: -58 -> clamp(-58) -> final(70)
  PE[0][2]: -98 -> clamp(-98) -> final(30)
  PE[0][3]: -46 -> clamp(-46) -> final(82)
  PE[1][0]: -43 -> clamp(-43) -> final(85)
  PE[1][1]: -123 -> clamp(-123) -> final(5)
  PE[1][2]: -117 -> clamp(-117) -> final(11)
  PE[1][3]: -37 -> clamp(-37) -> final(91)
  PE[2][0]: -49 -> clamp(-49) -> final(79)
  PE[2][1]: -98 -> clamp(-98) -> final(30)
  PE[2][2]: -49 -> clamp(-49) -> final(79)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -32 -> clamp(-32) -> final(96)
  PE[3][1]: -64 -> clamp(-64) -> final(64)
  PE[3][2]: -32 -> clamp(-32) -> final(96)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   122     70     30     82 
    85      5     11     91 
    79     30     79    128 
    96     64     96    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-108 -114 -115 -110 
 -67  -72  -77  -84 
 -40  -39  -39  -43 
 -36  -33  -33  -39 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -108
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-108 * weight=-2 = 216, partial_in=0 -> result=216
  PE[0][1]: input=-108 * weight=-1 = 108, partial_in=0 -> result=108
  PE[0][2]: input=-108 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-108 * weight=1 = -108, partial_in=0 -> result=-108
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      216      108        0     -108 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 216 │ 108 │   0 │-108 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -114
  Row 1: input_block[1][0] = -67
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-114 * weight=-2 = 228, partial_in=0 -> result=228
  PE[0][1]: input=-114 * weight=-1 = 114, partial_in=0 -> result=114
  PE[0][2]: input=-114 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-114 * weight=1 = -114, partial_in=0 -> result=-114
  PE[1][0]: input=-67 * weight=-1 = 67, partial_in=0 -> result=67
  PE[1][1]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][2]: input=-67 * weight=1 = -67, partial_in=0 -> result=-67
  PE[1][3]: input=-67 * weight=2 = -134, partial_in=0 -> result=-134
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      228      114        0     -114 
  Row 1:       67      -67      -67     -134 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 228 │ 114 │   0 │-114 │
├─────┼─────┼─────┼─────┤
│  67 │ -67 │ -67 │-134 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -115
  Row 1: input_block[1][1] = -72
  Row 2: input_block[2][0] = -40
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 67 (from PE[1][0])
  PE[0][1]: partial_in = -67 (from PE[1][1])
  PE[0][2]: partial_in = -67 (from PE[1][2])
  PE[0][3]: partial_in = -134 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-115 * weight=-2 = 230, partial_in=67 -> result=297
  PE[0][1]: input=-115 * weight=-1 = 115, partial_in=-67 -> result=48
  PE[0][2]: input=-115 * weight=0 = 0, partial_in=-67 -> result=-67
  PE[0][3]: input=-115 * weight=1 = -115, partial_in=-134 -> result=-249
  PE[1][0]: input=-72 * weight=-1 = 72, partial_in=0 -> result=72
  PE[1][1]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][2]: input=-72 * weight=1 = -72, partial_in=0 -> result=-72
  PE[1][3]: input=-72 * weight=2 = -144, partial_in=0 -> result=-144
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=0 -> result=-80
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      297       48      -67     -249 
  Row 1:       72      -72      -72     -144 
  Row 2:        0      -40      -80      -40 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 297 │  48 │ -67 │-249 │
├─────┼─────┼─────┼─────┤
│  72 │ -72 │ -72 │-144 │
├─────┼─────┼─────┼─────┤
│   0 │ -40 │ -80 │ -40 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -110
  Row 1: input_block[1][2] = -77
  Row 2: input_block[2][1] = -39
  Row 3: input_block[3][0] = -36

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 72 (from PE[1][0])
  PE[0][1]: partial_in = -72 (from PE[1][1])
  PE[0][2]: partial_in = -72 (from PE[1][2])
  PE[0][3]: partial_in = -144 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -40 (from PE[2][1])
  PE[1][2]: partial_in = -80 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-110 * weight=-2 = 220, partial_in=72 -> result=292
  PE[0][1]: input=-110 * weight=-1 = 110, partial_in=-72 -> result=38
  PE[0][2]: input=-110 * weight=0 = 0, partial_in=-72 -> result=-72
  PE[0][3]: input=-110 * weight=1 = -110, partial_in=-144 -> result=-254
  PE[1][0]: input=-77 * weight=-1 = 77, partial_in=0 -> result=77
  PE[1][1]: input=-77 * weight=1 = -77, partial_in=-40 -> result=-117
  PE[1][2]: input=-77 * weight=1 = -77, partial_in=-80 -> result=-157
  PE[1][3]: input=-77 * weight=2 = -154, partial_in=-40 -> result=-194
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][1]: input=-36 * weight=2 = -72, partial_in=0 -> result=-72
  PE[3][2]: input=-36 * weight=1 = -36, partial_in=0 -> result=-36
  PE[3][3]: input=-36 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      292       38      -72     -254 
  Row 1:       77     -117     -157     -194 
  Row 2:        0      -39      -78      -39 
  Row 3:      -36      -72      -36        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 292 │  38 │ -72 │-254 │
├─────┼─────┼─────┼─────┤
│  77 │-117 │-157 │-194 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│ -36 │ -72 │ -36 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -84
  Row 2: input_block[2][2] = -39
  Row 3: input_block[3][1] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 77 (from PE[1][0])
  PE[0][1]: partial_in = -117 (from PE[1][1])
  PE[0][2]: partial_in = -157 (from PE[1][2])
  PE[0][3]: partial_in = -194 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -36 (from PE[3][0])
  PE[2][1]: partial_in = -72 (from PE[3][1])
  PE[2][2]: partial_in = -36 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=77 -> result=77
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-117 -> result=-117
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-157 -> result=-157
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-194 -> result=-194
  PE[1][0]: input=-84 * weight=-1 = 84, partial_in=0 -> result=84
  PE[1][1]: input=-84 * weight=1 = -84, partial_in=-39 -> result=-123
  PE[1][2]: input=-84 * weight=1 = -84, partial_in=-78 -> result=-162
  PE[1][3]: input=-84 * weight=2 = -168, partial_in=-39 -> result=-207
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=-36 -> result=-36
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=-72 -> result=-111
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=-36 -> result=-114
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       77     -117     -157     -194 
  Row 1:       84     -123     -162     -207 
  Row 2:      -36     -111     -114      -39 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  77 │-117 │-157 │-194 │
├─────┼─────┼─────┼─────┤
│  84 │-123 │-162 │-207 │
├─────┼─────┼─────┼─────┤
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -43
  Row 3: input_block[3][2] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 84 (from PE[1][0])
  PE[0][1]: partial_in = -123 (from PE[1][1])
  PE[0][2]: partial_in = -162 (from PE[1][2])
  PE[0][3]: partial_in = -207 (from PE[1][3])
  PE[1][0]: partial_in = -36 (from PE[2][0])
  PE[1][1]: partial_in = -111 (from PE[2][1])
  PE[1][2]: partial_in = -114 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=84 -> result=84
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-123 -> result=-123
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-162 -> result=-162
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-207 -> result=-207
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-36 -> result=-36
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-114 -> result=-114
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-39 -> result=-39
  PE[2][0]: input=-43 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=-43 * weight=1 = -43, partial_in=-66 -> result=-109
  PE[2][2]: input=-43 * weight=2 = -86, partial_in=-33 -> result=-119
  PE[2][3]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       84     -123     -162     -207 
  Row 1:      -36     -111     -114      -39 
  Row 2:      -33     -109     -119      -43 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  84 │-123 │-162 │-207 │
├─────┼─────┼─────┼─────┤
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -33 │-109 │-119 │ -43 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -39

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -36 (from PE[1][0])
  PE[0][1]: partial_in = -111 (from PE[1][1])
  PE[0][2]: partial_in = -114 (from PE[1][2])
  PE[0][3]: partial_in = -39 (from PE[1][3])
  PE[1][0]: partial_in = -33 (from PE[2][0])
  PE[1][1]: partial_in = -109 (from PE[2][1])
  PE[1][2]: partial_in = -119 (from PE[2][2])
  PE[1][3]: partial_in = -43 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-36 -> result=-36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-111 -> result=-111
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-114 -> result=-114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-39 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-33 -> result=-33
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-109 -> result=-109
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-119 -> result=-119
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-43 -> result=-43
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][1]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[3][2]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][3]: input=-39 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -36     -111     -114      -39 
  Row 1:      -33     -109     -119      -43 
  Row 2:      -33      -66      -33        0 
  Row 3:      -39      -78      -39        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -36 │-111 │-114 │ -39 │
├─────┼─────┼─────┼─────┤
│ -33 │-109 │-119 │ -43 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
├─────┼─────┼─────┼─────┤
│ -39 │ -78 │ -39 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -36     -111     -114      -39 
Row 1:      -33     -109     -119      -43 
Row 2:      -33      -66      -33        0 
Row 3:      -39      -78      -39        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -36 -> clamp(-36) -> final(92)
  PE[0][1]: -111 -> clamp(-111) -> final(17)
  PE[0][2]: -114 -> clamp(-114) -> final(14)
  PE[0][3]: -39 -> clamp(-39) -> final(89)
  PE[1][0]: -33 -> clamp(-33) -> final(95)
  PE[1][1]: -109 -> clamp(-109) -> final(19)
  PE[1][2]: -119 -> clamp(-119) -> final(9)
  PE[1][3]: -43 -> clamp(-43) -> final(85)
  PE[2][0]: -33 -> clamp(-33) -> final(95)
  PE[2][1]: -66 -> clamp(-66) -> final(62)
  PE[2][2]: -33 -> clamp(-33) -> final(95)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -39 -> clamp(-39) -> final(89)
  PE[3][1]: -78 -> clamp(-78) -> final(50)
  PE[3][2]: -39 -> clamp(-39) -> final(89)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    92     17     14     89 
    95     19      9     85 
    95     62     95    128 
    89     50     89    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-110 -116 -119 -116 
 -95 -104 -105 -100 
 -49  -47  -32  -16 
 -45  -38  -16    6 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -110
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-110 * weight=-2 = 220, partial_in=0 -> result=220
  PE[0][1]: input=-110 * weight=-1 = 110, partial_in=0 -> result=110
  PE[0][2]: input=-110 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-110 * weight=1 = -110, partial_in=0 -> result=-110
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      220      110        0     -110 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 220 │ 110 │   0 │-110 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -116
  Row 1: input_block[1][0] = -95
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-116 * weight=-2 = 232, partial_in=0 -> result=232
  PE[0][1]: input=-116 * weight=-1 = 116, partial_in=0 -> result=116
  PE[0][2]: input=-116 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-116 * weight=1 = -116, partial_in=0 -> result=-116
  PE[1][0]: input=-95 * weight=-1 = 95, partial_in=0 -> result=95
  PE[1][1]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][2]: input=-95 * weight=1 = -95, partial_in=0 -> result=-95
  PE[1][3]: input=-95 * weight=2 = -190, partial_in=0 -> result=-190
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      232      116        0     -116 
  Row 1:       95      -95      -95     -190 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 232 │ 116 │   0 │-116 │
├─────┼─────┼─────┼─────┤
│  95 │ -95 │ -95 │-190 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -119
  Row 1: input_block[1][1] = -104
  Row 2: input_block[2][0] = -49
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 95 (from PE[1][0])
  PE[0][1]: partial_in = -95 (from PE[1][1])
  PE[0][2]: partial_in = -95 (from PE[1][2])
  PE[0][3]: partial_in = -190 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-119 * weight=-2 = 238, partial_in=95 -> result=333
  PE[0][1]: input=-119 * weight=-1 = 119, partial_in=-95 -> result=24
  PE[0][2]: input=-119 * weight=0 = 0, partial_in=-95 -> result=-95
  PE[0][3]: input=-119 * weight=1 = -119, partial_in=-190 -> result=-309
  PE[1][0]: input=-104 * weight=-1 = 104, partial_in=0 -> result=104
  PE[1][1]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[1][2]: input=-104 * weight=1 = -104, partial_in=0 -> result=-104
  PE[1][3]: input=-104 * weight=2 = -208, partial_in=0 -> result=-208
  PE[2][0]: input=-49 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[2][2]: input=-49 * weight=2 = -98, partial_in=0 -> result=-98
  PE[2][3]: input=-49 * weight=1 = -49, partial_in=0 -> result=-49
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      333       24      -95     -309 
  Row 1:      104     -104     -104     -208 
  Row 2:        0      -49      -98      -49 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 333 │  24 │ -95 │-309 │
├─────┼─────┼─────┼─────┤
│ 104 │-104 │-104 │-208 │
├─────┼─────┼─────┼─────┤
│   0 │ -49 │ -98 │ -49 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -116
  Row 1: input_block[1][2] = -105
  Row 2: input_block[2][1] = -47
  Row 3: input_block[3][0] = -45

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 104 (from PE[1][0])
  PE[0][1]: partial_in = -104 (from PE[1][1])
  PE[0][2]: partial_in = -104 (from PE[1][2])
  PE[0][3]: partial_in = -208 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -49 (from PE[2][1])
  PE[1][2]: partial_in = -98 (from PE[2][2])
  PE[1][3]: partial_in = -49 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-116 * weight=-2 = 232, partial_in=104 -> result=336
  PE[0][1]: input=-116 * weight=-1 = 116, partial_in=-104 -> result=12
  PE[0][2]: input=-116 * weight=0 = 0, partial_in=-104 -> result=-104
  PE[0][3]: input=-116 * weight=1 = -116, partial_in=-208 -> result=-324
  PE[1][0]: input=-105 * weight=-1 = 105, partial_in=0 -> result=105
  PE[1][1]: input=-105 * weight=1 = -105, partial_in=-49 -> result=-154
  PE[1][2]: input=-105 * weight=1 = -105, partial_in=-98 -> result=-203
  PE[1][3]: input=-105 * weight=2 = -210, partial_in=-49 -> result=-259
  PE[2][0]: input=-47 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[2][2]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[2][3]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][0]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][1]: input=-45 * weight=2 = -90, partial_in=0 -> result=-90
  PE[3][2]: input=-45 * weight=1 = -45, partial_in=0 -> result=-45
  PE[3][3]: input=-45 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      336       12     -104     -324 
  Row 1:      105     -154     -203     -259 
  Row 2:        0      -47      -94      -47 
  Row 3:      -45      -90      -45        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 336 │  12 │-104 │-324 │
├─────┼─────┼─────┼─────┤
│ 105 │-154 │-203 │-259 │
├─────┼─────┼─────┼─────┤
│   0 │ -47 │ -94 │ -47 │
├─────┼─────┼─────┼─────┤
│ -45 │ -90 │ -45 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -100
  Row 2: input_block[2][2] = -32
  Row 3: input_block[3][1] = -38

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 105 (from PE[1][0])
  PE[0][1]: partial_in = -154 (from PE[1][1])
  PE[0][2]: partial_in = -203 (from PE[1][2])
  PE[0][3]: partial_in = -259 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -47 (from PE[2][1])
  PE[1][2]: partial_in = -94 (from PE[2][2])
  PE[1][3]: partial_in = -47 (from PE[2][3])
  PE[2][0]: partial_in = -45 (from PE[3][0])
  PE[2][1]: partial_in = -90 (from PE[3][1])
  PE[2][2]: partial_in = -45 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=105 -> result=105
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-154 -> result=-154
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-203 -> result=-203
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-259 -> result=-259
  PE[1][0]: input=-100 * weight=-1 = 100, partial_in=0 -> result=100
  PE[1][1]: input=-100 * weight=1 = -100, partial_in=-47 -> result=-147
  PE[1][2]: input=-100 * weight=1 = -100, partial_in=-94 -> result=-194
  PE[1][3]: input=-100 * weight=2 = -200, partial_in=-47 -> result=-247
  PE[2][0]: input=-32 * weight=0 = 0, partial_in=-45 -> result=-45
  PE[2][1]: input=-32 * weight=1 = -32, partial_in=-90 -> result=-122
  PE[2][2]: input=-32 * weight=2 = -64, partial_in=-45 -> result=-109
  PE[2][3]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][0]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][1]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[3][2]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][3]: input=-38 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:      105     -154     -203     -259 
  Row 1:      100     -147     -194     -247 
  Row 2:      -45     -122     -109      -32 
  Row 3:      -38      -76      -38        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 105 │-154 │-203 │-259 │
├─────┼─────┼─────┼─────┤
│ 100 │-147 │-194 │-247 │
├─────┼─────┼─────┼─────┤
│ -45 │-122 │-109 │ -32 │
├─────┼─────┼─────┼─────┤
│ -38 │ -76 │ -38 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -16
  Row 3: input_block[3][2] = -16

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 100 (from PE[1][0])
  PE[0][1]: partial_in = -147 (from PE[1][1])
  PE[0][2]: partial_in = -194 (from PE[1][2])
  PE[0][3]: partial_in = -247 (from PE[1][3])
  PE[1][0]: partial_in = -45 (from PE[2][0])
  PE[1][1]: partial_in = -122 (from PE[2][1])
  PE[1][2]: partial_in = -109 (from PE[2][2])
  PE[1][3]: partial_in = -32 (from PE[2][3])
  PE[2][0]: partial_in = -38 (from PE[3][0])
  PE[2][1]: partial_in = -76 (from PE[3][1])
  PE[2][2]: partial_in = -38 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=100 -> result=100
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-147 -> result=-147
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-194 -> result=-194
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-247 -> result=-247
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-45 -> result=-45
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-122 -> result=-122
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-109 -> result=-109
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-32 -> result=-32
  PE[2][0]: input=-16 * weight=0 = 0, partial_in=-38 -> result=-38
  PE[2][1]: input=-16 * weight=1 = -16, partial_in=-76 -> result=-92
  PE[2][2]: input=-16 * weight=2 = -32, partial_in=-38 -> result=-70
  PE[2][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][0]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][1]: input=-16 * weight=2 = -32, partial_in=0 -> result=-32
  PE[3][2]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[3][3]: input=-16 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:      100     -147     -194     -247 
  Row 1:      -45     -122     -109      -32 
  Row 2:      -38      -92      -70      -16 
  Row 3:      -16      -32      -16        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 100 │-147 │-194 │-247 │
├─────┼─────┼─────┼─────┤
│ -45 │-122 │-109 │ -32 │
├─────┼─────┼─────┼─────┤
│ -38 │ -92 │ -70 │ -16 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 6

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -45 (from PE[1][0])
  PE[0][1]: partial_in = -122 (from PE[1][1])
  PE[0][2]: partial_in = -109 (from PE[1][2])
  PE[0][3]: partial_in = -32 (from PE[1][3])
  PE[1][0]: partial_in = -38 (from PE[2][0])
  PE[1][1]: partial_in = -92 (from PE[2][1])
  PE[1][2]: partial_in = -70 (from PE[2][2])
  PE[1][3]: partial_in = -16 (from PE[2][3])
  PE[2][0]: partial_in = -16 (from PE[3][0])
  PE[2][1]: partial_in = -32 (from PE[3][1])
  PE[2][2]: partial_in = -16 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-45 -> result=-45
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-122 -> result=-122
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-109 -> result=-109
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-38 -> result=-38
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-92 -> result=-92
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-70 -> result=-70
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-16 -> result=-16
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-32 -> result=-32
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-16 -> result=-16
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][1]: input=6 * weight=2 = 12, partial_in=0 -> result=12
  PE[3][2]: input=6 * weight=1 = 6, partial_in=0 -> result=6
  PE[3][3]: input=6 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -45     -122     -109      -32 
  Row 1:      -38      -92      -70      -16 
  Row 2:      -16      -32      -16        0 
  Row 3:        6       12        6        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -45 │-122 │-109 │ -32 │
├─────┼─────┼─────┼─────┤
│ -38 │ -92 │ -70 │ -16 │
├─────┼─────┼─────┼─────┤
│ -16 │ -32 │ -16 │   0 │
├─────┼─────┼─────┼─────┤
│   6 │  12 │   6 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -45     -122     -109      -32 
Row 1:      -38      -92      -70      -16 
Row 2:      -16      -32      -16        0 
Row 3:        6       12        6        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -45 -> clamp(-45) -> final(83)
  PE[0][1]: -122 -> clamp(-122) -> final(6)
  PE[0][2]: -109 -> clamp(-109) -> final(19)
  PE[0][3]: -32 -> clamp(-32) -> final(96)
  PE[1][0]: -38 -> clamp(-38) -> final(90)
  PE[1][1]: -92 -> clamp(-92) -> final(36)
  PE[1][2]: -70 -> clamp(-70) -> final(58)
  PE[1][3]: -16 -> clamp(-16) -> final(112)
  PE[2][0]: -16 -> clamp(-16) -> final(112)
  PE[2][1]: -32 -> clamp(-32) -> final(96)
  PE[2][2]: -16 -> clamp(-16) -> final(112)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 6 -> clamp(6) -> final(134)
  PE[3][1]: 12 -> clamp(12) -> final(140)
  PE[3][2]: 6 -> clamp(6) -> final(134)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    83      6     19     96 
    90     36     58    112 
   112     96    112    128 
   134    140    134    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
-119 -103  -87  -67 
 -83  -60  -36  -31 
   8  -19  -40  -46 
  31   -4  -33  -47 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -119
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-119 * weight=-2 = 238, partial_in=0 -> result=238
  PE[0][1]: input=-119 * weight=-1 = 119, partial_in=0 -> result=119
  PE[0][2]: input=-119 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-119 * weight=1 = -119, partial_in=0 -> result=-119
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:      238      119        0     -119 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 238 │ 119 │   0 │-119 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -103
  Row 1: input_block[1][0] = -83
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-103 * weight=-2 = 206, partial_in=0 -> result=206
  PE[0][1]: input=-103 * weight=-1 = 103, partial_in=0 -> result=103
  PE[0][2]: input=-103 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-103 * weight=1 = -103, partial_in=0 -> result=-103
  PE[1][0]: input=-83 * weight=-1 = 83, partial_in=0 -> result=83
  PE[1][1]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[1][2]: input=-83 * weight=1 = -83, partial_in=0 -> result=-83
  PE[1][3]: input=-83 * weight=2 = -166, partial_in=0 -> result=-166
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:      206      103        0     -103 
  Row 1:       83      -83      -83     -166 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 206 │ 103 │   0 │-103 │
├─────┼─────┼─────┼─────┤
│  83 │ -83 │ -83 │-166 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -87
  Row 1: input_block[1][1] = -60
  Row 2: input_block[2][0] = 8
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 83 (from PE[1][0])
  PE[0][1]: partial_in = -83 (from PE[1][1])
  PE[0][2]: partial_in = -83 (from PE[1][2])
  PE[0][3]: partial_in = -166 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-87 * weight=-2 = 174, partial_in=83 -> result=257
  PE[0][1]: input=-87 * weight=-1 = 87, partial_in=-83 -> result=4
  PE[0][2]: input=-87 * weight=0 = 0, partial_in=-83 -> result=-83
  PE[0][3]: input=-87 * weight=1 = -87, partial_in=-166 -> result=-253
  PE[1][0]: input=-60 * weight=-1 = 60, partial_in=0 -> result=60
  PE[1][1]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][2]: input=-60 * weight=1 = -60, partial_in=0 -> result=-60
  PE[1][3]: input=-60 * weight=2 = -120, partial_in=0 -> result=-120
  PE[2][0]: input=8 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[2][2]: input=8 * weight=2 = 16, partial_in=0 -> result=16
  PE[2][3]: input=8 * weight=1 = 8, partial_in=0 -> result=8
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:      257        4      -83     -253 
  Row 1:       60      -60      -60     -120 
  Row 2:        0        8       16        8 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 257 │   4 │ -83 │-253 │
├─────┼─────┼─────┼─────┤
│  60 │ -60 │ -60 │-120 │
├─────┼─────┼─────┼─────┤
│   0 │   8 │  16 │   8 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -67
  Row 1: input_block[1][2] = -36
  Row 2: input_block[2][1] = -19
  Row 3: input_block[3][0] = 31

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 60 (from PE[1][0])
  PE[0][1]: partial_in = -60 (from PE[1][1])
  PE[0][2]: partial_in = -60 (from PE[1][2])
  PE[0][3]: partial_in = -120 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 8 (from PE[2][1])
  PE[1][2]: partial_in = 16 (from PE[2][2])
  PE[1][3]: partial_in = 8 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-67 * weight=-2 = 134, partial_in=60 -> result=194
  PE[0][1]: input=-67 * weight=-1 = 67, partial_in=-60 -> result=7
  PE[0][2]: input=-67 * weight=0 = 0, partial_in=-60 -> result=-60
  PE[0][3]: input=-67 * weight=1 = -67, partial_in=-120 -> result=-187
  PE[1][0]: input=-36 * weight=-1 = 36, partial_in=0 -> result=36
  PE[1][1]: input=-36 * weight=1 = -36, partial_in=8 -> result=-28
  PE[1][2]: input=-36 * weight=1 = -36, partial_in=16 -> result=-20
  PE[1][3]: input=-36 * weight=2 = -72, partial_in=8 -> result=-64
  PE[2][0]: input=-19 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[2][2]: input=-19 * weight=2 = -38, partial_in=0 -> result=-38
  PE[2][3]: input=-19 * weight=1 = -19, partial_in=0 -> result=-19
  PE[3][0]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][1]: input=31 * weight=2 = 62, partial_in=0 -> result=62
  PE[3][2]: input=31 * weight=1 = 31, partial_in=0 -> result=31
  PE[3][3]: input=31 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      194        7      -60     -187 
  Row 1:       36      -28      -20      -64 
  Row 2:        0      -19      -38      -19 
  Row 3:       31       62       31        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 194 │   7 │ -60 │-187 │
├─────┼─────┼─────┼─────┤
│  36 │ -28 │ -20 │ -64 │
├─────┼─────┼─────┼─────┤
│   0 │ -19 │ -38 │ -19 │
├─────┼─────┼─────┼─────┤
│  31 │  62 │  31 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -31
  Row 2: input_block[2][2] = -40
  Row 3: input_block[3][1] = -4

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 36 (from PE[1][0])
  PE[0][1]: partial_in = -28 (from PE[1][1])
  PE[0][2]: partial_in = -20 (from PE[1][2])
  PE[0][3]: partial_in = -64 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -19 (from PE[2][1])
  PE[1][2]: partial_in = -38 (from PE[2][2])
  PE[1][3]: partial_in = -19 (from PE[2][3])
  PE[2][0]: partial_in = 31 (from PE[3][0])
  PE[2][1]: partial_in = 62 (from PE[3][1])
  PE[2][2]: partial_in = 31 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=36 -> result=36
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-28 -> result=-28
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-20 -> result=-20
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-64 -> result=-64
  PE[1][0]: input=-31 * weight=-1 = 31, partial_in=0 -> result=31
  PE[1][1]: input=-31 * weight=1 = -31, partial_in=-19 -> result=-50
  PE[1][2]: input=-31 * weight=1 = -31, partial_in=-38 -> result=-69
  PE[1][3]: input=-31 * weight=2 = -62, partial_in=-19 -> result=-81
  PE[2][0]: input=-40 * weight=0 = 0, partial_in=31 -> result=31
  PE[2][1]: input=-40 * weight=1 = -40, partial_in=62 -> result=22
  PE[2][2]: input=-40 * weight=2 = -80, partial_in=31 -> result=-49
  PE[2][3]: input=-40 * weight=1 = -40, partial_in=0 -> result=-40
  PE[3][0]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][1]: input=-4 * weight=2 = -8, partial_in=0 -> result=-8
  PE[3][2]: input=-4 * weight=1 = -4, partial_in=0 -> result=-4
  PE[3][3]: input=-4 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       36      -28      -20      -64 
  Row 1:       31      -50      -69      -81 
  Row 2:       31       22      -49      -40 
  Row 3:       -4       -8       -4        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  36 │ -28 │ -20 │ -64 │
├─────┼─────┼─────┼─────┤
│  31 │ -50 │ -69 │ -81 │
├─────┼─────┼─────┼─────┤
│  31 │  22 │ -49 │ -40 │
├─────┼─────┼─────┼─────┤
│  -4 │  -8 │  -4 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -46
  Row 3: input_block[3][2] = -33

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = -50 (from PE[1][1])
  PE[0][2]: partial_in = -69 (from PE[1][2])
  PE[0][3]: partial_in = -81 (from PE[1][3])
  PE[1][0]: partial_in = 31 (from PE[2][0])
  PE[1][1]: partial_in = 22 (from PE[2][1])
  PE[1][2]: partial_in = -49 (from PE[2][2])
  PE[1][3]: partial_in = -40 (from PE[2][3])
  PE[2][0]: partial_in = -4 (from PE[3][0])
  PE[2][1]: partial_in = -8 (from PE[3][1])
  PE[2][2]: partial_in = -4 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-50 -> result=-50
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-69 -> result=-69
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-81 -> result=-81
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=31 -> result=31
  PE[1][1]: input=0 * weight=1 = 0, partial_in=22 -> result=22
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-49 -> result=-49
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-40 -> result=-40
  PE[2][0]: input=-46 * weight=0 = 0, partial_in=-4 -> result=-4
  PE[2][1]: input=-46 * weight=1 = -46, partial_in=-8 -> result=-54
  PE[2][2]: input=-46 * weight=2 = -92, partial_in=-4 -> result=-96
  PE[2][3]: input=-46 * weight=1 = -46, partial_in=0 -> result=-46
  PE[3][0]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][1]: input=-33 * weight=2 = -66, partial_in=0 -> result=-66
  PE[3][2]: input=-33 * weight=1 = -33, partial_in=0 -> result=-33
  PE[3][3]: input=-33 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       31      -50      -69      -81 
  Row 1:       31       22      -49      -40 
  Row 2:       -4      -54      -96      -46 
  Row 3:      -33      -66      -33        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │ -50 │ -69 │ -81 │
├─────┼─────┼─────┼─────┤
│  31 │  22 │ -49 │ -40 │
├─────┼─────┼─────┼─────┤
│  -4 │ -54 │ -96 │ -46 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -47

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 31 (from PE[1][0])
  PE[0][1]: partial_in = 22 (from PE[1][1])
  PE[0][2]: partial_in = -49 (from PE[1][2])
  PE[0][3]: partial_in = -40 (from PE[1][3])
  PE[1][0]: partial_in = -4 (from PE[2][0])
  PE[1][1]: partial_in = -54 (from PE[2][1])
  PE[1][2]: partial_in = -96 (from PE[2][2])
  PE[1][3]: partial_in = -46 (from PE[2][3])
  PE[2][0]: partial_in = -33 (from PE[3][0])
  PE[2][1]: partial_in = -66 (from PE[3][1])
  PE[2][2]: partial_in = -33 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=31 -> result=31
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=22 -> result=22
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-49 -> result=-49
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-40 -> result=-40
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-4 -> result=-4
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-54 -> result=-54
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-96 -> result=-96
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-46 -> result=-46
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-33 -> result=-33
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-66 -> result=-66
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-33 -> result=-33
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][1]: input=-47 * weight=2 = -94, partial_in=0 -> result=-94
  PE[3][2]: input=-47 * weight=1 = -47, partial_in=0 -> result=-47
  PE[3][3]: input=-47 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:       31       22      -49      -40 
  Row 1:       -4      -54      -96      -46 
  Row 2:      -33      -66      -33        0 
  Row 3:      -47      -94      -47        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  31 │  22 │ -49 │ -40 │
├─────┼─────┼─────┼─────┤
│  -4 │ -54 │ -96 │ -46 │
├─────┼─────┼─────┼─────┤
│ -33 │ -66 │ -33 │   0 │
├─────┼─────┼─────┼─────┤
│ -47 │ -94 │ -47 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:       31       22      -49      -40 
Row 1:       -4      -54      -96      -46 
Row 2:      -33      -66      -33        0 
Row 3:      -47      -94      -47        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: 31 -> clamp(31) -> final(159)
  PE[0][1]: 22 -> clamp(22) -> final(150)
  PE[0][2]: -49 -> clamp(-49) -> final(79)
  PE[0][3]: -40 -> clamp(-40) -> final(88)
  PE[1][0]: -4 -> clamp(-4) -> final(124)
  PE[1][1]: -54 -> clamp(-54) -> final(74)
  PE[1][2]: -96 -> clamp(-96) -> final(32)
  PE[1][3]: -46 -> clamp(-46) -> final(82)
  PE[2][0]: -33 -> clamp(-33) -> final(95)
  PE[2][1]: -66 -> clamp(-66) -> final(62)
  PE[2][2]: -33 -> clamp(-33) -> final(95)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -47 -> clamp(-47) -> final(81)
  PE[3][1]: -94 -> clamp(-94) -> final(34)
  PE[3][2]: -47 -> clamp(-47) -> final(81)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   159    150     79     88 
   124     74     32     82 
    95     62     95    128 
    81     34     81    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -39  -23  -23  -27 
 -43  -51  -47  -40 
 -44  -37  -35  -42 
 -53  -42  -26  -24 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -39
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-39 * weight=-2 = 78, partial_in=0 -> result=78
  PE[0][1]: input=-39 * weight=-1 = 39, partial_in=0 -> result=39
  PE[0][2]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       78       39        0      -39 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  78 │  39 │   0 │ -39 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -23
  Row 1: input_block[1][0] = -43
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=0 -> result=46
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=0 -> result=23
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[1][0]: input=-43 * weight=-1 = 43, partial_in=0 -> result=43
  PE[1][1]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[1][3]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       46       23        0      -23 
  Row 1:       43      -43      -43      -86 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  46 │  23 │   0 │ -23 │
├─────┼─────┼─────┼─────┤
│  43 │ -43 │ -43 │ -86 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -23
  Row 1: input_block[1][1] = -51
  Row 2: input_block[2][0] = -44
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 43 (from PE[1][0])
  PE[0][1]: partial_in = -43 (from PE[1][1])
  PE[0][2]: partial_in = -43 (from PE[1][2])
  PE[0][3]: partial_in = -86 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-23 * weight=-2 = 46, partial_in=43 -> result=89
  PE[0][1]: input=-23 * weight=-1 = 23, partial_in=-43 -> result=-20
  PE[0][2]: input=-23 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[0][3]: input=-23 * weight=1 = -23, partial_in=-86 -> result=-109
  PE[1][0]: input=-51 * weight=-1 = 51, partial_in=0 -> result=51
  PE[1][1]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][2]: input=-51 * weight=1 = -51, partial_in=0 -> result=-51
  PE[1][3]: input=-51 * weight=2 = -102, partial_in=0 -> result=-102
  PE[2][0]: input=-44 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[2][2]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][3]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       89      -20      -43     -109 
  Row 1:       51      -51      -51     -102 
  Row 2:        0      -44      -88      -44 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  89 │ -20 │ -43 │-109 │
├─────┼─────┼─────┼─────┤
│  51 │ -51 │ -51 │-102 │
├─────┼─────┼─────┼─────┤
│   0 │ -44 │ -88 │ -44 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -27
  Row 1: input_block[1][2] = -47
  Row 2: input_block[2][1] = -37
  Row 3: input_block[3][0] = -53

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 51 (from PE[1][0])
  PE[0][1]: partial_in = -51 (from PE[1][1])
  PE[0][2]: partial_in = -51 (from PE[1][2])
  PE[0][3]: partial_in = -102 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -44 (from PE[2][1])
  PE[1][2]: partial_in = -88 (from PE[2][2])
  PE[1][3]: partial_in = -44 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-27 * weight=-2 = 54, partial_in=51 -> result=105
  PE[0][1]: input=-27 * weight=-1 = 27, partial_in=-51 -> result=-24
  PE[0][2]: input=-27 * weight=0 = 0, partial_in=-51 -> result=-51
  PE[0][3]: input=-27 * weight=1 = -27, partial_in=-102 -> result=-129
  PE[1][0]: input=-47 * weight=-1 = 47, partial_in=0 -> result=47
  PE[1][1]: input=-47 * weight=1 = -47, partial_in=-44 -> result=-91
  PE[1][2]: input=-47 * weight=1 = -47, partial_in=-88 -> result=-135
  PE[1][3]: input=-47 * weight=2 = -94, partial_in=-44 -> result=-138
  PE[2][0]: input=-37 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[2][2]: input=-37 * weight=2 = -74, partial_in=0 -> result=-74
  PE[2][3]: input=-37 * weight=1 = -37, partial_in=0 -> result=-37
  PE[3][0]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][1]: input=-53 * weight=2 = -106, partial_in=0 -> result=-106
  PE[3][2]: input=-53 * weight=1 = -53, partial_in=0 -> result=-53
  PE[3][3]: input=-53 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:      105      -24      -51     -129 
  Row 1:       47      -91     -135     -138 
  Row 2:        0      -37      -74      -37 
  Row 3:      -53     -106      -53        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ 105 │ -24 │ -51 │-129 │
├─────┼─────┼─────┼─────┤
│  47 │ -91 │-135 │-138 │
├─────┼─────┼─────┼─────┤
│   0 │ -37 │ -74 │ -37 │
├─────┼─────┼─────┼─────┤
│ -53 │-106 │ -53 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -40
  Row 2: input_block[2][2] = -35
  Row 3: input_block[3][1] = -42

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 47 (from PE[1][0])
  PE[0][1]: partial_in = -91 (from PE[1][1])
  PE[0][2]: partial_in = -135 (from PE[1][2])
  PE[0][3]: partial_in = -138 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -37 (from PE[2][1])
  PE[1][2]: partial_in = -74 (from PE[2][2])
  PE[1][3]: partial_in = -37 (from PE[2][3])
  PE[2][0]: partial_in = -53 (from PE[3][0])
  PE[2][1]: partial_in = -106 (from PE[3][1])
  PE[2][2]: partial_in = -53 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=47 -> result=47
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-91 -> result=-91
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-135 -> result=-135
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-138 -> result=-138
  PE[1][0]: input=-40 * weight=-1 = 40, partial_in=0 -> result=40
  PE[1][1]: input=-40 * weight=1 = -40, partial_in=-37 -> result=-77
  PE[1][2]: input=-40 * weight=1 = -40, partial_in=-74 -> result=-114
  PE[1][3]: input=-40 * weight=2 = -80, partial_in=-37 -> result=-117
  PE[2][0]: input=-35 * weight=0 = 0, partial_in=-53 -> result=-53
  PE[2][1]: input=-35 * weight=1 = -35, partial_in=-106 -> result=-141
  PE[2][2]: input=-35 * weight=2 = -70, partial_in=-53 -> result=-123
  PE[2][3]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][0]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][1]: input=-42 * weight=2 = -84, partial_in=0 -> result=-84
  PE[3][2]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][3]: input=-42 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       47      -91     -135     -138 
  Row 1:       40      -77     -114     -117 
  Row 2:      -53     -141     -123      -35 
  Row 3:      -42      -84      -42        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  47 │ -91 │-135 │-138 │
├─────┼─────┼─────┼─────┤
│  40 │ -77 │-114 │-117 │
├─────┼─────┼─────┼─────┤
│ -53 │-141 │-123 │ -35 │
├─────┼─────┼─────┼─────┤
│ -42 │ -84 │ -42 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -42
  Row 3: input_block[3][2] = -26

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 40 (from PE[1][0])
  PE[0][1]: partial_in = -77 (from PE[1][1])
  PE[0][2]: partial_in = -114 (from PE[1][2])
  PE[0][3]: partial_in = -117 (from PE[1][3])
  PE[1][0]: partial_in = -53 (from PE[2][0])
  PE[1][1]: partial_in = -141 (from PE[2][1])
  PE[1][2]: partial_in = -123 (from PE[2][2])
  PE[1][3]: partial_in = -35 (from PE[2][3])
  PE[2][0]: partial_in = -42 (from PE[3][0])
  PE[2][1]: partial_in = -84 (from PE[3][1])
  PE[2][2]: partial_in = -42 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=40 -> result=40
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-77 -> result=-77
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-114 -> result=-114
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-117 -> result=-117
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-53 -> result=-53
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-141 -> result=-141
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-123 -> result=-123
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-35 -> result=-35
  PE[2][0]: input=-42 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[2][1]: input=-42 * weight=1 = -42, partial_in=-84 -> result=-126
  PE[2][2]: input=-42 * weight=2 = -84, partial_in=-42 -> result=-126
  PE[2][3]: input=-42 * weight=1 = -42, partial_in=0 -> result=-42
  PE[3][0]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][1]: input=-26 * weight=2 = -52, partial_in=0 -> result=-52
  PE[3][2]: input=-26 * weight=1 = -26, partial_in=0 -> result=-26
  PE[3][3]: input=-26 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       40      -77     -114     -117 
  Row 1:      -53     -141     -123      -35 
  Row 2:      -42     -126     -126      -42 
  Row 3:      -26      -52      -26        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  40 │ -77 │-114 │-117 │
├─────┼─────┼─────┼─────┤
│ -53 │-141 │-123 │ -35 │
├─────┼─────┼─────┼─────┤
│ -42 │-126 │-126 │ -42 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -24

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -53 (from PE[1][0])
  PE[0][1]: partial_in = -141 (from PE[1][1])
  PE[0][2]: partial_in = -123 (from PE[1][2])
  PE[0][3]: partial_in = -35 (from PE[1][3])
  PE[1][0]: partial_in = -42 (from PE[2][0])
  PE[1][1]: partial_in = -126 (from PE[2][1])
  PE[1][2]: partial_in = -126 (from PE[2][2])
  PE[1][3]: partial_in = -42 (from PE[2][3])
  PE[2][0]: partial_in = -26 (from PE[3][0])
  PE[2][1]: partial_in = -52 (from PE[3][1])
  PE[2][2]: partial_in = -26 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-53 -> result=-53
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-141 -> result=-141
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-123 -> result=-123
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-35 -> result=-35
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-42 -> result=-42
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-126 -> result=-126
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-126 -> result=-126
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-42 -> result=-42
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-26 -> result=-26
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-52 -> result=-52
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-26 -> result=-26
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][1]: input=-24 * weight=2 = -48, partial_in=0 -> result=-48
  PE[3][2]: input=-24 * weight=1 = -24, partial_in=0 -> result=-24
  PE[3][3]: input=-24 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -53     -141     -123      -35 
  Row 1:      -42     -126     -126      -42 
  Row 2:      -26      -52      -26        0 
  Row 3:      -24      -48      -24        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -53 │-141 │-123 │ -35 │
├─────┼─────┼─────┼─────┤
│ -42 │-126 │-126 │ -42 │
├─────┼─────┼─────┼─────┤
│ -26 │ -52 │ -26 │   0 │
├─────┼─────┼─────┼─────┤
│ -24 │ -48 │ -24 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -53     -141     -123      -35 
Row 1:      -42     -126     -126      -42 
Row 2:      -26      -52      -26        0 
Row 3:      -24      -48      -24        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -53 -> clamp(-53) -> final(75)
  PE[0][1]: -141 -> clamp(-128) -> final(0)
  PE[0][2]: -123 -> clamp(-123) -> final(5)
  PE[0][3]: -35 -> clamp(-35) -> final(93)
  PE[1][0]: -42 -> clamp(-42) -> final(86)
  PE[1][1]: -126 -> clamp(-126) -> final(2)
  PE[1][2]: -126 -> clamp(-126) -> final(2)
  PE[1][3]: -42 -> clamp(-42) -> final(86)
  PE[2][0]: -26 -> clamp(-26) -> final(102)
  PE[2][1]: -52 -> clamp(-52) -> final(76)
  PE[2][2]: -26 -> clamp(-26) -> final(102)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -24 -> clamp(-24) -> final(104)
  PE[3][1]: -48 -> clamp(-48) -> final(80)
  PE[3][2]: -24 -> clamp(-24) -> final(104)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    75      0      5     93 
    86      2      2     86 
   102     76    102    128 
   104     80    104    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
 -16  -15    3   14 
 -44  -48  -42  -35 
 -38  -39  -38  -38 
 -43  -35  -30  -32 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = -16
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=0 -> result=32
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       32       16        0      -16 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  16 │   0 │ -16 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -15
  Row 1: input_block[1][0] = -44
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-15 * weight=-2 = 30, partial_in=0 -> result=30
  PE[0][1]: input=-15 * weight=-1 = 15, partial_in=0 -> result=15
  PE[0][2]: input=-15 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[1][0]: input=-44 * weight=-1 = 44, partial_in=0 -> result=44
  PE[1][1]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][2]: input=-44 * weight=1 = -44, partial_in=0 -> result=-44
  PE[1][3]: input=-44 * weight=2 = -88, partial_in=0 -> result=-88
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       30       15        0      -15 
  Row 1:       44      -44      -44      -88 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  30 │  15 │   0 │ -15 │
├─────┼─────┼─────┼─────┤
│  44 │ -44 │ -44 │ -88 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = 3
  Row 1: input_block[1][1] = -48
  Row 2: input_block[2][0] = -38
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 44 (from PE[1][0])
  PE[0][1]: partial_in = -44 (from PE[1][1])
  PE[0][2]: partial_in = -44 (from PE[1][2])
  PE[0][3]: partial_in = -88 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=3 * weight=-2 = -6, partial_in=44 -> result=38
  PE[0][1]: input=3 * weight=-1 = -3, partial_in=-44 -> result=-47
  PE[0][2]: input=3 * weight=0 = 0, partial_in=-44 -> result=-44
  PE[0][3]: input=3 * weight=1 = 3, partial_in=-88 -> result=-85
  PE[1][0]: input=-48 * weight=-1 = 48, partial_in=0 -> result=48
  PE[1][1]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][2]: input=-48 * weight=1 = -48, partial_in=0 -> result=-48
  PE[1][3]: input=-48 * weight=2 = -96, partial_in=0 -> result=-96
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=0 -> result=-76
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       38      -47      -44      -85 
  Row 1:       48      -48      -48      -96 
  Row 2:        0      -38      -76      -38 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  38 │ -47 │ -44 │ -85 │
├─────┼─────┼─────┼─────┤
│  48 │ -48 │ -48 │ -96 │
├─────┼─────┼─────┼─────┤
│   0 │ -38 │ -76 │ -38 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = 14
  Row 1: input_block[1][2] = -42
  Row 2: input_block[2][1] = -39
  Row 3: input_block[3][0] = -43

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 48 (from PE[1][0])
  PE[0][1]: partial_in = -48 (from PE[1][1])
  PE[0][2]: partial_in = -48 (from PE[1][2])
  PE[0][3]: partial_in = -96 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -38 (from PE[2][1])
  PE[1][2]: partial_in = -76 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=14 * weight=-2 = -28, partial_in=48 -> result=20
  PE[0][1]: input=14 * weight=-1 = -14, partial_in=-48 -> result=-62
  PE[0][2]: input=14 * weight=0 = 0, partial_in=-48 -> result=-48
  PE[0][3]: input=14 * weight=1 = 14, partial_in=-96 -> result=-82
  PE[1][0]: input=-42 * weight=-1 = 42, partial_in=0 -> result=42
  PE[1][1]: input=-42 * weight=1 = -42, partial_in=-38 -> result=-80
  PE[1][2]: input=-42 * weight=1 = -42, partial_in=-76 -> result=-118
  PE[1][3]: input=-42 * weight=2 = -84, partial_in=-38 -> result=-122
  PE[2][0]: input=-39 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[2][2]: input=-39 * weight=2 = -78, partial_in=0 -> result=-78
  PE[2][3]: input=-39 * weight=1 = -39, partial_in=0 -> result=-39
  PE[3][0]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][1]: input=-43 * weight=2 = -86, partial_in=0 -> result=-86
  PE[3][2]: input=-43 * weight=1 = -43, partial_in=0 -> result=-43
  PE[3][3]: input=-43 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       20      -62      -48      -82 
  Row 1:       42      -80     -118     -122 
  Row 2:        0      -39      -78      -39 
  Row 3:      -43      -86      -43        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  20 │ -62 │ -48 │ -82 │
├─────┼─────┼─────┼─────┤
│  42 │ -80 │-118 │-122 │
├─────┼─────┼─────┼─────┤
│   0 │ -39 │ -78 │ -39 │
├─────┼─────┼─────┼─────┤
│ -43 │ -86 │ -43 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = -35
  Row 2: input_block[2][2] = -38
  Row 3: input_block[3][1] = -35

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 42 (from PE[1][0])
  PE[0][1]: partial_in = -80 (from PE[1][1])
  PE[0][2]: partial_in = -118 (from PE[1][2])
  PE[0][3]: partial_in = -122 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -39 (from PE[2][1])
  PE[1][2]: partial_in = -78 (from PE[2][2])
  PE[1][3]: partial_in = -39 (from PE[2][3])
  PE[2][0]: partial_in = -43 (from PE[3][0])
  PE[2][1]: partial_in = -86 (from PE[3][1])
  PE[2][2]: partial_in = -43 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=42 -> result=42
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-80 -> result=-80
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-118 -> result=-118
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-122 -> result=-122
  PE[1][0]: input=-35 * weight=-1 = 35, partial_in=0 -> result=35
  PE[1][1]: input=-35 * weight=1 = -35, partial_in=-39 -> result=-74
  PE[1][2]: input=-35 * weight=1 = -35, partial_in=-78 -> result=-113
  PE[1][3]: input=-35 * weight=2 = -70, partial_in=-39 -> result=-109
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-43 -> result=-43
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-86 -> result=-124
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-43 -> result=-119
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][1]: input=-35 * weight=2 = -70, partial_in=0 -> result=-70
  PE[3][2]: input=-35 * weight=1 = -35, partial_in=0 -> result=-35
  PE[3][3]: input=-35 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       42      -80     -118     -122 
  Row 1:       35      -74     -113     -109 
  Row 2:      -43     -124     -119      -38 
  Row 3:      -35      -70      -35        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  42 │ -80 │-118 │-122 │
├─────┼─────┼─────┼─────┤
│  35 │ -74 │-113 │-109 │
├─────┼─────┼─────┼─────┤
│ -43 │-124 │-119 │ -38 │
├─────┼─────┼─────┼─────┤
│ -35 │ -70 │ -35 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = -38
  Row 3: input_block[3][2] = -30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 35 (from PE[1][0])
  PE[0][1]: partial_in = -74 (from PE[1][1])
  PE[0][2]: partial_in = -113 (from PE[1][2])
  PE[0][3]: partial_in = -109 (from PE[1][3])
  PE[1][0]: partial_in = -43 (from PE[2][0])
  PE[1][1]: partial_in = -124 (from PE[2][1])
  PE[1][2]: partial_in = -119 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -35 (from PE[3][0])
  PE[2][1]: partial_in = -70 (from PE[3][1])
  PE[2][2]: partial_in = -35 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=35 -> result=35
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-74 -> result=-74
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-113 -> result=-113
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-109 -> result=-109
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-43 -> result=-43
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-124 -> result=-124
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-119 -> result=-119
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=-38 * weight=0 = 0, partial_in=-35 -> result=-35
  PE[2][1]: input=-38 * weight=1 = -38, partial_in=-70 -> result=-108
  PE[2][2]: input=-38 * weight=2 = -76, partial_in=-35 -> result=-111
  PE[2][3]: input=-38 * weight=1 = -38, partial_in=0 -> result=-38
  PE[3][0]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][1]: input=-30 * weight=2 = -60, partial_in=0 -> result=-60
  PE[3][2]: input=-30 * weight=1 = -30, partial_in=0 -> result=-30
  PE[3][3]: input=-30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       35      -74     -113     -109 
  Row 1:      -43     -124     -119      -38 
  Row 2:      -35     -108     -111      -38 
  Row 3:      -30      -60      -30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  35 │ -74 │-113 │-109 │
├─────┼─────┼─────┼─────┤
│ -43 │-124 │-119 │ -38 │
├─────┼─────┼─────┼─────┤
│ -35 │-108 │-111 │ -38 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = -32

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -43 (from PE[1][0])
  PE[0][1]: partial_in = -124 (from PE[1][1])
  PE[0][2]: partial_in = -119 (from PE[1][2])
  PE[0][3]: partial_in = -38 (from PE[1][3])
  PE[1][0]: partial_in = -35 (from PE[2][0])
  PE[1][1]: partial_in = -108 (from PE[2][1])
  PE[1][2]: partial_in = -111 (from PE[2][2])
  PE[1][3]: partial_in = -38 (from PE[2][3])
  PE[2][0]: partial_in = -30 (from PE[3][0])
  PE[2][1]: partial_in = -60 (from PE[3][1])
  PE[2][2]: partial_in = -30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-43 -> result=-43
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-124 -> result=-124
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-119 -> result=-119
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-38 -> result=-38
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-35 -> result=-35
  PE[1][1]: input=0 * weight=1 = 0, partial_in=-108 -> result=-108
  PE[1][2]: input=0 * weight=1 = 0, partial_in=-111 -> result=-111
  PE[1][3]: input=0 * weight=2 = 0, partial_in=-38 -> result=-38
  PE[2][0]: input=0 * weight=0 = 0, partial_in=-30 -> result=-30
  PE[2][1]: input=0 * weight=1 = 0, partial_in=-60 -> result=-60
  PE[2][2]: input=0 * weight=2 = 0, partial_in=-30 -> result=-30
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][1]: input=-32 * weight=2 = -64, partial_in=0 -> result=-64
  PE[3][2]: input=-32 * weight=1 = -32, partial_in=0 -> result=-32
  PE[3][3]: input=-32 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -43     -124     -119      -38 
  Row 1:      -35     -108     -111      -38 
  Row 2:      -30      -60      -30        0 
  Row 3:      -32      -64      -32        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -43 │-124 │-119 │ -38 │
├─────┼─────┼─────┼─────┤
│ -35 │-108 │-111 │ -38 │
├─────┼─────┼─────┼─────┤
│ -30 │ -60 │ -30 │   0 │
├─────┼─────┼─────┼─────┤
│ -32 │ -64 │ -32 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -43     -124     -119      -38 
Row 1:      -35     -108     -111      -38 
Row 2:      -30      -60      -30        0 
Row 3:      -32      -64      -32        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -43 -> clamp(-43) -> final(85)
  PE[0][1]: -124 -> clamp(-124) -> final(4)
  PE[0][2]: -119 -> clamp(-119) -> final(9)
  PE[0][3]: -38 -> clamp(-38) -> final(90)
  PE[1][0]: -35 -> clamp(-35) -> final(93)
  PE[1][1]: -108 -> clamp(-108) -> final(20)
  PE[1][2]: -111 -> clamp(-111) -> final(17)
  PE[1][3]: -38 -> clamp(-38) -> final(90)
  PE[2][0]: -30 -> clamp(-30) -> final(98)
  PE[2][1]: -60 -> clamp(-60) -> final(68)
  PE[2][2]: -30 -> clamp(-30) -> final(98)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: -32 -> clamp(-32) -> final(96)
  PE[3][1]: -64 -> clamp(-64) -> final(64)
  PE[3][2]: -32 -> clamp(-32) -> final(96)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
    85      4      9     90 
    93     20     17     90 
    98     68     98    128 
    96     64     96    128 

=== processBlock() completed ===


=== Starting processBlock() ===

INPUT DATA:
   1  -16  -26  -34 
 -29  -11    4    2 
 -23   16   44   41 
 -15   30   58   50 

WEIGHT DATA:
  -2   -1    0    1 
  -1    1    1    2 
   0    1    2    1 
   1    2    1    0 

--- CYCLE 0 ---
Input data injection:
  Row 0: input_block[0][0] = 1
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=1 * weight=-2 = -2, partial_in=0 -> result=-2
  PE[0][1]: input=1 * weight=-1 = -1, partial_in=0 -> result=-1
  PE[0][2]: input=1 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=1 * weight=1 = 1, partial_in=0 -> result=1
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=0 -> result=0
  PE[1][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[1][3]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 0:
  Row 0:       -2       -1        0        1 
  Row 1:        0        0        0        0 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  -1 │   0 │   1 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active

--- CYCLE 1 ---
Input data injection:
  Row 0: input_block[0][1] = -16
  Row 1: input_block[1][0] = -29
  Row 2: no input (padding with 0)
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 0 (from PE[1][0])
  PE[0][1]: partial_in = 0 (from PE[1][1])
  PE[0][2]: partial_in = 0 (from PE[1][2])
  PE[0][3]: partial_in = 0 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-16 * weight=-2 = 32, partial_in=0 -> result=32
  PE[0][1]: input=-16 * weight=-1 = 16, partial_in=0 -> result=16
  PE[0][2]: input=-16 * weight=0 = 0, partial_in=0 -> result=0
  PE[0][3]: input=-16 * weight=1 = -16, partial_in=0 -> result=-16
  PE[1][0]: input=-29 * weight=-1 = 29, partial_in=0 -> result=29
  PE[1][1]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][2]: input=-29 * weight=1 = -29, partial_in=0 -> result=-29
  PE[1][3]: input=-29 * weight=2 = -58, partial_in=0 -> result=-58
  PE[2][0]: input=0 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[2][2]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 1:
  Row 0:       32       16        0      -16 
  Row 1:       29      -29      -29      -58 
  Row 2:        0        0        0        0 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  32 │  16 │   0 │ -16 │
├─────┼─────┼─────┼─────┤
│  29 │ -29 │ -29 │ -58 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active

--- CYCLE 2 ---
Input data injection:
  Row 0: input_block[0][2] = -26
  Row 1: input_block[1][1] = -11
  Row 2: input_block[2][0] = -23
  Row 3: no input (padding with 0)

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 29 (from PE[1][0])
  PE[0][1]: partial_in = -29 (from PE[1][1])
  PE[0][2]: partial_in = -29 (from PE[1][2])
  PE[0][3]: partial_in = -58 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 0 (from PE[2][1])
  PE[1][2]: partial_in = 0 (from PE[2][2])
  PE[1][3]: partial_in = 0 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-26 * weight=-2 = 52, partial_in=29 -> result=81
  PE[0][1]: input=-26 * weight=-1 = 26, partial_in=-29 -> result=-3
  PE[0][2]: input=-26 * weight=0 = 0, partial_in=-29 -> result=-29
  PE[0][3]: input=-26 * weight=1 = -26, partial_in=-58 -> result=-84
  PE[1][0]: input=-11 * weight=-1 = 11, partial_in=0 -> result=11
  PE[1][1]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][2]: input=-11 * weight=1 = -11, partial_in=0 -> result=-11
  PE[1][3]: input=-11 * weight=2 = -22, partial_in=0 -> result=-22
  PE[2][0]: input=-23 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[2][2]: input=-23 * weight=2 = -46, partial_in=0 -> result=-46
  PE[2][3]: input=-23 * weight=1 = -23, partial_in=0 -> result=-23
  PE[3][0]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][1]: input=0 * weight=2 = 0, partial_in=0 -> result=0
  PE[3][2]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][3]: input=0 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 2:
  Row 0:       81       -3      -29      -84 
  Row 1:       11      -11      -11      -22 
  Row 2:        0      -23      -46      -23 
  Row 3:        0        0        0        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  81 │  -3 │ -29 │ -84 │
├─────┼─────┼─────┼─────┤
│  11 │ -11 │ -11 │ -22 │
├─────┼─────┼─────┼─────┤
│   0 │ -23 │ -46 │ -23 │
├─────┼─────┼─────┼─────┤
│   0 │   0 │   0 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active

--- CYCLE 3 ---
Input data injection:
  Row 0: input_block[0][3] = -34
  Row 1: input_block[1][2] = 4
  Row 2: input_block[2][1] = 16
  Row 3: input_block[3][0] = -15

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = 11 (from PE[1][0])
  PE[0][1]: partial_in = -11 (from PE[1][1])
  PE[0][2]: partial_in = -11 (from PE[1][2])
  PE[0][3]: partial_in = -22 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = -23 (from PE[2][1])
  PE[1][2]: partial_in = -46 (from PE[2][2])
  PE[1][3]: partial_in = -23 (from PE[2][3])
  PE[2][0]: partial_in = 0 (from PE[3][0])
  PE[2][1]: partial_in = 0 (from PE[3][1])
  PE[2][2]: partial_in = 0 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=-34 * weight=-2 = 68, partial_in=11 -> result=79
  PE[0][1]: input=-34 * weight=-1 = 34, partial_in=-11 -> result=23
  PE[0][2]: input=-34 * weight=0 = 0, partial_in=-11 -> result=-11
  PE[0][3]: input=-34 * weight=1 = -34, partial_in=-22 -> result=-56
  PE[1][0]: input=4 * weight=-1 = -4, partial_in=0 -> result=-4
  PE[1][1]: input=4 * weight=1 = 4, partial_in=-23 -> result=-19
  PE[1][2]: input=4 * weight=1 = 4, partial_in=-46 -> result=-42
  PE[1][3]: input=4 * weight=2 = 8, partial_in=-23 -> result=-15
  PE[2][0]: input=16 * weight=0 = 0, partial_in=0 -> result=0
  PE[2][1]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[2][2]: input=16 * weight=2 = 32, partial_in=0 -> result=32
  PE[2][3]: input=16 * weight=1 = 16, partial_in=0 -> result=16
  PE[3][0]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][1]: input=-15 * weight=2 = -30, partial_in=0 -> result=-30
  PE[3][2]: input=-15 * weight=1 = -15, partial_in=0 -> result=-15
  PE[3][3]: input=-15 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 3:
  Row 0:       79       23      -11      -56 
  Row 1:       -4      -19      -42      -15 
  Row 2:        0       16       32       16 
  Row 3:      -15      -30      -15        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  79 │  23 │ -11 │ -56 │
├─────┼─────┼─────┼─────┤
│  -4 │ -19 │ -42 │ -15 │
├─────┼─────┼─────┼─────┤
│   0 │  16 │  32 │  16 │
├─────┼─────┼─────┼─────┤
│ -15 │ -30 │ -15 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[0][*] is active
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 4 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: input_block[1][3] = 2
  Row 2: input_block[2][2] = 44
  Row 3: input_block[3][1] = 30

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -4 (from PE[1][0])
  PE[0][1]: partial_in = -19 (from PE[1][1])
  PE[0][2]: partial_in = -42 (from PE[1][2])
  PE[0][3]: partial_in = -15 (from PE[1][3])
  PE[1][0]: partial_in = 0 (from PE[2][0])
  PE[1][1]: partial_in = 16 (from PE[2][1])
  PE[1][2]: partial_in = 32 (from PE[2][2])
  PE[1][3]: partial_in = 16 (from PE[2][3])
  PE[2][0]: partial_in = -15 (from PE[3][0])
  PE[2][1]: partial_in = -30 (from PE[3][1])
  PE[2][2]: partial_in = -15 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-4 -> result=-4
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=-19 -> result=-19
  PE[0][2]: input=0 * weight=0 = 0, partial_in=-42 -> result=-42
  PE[0][3]: input=0 * weight=1 = 0, partial_in=-15 -> result=-15
  PE[1][0]: input=2 * weight=-1 = -2, partial_in=0 -> result=-2
  PE[1][1]: input=2 * weight=1 = 2, partial_in=16 -> result=18
  PE[1][2]: input=2 * weight=1 = 2, partial_in=32 -> result=34
  PE[1][3]: input=2 * weight=2 = 4, partial_in=16 -> result=20
  PE[2][0]: input=44 * weight=0 = 0, partial_in=-15 -> result=-15
  PE[2][1]: input=44 * weight=1 = 44, partial_in=-30 -> result=14
  PE[2][2]: input=44 * weight=2 = 88, partial_in=-15 -> result=73
  PE[2][3]: input=44 * weight=1 = 44, partial_in=0 -> result=44
  PE[3][0]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][1]: input=30 * weight=2 = 60, partial_in=0 -> result=60
  PE[3][2]: input=30 * weight=1 = 30, partial_in=0 -> result=30
  PE[3][3]: input=30 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 4:
  Row 0:       -4      -19      -42      -15 
  Row 1:       -2       18       34       20 
  Row 2:      -15       14       73       44 
  Row 3:       30       60       30        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -4 │ -19 │ -42 │ -15 │
├─────┼─────┼─────┼─────┤
│  -2 │  18 │  34 │  20 │
├─────┼─────┼─────┼─────┤
│ -15 │  14 │  73 │  44 │
├─────┼─────┼─────┼─────┤
│  30 │  60 │  30 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[1][*] is active
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 5 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: input_block[2][3] = 41
  Row 3: input_block[3][2] = 58

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -2 (from PE[1][0])
  PE[0][1]: partial_in = 18 (from PE[1][1])
  PE[0][2]: partial_in = 34 (from PE[1][2])
  PE[0][3]: partial_in = 20 (from PE[1][3])
  PE[1][0]: partial_in = -15 (from PE[2][0])
  PE[1][1]: partial_in = 14 (from PE[2][1])
  PE[1][2]: partial_in = 73 (from PE[2][2])
  PE[1][3]: partial_in = 44 (from PE[2][3])
  PE[2][0]: partial_in = 30 (from PE[3][0])
  PE[2][1]: partial_in = 60 (from PE[3][1])
  PE[2][2]: partial_in = 30 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-2 -> result=-2
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=18 -> result=18
  PE[0][2]: input=0 * weight=0 = 0, partial_in=34 -> result=34
  PE[0][3]: input=0 * weight=1 = 0, partial_in=20 -> result=20
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=-15 -> result=-15
  PE[1][1]: input=0 * weight=1 = 0, partial_in=14 -> result=14
  PE[1][2]: input=0 * weight=1 = 0, partial_in=73 -> result=73
  PE[1][3]: input=0 * weight=2 = 0, partial_in=44 -> result=44
  PE[2][0]: input=41 * weight=0 = 0, partial_in=30 -> result=30
  PE[2][1]: input=41 * weight=1 = 41, partial_in=60 -> result=101
  PE[2][2]: input=41 * weight=2 = 82, partial_in=30 -> result=112
  PE[2][3]: input=41 * weight=1 = 41, partial_in=0 -> result=41
  PE[3][0]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[3][1]: input=58 * weight=2 = 116, partial_in=0 -> result=116
  PE[3][2]: input=58 * weight=1 = 58, partial_in=0 -> result=58
  PE[3][3]: input=58 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 5:
  Row 0:       -2       18       34       20 
  Row 1:      -15       14       73       44 
  Row 2:       30      101      112       41 
  Row 3:       58      116       58        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│  -2 │  18 │  34 │  20 │
├─────┼─────┼─────┼─────┤
│ -15 │  14 │  73 │  44 │
├─────┼─────┼─────┼─────┤
│  30 │ 101 │ 112 │  41 │
├─────┼─────┼─────┼─────┤
│  58 │ 116 │  58 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[2][*] is active
  PE[3][*] is active

--- CYCLE 6 ---
Input data injection:
  Row 0: no input (padding with 0)
  Row 1: no input (padding with 0)
  Row 2: no input (padding with 0)
  Row 3: input_block[3][3] = 50

Partial sum propagation (bottom-up):
  PE[0][0]: partial_in = -15 (from PE[1][0])
  PE[0][1]: partial_in = 14 (from PE[1][1])
  PE[0][2]: partial_in = 73 (from PE[1][2])
  PE[0][3]: partial_in = 44 (from PE[1][3])
  PE[1][0]: partial_in = 30 (from PE[2][0])
  PE[1][1]: partial_in = 101 (from PE[2][1])
  PE[1][2]: partial_in = 112 (from PE[2][2])
  PE[1][3]: partial_in = 41 (from PE[2][3])
  PE[2][0]: partial_in = 58 (from PE[3][0])
  PE[2][1]: partial_in = 116 (from PE[3][1])
  PE[2][2]: partial_in = 58 (from PE[3][2])
  PE[2][3]: partial_in = 0 (from PE[3][3])
  PE[3][0]: partial_in = 0 (bottom row, no input)
  PE[3][1]: partial_in = 0 (bottom row, no input)
  PE[3][2]: partial_in = 0 (bottom row, no input)
  PE[3][3]: partial_in = 0 (bottom row, no input)

PE Computations:
  PE[0][0]: input=0 * weight=-2 = 0, partial_in=-15 -> result=-15
  PE[0][1]: input=0 * weight=-1 = 0, partial_in=14 -> result=14
  PE[0][2]: input=0 * weight=0 = 0, partial_in=73 -> result=73
  PE[0][3]: input=0 * weight=1 = 0, partial_in=44 -> result=44
  PE[1][0]: input=0 * weight=-1 = 0, partial_in=30 -> result=30
  PE[1][1]: input=0 * weight=1 = 0, partial_in=101 -> result=101
  PE[1][2]: input=0 * weight=1 = 0, partial_in=112 -> result=112
  PE[1][3]: input=0 * weight=2 = 0, partial_in=41 -> result=41
  PE[2][0]: input=0 * weight=0 = 0, partial_in=58 -> result=58
  PE[2][1]: input=0 * weight=1 = 0, partial_in=116 -> result=116
  PE[2][2]: input=0 * weight=2 = 0, partial_in=58 -> result=58
  PE[2][3]: input=0 * weight=1 = 0, partial_in=0 -> result=0
  PE[3][0]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][1]: input=50 * weight=2 = 100, partial_in=0 -> result=100
  PE[3][2]: input=50 * weight=1 = 50, partial_in=0 -> result=50
  PE[3][3]: input=50 * weight=0 = 0, partial_in=0 -> result=0

PE States after cycle 6:
  Row 0:      -15       14       73       44 
  Row 1:       30      101      112       41 
  Row 2:       58      116       58        0 
  Row 3:       50      100       50        0 

Data Flow Visualization:
┌─────┬─────┬─────┬─────┐
│ -15 │  14 │  73 │  44 │
├─────┼─────┼─────┼─────┤
│  30 │ 101 │ 112 │  41 │
├─────┼─────┼─────┼─────┤
│  58 │ 116 │  58 │   0 │
├─────┼─────┼─────┼─────┤
│  50 │ 100 │  50 │   0 │
└─────┴─────┴─────┴─────┘

Active PEs (receiving valid input):
  PE[3][*] is active

=== FINAL RESULTS EXTRACTION ===
Final PE states:
Row 0:      -15       14       73       44 
Row 1:       30      101      112       41 
Row 2:       58      116       58        0 
Row 3:       50      100       50        0 

Post-processing (clamp to [-128,127] + 128 offset):
  PE[0][0]: -15 -> clamp(-15) -> final(113)
  PE[0][1]: 14 -> clamp(14) -> final(142)
  PE[0][2]: 73 -> clamp(73) -> final(201)
  PE[0][3]: 44 -> clamp(44) -> final(172)
  PE[1][0]: 30 -> clamp(30) -> final(158)
  PE[1][1]: 101 -> clamp(101) -> final(229)
  PE[1][2]: 112 -> clamp(112) -> final(240)
  PE[1][3]: 41 -> clamp(41) -> final(169)
  PE[2][0]: 58 -> clamp(58) -> final(186)
  PE[2][1]: 116 -> clamp(116) -> final(244)
  PE[2][2]: 58 -> clamp(58) -> final(186)
  PE[2][3]: 0 -> clamp(0) -> final(128)
  PE[3][0]: 50 -> clamp(50) -> final(178)
  PE[3][1]: 100 -> clamp(100) -> final(228)
  PE[3][2]: 50 -> clamp(50) -> final(178)
  PE[3][3]: 0 -> clamp(0) -> final(128)

OUTPUT DATA:
   113    142    201    172 
   158    229    240    169 
   186    244    186    128 
   178    228    178    128 

=== processBlock() completed ===

